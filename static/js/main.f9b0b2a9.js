/*! For license information please see main.f9b0b2a9.js.LICENSE.txt */
(()=>{"use strict";var e={11:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(827).__importDefault(n(427)),r=new RegExp("[,()]");class s extends i.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}regexMatch(e,t){return this.url.searchParams.append(e,"match.".concat(t)),this}regexIMatch(e,t){return this.url.searchParams.append(e,"imatch.".concat(t)),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}isDistinct(e,t){return this.url.searchParams.append(e,"isdistinct.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&r.test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="";"plain"===i?r="pl":"phrase"===i?r="ph":"websearch"===i&&(r="w");const s=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(r,"fts").concat(s,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=n?"".concat(n,".or"):"or";return this.url.searchParams.append(i,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=s},23:function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(950)),c=n(91),u=n(111),h=["ArrowRight","ArrowUp","k","PageUp"],d=["ArrowLeft","ArrowDown","j","PageDown"],p=function(e){function t(t){var n=e.call(this,t)||this;if(n.trackRef=l.createRef(),n.thumbRefs=[],n.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(n.props.values.length).fill(0).map(function(e,t){return t}),isChanged:!1,markOffsets:[]},n.getOffsets=function(){var e=n.props,t=e.direction,i=e.values,r=e.min,s=e.max,a=n.trackRef.current;if(!a)return console.warn("No track element found."),[];var o=a.getBoundingClientRect(),l=(0,c.getPaddingAndBorder)(a);return n.getThumbs().map(function(e,n){var a={x:0,y:0},h=e.getBoundingClientRect(),d=(0,c.getMargin)(e);switch(t){case u.Direction.Right:return a.x=-1*(d.left+l.left),a.y=-1*((h.height-o.height)/2+l.top),a.x+=o.width*(0,c.relativeValue)(i[n],r,s)-h.width/2,a;case u.Direction.Left:return a.x=-1*(d.right+l.right),a.y=-1*((h.height-o.height)/2+l.top),a.x+=o.width-o.width*(0,c.relativeValue)(i[n],r,s)-h.width/2,a;case u.Direction.Up:return a.x=-1*((h.width-o.width)/2+d.left+l.left),a.y=-l.left,a.y+=o.height-o.height*(0,c.relativeValue)(i[n],r,s)-h.height/2,a;case u.Direction.Down:return a.x=-1*((h.width-o.width)/2+d.left+l.left),a.y=-l.left,a.y+=o.height*(0,c.relativeValue)(i[n],r,s)-h.height/2,a;default:return(0,c.assertUnreachable)(t)}})},n.getThumbs=function(){return n.trackRef&&n.trackRef.current?Array.from(n.trackRef.current.children).filter(function(e){return e.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},n.getTargetIndex=function(e){return n.getThumbs().findIndex(function(t){return t===e.target||t.contains(e.target)})},n.addTouchEvents=function(e){document.addEventListener("touchmove",n.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",n.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",n.schdOnEnd,{passive:!1})},n.addMouseEvents=function(e){document.addEventListener("mousemove",n.schdOnMouseMove),document.addEventListener("mouseup",n.schdOnEnd)},n.onMouseDownTrack=function(e){var t;if(0===e.button&&!(0,c.isIOS)())if(e.persist(),e.preventDefault(),n.addMouseEvents(e.nativeEvent),n.props.values.length>1&&n.props.draggableTrack){if(n.thumbRefs.some(function(t){var n;return null===(n=t.current)||void 0===n?void 0:n.contains(e.target)}))return;n.setState({draggedTrackPos:[e.clientX,e.clientY]},function(){return n.onMove(e.clientX,e.clientY)})}else{var i=(0,c.getClosestThumbIndex)(n.thumbRefs.map(function(e){return e.current}),e.clientX,e.clientY,n.props.direction);null===(t=n.thumbRefs[i].current)||void 0===t||t.focus(),n.setState({draggedThumbIndex:i},function(){return n.onMove(e.clientX,e.clientY)})}},n.onResize=function(){(0,c.translateThumbs)(n.getThumbs(),n.getOffsets(),n.props.rtl),n.calculateMarkOffsets()},n.onTouchStartTrack=function(e){var t;if(e.persist(),n.addTouchEvents(e.nativeEvent),n.props.values.length>1&&n.props.draggableTrack){if(n.thumbRefs.some(function(t){var n;return null===(n=t.current)||void 0===n?void 0:n.contains(e.target)}))return;n.setState({draggedTrackPos:[e.touches[0].clientX,e.touches[0].clientY]},function(){return n.onMove(e.touches[0].clientX,e.touches[0].clientY)})}else{var i=(0,c.getClosestThumbIndex)(n.thumbRefs.map(function(e){return e.current}),e.touches[0].clientX,e.touches[0].clientY,n.props.direction);null===(t=n.thumbRefs[i].current)||void 0===t||t.focus(),n.setState({draggedThumbIndex:i},function(){return n.onMove(e.touches[0].clientX,e.touches[0].clientY)})}},n.onMouseOrTouchStart=function(e){if(!n.props.disabled){var t=(0,c.isTouchEvent)(e);if(t||0===e.button){var i=n.getTargetIndex(e);-1!==i&&(t?n.addTouchEvents(e):n.addMouseEvents(e),n.setState({draggedThumbIndex:i,thumbZIndexes:n.state.thumbZIndexes.map(function(e,t){return t===i?Math.max.apply(Math,n.state.thumbZIndexes):e<=n.state.thumbZIndexes[i]?e:e-1})}))}}},n.onMouseMove=function(e){e.preventDefault(),n.onMove(e.clientX,e.clientY)},n.onTouchMove=function(e){e.preventDefault(),n.onMove(e.touches[0].clientX,e.touches[0].clientY)},n.onKeyDown=function(e){var t=n.props,i=t.values,r=t.onChange,s=t.step,a=t.rtl,o=t.direction,l=n.state.isChanged,p=n.getTargetIndex(e.nativeEvent),f=a||o===u.Direction.Left||o===u.Direction.Down?-1:1;-1!==p&&(h.includes(e.key)?(e.preventDefault(),n.setState({draggedThumbIndex:p,isChanged:!0}),r((0,c.replaceAt)(i,p,n.normalizeValue(i[p]+f*("PageUp"===e.key?10*s:s),p)))):d.includes(e.key)?(e.preventDefault(),n.setState({draggedThumbIndex:p,isChanged:!0}),r((0,c.replaceAt)(i,p,n.normalizeValue(i[p]-f*("PageDown"===e.key?10*s:s),p)))):"Tab"===e.key?n.setState({draggedThumbIndex:-1},function(){l&&n.fireOnFinalChange()}):l&&n.fireOnFinalChange())},n.onKeyUp=function(e){var t=n.state.isChanged;n.setState({draggedThumbIndex:-1},function(){t&&n.fireOnFinalChange()})},n.onMove=function(e,t){var i=n.state,r=i.draggedThumbIndex,s=i.draggedTrackPos,a=n.props,o=a.direction,l=a.min,h=a.max,d=a.onChange,p=a.values,f=a.step,g=a.rtl;if(-1===r&&-1===s[0]&&-1===s[1])return null;var m=n.trackRef.current;if(!m)return null;var v=m.getBoundingClientRect(),b=(0,c.isVertical)(o)?v.height:v.width;if(-1!==s[0]&&-1!==s[1]){var y=e-s[0],w=t-s[1],_=0;switch(o){case u.Direction.Right:case u.Direction.Left:_=y/b*(h-l);break;case u.Direction.Down:case u.Direction.Up:_=w/b*(h-l);break;default:(0,c.assertUnreachable)(o)}if(g&&(_*=-1),Math.abs(_)>=f/2){for(var x=0;x<n.thumbRefs.length;x++){if(p[x]===h&&1===Math.sign(_)||p[x]===l&&-1===Math.sign(_))return;var k=p[x]+_;k>h?_=h-p[x]:k<l&&(_=l-p[x])}var S=p.slice(0);for(x=0;x<n.thumbRefs.length;x++)S=(0,c.replaceAt)(S,x,n.normalizeValue(p[x]+_,x));n.setState({draggedTrackPos:[e,t]}),d(S)}}else{var A=0;switch(o){case u.Direction.Right:A=(e-v.left)/b*(h-l)+l;break;case u.Direction.Left:A=(b-(e-v.left))/b*(h-l)+l;break;case u.Direction.Down:A=(t-v.top)/b*(h-l)+l;break;case u.Direction.Up:A=(b-(t-v.top))/b*(h-l)+l;break;default:(0,c.assertUnreachable)(o)}g&&(A=h+l-A),Math.abs(p[r]-A)>=f/2&&d((0,c.replaceAt)(p,r,n.normalizeValue(A,r)))}},n.normalizeValue=function(e,t){var i=n.props,r=i.min,s=i.max,a=i.step,o=i.allowOverlap,l=i.values;return(0,c.normalizeValue)(e,t,r,s,a,o,l)},n.onEnd=function(e){if(e.preventDefault(),document.removeEventListener("mousemove",n.schdOnMouseMove),document.removeEventListener("touchmove",n.schdOnTouchMove),document.removeEventListener("mouseup",n.schdOnEnd),document.removeEventListener("touchend",n.schdOnEnd),document.removeEventListener("touchcancel",n.schdOnEnd),-1===n.state.draggedThumbIndex&&-1===n.state.draggedTrackPos[0]&&-1===n.state.draggedTrackPos[1])return null;n.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){n.fireOnFinalChange()})},n.fireOnFinalChange=function(){n.setState({isChanged:!1});var e=n.props,t=e.onFinalChange,i=e.values;t&&t(i)},n.updateMarkRefs=function(e){if(!e.renderMark)return n.numOfMarks=void 0,void(n.markRefs=void 0);n.numOfMarks=(e.max-e.min)/n.props.step,n.markRefs=[];for(var t=0;t<n.numOfMarks+1;t++)n.markRefs[t]=l.createRef()},n.calculateMarkOffsets=function(){if(n.props.renderMark&&n.trackRef&&n.numOfMarks&&n.markRefs&&null!==n.trackRef.current){for(var e=window.getComputedStyle(n.trackRef.current),t=parseInt(e.width,10),i=parseInt(e.height,10),r=parseInt(e.paddingLeft,10),s=parseInt(e.paddingTop,10),a=[],o=0;o<n.numOfMarks+1;o++){var l=9999,c=9999;if(n.markRefs[o].current){var h=n.markRefs[o].current.getBoundingClientRect();l=h.height,c=h.width}n.props.direction===u.Direction.Left||n.props.direction===u.Direction.Right?a.push([Math.round(t/n.numOfMarks*o+r-c/2),-Math.round((l-i)/2)]):a.push([Math.round(i/n.numOfMarks*o+s-l/2),-Math.round((c-t)/2)])}n.setState({markOffsets:a})}},0===t.step)throw new Error('"step" property should be a positive number');return n.schdOnMouseMove=(0,c.schd)(n.onMouseMove),n.schdOnTouchMove=(0,c.schd)(n.onTouchMove),n.schdOnEnd=(0,c.schd)(n.onEnd),n.thumbRefs=t.values.map(function(){return l.createRef()}),n.updateMarkRefs(t),n}return i(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.values,i=t.min,r=t.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",e.onResize)},unobserve:function(){return window.removeEventListener("resize",e.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,c.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(t){return(0,c.checkBoundaries)(t,e.props.min,e.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,c.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),n.forEach(function(e){(0,c.isStepDivisible)(i,e,r)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},t.prototype.componentDidUpdate=function(e,t){var n=this.props,i=n.max,r=n.min,s=n.step,a=n.values,o=n.rtl;e.max===i&&e.min===r&&e.step===s||this.updateMarkRefs(this.props),(0,c.translateThumbs)(this.getThumbs(),this.getOffsets(),o),e.max===i&&e.min===r&&e.step===s&&t.markOffsets.length===this.state.markOffsets.length||(this.calculateMarkOffsets(),a.forEach(function(e){(0,c.isStepDivisible)(r,e,s)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},t.prototype.render=function(){var e=this,t=this.props,n=t.label,i=t.labelledBy,r=t.renderTrack,s=t.renderThumb,a=t.renderMark,l=void 0===a?function(){return null}:a,h=t.values,d=t.min,p=t.max,f=t.allowOverlap,g=t.disabled,m=this.state,v=m.draggedThumbIndex,b=m.thumbZIndexes,y=m.markOffsets;return r({props:{style:{transform:"scale(1)",cursor:v>-1?"grabbing":this.props.draggableTrack?(0,c.isVertical)(this.props.direction)?"ns-resize":"ew-resize":1!==h.length||g?"inherit":"pointer"},onMouseDown:g?c.voidFn:this.onMouseDownTrack,onTouchStart:g?c.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:g,children:o(o([],y.map(function(t,n,i){return l({props:{style:e.props.direction===u.Direction.Left||e.props.direction===u.Direction.Right?{position:"absolute",left:"".concat(t[0],"px"),marginTop:"".concat(t[1],"px")}:{position:"absolute",top:"".concat(t[0],"px"),marginLeft:"".concat(t[1],"px")},key:"mark".concat(n),ref:e.markRefs[n]},index:n})}),!0),h.map(function(t,r){var a=e.state.draggedThumbIndex===r;return s({index:r,value:t,isDragged:a,props:{style:{position:"absolute",zIndex:b[r],cursor:g?"inherit":a?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:r,tabIndex:g?void 0:0,"aria-valuemax":f?p:h[r+1]||p,"aria-valuemin":f?d:h[r-1]||d,"aria-valuenow":t,draggable:!1,ref:e.thumbRefs[r],"aria-label":n,"aria-labelledby":i,role:"slider",onKeyDown:g?c.voidFn:e.onKeyDown,onKeyUp:g?c.voidFn:e.onKeyUp}})}),!0)})},t.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:u.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},t}(l.Component);t.default=p},47:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(827).__importDefault(n(11));t.default=class{constructor(e,t){let{headers:n={},schema:i,fetch:r}=t;this.url=e,this.headers=new Headers(n),this.schema=i,this.fetch=r}select(e,t){const{head:n=!1,count:r}=null!==t&&void 0!==t?t:{},s=n?"HEAD":"GET";let a=!1;const o=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer","count=".concat(r)),new i.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;if(t&&this.headers.append("Prefer","count=".concat(t)),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a;if(this.headers.append("Prefer","resolution=".concat(n?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer","count=".concat(r)),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return t&&this.headers.append("Prefer","count=".concat(t)),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},53:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const i=n(827),r=i.__importDefault(n(71));t.PostgrestClient=r.default;const s=i.__importDefault(n(47));t.PostgrestQueryBuilder=s.default;const a=i.__importDefault(n(11));t.PostgrestFilterBuilder=a.default;const o=i.__importDefault(n(427));t.PostgrestTransformBuilder=o.default;const l=i.__importDefault(n(569));t.PostgrestBuilder=l.default;const c=i.__importDefault(n(732));t.PostgrestError=c.default,t.default={PostgrestClient:r.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}},71:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(827),r=i.__importDefault(n(47)),s=i.__importDefault(n(11));class a{constructor(e){let{headers:t={},schema:n,fetch:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=i}from(e){if(!e||"string"!==typeof e||""===e.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");const t=new URL("".concat(this.url,"/").concat(e));return new r.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:i=!1,count:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a;let o;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;n||i?(o=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;l.searchParams.append(t,n)})):(o="POST",c=t);const u=new Headers(this.headers);return r&&u.set("Prefer","count=".concat(r)),new s.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}}t.default=a},85:(e,t,n)=>{var i=n(340),r=n(950),s=n(119);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),_=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),E=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var M=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function O(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case S:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case _:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:O(e.type)||"Memo";case E:t=e._payload,e=e._init;try{return O(e(t))}catch(n){}}return null}var N=Array.isArray,I=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},L=[],F=-1;function B(e){return{current:e}}function W(e){0>F||(e.current=L[F],L[F]=null,F--)}function U(e,t){F++,L[F]=e.current,e.current=t}var z=B(null),H=B(null),V=B(null),q=B(null);function G(e,t){switch(U(V,t),U(H,e),U(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?rh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=sh(t=rh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(z),U(z,e)}function K(){W(z),W(H),W(V)}function X(e){null!==e.memoizedState&&U(q,e);var t=z.current,n=sh(t,e.type);t!==n&&(U(H,e),U(z,n))}function Y(e){H.current===e&&(W(z),W(H)),q.current===e&&(W(q),Xh._currentValue=j)}var J=Object.prototype.hasOwnProperty,Q=i.unstable_scheduleCallback,$=i.unstable_cancelCallback,Z=i.unstable_shouldYield,ee=i.unstable_requestPaint,te=i.unstable_now,ne=i.unstable_getCurrentPriorityLevel,ie=i.unstable_ImmediatePriority,re=i.unstable_UserBlockingPriority,se=i.unstable_NormalPriority,ae=i.unstable_LowPriority,oe=i.unstable_IdlePriority,le=i.log,ce=i.unstable_setDisableYieldValue,ue=null,he=null;function de(e){if("function"===typeof le&&ce(e),he&&"function"===typeof he.setStrictMode)try{he.setStrictMode(ue,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/ge|0)|0},fe=Math.log,ge=Math.LN2;var me=256,ve=4194304;function be(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ye(e,t,n){var i=e.pendingLanes;if(0===i)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&i;return 0!==o?0!==(i=o&~s)?r=be(i):0!==(a&=o)?r=be(a):n||0!==(n=o&~e)&&(r=be(n)):0!==(o=i&~s)?r=be(o):0!==a?r=be(a):n||0!==(n=i&~e)&&(r=be(n)),0===r?0:0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:r}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function _e(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xe(){var e=me;return 0===(4194048&(me<<=1))&&(me=256),e}function ke(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ae(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ee(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-pe(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-pe(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Te(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Pe(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:cd(e.type)}var Re=Math.random().toString(36).slice(2),Oe="__reactFiber$"+Re,Ne="__reactProps$"+Re,Ie="__reactContainer$"+Re,De="__reactEvents$"+Re,je="__reactListeners$"+Re,Le="__reactHandles$"+Re,Fe="__reactResources$"+Re,Be="__reactMarker$"+Re;function We(e){delete e[Oe],delete e[Ne],delete e[De],delete e[je],delete e[Le]}function Ue(e){var t=e[Oe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ie]||n[Oe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=yh(e);null!==e;){if(n=e[Oe])return n;e=yh(e)}return t}n=(e=n).parentNode}return null}function ze(e){if(e=e[Oe]||e[Ie]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ve(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function qe(e){e[Be]=!0}var Ge=new Set,Ke={};function Xe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ke[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Je,Qe,$e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(r=t,J.call(et,r)||!J.call(Ze,r)&&($e.test(r)?et[r]=!0:(Ze[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function it(e,t,n,i){if(null===i)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+i)}}function rt(e){if(void 0===Je)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",Qe=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+Qe}var st=!1;function at(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var i=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){i=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){i=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&i&&"string"===typeof o.stack)return[o.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(1!==i||1!==r)do{if(i--,0>--r||l[i]!==c[r]){var u="\n"+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=i&&0<=r);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?rt(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return rt(e.type);case 16:return rt("Lazy");case 13:return rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return rt("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=ut(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function gt(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function mt(e,t,n,i,r,s,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?bt(e,a,ct(t)):null!=n?bt(e,a,ct(n)):null!=i&&e.removeAttribute("value"),null==r&&null!=s&&(e.defaultChecked=!!s),null!=r&&(e.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function vt(e,t,n,i,r,s,a,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}i="function"!==typeof(i=null!=i?i:r)&&"symbol"!==typeof i&&!!i,e.checked=o?e.checked:!!i,e.defaultChecked=!!i,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function bt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function yt(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(a(92));if(N(i)){if(1<i.length)throw Error(a(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i)}function xt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var i=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function At(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&St(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&St(e,s,t[s])}function Et(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mt(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Pt=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ot=null,Nt=null;function It(e){var t=ze(e);if(t&&(e=t.stateNode)){var n=e[Ne]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Ne]||null;if(!r)throw Error(a(90));mt(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&dt(i)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&yt(e,!!n.multiple,t,!1)}}}var Dt=!1;function jt(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==Ot||null!==Nt)&&(Uc(),Ot&&(t=Ot,e=Nt,Nt=Ot=null,It(t),e)))for(t=0;t<e.length;t++)It(e[t])}}function Lt(e,t){var n=e.stateNode;if(null===n)return null;var i=n[Ne]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(Ft)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(Nd){Bt=!1}var Ut=null,zt=null,Ht=null;function Vt(){if(Ht)return Ht;var e,t,n=zt,i=n.length,r="value"in Ut?Ut.value:Ut.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[s-t];t++);return Ht=r.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Kt(){return!1}function Xt(e){function t(t,n,i,r,s){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Gt:Kt,this.isPropagationStopped=Kt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Yt,Jt,Qt,$t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Xt($t),en=d({},$t,{view:0,detail:0}),tn=Xt(en),nn=d({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qt&&(Qt&&"mousemove"===e.type?(Yt=e.screenX-Qt.screenX,Jt=e.screenY-Qt.screenY):Jt=Yt=0,Qt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),rn=Xt(nn),sn=Xt(d({},nn,{dataTransfer:0})),an=Xt(d({},en,{relatedTarget:0})),on=Xt(d({},$t,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Xt(d({},$t,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Xt(d({},$t,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function fn(){return pn}var gn=Xt(d({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Xt(d({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Xt(d({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),bn=Xt(d({},$t,{propertyName:0,elapsedTime:0,pseudoElement:0})),yn=Xt(d({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Xt(d({},$t,{newState:0,oldState:0})),_n=[9,13,27,32],xn=Ft&&"CompositionEvent"in window,kn=null;Ft&&"documentMode"in document&&(kn=document.documentMode);var Sn=Ft&&"TextEvent"in window&&!kn,An=Ft&&(!xn||kn&&8<kn&&11>=kn),En=String.fromCharCode(32),Cn=!1;function Tn(e,t){switch(e){case"keyup":return-1!==_n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var Rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rn[e.type]:"textarea"===t}function Nn(e,t,n,i){Ot?Nt?Nt.push(i):Nt=[i]:Ot=i,0<(t=Vu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var In=null,Dn=null;function jn(e){ju(e,0)}function Ln(e){if(dt(He(e)))return e}function Fn(e,t){if("change"===e)return t}var Bn=!1;if(Ft){var Wn;if(Ft){var Un="oninput"in document;if(!Un){var zn=document.createElement("div");zn.setAttribute("oninput","return;"),Un="function"===typeof zn.oninput}Wn=Un}else Wn=!1;Bn=Wn&&(!document.documentMode||9<document.documentMode)}function Hn(){In&&(In.detachEvent("onpropertychange",Vn),Dn=In=null)}function Vn(e){if("value"===e.propertyName&&Ln(Dn)){var t=[];Nn(t,Dn,e,Rt(e)),jt(jn,t)}}function qn(e,t,n){"focusin"===e?(Hn(),Dn=n,(In=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&Hn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ln(Dn)}function Kn(e,t){if("click"===e)return Ln(t)}function Xn(e,t){if("input"===e||"change"===e)return Ln(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!J.call(t,r)||!Yn(e[r],t[r]))return!1}return!0}function Qn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $n(e,t){var n,i=Qn(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Qn(i)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ei(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function ti(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ni=Ft&&"documentMode"in document&&11>=document.documentMode,ii=null,ri=null,si=null,ai=!1;function oi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ai||null==ii||ii!==pt(i)||("selectionStart"in(i=ii)&&ti(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},si&&Jn(si,i)||(si=i,0<(i=Vu(ri,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ii)))}function li(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ci={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionrun:li("Transition","TransitionRun"),transitionstart:li("Transition","TransitionStart"),transitioncancel:li("Transition","TransitionCancel"),transitionend:li("Transition","TransitionEnd")},ui={},hi={};function di(e){if(ui[e])return ui[e];if(!ci[e])return e;var t,n=ci[e];for(t in n)if(n.hasOwnProperty(t)&&t in hi)return ui[e]=n[t];return e}Ft&&(hi=document.createElement("div").style,"AnimationEvent"in window||(delete ci.animationend.animation,delete ci.animationiteration.animation,delete ci.animationstart.animation),"TransitionEvent"in window||delete ci.transitionend.transition);var pi=di("animationend"),fi=di("animationiteration"),gi=di("animationstart"),mi=di("transitionrun"),vi=di("transitionstart"),bi=di("transitioncancel"),yi=di("transitionend"),wi=new Map,_i="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(e,t){wi.set(e,t),Xe(t,[e])}_i.push("scrollEnd");var ki=new WeakMap;function Si(e,t){if("object"===typeof e&&null!==e){var n=ki.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},ki.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Ai=[],Ei=0,Ci=0;function Ti(){for(var e=Ei,t=Ci=Ei=0;t<e;){var n=Ai[t];Ai[t++]=null;var i=Ai[t];Ai[t++]=null;var r=Ai[t];Ai[t++]=null;var s=Ai[t];if(Ai[t++]=null,null!==i&&null!==r){var a=i.pending;null===a?r.next=r:(r.next=a.next,a.next=r),i.pending=r}0!==s&&Oi(n,r,s)}}function Mi(e,t,n,i){Ai[Ei++]=e,Ai[Ei++]=t,Ai[Ei++]=n,Ai[Ei++]=i,Ci|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function Pi(e,t,n,i){return Mi(e,t,n,i),Ni(e)}function Ri(e,t){return Mi(e,null,null,t),Ni(e)}function Oi(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var r=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(i=s.alternate)&&(i.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(r=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,r&&null!==t&&(r=31-pe(n),null===(i=(e=s.hiddenUpdates)[r])?e[r]=[t]:i.push(t),t.lane=536870912|n),s):null}function Ni(e){if(50<Oc)throw Oc=0,Nc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ii={};function Di(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(e,t,n,i){return new Di(e,t,n,i)}function Li(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fi(e,t){var n=e.alternate;return null===n?((n=ji(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Bi(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wi(e,t,n,i,r,s){var o=0;if(i=e,"function"===typeof e)Li(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,z.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=ji(31,n,t,r)).elementType=C,e.lanes=s,e;case m:return Ui(n.children,r,s,t);case v:o=8,r|=24;break;case b:return(e=ji(12,n,t,2|r)).elementType=b,e.lanes=s,e;case k:return(e=ji(13,n,t,r)).elementType=k,e.lanes=s,e;case S:return(e=ji(19,n,t,r)).elementType=S,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case y:case _:o=10;break e;case w:o=9;break e;case x:o=11;break e;case A:o=14;break e;case E:o=16,i=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),i=null}return(t=ji(o,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function Ui(e,t,n,i){return(e=ji(7,e,i,t)).lanes=n,e}function zi(e,t,n){return(e=ji(6,e,null,t)).lanes=n,e}function Hi(e,t,n){return(t=ji(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vi=[],qi=0,Gi=null,Ki=0,Xi=[],Yi=0,Ji=null,Qi=1,$i="";function Zi(e,t){Vi[qi++]=Ki,Vi[qi++]=Gi,Gi=e,Ki=t}function er(e,t,n){Xi[Yi++]=Qi,Xi[Yi++]=$i,Xi[Yi++]=Ji,Ji=e;var i=Qi;e=$i;var r=32-pe(i)-1;i&=~(1<<r),n+=1;var s=32-pe(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Qi=1<<32-pe(t)+r|n<<r|i,$i=s+e}else Qi=1<<s|n<<r|i,$i=e}function tr(e){null!==e.return&&(Zi(e,1),er(e,1,0))}function nr(e){for(;e===Gi;)Gi=Vi[--qi],Vi[qi]=null,Ki=Vi[--qi],Vi[qi]=null;for(;e===Ji;)Ji=Xi[--Yi],Xi[Yi]=null,$i=Xi[--Yi],Xi[Yi]=null,Qi=Xi[--Yi],Xi[Yi]=null}var ir=null,rr=null,sr=!1,ar=null,or=!1,lr=Error(a(519));function cr(e){throw gr(Si(Error(a(418,"")),e)),lr}function ur(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Oe]=e,t[Ne]=i,n){case"dialog":Lu("cancel",t),Lu("close",t);break;case"iframe":case"object":case"embed":Lu("load",t);break;case"video":case"audio":for(n=0;n<Iu.length;n++)Lu(Iu[n],t);break;case"source":Lu("error",t);break;case"img":case"image":case"link":Lu("error",t),Lu("load",t);break;case"details":Lu("toggle",t);break;case"input":Lu("invalid",t),vt(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),ht(t);break;case"select":Lu("invalid",t);break;case"textarea":Lu("invalid",t),_t(t,i.value,i.defaultValue,i.children),ht(t)}"string"!==typeof(n=i.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===i.suppressHydrationWarning||Ju(t.textContent,n)?(null!=i.popover&&(Lu("beforetoggle",t),Lu("toggle",t)),null!=i.onScroll&&Lu("scroll",t),null!=i.onScrollEnd&&Lu("scrollend",t),null!=i.onClick&&(t.onclick=Qu),t=!0):t=!1,t||cr(e)}function hr(e){for(ir=e.return;ir;)switch(ir.tag){case 5:case 13:return void(or=!1);case 27:case 3:return void(or=!0);default:ir=ir.return}}function dr(e){if(e!==ir)return!1;if(!sr)return hr(e),sr=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ah(e.type,e.memoizedProps)),t=!t),t&&rr&&cr(e),hr(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){rr=vh(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}rr=null}}else 27===n?(n=rr,ph(e.type)?(e=bh,bh=null,rr=e):rr=n):rr=ir?vh(e.stateNode.nextSibling):null;return!0}function pr(){rr=ir=null,sr=!1}function fr(){var e=ar;return null!==e&&(null===yc?yc=e:yc.push.apply(yc,e),ar=null),e}function gr(e){null===ar?ar=[e]:ar.push(e)}var mr=B(null),vr=null,br=null;function yr(e,t,n){U(mr,t._currentValue),t._currentValue=n}function wr(e){e._currentValue=mr.current,W(mr)}function _r(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function xr(e,t,n,i){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var s=r.dependencies;if(null!==s){var o=r.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),_r(s.return,n,e),i||(o=null);break e}s=l.next}}else if(18===r.tag){if(null===(o=r.return))throw Error(a(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),_r(o,n,e),o=null}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}}function kr(e,t,n,i){e=null;for(var r=t,s=!1;null!==r;){if(!s)if(0!==(524288&r.flags))s=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var o=r.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=r.type;Yn(r.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(r===q.current){if(null===(o=r.alternate))throw Error(a(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(Xh):e=[Xh])}r=r.return}null!==e&&xr(t,e,n,i),t.flags|=262144}function Sr(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ar(e){vr=e,br=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Er(e){return Tr(vr,e)}function Cr(e,t){return null===vr&&Ar(e),Tr(e,t)}function Tr(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===br){if(null===e)throw Error(a(308));br=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else br=br.next=t;return n}var Mr="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Pr=i.unstable_scheduleCallback,Rr=i.unstable_NormalPriority,Or={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nr(){return{controller:new Mr,data:new Map,refCount:0}}function Ir(e){e.refCount--,0===e.refCount&&Pr(Rr,function(){e.controller.abort()})}var Dr=null,jr=0,Lr=0,Fr=null;function Br(){if(0===--jr&&null!==Dr){null!==Fr&&(Fr.status="fulfilled");var e=Dr;Dr=null,Lr=0,Fr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Wr=I.S;I.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Dr){var n=Dr=[];jr=0,Lr=Mu(),Fr={status:"pending",value:void 0,then:function(e){n.push(e)}}}jr++,t.then(Br,Br)}(0,t),null!==Wr&&Wr(e,t)};var Ur=B(null);function zr(){var e=Ur.current;return null!==e?e:ic.pooledCache}function Hr(e,t){U(Ur,null===t?Ur.current:t.pool)}function Vr(){var e=zr();return null===e?null:{parent:Or._currentValue,pool:e}}var qr=Error(a(460)),Gr=Error(a(474)),Kr=Error(a(542)),Xr={then:function(){}};function Yr(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Jr(){}function Qr(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Jr,Jr),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Jr,Jr);else{if(null!==(e=ic)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw $r=t,qr}}var $r=null;function Zr(){if(null===$r)throw Error(a(459));var e=$r;return $r=null,e}function es(e){if(e===qr||e===Kr)throw Error(a(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function is(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function rs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&nc)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Ni(e),Oi(e,null,n),t}return Mi(e,i,t,n),Ni(e)}function as(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function os(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function cs(){if(ls){if(null!==Fr)throw Fr}}function us(e,t,n,i){ls=!1;var r=e.updateQueue;ts=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(a=0,u=c=l=null,o=s;;){var p=-536870913&o.lane,f=p!==o.lane;if(f?(sc&p)===p:(i&p)===p){0!==p&&p===Lr&&(ls=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var g=e,m=o;p=t;var v=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){h=g.call(v,h,p);break e}h=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(p="function"===typeof(g=m.payload)?g.call(v,h,p):g)||void 0===p)break e;h=d({},h,p);break e;case 2:ts=!0}}null!==(p=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=r.callbacks)?r.callbacks=[p]:f.push(p))}else f={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=p;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(f=o).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null===s&&(r.shared.lanes=0),pc|=a,e.lanes=a,e.memoizedState=h}}function hs(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function ds(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hs(n[e],t)}var ps=B(null),fs=B(0);function gs(e,t){U(fs,e=hc),U(ps,t),hc=e|t.baseLanes}function ms(){U(fs,hc),U(ps,ps.current)}function vs(){hc=fs.current,W(ps),W(fs)}var bs=0,ys=null,ws=null,_s=null,xs=!1,ks=!1,Ss=!1,As=0,Es=0,Cs=null,Ts=0;function Ms(){throw Error(a(321))}function Ps(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Rs(e,t,n,i,r,s){return bs=s,ys=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=null===e||null===e.memoizedState?qa:Ga,Ss=!1,s=n(i,r),Ss=!1,ks&&(s=Ns(t,n,i,r)),Os(e),s}function Os(e){I.H=Va;var t=null!==ws&&null!==ws.next;if(bs=0,_s=ws=ys=null,xs=!1,Es=0,Cs=null,t)throw Error(a(300));null===e||Co||null!==(e=e.dependencies)&&Sr(e)&&(Co=!0)}function Ns(e,t,n,i){ys=e;var r=0;do{if(ks&&(Cs=null),Es=0,ks=!1,25<=r)throw Error(a(301));if(r+=1,_s=ws=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}I.H=Ka,s=t(n,i)}while(ks);return s}function Is(){var e=I.H,t=e.useState()[0];return t="function"===typeof t.then?Ws(t):t,e=e.useState()[0],(null!==ws?ws.memoizedState:null)!==e&&(ys.flags|=1024),t}function Ds(){var e=0!==As;return As=0,e}function js(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ls(e){if(xs){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}xs=!1}bs=0,_s=ws=ys=null,ks=!1,Es=As=0,Cs=null}function Fs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===_s?ys.memoizedState=_s=e:_s=_s.next=e,_s}function Bs(){if(null===ws){var e=ys.alternate;e=null!==e?e.memoizedState:null}else e=ws.next;var t=null===_s?ys.memoizedState:_s.next;if(null!==t)_s=t,ws=e;else{if(null===e){if(null===ys.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(ws=e).memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},null===_s?ys.memoizedState=_s=e:_s=_s.next=e}return _s}function Ws(e){var t=Es;return Es+=1,null===Cs&&(Cs=[]),e=Qr(Cs,e,t),t=ys,null===(null===_s?t.memoizedState:_s.next)&&(t=t.alternate,I.H=null===t||null===t.memoizedState?qa:Ga),e}function Us(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Ws(e);if(e.$$typeof===_)return Er(e)}throw Error(a(438,String(e)))}function zs(e){var t=null,n=ys.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=ys.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ys.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=T;return t.index++,n}function Hs(e,t){return"function"===typeof t?t(e):t}function Vs(e){return qs(Bs(),ws,e)}function qs(e,t,n){var i=e.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(null!==s){if(null!==r){var o=r.next;r.next=s.next,s.next=o}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,null===r)e.memoizedState=s;else{var l=o=null,c=null,u=t=r.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(sc&d)===d:(bs&d)===d){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Lr&&(h=!0);else{if((bs&p)===p){u=u.next,p===Lr&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,o=s):c=c.next=d,ys.lanes|=p,pc|=p}d=u.action,Ss&&n(s,d),s=u.hasEagerState?u.eagerState:n(s,d)}else p={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,o=s):c=c.next=p,ys.lanes|=d,pc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?o=s:c.next=l,!Yn(s,e.memoizedState)&&(Co=!0,h&&null!==(n=Fr)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,i.lastRenderedState=s}return null===r&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Gs(e){var t=Bs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{s=e(s,o.action),o=o.next}while(o!==r);Yn(s,t.memoizedState)||(Co=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Ks(e,t,n){var i=ys,r=Bs(),s=sr;if(s){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Yn((ws||r).memoizedState,n);if(o&&(r.memoizedState=n,Co=!0),r=r.queue,ma(2048,8,Js.bind(null,i,r,e),[e]),r.getSnapshot!==t||o||null!==_s&&1&_s.memoizedState.tag){if(i.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Ys.bind(null,i,r,n,t),null),null===ic)throw Error(a(349));s||0!==(124&bs)||Xs(i,t,n)}return n}function Xs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ys.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ys.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ys(e,t,n,i){t.value=n,t.getSnapshot=i,Qs(t)&&$s(e)}function Js(e,t,n){return n(function(){Qs(t)&&$s(e)})}function Qs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(i){return!0}}function $s(e){var t=Ri(e,2);null!==t&&jc(t,e,2)}function Zs(e){var t=Fs();if("function"===typeof e){var n=e;if(e=n(),Ss){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:e},t}function ea(e,t,n,i){return e.baseState=n,qs(e,ws,"function"===typeof i?i:Hs)}function ta(e,t,n,i,r){if(Ua(e))throw Error(a(485));if(null!==(e=t.action)){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==I.T?n(!0):s.isTransition=!1,i(s),null===(n=t.pending)?(s.next=t.pending=s,na(t,s)):(s.next=n.next,t.pending=n.next=s)}}function na(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=I.T,a={};I.T=a;try{var o=n(r,i),l=I.S;null!==l&&l(a,o),ia(e,t,o)}catch(c){sa(e,t,c)}finally{I.T=s}}else try{ia(e,t,s=n(r,i))}catch(u){sa(e,t,u)}}function ia(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ra(e,t,n)},function(n){return sa(e,t,n)}):ra(e,t,n)}function ra(e,t,n){t.status="fulfilled",t.value=n,aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,na(e,n)))}function sa(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,aa(t),t=t.next}while(t!==i)}e.action=null}function aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oa(e,t){return t}function la(e,t){if(sr){var n=ic.formState;if(null!==n){e:{var i=ys;if(sr){if(rr){t:{for(var r=rr,s=or;8!==r.nodeType;){if(!s){r=null;break t}if(null===(r=vh(r.nextSibling))){r=null;break t}}r="F!"===(s=r.data)||"F"===s?r:null}if(r){rr=vh(r.nextSibling),i="F!"===r.data;break e}}cr(i)}i=!1}i&&(t=n[0])}}return(n=Fs()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},n.queue=i,n=Fa.bind(null,ys,i),i.dispatch=n,i=Zs(!1),s=Wa.bind(null,ys,!1,i.queue),r={state:t,dispatch:null,action:e,pending:null},(i=Fs()).queue=r,n=ta.bind(null,ys,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function ca(e){return ua(Bs(),ws,e)}function ua(e,t,n){if(t=qs(e,t,oa)[0],e=Vs(Hs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var i=Ws(t)}catch(a){if(a===qr)throw Kr;throw a}else i=t;var r=(t=Bs()).queue,s=r.dispatch;return n!==t.memoizedState&&(ys.flags|=2048,pa(9,{destroy:void 0,resource:void 0},ha.bind(null,r,n),null)),[i,s,e]}function ha(e,t){e.action=t}function da(e){var t=Bs(),n=ws;if(null!==n)return ua(t,n,e);Bs(),t=t.memoizedState;var i=(n=Bs()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function pa(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},null===(t=ys.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ys.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function fa(){return Bs().memoizedState}function ga(e,t,n,i){var r=Fs();i=void 0===i?null:i,ys.flags|=e,r.memoizedState=pa(1|t,{destroy:void 0,resource:void 0},n,i)}function ma(e,t,n,i){var r=Bs();i=void 0===i?null:i;var s=r.memoizedState.inst;null!==ws&&null!==i&&Ps(i,ws.memoizedState.deps)?r.memoizedState=pa(t,s,n,i):(ys.flags|=e,r.memoizedState=pa(1|t,s,n,i))}function va(e,t){ga(8390656,8,e,t)}function ba(e,t){ma(2048,8,e,t)}function ya(e,t){return ma(4,2,e,t)}function wa(e,t){return ma(4,4,e,t)}function _a(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function xa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ma(4,4,_a.bind(null,t,e),n)}function ka(){}function Sa(e,t){var n=Bs();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&Ps(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Aa(e,t){var n=Bs();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&Ps(t,i[1]))return i[0];if(i=e(),Ss){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[i,t],i}function Ea(e,t,n){return void 0===n||0!==(1073741824&bs)?e.memoizedState=t:(e.memoizedState=n,e=Dc(),ys.lanes|=e,pc|=e,n)}function Ca(e,t,n,i){return Yn(n,t)?n:null!==ps.current?(e=Ea(e,n,i),Yn(e,t)||(Co=!0),e):0===(42&bs)?(Co=!0,e.memoizedState=n):(e=Dc(),ys.lanes|=e,pc|=e,t)}function Ta(e,t,n,i,r){var s=D.p;D.p=0!==s&&8>s?s:8;var a=I.T,o={};I.T=o,Wa(e,!1,t,n);try{var l=r(),c=I.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Ba(e,t,function(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(i.status="rejected",i.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),i}(l,i),Ic());else Ba(e,t,i,Ic())}catch(u){Ba(e,t,{then:function(){},status:"rejected",reason:u},Ic())}finally{D.p=s,I.T=a}}function Ma(){}function Pa(e,t,n,i){if(5!==e.tag)throw Error(a(476));var r=Ra(e).queue;Ta(e,r,t,j,null===n?Ma:function(){return Oa(e),n(i)})}function Ra(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:j},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Oa(e){Ba(e,Ra(e).next.queue,{},Ic())}function Na(){return Er(Xh)}function Ia(){return Bs().memoizedState}function Da(){return Bs().memoizedState}function ja(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ic(),i=ss(t,e=rs(n),n);return null!==i&&(jc(i,t,n),as(i,t,n)),t={cache:Nr()},void(e.payload=t)}t=t.return}}function La(e,t,n){var i=Ic();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ua(e)?za(t,n):null!==(n=Pi(e,t,n,i))&&(jc(n,e,i),Ha(n,t,i))}function Fa(e,t,n){Ba(e,t,n,Ic())}function Ba(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ua(e))za(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,Yn(o,a))return Mi(e,t,r,0),null===ic&&Ti(),!1}catch(l){}if(null!==(n=Pi(e,t,r,i)))return jc(n,e,i),Ha(n,t,i),!0}return!1}function Wa(e,t,n,i){if(i={lane:2,revertLane:Mu(),action:i,hasEagerState:!1,eagerState:null,next:null},Ua(e)){if(t)throw Error(a(479))}else null!==(t=Pi(e,n,i,2))&&jc(t,e,2)}function Ua(e){var t=e.alternate;return e===ys||null!==t&&t===ys}function za(e,t){ks=xs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ha(e,t,n){if(0!==(4194048&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Va={readContext:Er,use:Us,useCallback:Ms,useContext:Ms,useEffect:Ms,useImperativeHandle:Ms,useLayoutEffect:Ms,useInsertionEffect:Ms,useMemo:Ms,useReducer:Ms,useRef:Ms,useState:Ms,useDebugValue:Ms,useDeferredValue:Ms,useTransition:Ms,useSyncExternalStore:Ms,useId:Ms,useHostTransitionStatus:Ms,useFormState:Ms,useActionState:Ms,useOptimistic:Ms,useMemoCache:Ms,useCacheRefresh:Ms},qa={readContext:Er,use:Us,useCallback:function(e,t){return Fs().memoizedState=[e,void 0===t?null:t],e},useContext:Er,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4194308,4,_a.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){ga(4,2,e,t)},useMemo:function(e,t){var n=Fs();t=void 0===t?null:t;var i=e();if(Ss){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Fs();if(void 0!==n){var r=n(t);if(Ss){de(!0);try{n(t)}finally{de(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=La.bind(null,ys,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Fs().memoizedState=e},useState:function(e){var t=(e=Zs(e)).queue,n=Fa.bind(null,ys,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ka,useDeferredValue:function(e,t){return Ea(Fs(),e,t)},useTransition:function(){var e=Zs(!1);return e=Ta.bind(null,ys,e.queue,!0,!1),Fs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=ys,r=Fs();if(sr){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===ic)throw Error(a(349));0!==(124&sc)||Xs(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,va(Js.bind(null,i,s,e),[e]),i.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Ys.bind(null,i,s,n,t),null),n},useId:function(){var e=Fs(),t=ic.identifierPrefix;if(sr){var n=$i;t="\xab"+t+"R"+(n=(Qi&~(1<<32-pe(Qi)-1)).toString(32)+n),0<(n=As++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ts++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Na,useFormState:la,useActionState:la,useOptimistic:function(e){var t=Fs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Wa.bind(null,ys,!0,n),n.dispatch=t,[e,t]},useMemoCache:zs,useCacheRefresh:function(){return Fs().memoizedState=ja.bind(null,ys)}},Ga={readContext:Er,use:Us,useCallback:Sa,useContext:Er,useEffect:ba,useImperativeHandle:xa,useInsertionEffect:ya,useLayoutEffect:wa,useMemo:Aa,useReducer:Vs,useRef:fa,useState:function(){return Vs(Hs)},useDebugValue:ka,useDeferredValue:function(e,t){return Ca(Bs(),ws.memoizedState,e,t)},useTransition:function(){var e=Vs(Hs)[0],t=Bs().memoizedState;return["boolean"===typeof e?e:Ws(e),t]},useSyncExternalStore:Ks,useId:Ia,useHostTransitionStatus:Na,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ea(Bs(),0,e,t)},useMemoCache:zs,useCacheRefresh:Da},Ka={readContext:Er,use:Us,useCallback:Sa,useContext:Er,useEffect:ba,useImperativeHandle:xa,useInsertionEffect:ya,useLayoutEffect:wa,useMemo:Aa,useReducer:Gs,useRef:fa,useState:function(){return Gs(Hs)},useDebugValue:ka,useDeferredValue:function(e,t){var n=Bs();return null===ws?Ea(n,e,t):Ca(n,ws.memoizedState,e,t)},useTransition:function(){var e=Gs(Hs)[0],t=Bs().memoizedState;return["boolean"===typeof e?e:Ws(e),t]},useSyncExternalStore:Ks,useId:Ia,useHostTransitionStatus:Na,useFormState:da,useActionState:da,useOptimistic:function(e,t){var n=Bs();return null!==ws?ea(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:zs,useCacheRefresh:Da},Xa=null,Ya=0;function Ja(e){var t=Ya;return Ya+=1,null===Xa&&(Xa=[]),Qr(Xa,e,t)}function Qa(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function $a(e,t){if(t.$$typeof===p)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Fi(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=67108866,n):i:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=zi(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===m?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===E&&Za(s)===t.type)?(Qa(t=r(t,n.props),n),t.return=e,t):(Qa(t=Wi(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hi(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,s){return null===t||7!==t.tag?((t=Ui(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=zi(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return Qa(n=Wi(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Hi(t,e.mode,n)).return=e,t;case E:return d(e,t=(0,t._init)(t._payload),n)}if(N(t)||P(t))return(t=Ui(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,Ja(t),n);if(t.$$typeof===_)return d(e,Cr(e,t),n);$a(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===r?c(e,t,n,i):null;case g:return n.key===r?u(e,t,n,i):null;case E:return p(e,t,n=(r=n._init)(n._payload),i)}if(N(n)||P(n))return null!==r?null:h(e,t,n,i,null);if("function"===typeof n.then)return p(e,t,Ja(n),i);if(n.$$typeof===_)return p(e,t,Cr(e,n),i);$a(e,n)}return null}function v(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case f:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case g:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case E:return v(e,t,n,i=(0,i._init)(i._payload),r)}if(N(i)||P(i))return h(t,e=e.get(n)||null,i,r,null);if("function"===typeof i.then)return v(e,t,n,Ja(i),r);if(i.$$typeof===_)return v(e,t,n,Cr(t,i),r);$a(t,i)}return null}function b(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===m&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var y=u.key;null!==c;){if(c.key===y){if((y=u.type)===m){if(7===c.tag){n(l,c.sibling),(h=r(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===E&&Za(y)===c.type){n(l,c.sibling),Qa(h=r(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===m?((h=Ui(u.props.children,l.mode,h,u.key)).return=l,l=h):(Qa(h=Wi(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return o(l);case g:e:{for(y=u.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=r(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Hi(u,l.mode,h)).return=l,l=h}return o(l);case E:return b(l,c,u=(y=u._init)(u._payload),h)}if(N(u))return function(r,a,o,l){for(var c=null,u=null,h=a,f=a=0,g=null;null!==h&&f<o.length;f++){h.index>f?(g=h,h=null):g=h.sibling;var m=p(r,h,o[f],l);if(null===m){null===h&&(h=g);break}e&&h&&null===m.alternate&&t(r,h),a=s(m,a,f),null===u?c=m:u.sibling=m,u=m,h=g}if(f===o.length)return n(r,h),sr&&Zi(r,f),c;if(null===h){for(;f<o.length;f++)null!==(h=d(r,o[f],l))&&(a=s(h,a,f),null===u?c=h:u.sibling=h,u=h);return sr&&Zi(r,f),c}for(h=i(h);f<o.length;f++)null!==(g=v(h,r,f,o[f],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?f:g.key),a=s(g,a,f),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(r,e)}),sr&&Zi(r,f),c}(l,c,u,h);if(P(u)){if("function"!==typeof(y=P(u)))throw Error(a(150));return function(r,o,l,c){if(null==l)throw Error(a(151));for(var u=null,h=null,f=o,g=o=0,m=null,b=l.next();null!==f&&!b.done;g++,b=l.next()){f.index>g?(m=f,f=null):m=f.sibling;var y=p(r,f,b.value,c);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(r,f),o=s(y,o,g),null===h?u=y:h.sibling=y,h=y,f=m}if(b.done)return n(r,f),sr&&Zi(r,g),u;if(null===f){for(;!b.done;g++,b=l.next())null!==(b=d(r,b.value,c))&&(o=s(b,o,g),null===h?u=b:h.sibling=b,h=b);return sr&&Zi(r,g),u}for(f=i(f);!b.done;g++,b=l.next())null!==(b=v(f,r,g,b.value,c))&&(e&&null!==b.alternate&&f.delete(null===b.key?g:b.key),o=s(b,o,g),null===h?u=b:h.sibling=b,h=b);return e&&f.forEach(function(e){return t(r,e)}),sr&&Zi(r,g),u}(l,c,u=y.call(u),h)}if("function"===typeof u.then)return b(l,c,Ja(u),h);if(u.$$typeof===_)return b(l,c,Cr(l,u),h);$a(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=r(c,u)).return=l,l=h):(n(l,c),(h=zi(u,l.mode,h)).return=l,l=h),o(l)):n(l,c)}return function(e,t,n,i){try{Ya=0;var r=b(e,t,n,i);return Xa=null,r}catch(a){if(a===qr||a===Kr)throw a;var s=ji(29,a,null,e.mode);return s.lanes=i,s.return=e,s}}}var to=eo(!0),no=eo(!1),io=B(null),ro=null;function so(e){var t=e.alternate;U(co,1&co.current),U(io,e),null===ro&&(null===t||null!==ps.current||null!==t.memoizedState)&&(ro=e)}function ao(e){if(22===e.tag){if(U(co,co.current),U(io,e),null===ro){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ro=e)}}else oo()}function oo(){U(co,co.current),U(io,io.current)}function lo(e){W(io),ro===e&&(ro=null),W(co)}var co=B(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||mh(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var po={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ic(),r=rs(i);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ss(e,r,i))&&(jc(t,e,i),as(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ic(),r=rs(i);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ss(e,r,i))&&(jc(t,e,i),as(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ic(),i=rs(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=ss(e,i,n))&&(jc(t,e,n),as(t,e,n))}};function fo(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,i)||!Jn(r,s))}function go(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function mo(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var r in n===t&&(n=d({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}var vo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function bo(e){vo(e)}function yo(e){console.error(e)}function wo(e){vo(e)}function _o(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function xo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function ko(e,t,n){return(n=rs(n)).tag=3,n.payload={element:null},n.callback=function(){_o(e,t)},n}function So(e){return(e=rs(e)).tag=3,e}function Ao(e,t,n,i){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){xo(t,n,i)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){xo(t,n,i),"function"!==typeof r&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var Eo=Error(a(461)),Co=!1;function To(e,t,n,i){t.child=null===e?no(t,null,n,i):to(t,e.child,n,i)}function Mo(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var o in i)"ref"!==o&&(a[o]=i[o])}else a=i;return Ar(t),i=Rs(e,t,n,a,s,r),o=Ds(),null===e||Co?(sr&&o&&tr(t),t.flags|=1,To(e,t,i,r),t.child):(js(e,t,r),Yo(e,t,r))}function Po(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Li(s)||void 0!==s.defaultProps||null!==n.compare?((e=Wi(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ro(e,t,s,i,r))}if(s=e.child,!Jo(e,r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(a,i)&&e.ref===t.ref)return Yo(e,t,r)}return t.flags|=1,(e=Fi(s,i)).ref=t.ref,e.return=t,t.child=e}function Ro(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(Jn(s,i)&&e.ref===t.ref){if(Co=!1,t.pendingProps=i=s,!Jo(e,r))return t.lanes=e.lanes,Yo(e,t,r);0!==(131072&e.flags)&&(Co=!0)}}return Do(e,t,n,i,r)}function Oo(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode){if(0!==(128&t.flags)){if(i=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,s=0;null!==r;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return No(e,t,i,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,No(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hr(0,null!==s?s.cachePool:null),null!==s?gs(t,s):ms(),ao(t)}else null!==s?(Hr(0,s.cachePool),gs(t,s),oo(),t.memoizedState=null):(null!==e&&Hr(0,null),ms(),oo());return To(e,t,r,n),t.child}function No(e,t,n,i){var r=zr();return r=null===r?null:{parent:Or._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&Hr(0,null),ms(),ao(t),null!==e&&kr(e,t,i,!0),null}function Io(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Do(e,t,n,i,r){return Ar(t),n=Rs(e,t,n,i,void 0,r),i=Ds(),null===e||Co?(sr&&i&&tr(t),t.flags|=1,To(e,t,n,r),t.child):(js(e,t,r),Yo(e,t,r))}function jo(e,t,n,i,r,s){return Ar(t),t.updateQueue=null,n=Ns(t,i,n,r),Os(e),i=Ds(),null===e||Co?(sr&&i&&tr(t),t.flags|=1,To(e,t,n,s),t.child):(js(e,t,s),Yo(e,t,s))}function Lo(e,t,n,i,r){if(Ar(t),null===t.stateNode){var s=Ii,a=n.contextType;"object"===typeof a&&null!==a&&(s=Er(a)),s=new n(i,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=po,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=i,s.state=t.memoizedState,s.refs={},ns(t),a=n.contextType,s.context="object"===typeof a&&null!==a?Er(a):Ii,s.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(ho(t,n,a,i),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(a=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&po.enqueueReplaceState(s,s.state,null),us(t,i,s,r),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=mo(n,o);s.props=l;var c=s.context,u=n.contextType;a=Ii,"object"===typeof u&&null!==u&&(a=Er(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==a)&&go(t,s,i,a),ts=!1;var d=t.memoizedState;s.state=d,us(t,i,s,r),cs(),c=t.memoizedState,o||d!==c||ts?("function"===typeof h&&(ho(t,n,h,i),c=t.memoizedState),(l=ts||fo(t,n,l,i,d,c,a))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,is(e,t),u=mo(n,a=t.memoizedProps),s.props=u,h=t.pendingProps,d=s.context,c=n.contextType,l=Ii,"object"===typeof c&&null!==c&&(l=Er(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&go(t,s,i,l),ts=!1,d=t.memoizedState,s.state=d,us(t,i,s,r),cs();var p=t.memoizedState;a!==h||d!==p||ts||null!==e&&null!==e.dependencies&&Sr(e.dependencies)?("function"===typeof o&&(ho(t,n,o,i),p=t.memoizedState),(u=ts||fo(t,n,u,i,d,p,l)||null!==e&&null!==e.dependencies&&Sr(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),s.props=i,s.state=p,s.context=l,i=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,Io(e,t),i=0!==(128&t.flags),s||i?(s=t.stateNode,n=i&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&i?(t.child=to(t,e.child,null,r),t.child=to(t,null,n,r)):To(e,t,n,r),t.memoizedState=s.state,e=t.child):e=Yo(e,t,r),e}function Fo(e,t,n,i){return pr(),t.flags|=256,To(e,t,n,i),t.child}var Bo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wo(e){return{baseLanes:e,cachePool:Vr()}}function Uo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=mc),e}function zo(e,t,n){var i,r=t.pendingProps,s=!1,o=0!==(128&t.flags);if((i=o)||(i=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),i&&(s=!0,t.flags&=-129),i=0!==(32&t.flags),t.flags&=-33,null===e){if(sr){if(s?so(t):oo(),sr){var l,c=rr;if(l=c){e:{for(l=c,c=or;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vh(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Ji?{id:Qi,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},(l=ji(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ir=t,rr=null,l=!0):l=!1}l||cr(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return mh(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=r.children,r=r.fallback,s?(oo(),c=Vo({mode:"hidden",children:c},s=t.mode),r=Ui(r,s,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,(s=t.child).memoizedState=Wo(n),s.childLanes=Uo(e,i,n),t.memoizedState=Bo,r):(so(t),Ho(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(so(t),t.flags&=-257,t=qo(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),s=r.fallback,c=t.mode,r=Vo({mode:"visible",children:r.children},c),(s=Ui(s,c,n,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,to(t,e.child,null,n),(r=t.child).memoizedState=Wo(n),r.childLanes=Uo(e,i,n),t.memoizedState=Bo,t=s);else if(so(t),mh(c)){if(i=c.nextSibling&&c.nextSibling.dataset)var u=i.dgst;i=u,(r=Error(a(419))).stack="",r.digest=i,gr({value:r,source:null,stack:null}),t=qo(e,t,n)}else if(Co||kr(e,t,n,!1),i=0!==(n&e.childLanes),Co||i){if(null!==(i=ic)&&(0!==(r=0!==((r=0!==(42&(r=n&-n))?1:Te(r))&(i.suspendedLanes|n))?0:r)&&r!==l.retryLane))throw l.retryLane=r,Ri(e,r),jc(i,e,r),Eo;"$?"===c.data||Kc(),t=qo(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,rr=vh(c.nextSibling),ir=t,sr=!0,ar=null,or=!1,null!==e&&(Xi[Yi++]=Qi,Xi[Yi++]=$i,Xi[Yi++]=Ji,Qi=e.id,$i=e.overflow,Ji=t),(t=Ho(t,r.children)).flags|=4096);return t}return s?(oo(),s=r.fallback,c=t.mode,u=(l=e.child).sibling,(r=Fi(l,{mode:"hidden",children:r.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=Fi(u,s):(s=Ui(s,c,n,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,null===(c=e.child.memoizedState)?c=Wo(n):(null!==(l=c.cachePool)?(u=Or._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Vr(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=Uo(e,i,n),t.memoizedState=Bo,r):(so(t),e=(n=e.child).sibling,(n=Fi(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Ho(e,t){return(t=Vo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vo(e,t){return(e=ji(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function qo(e,t,n){return to(t,e.child,null,n),(e=Ho(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Go(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),_r(e.return,t,n)}function Ko(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Xo(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(To(e,t,i.children,n),0!==(2&(i=co.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Go(e,n,t);else if(19===e.tag)Go(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(U(co,i),r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Ko(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===uo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Ko(t,!0,n,null,s);break;case"together":Ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(kr(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Fi(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fi(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Jo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Sr(e))}function Qo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Co=!0;else{if(!Jo(e,n)&&0===(128&t.flags))return Co=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),yr(0,Or,e.memoizedState.cache),pr();break;case 27:case 5:X(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:yr(0,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(so(t),t.flags|=128,null):0!==(n&t.child.childLanes)?zo(e,t,n):(so(t),null!==(e=Yo(e,t,n))?e.sibling:null);so(t);break;case 19:var r=0!==(128&e.flags);if((i=0!==(n&t.childLanes))||(kr(e,t,n,!1),i=0!==(n&t.childLanes)),r){if(i)return Xo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),U(co,co.current),i)break;return null;case 22:case 23:return t.lanes=0,Oo(e,t,n);case 24:yr(0,Or,e.memoizedState.cache)}return Yo(e,t,n)}(e,t,n);Co=0!==(131072&e.flags)}else Co=!1,sr&&0!==(1048576&t.flags)&&er(t,Ki,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,"function"!==typeof i){if(void 0!==i&&null!==i){if((r=i.$$typeof)===x){t.tag=11,t=Mo(null,t,i,e,n);break e}if(r===A){t.tag=14,t=Po(null,t,i,e,n);break e}}throw t=O(i)||i,Error(a(306,t,""))}Li(i)?(e=mo(i,e),t.tag=1,t=Lo(null,t,i,e,n)):(t.tag=0,t=Do(null,t,i,e,n))}return t;case 0:return Do(e,t,t.type,t.pendingProps,n);case 1:return Lo(e,t,i=t.type,r=mo(i,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(a(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,is(e,t),us(t,i,null,n);var o=t.memoizedState;if(i=o.cache,yr(0,Or,i),i!==s.cache&&xr(t,[Or],n,!0),cs(),i=o.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Fo(e,t,i,n);break e}if(i!==r){gr(r=Si(Error(a(424)),t)),t=Fo(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(rr=vh(e.firstChild),ir=t,sr=!0,ar=null,or=!0,n=no(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pr(),i===r){t=Yo(e,t,n);break e}To(e,t,i,n)}t=t.child}return t;case 26:return Io(e,t),null===e?(n=Th(t.type,null,t.pendingProps,null))?t.memoizedState=n:sr||(n=t.type,e=t.pendingProps,(i=ih(V.current).createElement(n))[Oe]=t,i[Ne]=e,eh(i,n,e),qe(i),t.stateNode=i):t.memoizedState=Th(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&sr&&(i=t.stateNode=wh(t.type,t.pendingProps,V.current),ir=t,or=!0,r=rr,ph(t.type)?(bh=r,rr=vh(i.firstChild)):rr=r),To(e,t,t.pendingProps.children,n),Io(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&sr&&((r=i=rr)&&(null!==(i=function(e,t,n,i){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[Be])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===s)return e}if(null===(e=vh(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,or))?(t.stateNode=i,ir=t,rr=vh(i.firstChild),or=!1,r=!0):r=!1),r||cr(t)),X(t),r=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,i=s.children,ah(r,s)?i=null:null!==o&&ah(r,o)&&(t.flags|=32),null!==t.memoizedState&&(r=Rs(e,t,Is,null,null,n),Xh._currentValue=r),Io(e,t),To(e,t,i,n),t.child;case 6:return null===e&&sr&&((e=n=rr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vh(e.nextSibling)))return null}return e}(n,t.pendingProps,or))?(t.stateNode=n,ir=t,rr=null,e=!0):e=!1),e||cr(t)),null;case 13:return zo(e,t,n);case 4:return G(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=to(t,null,i,n):To(e,t,i,n),t.child;case 11:return Mo(e,t,t.type,t.pendingProps,n);case 7:return To(e,t,t.pendingProps,n),t.child;case 8:case 12:return To(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,yr(0,t.type,i.value),To(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Ar(t),i=i(r=Er(r)),t.flags|=1,To(e,t,i,n),t.child;case 14:return Po(e,t,t.type,t.pendingProps,n);case 15:return Ro(e,t,t.type,t.pendingProps,n);case 19:return Xo(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},null===e?((n=Vo(i,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fi(e.child,i)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Oo(e,t,n);case 24:return Ar(t),i=Er(Or),null===e?(null===(r=zr())&&(r=ic,s=Nr(),r.pooledCache=s,s.refCount++,null!==s&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},ns(t),yr(0,Or,r)):(0!==(e.lanes&n)&&(is(e,t),us(t,null,null,n),cs()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),yr(0,Or,i)):(i=s.cache,yr(0,Or,i),i!==r.cache&&xr(t,[Or],n,!0))),To(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function $o(e){e.flags|=4}function Zo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Uh(t)){if(null!==(t=io.current)&&((4194048&sc)===sc?null!==ro:(62914560&sc)!==sc&&0===(536870912&sc)||t!==ro))throw $r=Xr,Gr;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,vc|=t)}function tl(e,t){if(!sr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=65011712&r.subtreeFlags,i|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function il(e,t,n){var i=t.pendingProps;switch(nr(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),wr(Or),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(dr(t)?$o(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,fr())),nl(t),null;case 26:return n=t.memoizedState,null===e?($o(t),null!==n?(nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?($o(t),nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==i&&$o(t),nl(t),t.flags&=-16777217),null;case 27:Y(t),n=V.current;var r=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==i&&$o(t);else{if(!i){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=z.current,dr(t)?ur(t):(e=wh(r,i,n),t.stateNode=e,$o(t))}return nl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&$o(t);else{if(!i){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=z.current,dr(t))ur(t);else{switch(r=ih(V.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=r.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof i.is?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e="string"===typeof i.is?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Oe]=t,e[Ne]=i;e:for(r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&27!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;null===r.sibling;){if(null===r.return||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(eh(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&$o(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&$o(t);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(e=V.current,dr(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(r=ir))switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Oe]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||Ju(e.nodeValue,n)))||cr(t)}else(e=ih(e).createTextNode(i))[Oe]=t,t.stateNode=e}return nl(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=dr(t),null!==i&&null!==i.dehydrated){if(null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[Oe]=t}else pr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),r=!1}else r=fr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==i,e=null!==e&&null!==e.memoizedState,n){r=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return K(),null===e&&Wu(t.stateNode.containerInfo),nl(t),null;case 10:return wr(t.type),nl(t),null;case 19:if(W(co),null===(r=t.memoizedState))return nl(t),null;if(i=0!==(128&t.flags),null===(s=r.rendering))if(i)tl(r,!1);else{if(0!==dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=uo(e))){for(t.flags|=128,tl(r,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Bi(n,e),n=n.sibling;return U(co,1&co.current|2),t.child}e=e.sibling}null!==r.tail&&te()>xc&&(t.flags|=128,i=!0,tl(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=uo(s))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!sr)return nl(t),null}else 2*te()-r.renderingStartTime>xc&&536870912!==n&&(t.flags|=128,i=!0,tl(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=r.last)?e.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=te(),t.sibling=null,e=co.current,U(co,i?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),vs(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&W(Ur),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wr(Or),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function rl(e,t){switch(nr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wr(Or),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return W(co),null;case 4:return K(),null;case 10:return wr(t.type),null;case 22:case 23:return lo(t),vs(),null!==e&&W(Ur),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wr(Or),null;default:return null}}function sl(e,t){switch(nr(t),t.tag){case 3:wr(Or),K();break;case 26:case 27:case 5:Y(t);break;case 4:K();break;case 13:lo(t);break;case 19:W(co);break;case 10:wr(t.type);break;case 22:case 23:lo(t),vs(),null!==e&&W(Ur);break;case 24:wr(Or)}}function al(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){uu(t,t.return,o)}}function ol(e,t,n){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,r=t;var l=n,c=o;try{c()}catch(u){uu(r,l,u)}}}i=i.next}while(i!==s)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ds(t,n)}catch(i){uu(e,e.return,i)}}}function cl(e,t,n){n.props=mo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){uu(e,t,i)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;default:i=e.stateNode}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(r){uu(e,t,r)}}function hl(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"===typeof i)try{i()}catch(r){uu(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){uu(e,t,s)}else n.current=null}function dl(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){uu(e,e.return,r)}}function pl(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,o=null,l=null,c=null,u=null,h=null;for(f in n){var d=n[f];if(n.hasOwnProperty(f)&&null!=d)switch(f){case"checked":case"value":break;case"defaultValue":c=d;default:i.hasOwnProperty(f)||$u(e,t,f,null,i,d)}}for(var p in i){var f=i[p];if(d=n[p],i.hasOwnProperty(p)&&(null!=f||null!=d))switch(p){case"type":s=f;break;case"name":r=f;break;case"checked":u=f;break;case"defaultChecked":h=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:f!==d&&$u(e,t,p,f,i,d)}}return void mt(e,o,l,c,u,h,s,r);case"select":for(s in f=o=l=p=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":f=c;default:i.hasOwnProperty(s)||$u(e,t,s,null,i,c)}for(r in i)if(s=i[r],c=n[r],i.hasOwnProperty(r)&&(null!=s||null!=c))switch(r){case"value":p=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&$u(e,t,r,s,i,c)}return t=l,n=o,i=f,void(null!=p?yt(e,!!n,p,!1):!!i!==!!n&&(null!=t?yt(e,!!n,t,!0):yt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(r=n[l],n.hasOwnProperty(l)&&null!=r&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:$u(e,t,l,null,i,r)}for(o in i)if(r=i[o],s=n[o],i.hasOwnProperty(o)&&(null!=r||null!=s))switch(o){case"value":p=r;break;case"defaultValue":f=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(a(91));break;default:r!==s&&$u(e,t,o,r,i,s)}return void wt(e,p,f);case"option":for(var g in n)if(p=n[g],n.hasOwnProperty(g)&&null!=p&&!i.hasOwnProperty(g))if("selected"===g)e.selected=!1;else $u(e,t,g,null,i,p);for(c in i)if(p=i[c],f=n[c],i.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else $u(e,t,c,p,i,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)p=n[m],n.hasOwnProperty(m)&&null!=p&&!i.hasOwnProperty(m)&&$u(e,t,m,null,i,p);for(u in i)if(p=i[u],f=n[u],i.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:$u(e,t,u,p,i,f)}return;default:if(Et(t)){for(var v in n)p=n[v],n.hasOwnProperty(v)&&void 0!==p&&!i.hasOwnProperty(v)&&Zu(e,t,v,void 0,i,p);for(h in i)p=i[h],f=n[h],!i.hasOwnProperty(h)||p===f||void 0===p&&void 0===f||Zu(e,t,h,p,i,f);return}}for(var b in n)p=n[b],n.hasOwnProperty(b)&&null!=p&&!i.hasOwnProperty(b)&&$u(e,t,b,null,i,p);for(d in i)p=i[d],f=n[d],!i.hasOwnProperty(d)||p===f||null==p&&null==f||$u(e,t,d,p,i,f)}(i,e.type,n,t),i[Ne]=t}catch(r){uu(e,e.return,r)}}function fl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&ph(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&ph(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ml(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qu));else if(4!==i&&(27===i&&ph(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function vl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&(27===i&&ph(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);eh(t,i,n),t[Oe]=e,t[Ne]=n}catch(s){uu(e,e.return,s)}}var yl=!1,wl=!1,_l=!1,xl="function"===typeof WeakSet?WeakSet:Set,kl=null;function Sl(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ll(e,n),4&i&&al(5,n);break;case 1:if(Ll(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){uu(n,n.return,a)}else{var r=mo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){uu(n,n.return,o)}}64&i&&ll(n),512&i&&ul(n,n.return);break;case 3:if(Ll(e,n),64&i&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ds(e,t)}catch(a){uu(n,n.return,a)}}break;case 27:null===t&&4&i&&bl(n);case 26:case 5:Ll(e,n),null===t&&4&i&&dl(n),512&i&&ul(n,n.return);break;case 12:Ll(e,n);break;case 13:Ll(e,n),4&i&&Pl(e,n),64&i&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}(e,n=fu.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||yl)){t=null!==t&&null!==t.memoizedState||wl,r=yl;var s=wl;yl=i,(wl=t)&&!s?Bl(e,n,0!==(8772&n.subtreeFlags)):Ll(e,n),yl=r,wl=s}break;case 30:break;default:Ll(e,n)}}function Al(e){var t=e.alternate;null!==t&&(e.alternate=null,Al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&We(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var El=null,Cl=!1;function Tl(e,t,n){for(n=n.child;null!==n;)Ml(e,t,n),n=n.sibling}function Ml(e,t,n){if(he&&"function"===typeof he.onCommitFiberUnmount)try{he.onCommitFiberUnmount(ue,n)}catch(s){}switch(n.tag){case 26:wl||hl(n,t),Tl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||hl(n,t);var i=El,r=Cl;ph(n.type)&&(El=n.stateNode,Cl=!1),Tl(e,t,n),_h(n.stateNode),El=i,Cl=r;break;case 5:wl||hl(n,t);case 6:if(i=El,r=Cl,El=null,Tl(e,t,n),Cl=r,null!==(El=i))if(Cl)try{(9===El.nodeType?El.body:"HTML"===El.nodeName?El.ownerDocument.body:El).removeChild(n.stateNode)}catch(a){uu(n,t,a)}else try{El.removeChild(n.stateNode)}catch(a){uu(n,t,a)}break;case 18:null!==El&&(Cl?(fh(9===(e=El).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Cd(e)):fh(El,n.stateNode));break;case 4:i=El,r=Cl,El=n.stateNode.containerInfo,Cl=!0,Tl(e,t,n),El=i,Cl=r;break;case 0:case 11:case 14:case 15:wl||ol(2,n,t),wl||ol(4,n,t),Tl(e,t,n);break;case 1:wl||(hl(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount&&cl(n,t,i)),Tl(e,t,n);break;case 21:Tl(e,t,n);break;case 22:wl=(i=wl)||null!==n.memoizedState,Tl(e,t,n),wl=i;break;default:Tl(e,t,n)}}function Pl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Cd(e)}catch(n){uu(t,t.return,n)}}function Rl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new xl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new xl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var i=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}function Ol(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(ph(l.type)){El=l.stateNode,Cl=!1;break e}break;case 5:El=l.stateNode,Cl=!1;break e;case 3:case 4:El=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===El)throw Error(a(160));Ml(s,o,r),El=null,Cl=!1,null!==(s=r.alternate)&&(s.return=null),r.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Il(t,e),t=t.sibling}var Nl=null;function Il(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ol(t,e),Dl(e),4&i&&(ol(3,e,e.return),al(3,e),ol(5,e,e.return));break;case 1:Ol(t,e),Dl(e),512&i&&(wl||null===n||hl(n,n.return)),64&i&&yl&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var r=Nl;if(Ol(t,e),Dl(e),512&i&&(wl||null===n||hl(n,n.return)),4&i){var s=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":(!(s=r.getElementsByTagName("title")[0])||s[Be]||s[Oe]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),eh(s,i,n),s[Oe]=e,qe(s),i=s;break e;case"link":var o=Bh("link","href",r).get(i+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}eh(s=r.createElement(i),i,n),r.head.appendChild(s);break;case"meta":if(o=Bh("meta","content",r).get(i+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}eh(s=r.createElement(i),i,n),r.head.appendChild(s);break;default:throw Error(a(468,i))}s[Oe]=e,qe(s),i=s}e.stateNode=i}else Wh(r,e.type,e.stateNode);else e.stateNode=Ih(r,i,e.memoizedProps);else s!==i?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===i?Wh(r,e.type,e.stateNode):Ih(r,i,e.memoizedProps)):null===i&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ol(t,e),Dl(e),512&i&&(wl||null===n||hl(n,n.return)),null!==n&&4&i&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ol(t,e),Dl(e),512&i&&(wl||null===n||hl(n,n.return)),32&e.flags){r=e.stateNode;try{xt(r,"")}catch(f){uu(e,e.return,f)}}4&i&&null!=e.stateNode&&pl(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&i&&(_l=!0);break;case 6:if(Ol(t,e),Dl(e),4&i){if(null===e.stateNode)throw Error(a(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(f){uu(e,e.return,f)}}break;case 3:if(Fh=null,r=Nl,Nl=Sh(t.containerInfo),Ol(t,e),Nl=r,Dl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Cd(t.containerInfo)}catch(f){uu(e,e.return,f)}_l&&(_l=!1,jl(e));break;case 4:i=Nl,Nl=Sh(e.stateNode.containerInfo),Ol(t,e),Dl(e),Nl=i;break;case 12:default:Ol(t,e),Dl(e);break;case 13:Ol(t,e),Dl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(_c=te()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Rl(e,i)));break;case 22:r=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=yl,h=wl;if(yl=u||r,wl=h||c,Ol(t,e),wl=h,yl=u,Dl(e),8192&i)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||c||yl||wl||Fl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,r)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,p=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(f){uu(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(f){uu(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Rl(e,n))));break;case 19:Ol(t,e),Dl(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Rl(e,i)));case 30:case 21:}}function Dl(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(fl(i)){n=i;break}i=i.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var r=n.stateNode;vl(e,gl(e),r);break;case 5:var s=n.stateNode;32&n.flags&&(xt(s,""),n.flags&=-33),vl(e,gl(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;ml(e,gl(e),o);break;default:throw Error(a(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function jl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;jl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ll(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Fl(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Fl(t);break;case 27:_h(t.stateNode);case 26:case 5:hl(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function Bl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Bl(r,s,n),al(4,s);break;case 1:if(Bl(r,s,n),"function"===typeof(r=(i=s).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){uu(i,i.return,c)}if(null!==(r=(i=s).updateQueue)){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)hs(l[r],o)}catch(c){uu(i,i.return,c)}}n&&64&a&&ll(s),ul(s,s.return);break;case 27:bl(s);case 26:case 5:Bl(r,s,n),n&&null===i&&4&a&&dl(s),ul(s,s.return);break;case 12:Bl(r,s,n);break;case 13:Bl(r,s,n),n&&4&a&&Pl(r,s);break;case 22:null===s.memoizedState&&Bl(r,s,n),ul(s,s.return);break;case 30:break;default:Bl(r,s,n)}t=t.sibling}}function Wl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ir(n))}function Ul(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ir(e))}function zl(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,i),t=t.sibling}function Hl(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:zl(e,t,n,i),2048&r&&al(9,t);break;case 1:case 13:default:zl(e,t,n,i);break;case 3:zl(e,t,n,i),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ir(e)));break;case 12:if(2048&r){zl(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else zl(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?zl(e,t,n,i):ql(e,t):2&s._visibility?zl(e,t,n,i):(s._visibility|=2,Vl(e,t,n,i,0!==(10256&t.subtreeFlags))),2048&r&&Wl(a,t);break;case 24:zl(e,t,n,i),2048&r&&Ul(t.alternate,t)}}function Vl(e,t,n,i,r){for(r=r&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,a=t,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:Vl(s,a,o,l,r),al(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Vl(s,a,o,l,r):ql(s,a):(u._visibility|=2,Vl(s,a,o,l,r)),r&&2048&c&&Wl(a.alternate,a);break;case 24:Vl(s,a,o,l,r),r&&2048&c&&Ul(a.alternate,a);break;default:Vl(s,a,o,l,r)}t=t.sibling}}function ql(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:ql(n,i),2048&r&&Wl(i.alternate,i);break;case 24:ql(n,i),2048&r&&Ul(i.alternate,i);break;default:ql(n,i)}t=t.sibling}}var Gl=8192;function Kl(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 26:Kl(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,n){if(null===zh)throw Error(a(475));var i=zh;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var r=Mh(n.href),s=e.querySelector(Ph(r));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(i.count++,i=Vh.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,void qe(s);s=e.ownerDocument||e,n=Rh(n),(r=xh.get(r))&&jh(n,r),qe(s=s.createElement("link"));var o=s;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),eh(s,"link",n),t.instance=s}null===i.stylesheets&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(i.count++,t=Vh.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}(Nl,e.memoizedState,e.memoizedProps);break;case 5:default:Kl(e);break;case 3:case 4:var t=Nl;Nl=Sh(e.stateNode.containerInfo),Kl(e),Nl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,Kl(e),Gl=t):Kl(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];kl=i,Zl(i,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Ql(e),e=e.sibling}function Ql(e){switch(e.tag){case 0:case 11:case 15:Jl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Jl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,$l(e)):Jl(e)}}function $l(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];kl=i,Zl(i,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),$l(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,$l(t));break;default:$l(t)}e=e.sibling}}function Zl(e,t){for(;null!==kl;){var n=kl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Ir(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,kl=i;else e:for(n=e;null!==kl;){var r=(i=kl).sibling,s=i.return;if(Al(i),i===n){kl=null;break e}if(null!==r){r.return=s,kl=r;break e}kl=s}}}var ec={getCacheForType:function(e){var t=Er(Or),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,ic=null,rc=null,sc=0,ac=0,oc=null,lc=!1,cc=!1,uc=!1,hc=0,dc=0,pc=0,fc=0,gc=0,mc=0,vc=0,bc=null,yc=null,wc=!1,_c=0,xc=1/0,kc=null,Sc=null,Ac=0,Ec=null,Cc=null,Tc=0,Mc=0,Pc=null,Rc=null,Oc=0,Nc=null;function Ic(){if(0!==(2&nc)&&0!==sc)return sc&-sc;if(null!==I.T){return 0!==Lr?Lr:Mu()}return Pe()}function Dc(){0===mc&&(mc=0===(536870912&sc)||sr?xe():536870912);var e=io.current;return null!==e&&(e.flags|=32),mc}function jc(e,t,n){(e!==ic||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(Hc(e,0),Wc(e,sc,mc,!1)),Ae(e,n),0!==(2&nc)&&e===ic||(e===ic&&(0===(2&nc)&&(fc|=n),4===dc&&Wc(e,sc,mc,!1)),xu(e))}function Lc(e,t,n){if(0!==(6&nc))throw Error(a(327));for(var i=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),r=i?function(e,t){var n=nc;nc|=2;var i=qc(),r=Gc();ic!==e||sc!==t?(kc=null,xc=te()+500,Hc(e,t)):cc=we(e,t);e:for(;;)try{if(0!==ac&&null!==rc){t=rc;var s=oc;t:switch(ac){case 1:ac=0,oc=null,Zc(e,t,s,1);break;case 2:case 9:if(Yr(s)){ac=0,oc=null,$c(t);break}t=function(){2!==ac&&9!==ac||ic!==e||(ac=7),xu(e)},s.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Yr(s)?(ac=0,oc=null,$c(t)):(ac=0,oc=null,Zc(e,t,s,7));break;case 5:var o=null;switch(rc.tag){case 26:o=rc.memoizedState;case 5:case 27:var l=rc;if(!o||Uh(o)){ac=0,oc=null;var c=l.sibling;if(null!==c)rc=c;else{var u=l.return;null!==u?(rc=u,eu(u)):rc=null}break t}}ac=0,oc=null,Zc(e,t,s,5);break;case 6:ac=0,oc=null,Zc(e,t,s,6);break;case 8:zc(),dc=6;break e;default:throw Error(a(462))}}Jc();break}catch(h){Vc(e,h)}return br=vr=null,I.H=i,I.A=r,nc=n,null!==rc?0:(ic=null,sc=0,Ti(),dc)}(e,t):Xc(e,t,!0),s=i;;){if(0===r){cc&&!i&&Wc(e,t,0,!1);break}if(n=e.current.alternate,!s||Bc(n)){if(2===r){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;r=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,o).flags|=256),2!==(o=Xc(l,o,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=s,fc|=s,r=4;break e}s=yc,yc=r,null!==s&&(null===yc?yc=s:yc.push.apply(yc,s))}r=o}if(s=!1,2!==r)continue}}if(1===r){Hc(e,0),Wc(e,t,0,!0);break}e:{switch(i=e,s=r){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Wc(i,t,mc,!lc);break e;case 2:yc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(r=_c+300-te())){if(Wc(i,t,mc,!lc),0!==ye(i,0,!0))break e;i.timeoutHandle=lh(Fc.bind(null,i,n,yc,kc,wc,t,mc,fc,vc,lc,s,2,-0,0),r)}else Fc(i,n,yc,kc,wc,t,mc,fc,vc,lc,s,0,-0,0)}break}r=Xc(e,t,!1),s=!1}xu(e)}function Fc(e,t,n,i,r,s,o,l,c,u,h,d,p,f){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||16785408===(16785408&d))&&(zh={stylesheets:null,count:0,unsuspend:Hh},Xl(t),null!==(d=function(){if(null===zh)throw Error(a(475));var e=zh;return e.stylesheets&&0===e.count&&Gh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Gh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=d(nu.bind(null,e,t,s,n,i,r,o,l,c,h,1,p,f)),void Wc(e,s,o,!u);nu(e,t,s,n,i,r,o,l,c)}function Bc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Yn(s(),r))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wc(e,t,n,i){t&=~gc,t&=~fc,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-pe(r),a=1<<s;i[s]=-1,r&=~a}0!==n&&Ee(e,n,t)}function Uc(){return 0!==(6&nc)||(ku(0,!1),!1)}function zc(){if(null!==rc){if(0===ac)var e=rc.return;else br=vr=null,Ls(e=rc),Xa=null,Ya=0,e=rc;for(;null!==e;)sl(e.alternate,e),e=e.return;rc=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ch(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zc(),ic=e,rc=n=Fi(e.current,null),sc=t,ac=0,oc=null,lc=!1,cc=we(e,t),uc=!1,vc=mc=gc=fc=pc=dc=0,yc=bc=null,wc=!1,0!==(8&t)&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var r=31-pe(i),s=1<<r;t|=e[r],i&=~s}return hc=t,Ti(),n}function Vc(e,t){ys=null,I.H=Va,t===qr||t===Kr?(t=Zr(),ac=3):t===Gr?(t=Zr(),ac=4):ac=t===Eo?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===rc&&(dc=1,_o(e,Si(t,e.current)))}function qc(){var e=I.H;return I.H=Va,null===e?Va:e}function Gc(){var e=I.A;return I.A=ec,e}function Kc(){dc=4,lc||(4194048&sc)!==sc&&null!==io.current||(cc=!0),0===(134217727&pc)&&0===(134217727&fc)||null===ic||Wc(ic,sc,mc,!1)}function Xc(e,t,n){var i=nc;nc|=2;var r=qc(),s=Gc();ic===e&&sc===t||(kc=null,Hc(e,t)),t=!1;var a=dc;e:for(;;)try{if(0!==ac&&null!==rc){var o=rc,l=oc;switch(ac){case 8:zc(),a=6;break e;case 3:case 2:case 9:case 6:null===io.current&&(t=!0);var c=ac;if(ac=0,oc=null,Zc(e,o,l,c),n&&cc){a=0;break e}break;default:c=ac,ac=0,oc=null,Zc(e,o,l,c)}}Yc(),a=dc;break}catch(u){Vc(e,u)}return t&&e.shellSuspendCounter++,br=vr=null,nc=i,I.H=r,I.A=s,null===rc&&(ic=null,sc=0,Ti()),a}function Yc(){for(;null!==rc;)Qc(rc)}function Jc(){for(;null!==rc&&!Z();)Qc(rc)}function Qc(e){var t=Qo(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?eu(e):rc=t}function $c(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=jo(n,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=jo(n,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Ls(t);default:sl(n,t),t=Qo(n,t=rc=Bi(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?eu(e):rc=t}function Zc(e,t,n,i){br=vr=null,Ls(t),Xa=null,Ya=0;var r=t.return;try{if(function(e,t,n,i,r){if(n.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){if(null!==(t=n.alternate)&&kr(t,n,r,!0),null!==(n=io.current)){switch(n.tag){case 13:return null===ro?Kc():null===n.alternate&&0===dc&&(dc=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Xr?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),hu(e,i,r)),!1;case 22:return n.flags|=65536,i===Xr?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),hu(e,i,r)),!1}throw Error(a(435,n.tag))}return hu(e,i,r),Kc(),!1}if(sr)return null!==(t=io.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==lr&&gr(Si(e=Error(a(422),{cause:i}),n))):(i!==lr&&gr(Si(t=Error(a(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,i=Si(i,n),os(e,r=ko(e.stateNode,i,r)),4!==dc&&(dc=2)),!1;var s=Error(a(520),{cause:i});if(s=Si(s,n),null===bc?bc=[s]:bc.push(s),4!==dc&&(dc=2),null===t)return!0;i=Si(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,os(n,e=ko(n.stateNode,i,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Sc||!Sc.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,Ao(r=So(r),e,n,i),os(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,sc))return dc=1,_o(e,Si(n,e.current)),void(rc=null)}catch(s){if(null!==r)throw rc=r,s;return dc=1,_o(e,Si(n,e.current)),void(rc=null)}32768&t.flags?(sr||1===i?e=!0:cc||0!==(536870912&sc)?e=!1:(lc=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=io.current)&&13===i.tag&&(i.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=il(t.alternate,t,hc);if(null!==n)return void(rc=n);if(null!==(t=t.sibling))return void(rc=t);rc=t=e}while(null!==t);0===dc&&(dc=5)}function tu(e,t){do{var n=rl(e.alternate,e);if(null!==n)return n.flags&=32767,void(rc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(rc=e);rc=e=n}while(null!==e);dc=6,rc=null}function nu(e,t,n,i,r,s,o,l,c){e.cancelPendingCommit=null;do{ou()}while(0!==Ac);if(0!==(6&nc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(s=t.lanes|t.childLanes,function(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-pe(n),h=1<<u;o[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var p=d[u];null!==p&&(p.lane&=-536870913)}n&=~h}0!==i&&Ee(e,i,0),0!==s&&0===r&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,s|=Ci,o,l,c),e===ic&&(rc=ic=null,sc=0),Cc=t,Ec=e,Tc=n,Mc=s,Pc=r,Rc=i,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Q(se,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),i=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||i){i=I.T,I.T=null,r=D.p,D.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,th=nd,ti(e=ei(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(m){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(l=o+r),d!==s||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===r&&(l=o),p===s&&++h===i&&(c=o),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nh={focusedElem:e,selectionRange:n},nd=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(s=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var g=mo(n.type,r,(n.elementType,n.type));e=i.getSnapshotBeforeUpdate(g,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(v){uu(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{nc=o,D.p=r,I.T=i}}Ac=1,iu(),ru(),su()}}function iu(){if(1===Ac){Ac=0;var e=Ec,t=Cc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=I.T,I.T=null;var i=D.p;D.p=2;var r=nc;nc|=4;try{Il(t,e);var s=nh,a=ei(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&ti(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var h=o.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var p=d.getSelection(),f=o.textContent.length,g=Math.min(l.start,f),m=void 0===l.end?g:Math.min(l.end,f);!p.extend&&g>m&&(a=m,m=g,g=a);var v=$n(o,g),b=$n(o,m);if(v&&b&&(1!==p.rangeCount||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==b.node||p.focusOffset!==b.offset)){var y=h.createRange();y.setStart(v.node,v.offset),p.removeAllRanges(),g>m?(p.addRange(y),p.extend(b.node,b.offset)):(y.setEnd(b.node,b.offset),p.addRange(y))}}}}for(h=[],p=o;p=p.parentNode;)1===p.nodeType&&h.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<h.length;o++){var w=h[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}nd=!!th,nh=th=null}finally{nc=r,D.p=i,I.T=n}}e.current=t,Ac=2}}function ru(){if(2===Ac){Ac=0;var e=Ec,t=Cc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=I.T,I.T=null;var i=D.p;D.p=2;var r=nc;nc|=4;try{Sl(e,t.alternate,t)}finally{nc=r,D.p=i,I.T=n}}Ac=3}}function su(){if(4===Ac||3===Ac){Ac=0,ee();var e=Ec,t=Cc,n=Tc,i=Rc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Ac=5:(Ac=0,Cc=Ec=null,au(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(Sc=null),Me(n),t=t.stateNode,he&&"function"===typeof he.onCommitFiberRoot)try{he.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==i){t=I.T,r=D.p,D.p=2,I.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{I.T=t,D.p=r}}0!==(3&Tc)&&ou(),xu(e),r=e.pendingLanes,0!==(4194090&n)&&0!==(42&r)?e===Nc?Oc++:(Oc=0,Nc=e):Oc=0,ku(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ir(t)))}function ou(e){return iu(),ru(),su(),lu()}function lu(){if(5!==Ac)return!1;var e=Ec,t=Mc;Mc=0;var n=Me(Tc),i=I.T,r=D.p;try{D.p=32>n?32:n,I.T=null,n=Pc,Pc=null;var s=Ec,o=Tc;if(Ac=0,Cc=Ec=null,Tc=0,0!==(6&nc))throw Error(a(331));var l=nc;if(nc|=4,Ql(s.current),Hl(s,s.current,o,n),nc=l,ku(0,!1),he&&"function"===typeof he.onPostCommitFiberRoot)try{he.onPostCommitFiberRoot(ue,s)}catch(c){}return!0}finally{D.p=r,I.T=i,au(e,t)}}function cu(e,t,n){t=Si(n,t),null!==(e=ss(e,t=ko(e.stateNode,t,2),2))&&(Ae(e,2),xu(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Sc||!Sc.has(i))){e=Si(n,e),null!==(i=ss(t,n=So(2),2))&&(Ao(n,i,t,e),Ae(i,2),xu(i));break}}t=t.return}}function hu(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new tc;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(uc=!0,r.add(n),e=du.bind(null,e,t,n),t.then(e,e))}function du(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ic===e&&(sc&n)===n&&(4===dc||3===dc&&(62914560&sc)===sc&&300>te()-_c?0===(2&nc)&&Hc(e,0):gc|=n,vc===sc&&(vc=0)),xu(e)}function pu(e,t){0===t&&(t=ke()),null!==(e=Ri(e,t))&&(Ae(e,t),xu(e))}function fu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==i&&i.delete(t),pu(e,n)}var mu=null,vu=null,bu=!1,yu=!1,wu=!1,_u=0;function xu(e){e!==vu&&null===e.next&&(null===vu?mu=vu=e:vu=vu.next=e),yu=!0,bu||(bu=!0,hh(function(){0!==(6&nc)?Q(ie,Su):Au()}))}function ku(e,t){if(!wu&&yu){wu=!0;do{for(var n=!1,i=mu;null!==i;){if(!t)if(0!==e){var r=i.pendingLanes;if(0===r)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-pe(42|e)+1)-1,s=201326741&(s&=r&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Tu(i,s))}else s=sc,0===(3&(s=ye(i,i===ic?s:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||we(i,s)||(n=!0,Tu(i,s));i=i.next}}while(n);wu=!1}}function Su(){Au()}function Au(){yu=bu=!1;var e=0;0!==_u&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==oh&&(oh=e,!0);return oh=null,!1}()&&(e=_u),_u=0);for(var t=te(),n=null,i=mu;null!==i;){var r=i.next,s=Eu(i,t);0===s?(i.next=null,null===n?mu=r:n.next=r,null===r&&(vu=n)):(n=i,(0!==e||0!==(3&s))&&(yu=!0)),i=r}ku(e,!1)}function Eu(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-pe(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=_e(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=sc,n=ye(e,e===(t=ic)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),i=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&$(i),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&$(i),Me(n)){case 2:case 8:n=re;break;case 32:default:n=se;break;case 268435456:n=oe}return i=Cu.bind(null,e),n=Q(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&$(i),e.callbackPriority=2,e.callbackNode=null,2}function Cu(e,t){if(0!==Ac&&5!==Ac)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ou()&&e.callbackNode!==n)return null;var i=sc;return 0===(i=ye(e,e===ic?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Lc(e,i,t),Eu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Cu.bind(null,e):null)}function Tu(e,t){if(ou())return null;Lc(e,t,!0)}function Mu(){return 0===_u&&(_u=xe()),_u}function Pu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Mt(""+e)}function Ru(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ou=0;Ou<_i.length;Ou++){var Nu=_i[Ou];xi(Nu.toLowerCase(),"on"+(Nu[0].toUpperCase()+Nu.slice(1)))}xi(pi,"onAnimationEnd"),xi(fi,"onAnimationIteration"),xi(gi,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(mi,"onTransitionRun"),xi(vi,"onTransitionStart"),xi(bi,"onTransitionCancel"),xi(yi,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Xe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Du=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Iu));function ju(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(u){vo(u)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(u){vo(u)}r.currentTarget=null,s=l}}}}function Lu(e,t){var n=t[De];void 0===n&&(n=t[De]=new Set);var i=e+"__bubble";n.has(i)||(Uu(t,e,2,!1),n.add(i))}function Fu(e,t,n){var i=0;t&&(i|=4),Uu(n,e,i,t)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Wu(e){if(!e[Bu]){e[Bu]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(Du.has(t)||Fu(t,!1,e),Fu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bu]||(t[Bu]=!0,Fu("selectionchange",!1,t))}}function Uu(e,t,n,i){switch(cd(t)){case 2:var r=id;break;case 8:r=rd;break;default:r=sd}n=r.bind(null,t,n,e),r=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function zu(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r)break;if(4===a)for(a=i.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===r)return;a=a.return}for(;null!==o;){if(null===(a=Ue(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){i=s=a;continue e}o=o.parentNode}}i=i.return}jt(function(){var i=s,r=Rt(n),a=[];e:{var o=wi.get(e);if(void 0!==o){var c=Zt,u=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":c=gn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case pi:case fi:case gi:c=on;break;case yi:c=bn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=yn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=mn;break;case"toggle":case"beforetoggle":c=wn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),p=h?null!==o?o+"Capture":null:o;h=[];for(var f,g=i;null!==g;){var m=g;if(f=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===f||null===p||null!=(m=Lt(g,p))&&h.push(Hu(g,m,f)),d)break;g=g.return}0<h.length&&(o=new c(o,u,null,n,r),a.push({event:o,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Pt||!(u=n.relatedTarget||n.fromElement)||!Ue(u)&&!u[Ie])&&(c||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=i,null!==(u=(u=n.relatedTarget||n.toElement)?Ue(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=i),c!==u)){if(h=rn,m="onMouseLeave",p="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(h=mn,m="onPointerLeave",p="onPointerEnter",g="pointer"),d=null==c?o:He(c),f=null==u?o:He(u),(o=new h(m,g+"leave",c,n,r)).target=d,o.relatedTarget=f,m=null,Ue(r)===i&&((h=new h(p,g+"enter",u,n,r)).target=f,h.relatedTarget=d,m=h),d=m,c&&u)e:{for(p=u,g=0,f=h=c;f;f=qu(f))g++;for(f=0,m=p;m;m=qu(m))f++;for(;0<g-f;)h=qu(h),g--;for(;0<f-g;)p=qu(p),f--;for(;g--;){if(h===p||null!==p&&h===p.alternate)break e;h=qu(h),p=qu(p)}h=null}else h=null;null!==c&&Gu(a,o,c,h,!1),null!==u&&null!==d&&Gu(a,d,u,h,!0)}if("select"===(c=(o=i?He(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Fn;else if(On(o))if(Bn)v=Xn;else{v=Gn;var b=qn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?i&&Et(i.elementType)&&(v=Fn):v=Kn;switch(v&&(v=v(e,i))?Nn(a,v,n,r):(b&&b(e,o,i),"focusout"===e&&i&&"number"===o.type&&null!=i.memoizedProps.value&&bt(o,"number",o.value)),b=i?He(i):window,e){case"focusin":(On(b)||"true"===b.contentEditable)&&(ii=b,ri=i,si=null);break;case"focusout":si=ri=ii=null;break;case"mousedown":ai=!0;break;case"contextmenu":case"mouseup":case"dragend":ai=!1,oi(a,n,r);break;case"selectionchange":if(ni)break;case"keydown":case"keyup":oi(a,n,r)}var y;if(xn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Pn?Tn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(An&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Pn&&(y=Vt()):(zt="value"in(Ut=r)?Ut.value:Ut.textContent,Pn=!0)),0<(b=Vu(i,w)).length&&(w=new cn(w,e,null,n,r),a.push({event:w,listeners:b}),y?w.data=y:null!==(y=Mn(n))&&(w.data=y))),(y=Sn?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(Cn=!0,En);case"textInput":return(e=t.data)===En&&Cn?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!xn&&Tn(e,t)?(e=Vt(),Ht=zt=Ut=null,Pn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return An&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Vu(i,"onBeforeInput")).length&&(b=new cn("onBeforeInput","beforeinput",null,n,r),a.push({event:b,listeners:w}),b.data=y)),function(e,t,n,i,r){if("submit"===t&&n&&n.stateNode===r){var s=Pu((r[Ne]||null).action),a=i.submitter;a&&null!==(t=(t=a[Ne]||null)?Pu(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new Zt("action","action",null,i,r);e.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==_u){var e=a?Ru(r,a):new FormData(r);Pa(n,{pending:!0,data:e,method:r.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=a?Ru(r,a):new FormData(r),Pa(n,{pending:!0,data:e,method:r.method,action:s},s,e))},currentTarget:r}]})}}(a,e,i,n,r)}ju(a,t)})}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vu(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===s||(null!=(r=Lt(e,n))&&i.unshift(Hu(e,r,s)),null!=(r=Lt(e,t))&&i.push(Hu(e,r,s))),3===e.tag)return i;e=e.return}return[]}function qu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gu(e,t,n,i,r){for(var s=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===i)break;5!==o&&26!==o&&27!==o||null===c||(l=c,r?null!=(c=Lt(n,s))&&a.unshift(Hu(n,c,l)):r||null!=(c=Lt(n,s))&&a.push(Hu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Ku=/\r\n?/g,Xu=/\u0000|\uFFFD/g;function Yu(e){return("string"===typeof e?e:""+e).replace(Ku,"\n").replace(Xu,"")}function Ju(e,t){return t=Yu(t),Yu(e)===t}function Qu(){}function $u(e,t,n,i,r,s){switch(n){case"children":"string"===typeof i?"body"===t||"textarea"===t&&""===i||xt(e,i):("number"===typeof i||"bigint"===typeof i)&&"body"!==t&&xt(e,""+i);break;case"className":nt(e,"class",i);break;case"tabIndex":nt(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,i);break;case"style":At(e,i,s);break;case"data":if("object"!==t){nt(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"===typeof i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=Mt(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"===typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&$u(e,t,"name",r.name,r,null),$u(e,t,"formEncType",r.formEncType,r,null),$u(e,t,"formMethod",r.formMethod,r,null),$u(e,t,"formTarget",r.formTarget,r,null)):($u(e,t,"encType",r.encType,r,null),$u(e,t,"method",r.method,r,null),$u(e,t,"target",r.target,r,null))),null==i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=Mt(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=Qu);break;case"onScroll":null!=i&&Lu("scroll",e);break;case"onScrollEnd":null!=i&&Lu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(a(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"muted":e.muted=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"===typeof i||"boolean"===typeof i||"symbol"===typeof i){e.removeAttribute("xlink:href");break}n=Mt(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"===typeof i||"symbol"===typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Lu("beforetoggle",e),Lu("toggle",e),tt(e,"popover",i);break;case"xlinkActuate":it(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":it(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":it(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":it(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":it(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":it(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":it(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":it(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":it(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":tt(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,i)}}function Zu(e,t,n,i,r,s){switch(n){case"style":At(e,i,s);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(a(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof i?xt(e,i):("number"===typeof i||"bigint"===typeof i)&&xt(e,""+i);break;case"onScroll":null!=i&&Lu("scroll",e);break;case"onScrollEnd":null!=i&&Lu("scrollend",e);break;case"onClick":null!=i&&(e.onclick=Qu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Ne]||null)?s[n]:null)&&e.removeEventListener(t,s,r),"function"!==typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):tt(e,n,i):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r)))}}function eh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lu("error",e),Lu("load",e);var i,r=!1,s=!1;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(null!=o)switch(i){case"src":r=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:$u(e,t,i,o,n,null)}}return s&&$u(e,t,"srcSet",n.srcSet,n,null),void(r&&$u(e,t,"src",n.src,n,null));case"input":Lu("invalid",e);var l=i=o=s=null,c=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var h=n[r];if(null!=h)switch(r){case"name":s=h;break;case"type":o=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":i=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(a(137,t));break;default:$u(e,t,r,h,n,null)}}return vt(e,i,l,c,u,o,s,!1),void ht(e);case"select":for(s in Lu("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":r=l;default:$u(e,t,s,l,n,null)}return t=i,n=o,e.multiple=!!r,void(null!=t?yt(e,!!r,t,!1):null!=n&&yt(e,!!r,n,!0));case"textarea":for(o in Lu("invalid",e),i=s=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":s=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:$u(e,t,o,l,n,null)}return _t(e,r,s,i),void ht(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))if("selected"===c)e.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else $u(e,t,c,r,n,null);return;case"dialog":Lu("beforetoggle",e),Lu("toggle",e),Lu("cancel",e),Lu("close",e);break;case"iframe":case"object":Lu("load",e);break;case"video":case"audio":for(r=0;r<Iu.length;r++)Lu(Iu[r],e);break;case"image":Lu("error",e),Lu("load",e);break;case"details":Lu("toggle",e);break;case"embed":case"source":case"link":Lu("error",e),Lu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(r=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:$u(e,t,u,r,n,null)}return;default:if(Et(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(r=n[h])&&Zu(e,t,h,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(r=n[l])&&$u(e,t,l,r,n,null))}var th=null,nh=null;function ih(e){return 9===e.nodeType?e:e.ownerDocument}function rh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ah(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var oh=null;var lh="function"===typeof setTimeout?setTimeout:void 0,ch="function"===typeof clearTimeout?clearTimeout:void 0,uh="function"===typeof Promise?Promise:void 0,hh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof uh?function(e){return uh.resolve(null).then(e).catch(dh)}:lh;function dh(e){setTimeout(function(){throw e})}function ph(e){return"head"===e}function fh(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(1&n&&_h(a.documentElement),2&n&&_h(a.body),4&n)for(_h(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Be]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===r)return e.removeChild(s),void Cd(t);r--}else"$"===n||"$?"===n||"$!"===n?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);Cd(t)}function gh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gh(n),We(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function mh(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bh=null;function yh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wh(e,t,n){switch(t=ih(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function _h(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);We(e)}var xh=new Map,kh=new Set;function Sh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Ah=D.d;D.d={f:function(){var e=Ah.f(),t=Uc();return e||t},r:function(e){var t=ze(e);null!==t&&5===t.tag&&"form"===t.type?Oa(t):Ah.r(e)},D:function(e){Ah.D(e),Ch("dns-prefetch",e,null)},C:function(e,t){Ah.C(e,t),Ch("preconnect",e,t)},L:function(e,t,n){Ah.L(e,t,n);var i=Eh;if(i&&e&&t){var r='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(r+='[imagesizes="'+gt(n.imageSizes)+'"]')):r+='[href="'+gt(e)+'"]';var s=r;switch(t){case"style":s=Mh(e);break;case"script":s=Oh(e)}xh.has(s)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),xh.set(s,e),null!==i.querySelector(r)||"style"===t&&i.querySelector(Ph(s))||"script"===t&&i.querySelector(Nh(s))||(eh(t=i.createElement("link"),"link",e),qe(t),i.head.appendChild(t)))}},m:function(e,t){Ah.m(e,t);var n=Eh;if(n&&e){var i=t&&"string"===typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+gt(i)+'"][href="'+gt(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Oh(e)}if(!xh.has(s)&&(e=d({rel:"modulepreload",href:e},t),xh.set(s,e),null===n.querySelector(r))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Nh(s)))return}eh(i=n.createElement("link"),"link",e),qe(i),n.head.appendChild(i)}}},X:function(e,t){Ah.X(e,t);var n=Eh;if(n&&e){var i=Ve(n).hoistableScripts,r=Oh(e),s=i.get(r);s||((s=n.querySelector(Nh(r)))||(e=d({src:e,async:!0},t),(t=xh.get(r))&&Lh(e,t),qe(s=n.createElement("script")),eh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}},S:function(e,t,n){Ah.S(e,t,n);var i=Eh;if(i&&e){var r=Ve(i).hoistableStyles,s=Mh(e);t=t||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(Ph(s)))o.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=xh.get(s))&&jh(e,n);var l=a=i.createElement("link");qe(l),eh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Dh(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}},M:function(e,t){Ah.M(e,t);var n=Eh;if(n&&e){var i=Ve(n).hoistableScripts,r=Oh(e),s=i.get(r);s||((s=n.querySelector(Nh(r)))||(e=d({src:e,async:!0,type:"module"},t),(t=xh.get(r))&&Lh(e,t),qe(s=n.createElement("script")),eh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}};var Eh="undefined"===typeof document?null:document;function Ch(e,t,n){var i=Eh;if(i&&"string"===typeof t&&t){var r=gt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"===typeof n&&(r+='[crossorigin="'+n+'"]'),kh.has(r)||(kh.add(r),e={rel:e,crossOrigin:n,href:t},null===i.querySelector(r)&&(eh(t=i.createElement("link"),"link",e),qe(t),i.head.appendChild(t)))}}function Th(e,t,n,i){var r,s,o,l,c=(c=V.current)?Sh(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Mh(n.href),(i=(n=Ve(c).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Mh(n.href);var u=Ve(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Ph(e)))&&!u._p&&(h.instance=u,h.state.loading=5),xh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},xh.set(e,n),u||(r=c,s=e,o=n,l=h.state,r.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=r.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),eh(s,"link",o),qe(s),r.head.appendChild(s))))),t&&null===i)throw Error(a(528,""));return h}if(t&&null!==i)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Oh(n),(i=(n=Ve(c).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Mh(e){return'href="'+gt(e)+'"'}function Ph(e){return'link[rel="stylesheet"]['+e+"]"}function Rh(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Oh(e){return'[src="'+gt(e)+'"]'}function Nh(e){return"script[async]"+e}function Ih(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(i)return t.instance=i,qe(i),i;var r=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return qe(i=(e.ownerDocument||e).createElement("style")),eh(i,"style",r),Dh(i,n.precedence,e),t.instance=i;case"stylesheet":r=Mh(n.href);var s=e.querySelector(Ph(r));if(s)return t.state.loading|=4,t.instance=s,qe(s),s;i=Rh(n),(r=xh.get(r))&&jh(i,r),qe(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),eh(s,"link",i),t.state.loading|=4,Dh(s,n.precedence,e),t.instance=s;case"script":return s=Oh(n.src),(r=e.querySelector(Nh(s)))?(t.instance=r,qe(r),r):(i=n,(r=xh.get(s))&&Lh(i=d({},n),r),qe(r=(e=e.ownerDocument||e).createElement("script")),eh(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,Dh(i,n.precedence,e));return t.instance}function Dh(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===t)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function jh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Lh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fh=null;function Bh(e,t,n){if(null===Fh){var i=new Map,r=Fh=new Map;r.set(n,i)}else(i=(r=Fh).get(n))||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Be]||s[Oe]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function Wh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Uh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var zh=null;function Hh(){}function Vh(){if(this.count--,0===this.count)if(this.stylesheets)Gh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var qh=null;function Gh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,qh=new Map,t.forEach(Kh,e),qh=null,Vh.call(e))}function Kh(e,t){if(!(4&t.state.loading)){var n=qh.get(e);if(n)var i=n.get(null);else{n=new Map,qh.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}a=(r=t.instance).getAttribute("data-precedence"),(s=n.get(a)||i)===i&&n.set(null,r),n.set(a,r),this.count++,i=Vh.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var Xh={$$typeof:_,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function Yh(e,t,n,i,r,s,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Jh(e,t,n,i,r,s,a,o,l,c,u,h){return e=new Yh(e,t,n,a,o,l,c,h),t=1,!0===s&&(t|=24),s=ji(3,null,null,t),e.current=s,s.stateNode=e,(t=Nr()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},ns(s),e}function Qh(e){return e?e=Ii:Ii}function $h(e,t,n,i,r,s){r=Qh(r),null===i.context?i.context=r:i.pendingContext=r,(i=rs(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(i.callback=s),null!==(n=ss(e,i,t))&&(jc(n,0,t),as(n,e,t))}function Zh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ed(e,t){Zh(e,t),(e=e.alternate)&&Zh(e,t)}function td(e){if(13===e.tag){var t=Ri(e,67108864);null!==t&&jc(t,0,67108864),ed(e,67108864)}}var nd=!0;function id(e,t,n,i){var r=I.T;I.T=null;var s=D.p;try{D.p=2,sd(e,t,n,i)}finally{D.p=s,I.T=r}}function rd(e,t,n,i){var r=I.T;I.T=null;var s=D.p;try{D.p=8,sd(e,t,n,i)}finally{D.p=s,I.T=r}}function sd(e,t,n,i){if(nd){var r=ad(i);if(null===r)zu(e,t,i,od,n),bd(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return hd=yd(hd,e,t,n,i,r),!0;case"dragenter":return dd=yd(dd,e,t,n,i,r),!0;case"mouseover":return pd=yd(pd,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return fd.set(s,yd(fd.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,gd.set(s,yd(gd.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(bd(e,i),4&t&&-1<vd.indexOf(e)){for(;null!==r;){var s=ze(r);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=be(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-pe(a);o.entanglements[1]|=l,a&=~l}xu(s),0===(6&nc)&&(xc=te()+500,ku(0,!1))}}break;case 13:null!==(o=Ri(s,2))&&jc(o,0,2),Uc(),ed(s,2)}if(null===(s=ad(i))&&zu(e,t,i,od,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else zu(e,t,i,null,n)}}function ad(e){return ld(e=Rt(e))}var od=null;function ld(e){if(od=null,null!==(e=Ue(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return od=e,null}function cd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case ie:return 2;case re:return 8;case se:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var ud=!1,hd=null,dd=null,pd=null,fd=new Map,gd=new Map,md=[],vd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bd(e,t){switch(e){case"focusin":case"focusout":hd=null;break;case"dragenter":case"dragleave":dd=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":fd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gd.delete(t.pointerId)}}function yd(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=ze(t))&&td(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function wd(e){var t=Ue(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,function(){if(13===n.tag){var e=Ic();e=Te(e);var t=Ri(n,e);null!==t&&jc(t,0,e),ed(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function _d(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ad(e.nativeEvent);if(null!==n)return null!==(t=ze(n))&&td(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Pt=i,n.target.dispatchEvent(i),Pt=null,t.shift()}return!0}function xd(e,t,n){_d(e)&&n.delete(t)}function kd(){ud=!1,null!==hd&&_d(hd)&&(hd=null),null!==dd&&_d(dd)&&(dd=null),null!==pd&&_d(pd)&&(pd=null),fd.forEach(xd),gd.forEach(xd)}function Sd(e,t){e.blockedOn===t&&(e.blockedOn=null,ud||(ud=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,kd)))}var Ad=null;function Ed(e){Ad!==e&&(Ad=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ad===e&&(Ad=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if("function"!==typeof i){if(null===ld(i||n))continue;break}var s=ze(n);null!==s&&(e.splice(t,3),t-=3,Pa(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Cd(e){function t(t){return Sd(t,e)}null!==hd&&Sd(hd,e),null!==dd&&Sd(dd,e),null!==pd&&Sd(pd,e),fd.forEach(t),gd.forEach(t);for(var n=0;n<md.length;n++){var i=md[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<md.length&&null===(n=md[0]).blockedOn;)wd(n),null===n.blockedOn&&md.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Ne]||null;if("function"===typeof s)a||Ed(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Ne]||null)o=a.formAction;else if(null!==ld(r))continue}else o=a.action;"function"===typeof o?n[i+1]=o:(n.splice(i,3),i-=3),Ed(n)}}}function Td(e){this._internalRoot=e}function Md(e){this._internalRoot=e}Md.prototype.render=Td.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));$h(t.current,Ic(),e,t,null,null)},Md.prototype.unmount=Td.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;$h(e.current,2,null,e,null,null),Uc(),t[Ie]=null}},Md.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<md.length&&0!==t&&t<md[n].priority;n++);md.splice(n,0,e),0===n&&wd(e)}};var Pd=r.version;if("19.1.1"!==Pd)throw Error(a(527,Pd,"19.1.1"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return u(r),e;if(s===i)return u(r),t;s=s.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,c=r.child;c;){if(c===n){o=!0,n=r,i=s;break}if(c===i){o=!0,i=r,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,i=r;break}if(c===i){o=!0,i=s,n=r;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Rd={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Od.isDisabled&&Od.supportsFiber)try{ue=Od.inject(Rd),he=Od}catch(Id){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,i="",r=bo,s=yo,l=wo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Jh(e,1,!1,null,0,n,i,r,s,l,0,null),e[Ie]=t.current,Wu(e),new Td(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var i=!1,r="",s=bo,l=yo,c=wo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Jh(e,1,!0,t,0,i,r,s,l,c,0,u)).context=Qh(null),n=t.current,(r=rs(i=Te(i=Ic()))).callback=null,ss(n,r,i),n=i,t.current.lanes=n,Ae(t,n),xu(t),e[Ie]=t.current,Wu(e),new Md(t)},t.version="19.1.1"},91:function(e,t,n){var i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.isIOS=t.useThumbOverlap=t.assertUnreachable=t.voidFn=t.getTrackBackground=t.replaceAt=t.schd=t.translate=t.getClosestThumbIndex=t.translateThumbs=t.getPaddingAndBorder=t.getMargin=t.checkInitialOverlap=t.checkValuesAgainstBoundaries=t.checkBoundaries=t.isVertical=t.relativeValue=t.normalizeValue=t.isStepDivisible=t.isTouchEvent=t.getStepDecimals=void 0;var r=n(950),s=n(111);function a(e){return e===s.Direction.Up||e===s.Direction.Down}function o(e,t,n){e.style.transform="translate(".concat(t,"px, ").concat(n,"px)")}t.getStepDecimals=function(e){var t=e.toString().split(".")[1];return t?t.length:0},t.isTouchEvent=function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length},t.isStepDivisible=function(e,t,n){var i=Number(((t-e)/n).toFixed(8));return parseInt(i.toString(),10)===i},t.normalizeValue=function(e,n,i,r,s,a,o){var l=1e11;if(e=Math.round(e*l)/l,!a){var c=o[n-1],u=o[n+1];if(c&&c>e)return c;if(u&&u<e)return u}if(e>r)return r;if(e<i)return i;var h=Math.floor(e*l-i*l)%Math.floor(s*l),d=Math.floor(e*l-Math.abs(h)),p=0===h?e:d/l,f=Math.abs(h/l)<s/2?p:p+s,g=(0,t.getStepDecimals)(s);return parseFloat(f.toFixed(g))},t.relativeValue=function(e,t,n){return(e-t)/(n-t)},t.isVertical=a,t.checkBoundaries=function(e,t,n){if(t>=n)throw new RangeError("min (".concat(t,") is equal/bigger than max (").concat(n,")"));if(e<t)throw new RangeError("value (".concat(e,") is smaller than min (").concat(t,")"));if(e>n)throw new RangeError("value (".concat(e,") is bigger than max (").concat(n,")"))},t.checkValuesAgainstBoundaries=function(e,t,n){return e<t?t:e>n?n:e},t.checkInitialOverlap=function(e){if(!(e.length<2)&&!e.slice(1).every(function(t,n){return e[n]<=t}))throw new RangeError("values={[".concat(e,"]} needs to be sorted when allowOverlap={false}"))},t.getMargin=function(e){var t=window.getComputedStyle(e);return{top:parseInt(t["margin-top"],10),bottom:parseInt(t["margin-bottom"],10),left:parseInt(t["margin-left"],10),right:parseInt(t["margin-right"],10)}},t.getPaddingAndBorder=function(e){var t=window.getComputedStyle(e);return{top:parseInt(t["padding-top"],10)+parseInt(t["border-top-width"],10),bottom:parseInt(t["padding-bottom"],10)+parseInt(t["border-bottom-width"],10),left:parseInt(t["padding-left"],10)+parseInt(t["border-left-width"],10),right:parseInt(t["padding-right"],10)+parseInt(t["border-right-width"],10)}},t.translateThumbs=function(e,t,n){var i=n?-1:1;e.forEach(function(e,n){return o(e,i*t[n].x,t[n].y)})},t.getClosestThumbIndex=function(e,t,n,i){for(var r=0,s=c(e[0],t,n,i),a=1;a<e.length;a++){var o=c(e[a],t,n,i);o<s&&(s=o,r=a)}return r},t.translate=o;t.schd=function(e){var t=[],n=null;return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];t=i,n||(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))}},t.replaceAt=function(e,t,n){var i=e.slice(0);return i[t]=n,i},t.getTrackBackground=function(e){var t=e.values,n=e.colors,i=e.min,r=e.max,a=e.direction,o=void 0===a?s.Direction.Right:a,l=e.rtl,c=void 0!==l&&l;c&&o===s.Direction.Right?o=s.Direction.Left:c&&s.Direction.Left&&(o=s.Direction.Right);var u=t.slice(0).sort(function(e,t){return e-t}).map(function(e){return(e-i)/(r-i)*100}).reduce(function(e,t,i){return"".concat(e,", ").concat(n[i]," ").concat(t,"%, ").concat(n[i+1]," ").concat(t,"%")},"");return"linear-gradient(".concat(o,", ").concat(n[0]," 0%").concat(u,", ").concat(n[n.length-1]," 100%)")},t.voidFn=function(){},t.assertUnreachable=function(e){throw new Error("Didn't expect to get here")};var l=function(e,t,n,r,s){return void 0===s&&(s=function(e){return e}),Math.ceil(i([e],Array.from(e.children),!0).reduce(function(e,i){var a=Math.ceil(i.getBoundingClientRect().width);if(i.innerText&&i.innerText.includes(n)&&0===i.childElementCount){var o=i.cloneNode(!0);o.innerHTML=s(t.toFixed(r)),o.style.visibility="hidden",document.body.appendChild(o),a=Math.ceil(o.getBoundingClientRect().width),document.body.removeChild(o)}return a>e?a:e},e.getBoundingClientRect().width))};function c(e,t,n,i){var r=e.getBoundingClientRect(),s=r.left,o=r.top,l=r.width,c=r.height;return a(i)?Math.abs(n-(o+c/2)):Math.abs(t-(s+l/2))}t.useThumbOverlap=function(e,n,s,a,o,c){void 0===a&&(a=.1),void 0===o&&(o=" - "),void 0===c&&(c=function(e){return e});var u=(0,t.getStepDecimals)(a),h=(0,r.useState)({}),d=h[0],p=h[1],f=(0,r.useState)(c(n[s].toFixed(u))),g=f[0],m=f[1];return(0,r.useEffect)(function(){if(e){var t=e.getThumbs();if(t.length<1)return;var r={},a=e.getOffsets(),h=function(e,t,n,r,s,a,o){void 0===o&&(o=function(e){return e});var c=[],u=function(e){var h=l(n[e],r[e],s,a,o),d=t[e].x;t.forEach(function(t,p){var f=t.x,g=l(n[p],r[p],s,a,o);e!==p&&(d>=f&&d<=f+g||d+h>=f&&d+h<=f+g)&&(c.includes(p)||(c.push(e),c.push(p),c=i(i([],c,!0),[e,p],!1),u(p)))})};return u(e),Array.from(new Set(c.sort()))}(s,a,t,n,o,u,c),d=c(n[s].toFixed(u));if(h.length){var f=h.reduce(function(e,t,n,r){return e.length?i(i([],e,!0),[a[r[n]].x],!1):[a[r[n]].x]},[]);if(Math.min.apply(Math,f)===a[s].x){var g=[];h.forEach(function(e){g.push(n[e].toFixed(u))}),d=Array.from(new Set(g.sort(function(e,t){return parseFloat(e)-parseFloat(t)}))).map(c).join(o);var v=Math.min.apply(Math,f),b=Math.max.apply(Math,f),y=t[h[f.indexOf(b)]].getBoundingClientRect().width;r.left="".concat(Math.abs(v-(b+y))/2,"px"),r.transform="translate(-50%, 0)"}else r.visibility="hidden"}m(d),p(r)}},[e,n]),[g,d]};t.isIOS=function(){var e,t=(null===(e=navigator.userAgentData)||void 0===e?void 0:e.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(t)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}},111:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Direction=void 0,function(e){e.Right="to right",e.Left="to left",e.Down="to bottom",e.Up="to top"}(n||(t.Direction=n={}))},119:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(863)},123:(e,t,n)=>{n.r(t),n.d(t,{FunctionRegion:()=>l,FunctionsClient:()=>c,FunctionsError:()=>r,FunctionsFetchError:()=>s,FunctionsHttpError:()=>o,FunctionsRelayError:()=>a});var i=n(827);class r extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class s extends r{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class a extends r{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class o extends r{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var l;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(l||(l={}));class c{constructor(e){let{headers:t={},customFetch:n,region:i=l.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=i,this.fetch=(e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)})(n)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){return(0,i.__awaiter)(this,arguments,void 0,function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var i;let r,l;try{const{headers:c,method:u,body:h,signal:d,timeout:p}=n;let f={},{region:g}=n;g||(g=t.region);const m=new URL("".concat(t.url,"/").concat(e));let v;g&&"any"!==g&&(f["x-region"]=g,m.searchParams.set("forceFunctionRegion",g)),h&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?"undefined"!==typeof Blob&&h instanceof Blob||h instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=h):"string"===typeof h?(f["Content-Type"]="text/plain",v=h):"undefined"!==typeof FormData&&h instanceof FormData?v=h:(f["Content-Type"]="application/json",v=JSON.stringify(h)):v=h;let b=d;p&&(l=new AbortController,r=setTimeout(()=>l.abort(),p),d?(b=l.signal,d.addEventListener("abort",()=>l.abort())):b=l.signal);const y=yield t.fetch(m.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},f),t.headers),c),body:v,signal:b}).catch(e=>{throw new s(e)}),w=y.headers.get("x-relay-error");if(w&&"true"===w)throw new a(y);if(!y.ok)throw new o(y);let _,x=(null!==(i=y.headers.get("Content-Type"))&&void 0!==i?i:"text/plain").split(";")[0].trim();return _="application/json"===x?yield y.json():"application/octet-stream"===x||"application/pdf"===x?yield y.blob():"text/event-stream"===x?y:"multipart/form-data"===x?yield y.formData():yield y.text(),{data:_,error:null,response:y}}catch(c){return{data:null,error:c,response:c instanceof o||c instanceof a?c.context:void 0}}finally{r&&clearTimeout(r)}}()})}}},340:(e,t,n)=>{e.exports=n(487)},352:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(85)},379:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(705);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){(0,i.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},414:(e,t,n)=>{e.exports=n(916)},426:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SupabaseAuthClient=void 0;const i=n(646);class r extends i.AuthClient{constructor(e){super(e)}}t.SupabaseAuthClient=r},427:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(827).__importDefault(n(569));class r extends i.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:i,referencedTable:r=i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=r?"".concat(r,".order"):"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,"".concat(a?"".concat(a,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(i,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:i=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r="undefined"===typeof i?"offset":"".concat(i,".offset"),s="undefined"===typeof i?"limit":"".concat(i,".limit");return this.url.searchParams.set(r,"".concat(e)),this.url.searchParams.set(s,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:i=!1,wal:r=!1,format:s="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.get("Accept"))&&void 0!==a?a:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(s,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=r},478:(e,t,n)=>{n.r(t),n.d(t,{REALTIME_CHANNEL_STATES:()=>O,REALTIME_LISTEN_TYPES:()=>M,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:()=>T,REALTIME_PRESENCE_LISTEN_EVENTS:()=>C,REALTIME_SUBSCRIBE_STATES:()=>P,RealtimeChannel:()=>N,RealtimeClient:()=>B,RealtimePresence:()=>R,WebSocketFactory:()=>i});const i=class{constructor(){}static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(n," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(n," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},r="realtime-js/".concat("2.87.1"),s="1.0.0",a=s,o=1e4;var l,c,u,h,d,p;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(l||(l={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(c||(c={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(u||(u={})),function(e){e.websocket="websocket"}(h||(h={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(d||(d={}));class f{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!==e&&void 0!==e?e:[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&"string"===typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const i=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var t,n;const i=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:{},r=(new TextEncoder).encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,r)}_encodeUserBroadcastPush(e,t,n){var i,r;const s=e.topic,a=null!==(i=e.ref)&&void 0!==i?i:"",o=null!==(r=e.join_ref)&&void 0!==r?r:"",l=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},u=0===Object.keys(c).length?"":JSON.stringify(c);if(o.length>255)throw new Error("joinRef length ".concat(o.length," exceeds maximum of 255"));if(a.length>255)throw new Error("ref length ".concat(a.length," exceeds maximum of 255"));if(s.length>255)throw new Error("topic length ".concat(s.length," exceeds maximum of 255"));if(l.length>255)throw new Error("userEvent length ".concat(l.length," exceeds maximum of 255"));if(u.length>255)throw new Error("metadata length ".concat(u.length," exceeds maximum of 255"));const h=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+a.length+s.length+l.length+u.length,d=new ArrayBuffer(this.HEADER_LENGTH+h);let p=new DataView(d),f=0;p.setUint8(f++,this.KINDS.userBroadcastPush),p.setUint8(f++,o.length),p.setUint8(f++,a.length),p.setUint8(f++,s.length),p.setUint8(f++,l.length),p.setUint8(f++,u.length),p.setUint8(f++,t),Array.from(o,e=>p.setUint8(f++,e.charCodeAt(0))),Array.from(a,e=>p.setUint8(f++,e.charCodeAt(0))),Array.from(s,e=>p.setUint8(f++,e.charCodeAt(0))),Array.from(l,e=>p.setUint8(f++,e.charCodeAt(0))),Array.from(u,e=>p.setUint8(f++,e.charCodeAt(0)));var g=new Uint8Array(d.byteLength+n.byteLength);return g.set(new Uint8Array(d),0),g.set(new Uint8Array(n),d.byteLength),g.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"===typeof e){const n=JSON.parse(e),[i,r,s,a,o]=n;return t({join_ref:i,ref:r,topic:s,event:a,payload:o})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,i)}_decodeUserBroadcast(e,t,n){const i=t.getUint8(1),r=t.getUint8(2),s=t.getUint8(3),a=t.getUint8(4);let o=this.HEADER_LENGTH+4;const l=n.decode(e.slice(o,o+i));o+=i;const c=n.decode(e.slice(o,o+r));o+=r;const u=n.decode(e.slice(o,o+s));o+=s;const h=e.slice(o,e.byteLength),d=a===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,p={type:this.BROADCAST_EVENT,event:c,payload:d};return s>0&&(p.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null===e||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.name)}_pick(e,t){return e&&"object"===typeof e?Object.fromEntries(Object.entries(e).filter(e=>{let[n]=e;return t.includes(n)})):{}}}class g{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(p||(p={}));const m=function(e,t){var n;const i=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return t?Object.keys(t).reduce((n,r)=>(n[r]=v(r,e,t,i),n),{}):{}},v=(e,t,n,i)=>{const r=t.find(t=>t.name===e),s=null===r||void 0===r?void 0:r.type,a=n[e];return s&&!i.includes(s)?b(s,a):y(a)},b=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return k(t,n)}switch(e){case p.bool:return w(t);case p.float4:case p.float8:case p.int2:case p.int4:case p.int8:case p.numeric:case p.oid:return _(t);case p.json:case p.jsonb:return x(t);case p.timestamp:return S(t);case p.abstime:case p.date:case p.daterange:case p.int4range:case p.int8range:case p.money:case p.reltime:case p.text:case p.time:case p.timestamptz:case p.timetz:case p.tsrange:case p.tstzrange:default:return y(t)}},y=e=>e,w=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},_=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},x=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},k=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,i=e[n];if("{"===e[0]&&"}"===i){let i;const s=e.slice(1,n);try{i=JSON.parse("["+s+"]")}catch(r){i=s?s.split(","):[]}return i.map(e=>b(t,e))}return e},S=e=>"string"===typeof e?e.replace(" ","T"):e,A=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class E{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o;this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var C,T,M,P;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(C||(C={}));class R{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=R.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=R.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],i()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=R.syncDiff(this.state,e,t,n),i())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const r=this.cloneDeep(e),s=this.transformState(t),a={},o={};return this.map(r,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const n=r[e];if(n){const i=t.map(e=>e.presence_ref),r=n.map(e=>e.presence_ref),s=t.filter(e=>r.indexOf(e.presence_ref)<0),l=n.filter(e=>i.indexOf(e.presence_ref)<0);s.length>0&&(a[e]=s),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(r,{joins:a,leaves:o},n,i)}static syncDiff(e,t,n,i){const{joins:r,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(r,(t,i)=>{var r;const s=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(i),s.length>0){const n=e[t].map(e=>e.presence_ref),i=s.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...i)}n(t,s,i)}),this.map(s,(t,n)=>{let r=e[t];if(!r)return;const s=n.map(e=>e.presence_ref);r=r.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=r,i(t,r,n),0===r.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return t[n]="metas"in i?i.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(T||(T={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(M||(M={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(P||(P={}));const O=c;class N{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;var i,r;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=c.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new E(this,u.join,this.params,this.timeout),this.rejoinTimer=new g(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=c.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=c.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=c.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=c.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=c.errored,this.rejoinTimer.scheduleTimeout())}),this._on(u.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new R(this),this.broadcastEndpointURL=A(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(r=null===(i=this.params.config)||void 0===i?void 0:i.broadcast)||void 0===r?void 0:r.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,i,r;if(this.socket.isConnected()||this.socket.connect(),this.state==c.closed){const{config:{broadcast:s,presence:a,private:o}}=this.params,l=null!==(i=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==i?i:[],u=!!this.bindings[M.PRESENCE]&&this.bindings[M.PRESENCE].length>0||!0===(null===(r=this.params.config.presence)||void 0===r?void 0:r.enabled),h={},d={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(P.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(P.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var i;if(this.socket._isManualToken()||this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,r=null!==(i=null===t||void 0===t?void 0:t.length)&&void 0!==i?i:0,s=[];for(let i=0;i<r;i++){const r=t[i],{filter:{event:a,schema:o,table:l,filter:u}}=r,h=n&&n[i];if(!(h&&h.event===a&&N.isFilterValueEqual(h.schema,o)&&N.isFilterValueEqual(h.table,l)&&N.isFilterValueEqual(h.filter,u)))return this.unsubscribe(),this.state=c.errored,void(null===e||void 0===e||e(P.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},r),{id:h.id}))}return this.bindings.postgres_changes=s,void(e&&e(P.SUBSCRIBED))}null===e||void 0===e||e(P.SUBSCRIBED)}).receive("error",t=>{this.state=c.errored,null===e||void 0===e||e(P.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(P.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===c.joined&&e===M.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;const r=this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"";if(void 0===t||null===t)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:r,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(i=n.timeout)&&void 0!==i?i:this.timeout);if(202===a.status)return{success:!0};let o=a.statusText;try{const e=await a.json();o=e.error||e.message||o}catch(l){}return Promise.reject(new Error(o))}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,i;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var i,r,s;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(r=null===(i=this.params)||void 0===i?void 0:i.config)||void 0===r?void 0:r.broadcast)||void 0===s?void 0:s.ack)||n("ok"),a.receive("ok",()=>n("ok")),a.receive("error",()=>n("error")),a.receive("timeout",()=>n("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(i=e.body)||void 0===i?void 0:i.cancel()),e.ok?"ok":"error"}catch(r){return"AbortError"===r.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=c.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(u.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new E(this,u.leave,{},e),n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=c.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const i=new AbortController,r=setTimeout(()=>i.abort(),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(r),s}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let i=new E(this,e,t,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,r;const s=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=u;if(n&&[a,o,l,c].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,t,n);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(i=this.bindings.postgres_changes)||void 0===i||i.filter(e=>{var t,n,i;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(i=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===i?void 0:i.toLocaleLowerCase())===s}).map(e=>e.callback(h,n)):null===(r=this.bindings[s])||void 0===r||r.filter(e=>{var n,i,r,a,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return s&&(null===(i=t.ids)||void 0===i?void 0:i.includes(s))&&("*"===a||(null===a||void 0===a?void 0:a.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null===e||void 0===e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"===typeof h&&"ids"in h){const e=h.data,{schema:t,table:n,commit_timestamp:i,type:r,errors:s}=e,a={schema:t,table:n,commit_timestamp:i,eventType:r,new:{},old:{},errors:s};h=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(h,n)})}_isClosed(){return this.state===c.closed}_isJoined(){return this.state===c.joined}_isJoining(){return this.state===c.joining}_isLeaving(){return this.state===c.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const i=e.toLocaleLowerCase(),r={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var i;return!((null===(i=e.type)||void 0===i?void 0:i.toLocaleLowerCase())===n&&N.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(null!==e&&void 0!==e?e:void 0)===(null!==t&&void 0!==t?t:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(u.close,{},e)}_onError(e){this._on(u.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=c.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=m(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=m(e.columns,e.old_record)),t}}const I=()=>{},D=25e3,j=10,L=100,F=[1e3,2e3,5e3,1e4];class B{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=o,this.transport=null,this.heartbeatIntervalMs=D,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=I,this.ref=0,this.reconnectTimer=null,this.vsn=a,this.logger=I,this.conn=null,this.sendBuffer=[],this.serializer=new f,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},!(null===(n=null===t||void 0===t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(h.websocket),this.httpEndpoint=A(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=i.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},"function"===typeof this.conn.close&&(e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case l.connecting:return d.Connecting;case l.open:return d.Open;case l.closing:return d.Closing;default:return d.Closed}}isConnected(){return this.connectionState()===d.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),i=this.getChannels().find(e=>e.topic===n);if(i)return i;{const n=new N("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:i,ref:r}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(r,")"),i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},L)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(o){this.log("error","error in heartbeat callback",o)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:i,ref:r}=e,s=r?"(".concat(r,")"):"",a=i.status||"";this.log("receive","".concat(a," ").concat(t," ").concat(n," ").concat(s).trim(),i),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,i,r)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===l.open||this.conn.readyState===l.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL()));(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(u.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return"".concat(e).concat(n).concat(i)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!1;if(t)e=t,n=!0;else if(this.accessToken)try{e=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),e=this.accessTokenValue}else e=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:r};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(u.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this._isManualToken()||this.setAuth().catch(t=>{this.log("error","Error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(i){this.log("error","error in ".concat(e," callback"),i)}})}catch(n){this.log("error","error triggering ".concat(e," callbacks"),n)}}_setupReconnectionTimer(){this.reconnectTimer=new g(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},j)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,i,r,l,c,u,h,d,p,f,g;switch(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:o,this.heartbeatIntervalMs=null!==(i=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==i?i:D,this.worker=null!==(r=null===e||void 0===e?void 0:e.worker)&&void 0!==r&&r,this.accessToken=null!==(l=null===e||void 0===e?void 0:e.accessToken)&&void 0!==l?l:null,this.heartbeatCallback=null!==(c=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==c?c:I,this.vsn=null!==(u=null===e||void 0===e?void 0:e.vsn)&&void 0!==u?u:a,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(h=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==h?h:e=>F[e-1]||1e4,this.vsn){case s:this.encode=null!==(d=null===e||void 0===e?void 0:e.encode)&&void 0!==d?d:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(p=null===e||void 0===e?void 0:e.decode)&&void 0!==p?p:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!==(f=null===e||void 0===e?void 0:e.encode)&&void 0!==f?f:this.serializer.encode.bind(this.serializer),this.decode=null!==(g=null===e||void 0===e?void 0:e.decode)&&void 0!==g?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error("Unsupported serializer version: ".concat(this.vsn))}if(this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}},487:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,g=!1,m=!1,v=!1,b="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function x(e){if(m=!1,_(e),!g)if(null!==i(c))g=!0,S||(S=!0,k());else{var t=i(u);null!==t&&O(x,t.startTime-e)}}var k,S=!1,A=-1,E=5,C=-1;function T(){return!!v||!(t.unstable_now()-C<E)}function M(){if(v=!1,S){var e=t.unstable_now();C=e;var n=!0;try{e:{g=!1,m&&(m=!1,y(A),A=-1),f=!0;var s=p;try{t:{for(_(e),d=i(c);null!==d&&!(d.expirationTime>e&&T());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var o=a(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){d.callback=o,_(e),n=!0;break t}d===i(c)&&r(c),_(e)}else r(c);d=i(c)}if(null!==d)n=!0;else{var l=i(u);null!==l&&O(x,l.startTime-e),n=!1}}break e}finally{d=null,p=s,f=!1}n=void 0}}finally{n?k():S=!1}}}if("function"===typeof w)k=function(){w(M)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=M,k=function(){R.postMessage(null)}}else k=function(){b(M,0)};function O(e,n){A=b(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(m?(y(A),A=-1):m=!0,O(x,s-a))):(e.sortIndex=o,n(c,e),g||f||(g=!0,S||(S=!0,k()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},498:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkValuesAgainstBoundaries=t.relativeValue=t.useThumbOverlap=t.Direction=t.getTrackBackground=t.Range=void 0;var r=i(n(23));t.Range=r.default;var s=n(91);Object.defineProperty(t,"getTrackBackground",{enumerable:!0,get:function(){return s.getTrackBackground}}),Object.defineProperty(t,"useThumbOverlap",{enumerable:!0,get:function(){return s.useThumbOverlap}}),Object.defineProperty(t,"relativeValue",{enumerable:!0,get:function(){return s.relativeValue}}),Object.defineProperty(t,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return s.checkValuesAgainstBoundaries}});var a=n(111);Object.defineProperty(t,"Direction",{enumerable:!0,get:function(){return a.Direction}})},500:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const i=n(581);let r="";r="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node",t.DEFAULT_HEADERS={"X-Client-Info":"supabase-js-".concat(r,"/").concat(i.version)},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}},569:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(827).__importDefault(n(732));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r,s;let a=null,o=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const i=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),s=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");i&&s&&s.length>1&&(l=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(o=[],a=null,c=200,u="OK")}catch(h){404===e.status&&""===t?(c=204,u="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null===(s=null===a||void 0===a?void 0:a.details)||void 0===s?void 0:s.includes("0 rows"))&&(a=null,c=200,u="OK"),a&&this.shouldThrowOnError)throw new i.default(a)}return{error:a,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,i,r,s,a;let o="";const l=null===e||void 0===e?void 0:e.cause;if(l){const s=null!==(t=null===l||void 0===l?void 0:l.message)&&void 0!==t?t:"",a=null!==(n=null===l||void 0===l?void 0:l.code)&&void 0!==n?n:"";o="".concat(null!==(i=null===e||void 0===e?void 0:e.name)&&void 0!==i?i:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),o+="\n\nCaused by: ".concat(null!==(r=null===l||void 0===l?void 0:l.name)&&void 0!==r?r:"Error",": ").concat(s),a&&(o+=" (".concat(a,")")),(null===l||void 0===l?void 0:l.stack)&&(o+="\n".concat(l.stack))}else o=null!==(s=null===e||void 0===e?void 0:e.stack)&&void 0!==s?s:"";return{error:{message:"".concat(null!==(a=null===e||void 0===e?void 0:e.name)&&void 0!==a?a:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},581:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="2.87.1"},646:(e,t,n)=>{n.r(t),n.d(t,{AuthAdminApi:()=>Ve,AuthApiError:()=>p,AuthClient:()=>qe,AuthError:()=>h,AuthImplicitGrantRedirectError:()=>_,AuthInvalidCredentialsError:()=>w,AuthInvalidJwtError:()=>T,AuthInvalidTokenResponseError:()=>y,AuthPKCEGrantCodeExchangeError:()=>k,AuthRetryableFetchError:()=>S,AuthSessionMissingError:()=>v,AuthUnknownError:()=>g,AuthWeakPasswordError:()=>E,CustomAuthError:()=>m,GoTrueAdminApi:()=>pe,GoTrueClient:()=>He,NavigatorLockAcquireTimeoutError:()=>ve,SIGN_OUT_SCOPES:()=>de,isAuthApiError:()=>f,isAuthError:()=>d,isAuthImplicitGrantRedirectError:()=>x,isAuthRetryableFetchError:()=>A,isAuthSessionMissingError:()=>b,isAuthWeakPasswordError:()=>C,lockInternals:()=>ge,navigatorLock:()=>ye,processLock:()=>_e});var i=n(827);const r="2.87.1",s=3e4,a=9e4,o={"X-Client-Info":"gotrue-js/".concat(r)},l="X-Supabase-Api-Version",c={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},u=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class h extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function d(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class p extends h{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function f(e){return d(e)&&"AuthApiError"===e.name}class g extends h{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class m extends h{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class v extends m{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function b(e){return d(e)&&"AuthSessionMissingError"===e.name}class y extends m{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class w extends m{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _ extends m{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function x(e){return d(e)&&"AuthImplicitGrantRedirectError"===e.name}class k extends m{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class S extends m{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function A(e){return d(e)&&"AuthRetryableFetchError"===e.name}class E extends m{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}function C(e){return d(e)&&"AuthWeakPasswordError"===e.name}class T extends m{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),P=" \t\n\r=".split(""),R=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<P.length;t+=1)e[P[t].charCodeAt(0)]=-2;for(let t=0;t<M.length;t+=1)e[M[t].charCodeAt(0)]=t;return e})();function O(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(M[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(M[e]),t.queuedBits-=6}}function N(e,t,n){const i=R[e];if(!(i>-1)){if(-2===i)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function I(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},s=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,i,n)};for(let a=0;a<e.length;a+=1)N(e.charCodeAt(a),r,s);return t.join("")}function D(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function j(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const t=1024*(i-55296)&65535;i=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}D(i,t)}}function L(e){const t=[],n={queue:0,queuedBits:0},i=e=>{t.push(e)};for(let r=0;r<e.length;r+=1)N(e.charCodeAt(r),n,i);return new Uint8Array(t)}function F(e){const t=[],n={queue:0,queuedBits:0},i=e=>{t.push(e)};return e.forEach(e=>O(e,n,i)),O(null,n,i),t.join("")}const B=()=>"undefined"!==typeof window&&"undefined"!==typeof document,W={tested:!1,writable:!1},U=()=>{if(!B())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(W.tested)return W.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),W.tested=!0,W.writable=!0}catch(t){W.tested=!0,W.writable=!1}return W.writable};const z=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},H=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},V=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(i){return n}},q=async(e,t)=>{await e.removeItem(t)};class G{constructor(){this.promise=new G.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function K(e){const t=e.split(".");if(3!==t.length)throw new T("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!u.test(t[n]))throw new T("JWT not in base64url format");return{header:JSON.parse(I(t[0])),payload:JSON.parse(I(t[1])),signature:L(t[2]),raw:{header:t[0],payload:t[1]}}}function X(e){return("0"+e.toString(16)).substr(-2)}async function Y(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function J(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let i=0;i<56;i++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,X).join("")}();let r=i;n&&(r+="/PASSWORD_RECOVERY"),await H(e,"".concat(t,"-code-verifier"),r);const s=await Y(i);return[s,i===s?"plain":"s256"]}G.promiseConstructor=Promise;const Q=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const $=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Z(e){if(!$.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ee(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function te(e){return JSON.parse(JSON.stringify(e))}const ne=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ie=[502,503,504];async function re(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new S(ne(e),0);if(ie.includes(e.status))throw new S(ne(e),e.status);let i,r;try{i=await e.json()}catch(a){throw new g(ne(a),a)}const s=function(e){const t=e.headers.get(l);if(!t)return null;if(!t.match(Q))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(a){return null}}(e);if(s&&s.getTime()>=c.timestamp&&"object"===typeof i&&i&&"string"===typeof i.code?r=i.code:"object"===typeof i&&i&&"string"===typeof i.error_code&&(r=i.error_code),r){if("weak_password"===r)throw new E(ne(i),e.status,(null===(t=i.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===r)throw new v}else if("object"===typeof i&&i&&"object"===typeof i.weak_password&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new E(ne(i),e.status,i.weak_password.reasons);throw new p(ne(i),e.status||500,r)}async function se(e,t,n,i){var r;const s=Object.assign({},null===i||void 0===i?void 0:i.headers);s[l]||(s[l]=c.name),(null===i||void 0===i?void 0:i.jwt)&&(s.Authorization="Bearer ".concat(i.jwt));const a=null!==(r=null===i||void 0===i?void 0:i.query)&&void 0!==r?r:{};(null===i||void 0===i?void 0:i.redirectTo)&&(a.redirect_to=i.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await async function(e,t,n,i,r,s){const a=((e,t,n,i)=>{const r={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))})(t,i,r,s);let o;try{o=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new S(ne(l),0)}o.ok||await re(o);if(null===i||void 0===i?void 0:i.noResolveJson)return o;try{return await o.json()}catch(l){await re(l)}}(e,t,n+o,{headers:s,noResolveJson:null===i||void 0===i?void 0:i.noResolveJson},{},null===i||void 0===i?void 0:i.body);return(null===i||void 0===i?void 0:i.xform)?null===i||void 0===i?void 0:i.xform(u):{data:Object.assign({},u),error:null}}function ae(e){var t;let n=null;var i;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(i=e.expires_in,Math.round(Date.now()/1e3)+i)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function oe(e){const t=ae(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function le(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ce(e){return{data:e,error:null}}function ue(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,o=(0,i.__rest)(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},user:Object.assign({},o)},error:null}}function he(e){return e}const de=["global","local","others"];class pe{constructor(e){let{url:t="",headers:n={},fetch:i}=e;this.url=t,this.headers=n,this.fetch=z(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:de[0];if(de.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(de.join(", ")));try{return await se(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(d(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await se(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:le})}catch(n){if(d(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=(0,i.__rest)(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await se(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:ue,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(d(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await se(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:le})}catch(t){if(d(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,r,s,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await se(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(r=null===(i=null===e||void 0===e?void 0:e.perPage)||void 0===i?void 0:i.toString())&&void 0!==r?r:""},xform:he});if(c.error)throw c.error;const u=await c.json(),h=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,d=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return d.length>0&&(d.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(d(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Z(e);try{return await se(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:le})}catch(t){if(d(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Z(e);try{return await se(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:le})}catch(n){if(d(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Z(e);try{return await se(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:le})}catch(n){if(d(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Z(e.userId);try{const{data:t,error:n}=await se(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(d(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Z(e.userId),Z(e.id);try{return{data:await se(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(d(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,i,r,s,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await se(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(r=null===(i=null===e||void 0===e?void 0:e.perPage)||void 0===i?void 0:i.toString())&&void 0!==r?r:""},xform:he});if(c.error)throw c.error;const u=await c.json(),h=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,d=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return d.length>0&&(d.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(d(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await se(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(d(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await se(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(d(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await se(this.fetch,"PUT","".concat(this.url,"/admin/oauth/clients/").concat(e),{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(n){if(d(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await se(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(d(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await se(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(e,"/regenerate_secret"),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(d(t))return{data:null,error:t};throw t}}}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ge={debug:!!(globalThis&&U()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class me extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ve extends me{}class be extends me{}async function ye(e,t,n){ge.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),ge.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async i=>{if(!i){if(0===t)throw ge.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ve('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(ge.debug)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}ge.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{ge.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}))}const we={};async function _e(e,t,n){var i;const r=null!==(i=we[e])&&void 0!==i?i:Promise.resolve(),s=Promise.race([r.catch(()=>null),t>=0?new Promise((n,i)=>{setTimeout(()=>{i(new be('Acquring process lock with name "'.concat(e,'" timed out')))},t)}):null].filter(e=>e)).catch(e=>{if(e&&e.isAcquireTimeout)throw e;return null}).then(async()=>await n());return we[e]=s.catch(async e=>{if(e&&e.isAcquireTimeout)return await r,null;throw e}),await s}function xe(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error('@supabase/auth-js: Address "'.concat(e,'" is invalid.'));return e.toLowerCase()}function ke(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class Se extends Error{constructor(e){let{message:t,code:n,cause:i,name:r}=e;var s;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=null!==(s=null!==r&&void 0!==r?r:i instanceof Error?i.name:void 0)&&void 0!==s?s:"Unknown Error",this.code=n}}class Ae extends Se{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Ee(e){let{error:t,options:n}=e;var i,r,s;const{publicKey:a}=n;if(!a)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new Se({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(i=a.authenticatorSelection)||void 0===i?void 0:i.requireResidentKey))return new Se({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===n.mediation&&"required"===(null===(r=a.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new Se({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(s=a.authenticatorSelection)||void 0===s?void 0:s.userVerification))return new Se({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new Se({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new Se({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name){return 0===a.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new Se({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Se({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t})}if("SecurityError"===t.name){const e=window.location.hostname;if(!Ne(e))return new Se({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(a.rp.id!==e)return new Se({message:'The RP ID "'.concat(a.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Se({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new Se({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Se({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Ce(e){let{error:t,options:n}=e;const{publicKey:i}=n;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new Se({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new Se({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const e=window.location.hostname;if(!Ne(e))return new Se({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(i.rpId!==e)return new Se({message:'The RP ID "'.concat(i.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new Se({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Se({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}const Te=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function Me(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!==typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=(0,i.__rest)(e,["challenge","user","excludeCredentials"]),a=L(t).buffer,o=Object.assign(Object.assign({},n),{id:L(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];l.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:L(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return l}function Pe(e){if(!e)throw new Error("Credential request options are required");if("undefined"!==typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=(0,i.__rest)(e,["challenge","allowCredentials"]),s=L(t).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];a.allowCredentials[e]=Object.assign(Object.assign({},t),{id:L(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return a}function Re(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:F(new Uint8Array(e.response.attestationObject)),clientDataJSON:F(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function Oe(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const n=e,i=e.getClientExtensionResults(),r=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:F(new Uint8Array(r.authenticatorData)),clientDataJSON:F(new Uint8Array(r.clientDataJSON)),signature:F(new Uint8Array(r.signature)),userHandle:r.userHandle?F(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function Ne(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Ie(){var e,t;return!!(B()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"===typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"===typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const De={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},je={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Le(){const e=e=>null!==e&&"object"===typeof e&&!Array.isArray(e),t=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),n={};for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];for(const a of r)if(a)for(const i in a){const r=a[i];if(void 0!==r)if(Array.isArray(r))n[i]=r;else if(t(r))n[i]=r;else if(e(r)){const t=n[i];e(t)?n[i]=Le(t,r):n[i]=Le(r)}else n[i]=r}return n}class Fe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge(e,t){let{factorId:n,webauthn:i,friendlyName:r,signal:s}=e;try{const{data:e,error:a}=await this.client.mfa.challenge({factorId:n,webauthn:i});if(!e)return{data:null,error:a};const o=null!==s&&void 0!==s?s:Te.createNewAbortSignal();if("create"===e.webauthn.type){const{user:t}=e.webauthn.credential_options.publicKey;t.name||(t.name="".concat(t.id,":").concat(r)),t.displayName||(t.displayName=t.name)}switch(e.webauthn.type){case"create":{const i=function(e,t){return Le(De,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.create),{data:r,error:s}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ae("Browser returned unexpected credential type",t)}:{data:null,error:new Ae("Empty credential response",t)}}catch(t){return{data:null,error:Ee({error:t,options:e})}}}({publicKey:i,signal:o});return r?{data:{factorId:n,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:r}},error:null}:{data:null,error:s}}case"request":{const i=function(e,t){return Le(je,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.request),{data:r,error:s}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ae("Browser returned unexpected credential type",t)}:{data:null,error:new Ae("Empty credential response",t)}}catch(t){return{data:null,error:Ce({error:t,options:e})}}}(Object.assign(Object.assign({},e.webauthn.credential_options),{publicKey:i,signal:o}));return r?{data:{factorId:n,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:r}},error:null}:{data:null,error:s}}}}catch(a){return d(a)?{data:null,error:a}:{data:null,error:new g("Unexpected error in challenge",a)}}}async _verify(e){let{challengeId:t,factorId:n,webauthn:i}=e;return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate(e,t){let{factorId:n,webauthn:{rpId:i=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!==typeof window?[window.location.origin]:void 0),signal:s}={}}=e;if(!i)return{data:null,error:new h("rpId is required for WebAuthn authentication")};try{if(!Ie())return{data:null,error:new g("Browser does not support WebAuthn",null)};const{data:e,error:a}=await this.challenge({factorId:n,webauthn:{rpId:i,rpOrigins:r},signal:s},{request:t});if(!e)return{data:null,error:a};const{webauthn:o}=e;return this._verify({factorId:n,challengeId:e.challengeId,webauthn:{type:o.type,rpId:i,rpOrigins:r,credential_response:o.credential_response}})}catch(a){return d(a)?{data:null,error:a}:{data:null,error:new g("Unexpected error in authenticate",a)}}}async _register(e,t){let{friendlyName:n,webauthn:{rpId:i=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!==typeof window?[window.location.origin]:void 0),signal:s}={}}=e;if(!i)return{data:null,error:new h("rpId is required for WebAuthn registration")};try{if(!Ie())return{data:null,error:new g("Browser does not support WebAuthn",null)};const{data:e,error:a}=await this._enroll({friendlyName:n});if(!e)return await this.client.mfa.listFactors().then(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.all.find(e=>"webauthn"===e.factor_type&&e.friendly_name===n&&"unverified"!==e.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null===e||void 0===e?void 0:e.id}):void 0),{data:null,error:a};const{data:o,error:l}=await this._challenge({factorId:e.id,friendlyName:e.friendly_name,webauthn:{rpId:i,rpOrigins:r},signal:s},{create:t});return o?this._verify({factorId:e.id,challengeId:o.challengeId,webauthn:{rpId:i,rpOrigins:r,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(a){return d(a)?{data:null,error:a}:{data:null,error:new g("Unexpected error in register",a)}}}}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Be={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:o,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function We(e,t,n){return await n()}const Ue={};class ze{get jwks(){var e,t;return null!==(t=null===(e=Ue[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Ue[this.storageKey]=Object.assign(Object.assign({},Ue[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Ue[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ue[this.storageKey]=Object.assign(Object.assign({},Ue[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const r=Object.assign(Object.assign({},Be),e);if(this.storageKey=r.storageKey,this.instanceID=null!==(t=ze.nextInstanceID[this.storageKey])&&void 0!==t?t:0,ze.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.instanceID>0&&B()){const e="".concat(this._logPrefix()," Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=r.persistSession,this.autoRefreshToken=r.autoRefreshToken,this.admin=new pe({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=z(r.fetch),this.lock=r.lock||We,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,this.throwOnError=r.throwOnError,r.lock?this.lock=r.lock:this.persistSession&&B()&&(null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===n?void 0:n.locks)?this.lock=ye:this.lock=We,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Fe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:U()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fe(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=fe(this.memoryStorage)),B()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}null===(i=this.broadcastChannel)||void 0===i||i.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return"GoTrueClient@"+"".concat(this.storageKey,":").concat(this.instanceID," (").concat(r,") ").concat((new Date).toISOString())}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger(this._logPrefix(),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},n="none";if(B()&&(t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(i){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),B()&&this.detectSessionInUrl&&"none"!==n){const{data:i,error:r}=await this._getSessionFromURL(t,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),x(r)){const t=null===(e=r.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:r}}return await this._removeSession(),{error:r}}const{session:s,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return d(t)?this._returnResult({error:t}):this._returnResult({error:new g("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const r=await se(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(i=null===e||void 0===e?void 0:e.options)||void 0===i?void 0:i.captchaToken}},xform:ae}),{data:s,error:a}=r;if(a||!s)return this._returnResult({data:{user:null,session:null},error:a});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(r){if(d(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signUp(e){var t,n,i;try{let r;if("email"in e){const{email:n,password:i,options:s}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await J(this.storage,this.storageKey)),r=await se(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:{email:n,password:i,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:o},xform:ae})}else{if(!("phone"in e))throw new w("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:a}=e;r=await se(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:s,data:null!==(n=null===a||void 0===a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(i=null===a||void 0===a?void 0:a.channel)&&void 0!==i?i:"sms",gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:ae})}}const{data:s,error:a}=r;if(a||!s)return await q(this.storage,"".concat(this.storageKey,"-code-verifier")),this._returnResult({data:{user:null,session:null},error:a});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(r){if(await q(this.storage,"".concat(this.storageKey,"-code-verifier")),d(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:i,options:r}=e;t=await se(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:i,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:oe})}else{if(!("phone"in e))throw new w("You must provide either an email or phone number and a password");{const{phone:n,password:i,options:r}=e;t=await se(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:i,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:oe})}}const{data:n,error:i}=t;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const e=new y;return this._returnResult({data:{user:null,session:null},error:e})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(d(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,i,r;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}}async signInWithEthereum(e){var t,n,i,r,s,a,o,l,c,u,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:u,wallet:h,statement:d,options:g}=e;let m;if(B())if("object"===typeof h)m=h;else{const e=window;if(!("ethereum"in e)||"object"!==typeof e.ethereum||!("request"in e.ethereum)||"function"!==typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");m=e.ethereum}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=h}const v=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href),b=await m.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!b||0===b.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const y=xe(b[0]);let w=null===(n=null===g||void 0===g?void 0:g.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!w){const e=await m.request({method:"eth_chainId"});w=parseInt(e,16)}p=function(e){var t;const{chainId:n,domain:i,expirationTime:r,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:u,uri:h,version:d}=e;if(!Number.isInteger(n))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(n));if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(a));if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==d)throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(d));if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(e.statement));const p=xe(e.address),f=u?"".concat(u,"://").concat(i):i,g=e.statement?"".concat(e.statement,"\n"):"",m="".concat(f," wants you to sign in with your Ethereum account:\n").concat(p,"\n\n").concat(g);let v="URI: ".concat(h,"\nVersion: ").concat(d,"\nChain ID: ").concat(n).concat(a?"\nNonce: ".concat(a):"","\nIssued At: ").concat(s.toISOString());if(r&&(v+="\nExpiration Time: ".concat(r.toISOString())),o&&(v+="\nNot Before: ".concat(o.toISOString())),l&&(v+="\nRequest ID: ".concat(l)),c){let e="\nResources:";for(const t of c){if(!t||"string"!==typeof t)throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(t));e+="\n- ".concat(t)}v+=e}return"".concat(m,"\n").concat(v)}({domain:v.host,address:y,statement:d,uri:v.href,version:"1",chainId:w,nonce:null===(i=null===g||void 0===g?void 0:g.signInWithEthereum)||void 0===i?void 0:i.nonce,issuedAt:null!==(s=null===(r=null===g||void 0===g?void 0:g.signInWithEthereum)||void 0===r?void 0:r.issuedAt)&&void 0!==s?s:new Date,expirationTime:null===(a=null===g||void 0===g?void 0:g.signInWithEthereum)||void 0===a?void 0:a.expirationTime,notBefore:null===(o=null===g||void 0===g?void 0:g.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null===g||void 0===g?void 0:g.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null===g||void 0===g?void 0:g.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await m.request({method:"personal_sign",params:[ke(p),y]})}try{const{data:t,error:n}=await se(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:f},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:ae});if(n)throw n;if(!t||!t.session||!t.user){const e=new y;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(g){if(d(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var t,n,i,r,s,a,o,l,c,u,h,p;let f,g;if("message"in e)f=e.message,g=e.signature;else{const{chain:h,wallet:d,statement:p,options:m}=e;let v;if(B())if("object"===typeof d)v=d;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof d||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=d}const b=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===m||void 0===m?void 0:m.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),p?{statement:p}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),g=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=["".concat(b.host," wants you to sign in with your Solana account:"),v.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1","URI: ".concat(b.href),"Issued At: ".concat(null!==(i=null===(n=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==i?i:(new Date).toISOString()),...(null===(r=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===r?void 0:r.notBefore)?["Not Before: ".concat(m.signInWithSolana.notBefore)]:[],...(null===(s=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===s?void 0:s.expirationTime)?["Expiration Time: ".concat(m.signInWithSolana.expirationTime)]:[],...(null===(a=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===a?void 0:a.chainId)?["Chain ID: ".concat(m.signInWithSolana.chainId)]:[],...(null===(o=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(m.signInWithSolana.nonce)]:[],...(null===(l=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(m.signInWithSolana.requestId)]:[],...(null===(u=null===(c=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...m.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=e}}try{const{data:t,error:n}=await se(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:F(g)},(null===(h=e.options)||void 0===h?void 0:h.captchaToken)?{gotrue_meta_security:{captcha_token:null===(p=e.options)||void 0===p?void 0:p.captchaToken}}:null),xform:ae});if(n)throw n;if(!t||!t.session||!t.user){const e=new y;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(m){if(d(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const t=await V(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,i]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:r}=await se(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ae});if(await q(this.storage,"".concat(this.storageKey,"-code-verifier")),r)throw r;if(!t||!t.session||!t.user){const e=new y;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!==i&&void 0!==i?i:null}),error:r})}catch(r){if(await q(this.storage,"".concat(this.storageKey,"-code-verifier")),d(r))return this._returnResult({data:{user:null,session:null,redirectType:null},error:r});throw r}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:r,nonce:s}=e,a=await se(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:i,access_token:r,nonce:s,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:ae}),{data:o,error:l}=a;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const e=new y;return this._returnResult({data:{user:null,session:null},error:e})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:l})}catch(t){if(d(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,i,r,s;try{if("email"in e){const{email:i,options:r}=e;let s=null,a=null;"pkce"===this.flowType&&([s,a]=await J(this.storage,this.storageKey));const{error:o}=await se(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:i,data:null!==(t=null===r||void 0===r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(n=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},code_challenge:s,code_challenge_method:a},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await se(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(i=null===n||void 0===n?void 0:n.data)&&void 0!==i?i:{},create_user:null===(r=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(s=null===n||void 0===n?void 0:n.channel)&&void 0!==s?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:o})}throw new w("You must provide either an email or phone number.")}catch(a){if(await q(this.storage,"".concat(this.storageKey,"-code-verifier")),d(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var t,n;try{let i,r;"options"in e&&(i=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:s,error:a}=await se(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:ae});if(a)throw a;if(!s){throw new Error("An error occurred on token verification.")}const o=s.session,l=s.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(i){if(d(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var t,n,i,r,s;try{let a=null,o=null;"pkce"===this.flowType&&([a,o]=await J(this.storage,this.storageKey));const l=await se(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(i=null===e||void 0===e?void 0:e.options)||void 0===i?void 0:i.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:ce});return(null===(r=l.data)||void 0===r?void 0:r.url)&&B()&&!(null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(a){if(await q(this.storage,"".concat(this.storageKey,"-code-verifier")),d(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new v;const{error:i}=await se(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(d(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:i,options:r}=e,{error:s}=await se(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}if("phone"in e){const{phone:n,type:i,options:r}=e,{data:s,error:a}=await se(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:a})}throw new w("You must provide either an email or phone number and a type")}catch(t){if(d(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await V(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<a;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.userStorage){const t=await V(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=ee()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,n,i)=>{if("__isInsecureUserWarningProxy"===n)return!0;if("symbol"===typeof n){const t=n.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,n,i)}return t.value||"string"!==typeof n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,n,i)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?this._returnResult({data:{session:null},error:r}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await se(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:le}):await this._useSession(async e=>{var t,n,i;const{data:r,error:s}=e;if(s)throw s;return(null===(t=r.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await se(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(i=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==i?i:void 0,xform:le}):{data:{user:null},error:new v}})}catch(t){if(d(t))return b(t)&&(await this._removeSession(),await q(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:i,error:r}=n;if(r)throw r;if(!i.session)throw new v;const s=i.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await J(this.storage,this.storageKey));const{data:l,error:c}=await se(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:s.access_token,xform:le});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(await q(this.storage,"".concat(this.storageKey,"-code-verifier")),d(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new v;const t=Date.now()/1e3;let n=t,i=!0,r=null;const{payload:s}=K(e.access_token);if(s.exp&&(n=s.exp,i=n<=t),i){const{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:i,error:s}=await this._getUser(e.access_token);if(s)throw s;r={access_token:e.access_token,refresh_token:e.refresh_token,user:i.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return this._returnResult({data:{user:r.user,session:r},error:null})}catch(t){if(d(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:i,error:r}=t;if(r)throw r;e=null!==(n=i.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new v;const{data:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?this._returnResult({data:{user:null,session:null},error:r}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(d(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!B())throw new _("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new k("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new _("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new k("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const i=new URL(window.location.href);return i.searchParams.delete("code"),window.history.replaceState(window.history.state,"",i.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:r,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!r||!o||!a||!c)throw new _("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let d=u+h;l&&(d=parseInt(l));const p=d-u;1e3*p<=s&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(p,"s, should have been closer to ").concat(h,"s"));const f=d-h;u-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,u):u-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,u);const{data:g,error:m}=await this._getUser(r);if(m)throw m;const v={provider_token:n,provider_refresh_token:i,access_token:r,expires_in:h,expires_at:d,refresh_token:a,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(n){if(d(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await V(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:i,error:r}=t;if(r)return this._returnResult({error:r});const s=null===(n=i.session)||void 0===n?void 0:n.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!f(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await q(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:i},error:r}=t;if(r)throw r;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(r){await(null===(i=this.stateChangeEmitters.get(e))||void 0===i?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,i=null;"pkce"===this.flowType&&([n,i]=await J(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(await q(this.storage,"".concat(this.storageKey,"-code-verifier")),d(r))return this._returnResult({data:null,error:r});throw r}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(d(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:i}=await this._useSession(async t=>{var n,i,r,s,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(i=e.options)||void 0===i?void 0:i.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});if(i)throw i;return B()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),this._returnResult({data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null})}catch(n){if(d(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:i,data:{session:r}}=t;if(i)throw i;const{options:s,provider:a,token:o,access_token:l,nonce:c}=e,u=await se(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,jwt:null!==(n=null===r||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,body:{provider:a,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:ae}),{data:h,error:d}=u;return d?this._returnResult({data:{user:null,session:null},error:d}):h&&h.session&&h.user?(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:d})):this._returnResult({data:{user:null,session:null},error:new y})}catch(i){if(await q(this.storage,"".concat(this.storageKey,"-code-verifier")),d(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:r,error:s}=t;if(s)throw s;return await se(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(i=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==i?i:void 0})})}catch(t){if(d(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const r=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await se(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:ae})),i=(e,t)=>{const n=200*Math.pow(2,e);return t&&A(t)&&Date.now()+n-r<s},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await n(s);if(!i(s,null,t))return void e(t)}catch(r){if(!i(s,r))return void t(r)}})()}))}catch(r){if(this._debug(t,"error",r),d(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}var n,i}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),B()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await V(this.storage,this.storageKey);if(r&&this.userStorage){let t=await V(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:r.user},await H(this.userStorage,this.storageKey+"-user",t)),r.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:ee()}else if(r&&!r.user&&!r.user){const e=await V(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(r.user=e.user,await q(this.storage,this.storageKey+"-user"),await H(this.storage,this.storageKey,r)):r.user=ee()}if(this._debug(n,"session from storage",r),!this._isValidSession(r))return this._debug(n,"session is not valid"),void(null!==r&&await this._removeSession());const s=1e3*(null!==(t=r.expires_at)&&void 0!==t?t:1/0)-Date.now()<a;if(this._debug(n,"session has".concat(s?"":" not"," expired with margin of ").concat(a,"s")),s){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(console.error(e),A(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(r.user&&!0===r.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(r.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(r.user=e.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){return this._debug(n,"error",r),void console.error(r)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new v;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(i,"begin");try{this.refreshingDeferred=new G;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new v;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const i={data:t.session,error:null};return this.refreshingDeferred.resolve(i),i}catch(r){if(this._debug(i,"error",r),d(r)){const e={data:null,error:r};return A(r)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i="#_notifyAllSubscribers(".concat(e,")");this._debug(i,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],r=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(r){i.push(r)}});if(await Promise.all(r),i.length>0){for(let e=0;e<i.length;e+=1)console.error(i[e]);throw i[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await q(this.storage,"".concat(this.storageKey,"-code-verifier"));const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await H(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const i=te(e);await H(this.storage,this.storageKey,i)}else{const e=te(t);await H(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await q(this.storage,this.storageKey),await q(this.storage,this.storageKey+"-code-verifier"),await q(this.storage,this.storageKey+"-user"),this.userStorage&&await q(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&B()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),s);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const i=Math.floor((1e3*n.expires_at-t)/s);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(i," ticks, a tick lasts ").concat(s,"ms, refresh threshold is ").concat(3," ticks")),i<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof me))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!B()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&i.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&i.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await J(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});i.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);i.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&i.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(i.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:r}=t;return r?this._returnResult({data:null,error:r}):await se(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token})})}catch(t){if(d(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:r,error:s}=t;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await se(this.fetch,"POST","".concat(this.url,"/factors"),{body:a,headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null===(i=null===o||void 0===o?void 0:o.totp)||void 0===i?void 0:i.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),this._returnResult({data:o,error:null}))})}catch(t){if(d(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:r}=t;if(r)return this._returnResult({data:null,error:r});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Re(e.webauthn.credential_response):Oe(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:o}=await se(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:s,headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:o}))})}catch(t){if(d(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:r}=t;if(r)return this._returnResult({data:null,error:r});const s=await se(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:e,headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token});if(s.error)return s;const{data:a}=s;if("webauthn"!==a.type)return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Me(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Pe(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(d(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const r of null!==(e=null===t||void 0===t?void 0:t.factors)&&void 0!==e?e:[])i.all.push(r),"verified"===r.status&&i[r.factor_type].push(r);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=K(n.access_token);let s=null;r.aal&&(s=r.aal);let a=s;(null!==(t=null===(e=n.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(a="aal2");return{data:{currentLevel:s,nextLevel:a,currentAuthenticationMethods:r.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await se(this.fetch,"GET","".concat(this.url,"/oauth/authorizations/").concat(e),{headers:this.headers,jwt:n.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new v})})}catch(t){if(d(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;if(r)return this._returnResult({data:null,error:r});if(!i)return this._returnResult({data:null,error:new v});const s=await se(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&B()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(d(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;if(r)return this._returnResult({data:null,error:r});if(!i)return this._returnResult({data:null,error:new v});const s=await se(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&B()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(d(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await se(this.fetch,"GET","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new v})})}catch(e){if(d(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?(await se(this.fetch,"DELETE","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new v})})}catch(t){if(d(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:i,error:r}=await se(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(r)throw r;return i.keys&&0!==i.keys.length?(this.jwks=i,this.jwks_cached_at=n,t=i.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});n=e.session.access_token}const{header:i,payload:r,signature:s,raw:{header:a,payload:o}}=K(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(r.exp);const l=i.alg&&!i.alg.startsWith("HS")&&i.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(i.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:r,header:i,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(i.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,s,function(e){const t=[];return j(e,e=>t.push(e)),new Uint8Array(t)}("".concat(a,".").concat(o))))throw new T("Invalid JWT signature");return{data:{claims:r,header:i,signature:s},error:null}}catch(n){if(d(n))return this._returnResult({data:null,error:n});throw n}}}ze.nextInstanceID={};const He=ze,Ve=pe,qe=ze},664:(e,t)=>{function n(e){return e.endsWith("/")?e:e+"/"}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=void 0,t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},t.ensureTrailingSlash=n,t.applySettingDefaults=function(e,t){var n,i;const{db:r,auth:s,realtime:a,global:o}=e,{db:l,auth:c,realtime:u,global:h}=t,d={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},null!==(n=null===h||void 0===h?void 0:h.headers)&&void 0!==n?n:{}),null!==(i=null===o||void 0===o?void 0:o.headers)&&void 0!==i?i:{})}),accessToken:async()=>""};e.accessToken?d.accessToken=e.accessToken:delete d.accessToken;return d},t.validateSupabaseUrl=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(n(t))}catch(i){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}};t.isBrowser=()=>"undefined"!==typeof window},705:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function s(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>s})},732:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},733:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;t.resolveFetch=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)};t.resolveHeadersConstructor=()=>Headers;t.fetchWithAuth=(e,n,i)=>{const r=(0,t.resolveFetch)(i),s=(0,t.resolveHeadersConstructor)();return async(t,i)=>{var a;const o=null!==(a=await n())&&void 0!==a?a:e;let l=new s(null===i||void 0===i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),r(t,Object.assign(Object.assign({},i),{headers:l}))}}},827:(e,t,n)=>{n.r(t),n.d(t,{__addDisposableResource:()=>D,__assign:()=>s,__asyncDelegator:()=>A,__asyncGenerator:()=>S,__asyncValues:()=>E,__await:()=>k,__awaiter:()=>f,__classPrivateFieldGet:()=>O,__classPrivateFieldIn:()=>I,__classPrivateFieldSet:()=>N,__createBinding:()=>m,__decorate:()=>o,__disposeResources:()=>L,__esDecorate:()=>c,__exportStar:()=>v,__extends:()=>r,__generator:()=>g,__importDefault:()=>R,__importStar:()=>P,__makeTemplateObject:()=>C,__metadata:()=>p,__param:()=>l,__propKey:()=>h,__read:()=>y,__rest:()=>a,__rewriteRelativeImportExtension:()=>F,__runInitializers:()=>u,__setFunctionName:()=>d,__spread:()=>w,__spreadArray:()=>x,__spreadArrays:()=>_,__values:()=>b,default:()=>B});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function o(e,t,n,i){var r,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,n,a):r(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a}function l(e,t){return function(n,i){t(n,i,e)}}function c(e,t,n,i,r,s){function a(e){if(void 0!==e&&"function"!==typeof e)throw new TypeError("Function expected");return e}for(var o,l=i.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?i.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,i.name):{}),d=!1,p=n.length-1;p>=0;p--){var f={};for(var g in i)f[g]="access"===g?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var m=(0,n[p])("accessor"===l?{get:h.get,set:h.set}:h[c],f);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!==typeof m)throw new TypeError("Object expected");(o=a(m.get))&&(h.get=o),(o=a(m.set))&&(h.set=o),(o=a(m.init))&&r.unshift(o)}else(o=a(m))&&("field"===l?r.unshift(o):h[c]=o)}u&&Object.defineProperty(u,i.name,h),d=!0}function u(e,t,n){for(var i=arguments.length>2,r=0;r<t.length;r++)n=i?t[r].call(e,n):t[r].call(e);return i?n:void 0}function h(e){return"symbol"===typeof e?e:"".concat(e)}function d(e,t,n){return"symbol"===typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function p(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,i){return new(n||(n=Promise))(function(r,s){function a(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})}function g(e,t){var n,i,r,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(l){o=[6,l],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var m=Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]};function v(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||m(t,e,n)}function b(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(o){r={error:o}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function _(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,r++)i[r]=s[a];return i}function x(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function k(e){return this instanceof k?(this.v=e,this):new k(e)}function S(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),s=[];return i=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(e,t){r[e]&&(i[e]=function(t){return new Promise(function(n,i){s.push([e,t,n,i])>1||o(e,t)})},t&&(i[e]=t(i[e])))}function o(e,t){try{(n=r[e](t)).value instanceof k?Promise.resolve(n.value.v).then(l,c):u(s[0][2],n)}catch(i){u(s[0][3],i)}var n}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}function A(e){var t,n;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:k(e[i](t)),done:!1}:r?r(t):t}:r}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=b(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise(function(i,r){(function(e,t,n,i){Promise.resolve(i).then(function(t){e({value:t,done:n})},t)})(i,r,(t=e[n](t)).done,t.value)})}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var T=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},M=function(e){return M=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},M(e)};function P(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=M(e),i=0;i<n.length;i++)"default"!==n[i]&&m(t,e,n[i]);return T(t,e),t}function R(e){return e&&e.__esModule?e:{default:e}}function O(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function N(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n}function I(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}function D(e,t,n){if(null!==t&&void 0!==t){if("object"!==typeof t&&"function"!==typeof t)throw new TypeError("Object expected.");var i,r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],n&&(r=i)}if("function"!==typeof i)throw new TypeError("Object not disposable.");r&&(i=function(){try{r.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:i,async:n})}else n&&e.stack.push({async:!0});return t}var j="function"===typeof SuppressedError?SuppressedError:function(e,t,n){var i=new Error(n);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function L(e){function t(t){e.error=e.hasError?new j(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,i=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===i)return i=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(s).then(r,function(e){return t(e),r()})}else i|=1}catch(a){t(a)}if(1===i)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function F(e,t){return"string"===typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,i,r,s){return n?t?".jsx":".js":!i||r&&s?i+r+"."+s.toLowerCase()+"js":e}):e}const B={__extends:r,__assign:s,__rest:a,__decorate:o,__param:l,__esDecorate:c,__runInitializers:u,__propKey:h,__setFunctionName:d,__metadata:p,__awaiter:f,__generator:g,__createBinding:m,__exportStar:v,__values:b,__read:y,__spread:w,__spreadArrays:_,__spreadArray:x,__await:k,__asyncGenerator:S,__asyncDelegator:A,__asyncValues:E,__makeTemplateObject:C,__importStar:P,__importDefault:R,__classPrivateFieldGet:O,__classPrivateFieldSet:N,__classPrivateFieldIn:I,__addDisposableResource:D,__disposeResources:L,__rewriteRelativeImportExtension:F}},863:(e,t,n)=>{var i=n(950);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(r(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(r(299));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin),r="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):"script"===n&&a.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},868:(e,t,n)=>{n.r(t),n.d(t,{StorageAnalyticsClient:()=>D,StorageApiError:()=>a,StorageClient:()=>ne,StorageError:()=>r,StorageUnknownError:()=>o,StorageVectorsApiError:()=>B,StorageVectorsClient:()=>Z,StorageVectorsError:()=>L,StorageVectorsErrorCode:()=>U,StorageVectorsUnknownError:()=>W,VectorBucketApi:()=>$,VectorBucketScope:()=>ee,VectorDataApi:()=>Q,VectorIndexApi:()=>J,VectorIndexScope:()=>te,isPlainObject:()=>V,isStorageError:()=>s,isStorageVectorsError:()=>F,normalizeToFloat32:()=>q,resolveFetch:()=>z,resolveResponse:()=>H,validateVectorDimension:()=>G});var i=n(827);class r extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function s(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class a extends r{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class o extends r{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const l=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},c=e=>{if(Array.isArray(e))return e.map(e=>c(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,i]=e;const r=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=c(i)}),t},u=e=>{var t;return e.msg||e.message||e.error_description||("string"===typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},h=(e,t,n)=>(0,i.__awaiter)(void 0,void 0,void 0,function*(){const i=yield Response;e instanceof i&&!(null===n||void 0===n?void 0:n.noResolveJson)?e.json().then(n=>{const i=e.status||500,r=(null===n||void 0===n?void 0:n.statusCode)||i+"";t(new a(u(n),i,r))}).catch(e=>{t(new o(u(e),e))}):t(new o(u(e),e))}),d=(e,t,n,i)=>{const r={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&i?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(i)?(r.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r.body=JSON.stringify(i)):r.body=i,(null===t||void 0===t?void 0:t.duplex)&&(r.duplex=t.duplex),Object.assign(Object.assign({},r),n)):r};function p(e,t,n,r,s,a){return(0,i.__awaiter)(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,d(t,r,s,a)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>h(e,o,r))})})}function f(e,t,n,r){return(0,i.__awaiter)(this,void 0,void 0,function*(){return p(e,"GET",t,n,r)})}function g(e,t,n,r,s){return(0,i.__awaiter)(this,void 0,void 0,function*(){return p(e,"POST",t,r,s,n)})}function m(e,t,n,r,s){return(0,i.__awaiter)(this,void 0,void 0,function*(){return p(e,"PUT",t,r,s,n)})}function v(e,t,n,r,s){return(0,i.__awaiter)(this,void 0,void 0,function*(){return p(e,"DELETE",t,r,s,n)})}class b{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(s(e))return{data:null,error:e};throw e}})}}var y;y=Symbol.toStringTag;const w=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[y]="BlobDownloadBuilder",this.promise=null}asStream(){return new b(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(s(e))return{data:null,error:e};throw e}})}},_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},x={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class k{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=l(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},x),r);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const o=s.metadata;if("undefined"!==typeof Blob&&n instanceof Blob)i=new FormData,i.append("cacheControl",s.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",n);else if("undefined"!==typeof FormData&&n instanceof FormData)i=n,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),o&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(o));else{i=n,a["cache-control"]="max-age=".concat(s.cacheControl),a["content-type"]=s.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)));("undefined"!==typeof ReadableStream&&i instanceof ReadableStream||i&&"object"===typeof i&&"pipe"in i&&"function"===typeof i.pipe)&&!s.duplex&&(s.duplex="half")}(null===r||void 0===r?void 0:r.headers)&&(a=Object.assign(Object.assign({},a),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?m:g)(this.fetch,"".concat(this.url,"/object/").concat(c),i,Object.assign({headers:a},(null===s||void 0===s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(s(i))return{data:null,error:i};throw i}})}upload(e,t,n){return(0,i.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return(0,i.__awaiter)(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+"/object/upload/sign/".concat(a));o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:x.upsert},r),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,s["cache-control"]="max-age=".concat(t.cacheControl),s["content-type"]=t.contentType);return{data:{path:i,fullPath:(yield m(this.fetch,o.toString(),e,{headers:s})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(s(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(i["x-upsert"]="true");const s=yield g(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new r("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(s(n))return{data:null,error:n};throw n}})}update(e,t,n){return(0,i.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield g(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(s(i))return{data:null,error:i};throw i}})}copy(e,t,n){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield g(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(s(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),r=yield g(this.fetch,"".concat(this.url,"/object/sign/").concat(i),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const s=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return r={signedUrl:encodeURI("".concat(this.url).concat(r.signedURL).concat(s))},{data:r,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(s(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{const i=yield g(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),r=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:i.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(r)):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(s(i))return{data:null,error:i};throw i}})}download(e,t){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),r=i?"?".concat(i):"",s=this._getFinalPath(e);return new w(()=>f(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(s).concat(r),{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield f(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:c(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(s(n))return{data:null,error:n};throw n}})}exists(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return(0,i.__awaiter)(this,void 0,void 0,function*(){return p(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(s(n)&&n instanceof o){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],r=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==r&&i.push(r);const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==a&&i.push(a);let o=i.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(s,"/public/").concat(n).concat(o))}}}remove(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield v(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(s(t))return{data:null,error:t};throw t}})}list(e,t,n){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},_),t),{prefix:e||""});return{data:yield g(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(s(i))return{data:null,error:i};throw i}})}listV2(e,t){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield g(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(s(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const S="2.87.1",A={"X-Client-Info":"storage-js/".concat(S)};class E{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const r=new URL(e);if(null===i||void 0===i?void 0:i.useNewHostname){/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."))}this.url=r.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},A),t),this.fetch=l(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield f(this.fetch,"".concat(this.url,"/bucket").concat(t),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(s(t))return{data:null,error:t};throw t}})}getBucket(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield f(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(s(t))return{data:null,error:t};throw t}})}createBucket(e){return(0,i.__awaiter)(this,arguments,void 0,function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return function*(){try{return{data:yield g(t.fetch,"".concat(t.url,"/bucket"),{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(s(i))return{data:null,error:i};throw i}}()})}updateBucket(e,t){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield m(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(s(n))return{data:null,error:n};throw n}})}emptyBucket(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield g(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(s(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield v(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(s(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var C=n(379),T=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&!0===(null===(n=t.icebergType)||void 0===n?void 0:n.includes("CommitState"))}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function M(e){var t;const n=null!==(t=e.fetchImpl)&&void 0!==t?t:globalThis.fetch;return{async request(t){let{method:i,path:r,query:s,body:a,headers:o}=t;const l=function(e,t,n){const i=new URL(t,e);if(n)for(const[r,s]of Object.entries(n))void 0!==s&&i.searchParams.set(r,s);return i.toString()}(e.baseUrl,r,s),c=await async function(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:"Bearer ".concat(e.token)}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}(e.auth),u=await n(l,{method:i,headers:(0,C.A)((0,C.A)((0,C.A)({},a?{"Content-Type":"application/json"}:{}),c),o),body:a?JSON.stringify(a):void 0}),h=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),p=d&&h?JSON.parse(h):h;if(!u.ok){var f;const e=d?p:void 0,t=null===e||void 0===e?void 0:e.error;throw new T(null!==(f=null===t||void 0===t?void 0:t.message)&&void 0!==f?f:"Request failed with status ".concat(u.status),{status:u.status,icebergType:null===t||void 0===t?void 0:t.type,icebergCode:null===t||void 0===t?void 0:t.code,details:e})}return{status:u.status,headers:u.headers,data:p}}}}function P(e){return e.join("\x1f")}var R=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:P(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces"),query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:null===t||void 0===t?void 0:t.properties};return(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces"),body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(P(e.namespace))})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(P(e.namespace))})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(P(e.namespace))}),!0}catch(t){if(t instanceof T&&404===t.status)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof T&&409===n.status)return;throw n}}};function O(e){return e.join("\x1f")}var N=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(O(e.namespace),"/tables")})).data.identifiers}async createTable(e,t){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(O(e.namespace),"/tables"),body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(O(e.namespace),"/tables/").concat(e.name),body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){var n;await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(O(e.namespace),"/tables/").concat(e.name),query:{purgeRequested:String(null!==(n=null===t||void 0===t?void 0:t.purge)&&void 0!==n&&n)}})}async loadTable(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(O(e.namespace),"/tables/").concat(e.name),headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(O(e.namespace),"/tables/").concat(e.name),headers:t}),!0}catch(n){if(n instanceof T&&404===n.status)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof T&&409===n.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},I=class{constructor(e){var t;let n="v1";e.catalogName&&(n+="/".concat(e.catalogName));const i=e.baseUrl.endsWith("/")?e.baseUrl:"".concat(e.baseUrl,"/");this.client=M({baseUrl:i,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=null===(t=e.accessDelegation)||void 0===t?void 0:t.join(","),this.namespaceOps=new R(this.client,n),this.tableOps=new N(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class D{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},A),t),this.fetch=l(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield g(this.fetch,"".concat(this.url,"/bucket"),{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(s(t))return{data:null,error:t};throw t}})}listBuckets(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==(null===e||void 0===e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null===e||void 0===e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null===e||void 0===e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null===e||void 0===e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null===e||void 0===e?void 0:e.search)&&t.set("search",e.search);const n=t.toString(),i=n?"".concat(this.url,"/bucket?").concat(n):"".concat(this.url,"/bucket");return{data:yield f(this.fetch,i,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(s(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield v(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(s(t))return{data:null,error:t};throw t}})}from(e){if(!(e=>!(!e||"string"!==typeof e)&&(!(0===e.length||e.length>100)&&(e.trim()===e&&(!e.includes("/")&&!e.includes("\\")&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e)))))(e))throw new r("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new I({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>(0,i.__awaiter)(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError,s=new Proxy(t,{get(e,t){var r=this;const s=e[t];return"function"!==typeof s?s:function(){for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(0,i.__awaiter)(r,void 0,void 0,function*(){try{return{data:yield s.apply(e,a),error:null}}catch(t){if(n)throw t;return{data:null,error:t}}})}}});return s}}const j={"X-Client-Info":"storage-js/".concat(S),"Content-Type":"application/json"};class L extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function F(e){return"object"===typeof e&&null!==e&&"__isStorageVectorsError"in e}class B extends L{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class W extends L{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var U;!function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"}(U||(U={}));const z=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},H=()=>Response,V=e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},q=e=>Array.from(new Float32Array(e)),G=(e,t)=>{if(void 0!==t&&e.float32.length!==t)throw new Error("Vector dimension mismatch: expected ".concat(t,", got ").concat(e.float32.length))},K=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);function X(e,t,n,r,s,a){return(0,i.__awaiter)(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,((e,t,n,i)=>{const r={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&i?(V(i)?(r.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r.body=JSON.stringify(i)):r.body=i,Object.assign(Object.assign({},r),n)):r})(t,r,s,a)).then(e=>{if(!e.ok)throw e;if(null===r||void 0===r?void 0:r.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>o(e)).catch(e=>((e,t,n)=>(0,i.__awaiter)(void 0,void 0,void 0,function*(){if(e&&"object"===typeof e&&"status"in e&&"ok"in e&&"number"===typeof e.status&&!(null===n||void 0===n?void 0:n.noResolveJson)){const n=e.status||500,i=e;if("function"===typeof i.json)i.json().then(e=>{const i=(null===e||void 0===e?void 0:e.statusCode)||(null===e||void 0===e?void 0:e.code)||n+"";t(new B(K(e),n,i))}).catch(()=>{const e=n+"",r=i.statusText||"HTTP ".concat(n," error");t(new B(r,n,e))});else{const e=n+"",r=i.statusText||"HTTP ".concat(n," error");t(new B(r,n,e))}}else t(new W(K(e),e))}))(e,l,r))})})}function Y(e,t,n,r,s){return(0,i.__awaiter)(this,void 0,void 0,function*(){return X(e,"POST",t,r,s,n)})}class J{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},j),t),this.fetch=z(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield Y(this.fetch,"".concat(this.url,"/CreateIndex"),e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(F(t))return{data:null,error:t};throw t}})}getIndex(e,t){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Y(this.fetch,"".concat(this.url,"/GetIndex"),{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(F(n))return{data:null,error:n};throw n}})}listIndexes(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Y(this.fetch,"".concat(this.url,"/ListIndexes"),e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(F(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield Y(this.fetch,"".concat(this.url,"/DeleteIndex"),{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(F(n))return{data:null,error:n};throw n}})}}class Q{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},j),t),this.fetch=z(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Y(this.fetch,"".concat(this.url,"/PutVectors"),e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(F(t))return{data:null,error:t};throw t}})}getVectors(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Y(this.fetch,"".concat(this.url,"/GetVectors"),e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(F(t))return{data:null,error:t};throw t}})}listVectors(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and ".concat(e.segmentCount-1))}return{data:yield Y(this.fetch,"".concat(this.url,"/ListVectors"),e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(F(t))return{data:null,error:t};throw t}})}queryVectors(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Y(this.fetch,"".concat(this.url,"/QueryVectors"),e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(F(t))return{data:null,error:t};throw t}})}deleteVectors(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Y(this.fetch,"".concat(this.url,"/DeleteVectors"),e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(F(t))return{data:null,error:t};throw t}})}}class ${constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},j),t),this.fetch=z(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield Y(this.fetch,"".concat(this.url,"/CreateVectorBucket"),{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(F(t))return{data:null,error:t};throw t}})}getBucket(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Y(this.fetch,"".concat(this.url,"/GetVectorBucket"),{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(F(t))return{data:null,error:t};throw t}})}listBuckets(){return(0,i.__awaiter)(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){try{return{data:yield Y(e.fetch,"".concat(e.url,"/ListVectorBuckets"),t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(F(n))return{data:null,error:n};throw n}}()})}deleteBucket(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield Y(this.fetch,"".concat(this.url,"/DeleteVectorBucket"),{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(F(t))return{data:null,error:t};throw t}})}}class Z extends ${constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t.headers||{},t.fetch)}from(e){return new ee(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return(0,i.__awaiter)(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return(0,i.__awaiter)(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return(0,i.__awaiter)(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){return e.listBuckets.call(t,n)}()})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return(0,i.__awaiter)(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class ee extends J{constructor(e,t,n,i){super(e,t,i),this.vectorBucketName=n}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,i.__awaiter)(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,i.__awaiter)(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){return e.listIndexes.call(t,Object.assign(Object.assign({},n),{vectorBucketName:t.vectorBucketName}))}()})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,i.__awaiter)(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,i.__awaiter)(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new te(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class te extends Q{constructor(e,t,n,i,r){super(e,t,r),this.vectorBucketName=n,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,i.__awaiter)(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,i.__awaiter)(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,i.__awaiter)(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){return e.listVectors.call(t,Object.assign(Object.assign({},n),{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}()})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,i.__awaiter)(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,i.__awaiter)(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class ne extends E{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new k(this.url,this.headers,e,this.fetch)}get vectors(){return new Z(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new D(this.url+"/iceberg",this.headers,this.fetch)}}},893:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const a=s(n(896));r(n(646),t);var o=n(53);Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return o.PostgrestError}});var l=n(123);Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return l.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return l.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return l.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return l.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return l.FunctionRegion}}),r(n(478),t);var c=n(896);Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return s(c).default}});t.createClient=(e,t,n)=>new a.default(e,t,n),function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18}()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")},896:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(123),r=n(53),s=n(478),a=n(868),o=n(500),l=n(733),c=n(664),u=n(426);t.default=class{constructor(e,t,n){var i,s,u;this.supabaseUrl=e,this.supabaseKey=t;const h=(0,c.validateSupabaseUrl)(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const d="sb-".concat(h.hostname.split(".")[0],"-auth-token"),p={db:o.DEFAULT_DB_OPTIONS,realtime:o.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},o.DEFAULT_AUTH_OPTIONS),{storageKey:d}),global:o.DEFAULT_GLOBAL_OPTIONS},f=(0,c.applySettingDefaults)(null!==n&&void 0!==n?n:{},p);this.storageKey=null!==(i=f.auth.storageKey)&&void 0!==i?i:"",this.headers=null!==(s=f.global.headers)&&void 0!==s?s:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(u=f.auth)&&void 0!==u?u:{},this.headers,f.global.fetch),this.fetch=(0,l.fetchWithAuth)(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new r.PostgrestClient(new URL("rest/v1",h).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new a.StorageClient(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new i.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{head:!1,get:!1,count:void 0};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:i,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:o,storageKey:l,flowType:c,lock:h,debug:d,throwOnError:p}=e;const f={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new u.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),t),storageKey:l,autoRefreshToken:i,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:o,flowType:c,lock:h,debug:d,throwOnError:p,fetch:n,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new s.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}}},916:(e,t)=>{var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function r(e,t,i){var r=null;if(void 0!==i&&(r=""+i),void 0!==t.key&&(r=""+t.key),"key"in t)for(var s in i={},t)"key"!==s&&(i[s]=t[s]);else i=t;return t=i.ref,{$$typeof:n,type:e,key:r,ref:void 0!==t?t:null,props:i}}t.Fragment=i,t.jsx=r,t.jsxs=r},950:(e,t,n)=>{e.exports=n(983)},983:(e,t)=>{var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var w=y.prototype=new b;w.constructor=y,g(w,v.prototype),w.isPureReactComponent=!0;var _=Array.isArray,x={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function S(e,t,i,r,s,a){return i=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:a}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(){}function M(e,t,r,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case i:u=!0;break;case d:return M((u=e._init)(e._payload),t,r,s,a)}}if(u)return a=a(e),u=""===s?"."+C(e,0):s,_(a)?(r="",null!=u&&(r=u.replace(E,"$&/")+"/"),M(a,t,r,"",function(e){return e})):null!=a&&(A(a)&&(l=a,c=r+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+u,a=S(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var h,f=""===s?".":s+":";if(_(e))for(var g=0;g<e.length;g++)u+=M(s=e[g],t,r,o=f+C(s,g),a);else if("function"===typeof(g=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(e=g.call(e),g=0;!(s=e.next()).done;)u+=M(s=s.value,t,r,o=f+C(s,g++),a);else if("object"===o){if("function"===typeof e.then)return M(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(T,T):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,r,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function P(e,t,n){if(null==e)return e;var i=[],r=0;return M(e,i,"","",function(e){return t.call(n,e,r++)}),i}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function N(){}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=y,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return x.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var i=g({},e.props),r=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(r=""+t.key),t)!k.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(i[s]=t[s]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];i.children=a}return S(e.type,r,void 0,0,0,i)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var i,r={},s=null;if(null!=t)for(i in void 0!==t.key&&(s=""+t.key),t)k.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(r[i]=t[i]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(e&&e.defaultProps)for(i in a=e.defaultProps)void 0===r[i]&&(r[i]=a[i]);return S(e,s,void 0,0,0,r)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=x.T,n={};x.T=n;try{var i=e(),r=x.S;null!==r&&r(n,i),"object"===typeof i&&null!==i&&"function"===typeof i.then&&i.then(N,O)}catch(s){O(s)}finally{x.T=t}},t.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},t.use=function(e){return x.H.use(e)},t.useActionState=function(e,t,n){return x.H.useActionState(e,t,n)},t.useCallback=function(e,t){return x.H.useCallback(e,t)},t.useContext=function(e){return x.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return x.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var i=x.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)},t.useId=function(){return x.H.useId()},t.useImperativeHandle=function(e,t,n){return x.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return x.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return x.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return x.H.useMemo(e,t)},t.useOptimistic=function(e,t){return x.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return x.H.useReducer(e,t,n)},t.useRef=function(e){return x.H.useRef(e)},t.useState=function(e){return x.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return x.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return x.H.useTransition()},t.version="19.1.1"}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&i;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>i[e]);return a.default=()=>i,n.d(s,a),s}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,i)=>(n.f[i](e,t),t),[])),n.u=e=>"static/js/"+e+".f3758955.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="my-app-name:";n.l=(i,r,s,a)=>{if(e[i])e[i].push(r);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+s){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[r];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(e=>e(n)),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise((n,i)=>r=e[t]=[n,i]);i.push(r[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}},"chunk-"+t,t)}};var t=(t,i)=>{var r,s,a=i[0],o=i[1],l=i[2],c=0;if(a.some(t=>0!==e[t])){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(t&&t(i);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunkmy_app_name=self.webpackChunkmy_app_name||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var i=n(950),r=n(352);function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var a=n(379);const o=["sri"],l=["page"],c=["page","matches"],u=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],h=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],d=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var p="popstate";function f(){return _(function(e,t){let{pathname:n="/",search:i="",hash:r=""}=w(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),b("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),i="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");i=-1===n?t:t.slice(0,n)}return i+"#"+("string"===typeof t?t:y(t))},function(e,t){m("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push(".concat(JSON.stringify(t),")"))},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function g(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function m(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return(0,a.A)((0,a.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?w(t):t),{},{state:n,key:t&&t.key||i||Math.random().toString(36).substring(2,10)})}function y(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function w(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function _(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,l="POP",c=null,u=h();function h(){return(o.state||{idx:null}).idx}function d(){l="POP";let e=h(),t=null==e?null:e-u;u=e,c&&c({action:l,location:g.location,delta:t})}function f(e){return x(e)}null==u&&(u=0,o.replaceState((0,a.A)((0,a.A)({},o.state),{},{idx:u}),""));let g={get action(){return l},get location(){return e(r,o)},listen(e){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(p,d),c=e,()=>{r.removeEventListener(p,d),c=null}},createHref:e=>t(r,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let i=b(g.location,e,t);n&&n(i,e),u=h()+1;let a=v(i,u),d=g.createHref(i);try{o.pushState(a,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;r.location.assign(d)}s&&c&&c({action:l,location:g.location,delta:1})},replace:function(e,t){l="REPLACE";let i=b(g.location,e,t);n&&n(i,e),u=h();let r=v(i,u),a=g.createHref(i);o.replaceState(r,"",a),s&&c&&c({action:l,location:g.location,delta:0})},go:e=>o.go(e)};return g}function x(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),g(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof e?e:y(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function k(e,t){return S(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function S(e,t,n,i){let r=B(("string"===typeof t?w(t):t).pathname||"/",n);if(null==r)return null;let s=A(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=F(r);a=D(s[o],e,i)}return a}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(i)&&a)return;g(l.relativePath.startsWith(i),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(i,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(i.length)}let c=V([i,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(g(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),A(e.children,t,u,c,a)),(null!=e.path||e.index)&&t.push({path:c,score:I(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let i of E(e.path))s(e,t,!0,i);else s(e,t)}),t}function E(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let a=E(i.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),r&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var C=/^:[\w-]+$/,T=3,M=2,P=1,R=10,O=-2,N=e=>"*"===e;function I(e,t){let n=e.split("/"),i=n.length;return n.some(N)&&(i+=O),t&&(i+=M),n.filter(e=>!N(e)).reduce((e,t)=>e+(C.test(t)?T:""===t?P:R),i)}function D(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=e,r={},s="/",a=[];for(let o=0;o<i.length;++o){let e=i[o],l=o===i.length-1,c="/"===s?t:t.slice(s.length)||"/",u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),a.push({params:r,pathname:V([s,u.pathname]),pathnameBase:q(V([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=V([s,u.pathnameBase]))}return a}function j(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=L(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function L(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];m("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function F(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return m(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function B(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function W(e,t,n,i){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(i),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function U(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function z(e){let t=U(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function H(e,t,n){let i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?i=w(e):(i=(0,a.A)({},e),g(!i.pathname||!i.pathname.includes("?"),W("?","pathname","search",i)),g(!i.pathname||!i.pathname.includes("#"),W("#","pathname","hash",i)),g(!i.search||!i.search.includes("#"),W("#","search","hash",i)));let s,o=""===e||""===i.pathname,l=o?"/":i.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:r=""}="string"===typeof e?w(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:G(i),hash:K(r)}}(i,s),u=l&&"/"!==l&&l.endsWith("/"),h=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}var V=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),G=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",K=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function X(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Y=["POST","PUT","PATCH","DELETE"],J=(new Set(Y),["GET",...Y]);new Set(J),Symbol("ResetLoaderData");var Q=i.createContext(null);Q.displayName="DataRouter";var $=i.createContext(null);$.displayName="DataRouterState";var Z=i.createContext(!1);var ee=i.createContext({isTransitioning:!1});ee.displayName="ViewTransition";var te=i.createContext(new Map);te.displayName="Fetchers";var ne=i.createContext(null);ne.displayName="Await";var ie=i.createContext(null);ie.displayName="Navigation";var re=i.createContext(null);re.displayName="Location";var se=i.createContext({outlet:null,matches:[],isDataRoute:!1});se.displayName="Route";var ae=i.createContext(null);ae.displayName="RouteError";function oe(){return null!=i.useContext(re)}function le(){return g(oe(),"useLocation() may be used only in the context of a <Router> component."),i.useContext(re).location}var ce="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ue(e){i.useContext(ie).static||i.useLayoutEffect(e)}function he(){let{isDataRoute:e}=i.useContext(se);return e?function(){let{router:e}=we("useNavigate"),t=xe("useNavigate"),n=i.useRef(!1);ue(()=>{n.current=!0});let r=i.useCallback(async function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(n.current,ce),n.current&&("number"===typeof i?e.navigate(i):await e.navigate(i,(0,a.A)({fromRouteId:t},r)))},[e,t]);return r}():function(){g(oe(),"useNavigate() may be used only in the context of a <Router> component.");let e=i.useContext(Q),{basename:t,navigator:n}=i.useContext(ie),{matches:r}=i.useContext(se),{pathname:s}=le(),a=JSON.stringify(z(r)),o=i.useRef(!1);ue(()=>{o.current=!0});let l=i.useCallback(function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(m(o.current,ce),!o.current)return;if("number"===typeof i)return void n.go(i);let l=H(i,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:V([t,l.pathname])),(r.replace?n.replace:n.push)(l,r.state,r)},[t,n,a,s,e]);return l}()}i.createContext(null);function de(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=i.useContext(se),{pathname:r}=le(),s=JSON.stringify(z(n));return i.useMemo(()=>H(e,JSON.parse(s),r,"path"===t),[e,s,r,t])}function pe(e,t,n,r,s){g(oe(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=i.useContext(ie),{matches:l}=i.useContext(se),c=l[l.length-1],u=c?c.params:{},h=c?c.pathname:"/",d=c?c.pathnameBase:"/",p=c&&c.route;{let e=p&&p.path||"";Ae(h,!p||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(h,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let f,v=le();if(t){var b;let e="string"===typeof t?w(t):t;g("/"===d||(null===(b=e.pathname)||void 0===b?void 0:b.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),f=e}else f=v;let y=f.pathname||"/",_=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");_="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=k(e,{pathname:_});m(p||null!=x,'No routes matched location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" ')),m(null==x||void 0!==x[x.length-1].route.element||void 0!==x[x.length-1].route.Component||void 0!==x[x.length-1].route.lazy,'Matched leaf route at location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let S=be(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:V([d,o.encodeLocation?o.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:V([d,o.encodeLocation?o.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),l,n,r,s);return t&&S?i.createElement(re.Provider,{value:{location:(0,a.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},S):S}function fe(){let e=ke(),t=X(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=i.createElement(i.Fragment,null,i.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),i.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",i.createElement("code",{style:a},"ErrorBoundary")," or"," ",i.createElement("code",{style:a},"errorElement")," prop on your route.")),i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,o)}var ge=i.createElement(fe,null),me=class extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?i.createElement(se.Provider,{value:this.props.routeContext},i.createElement(ae.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ve(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(Q);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(se.Provider,{value:t},r)}function be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,a=null===n||void 0===n?void 0:n.errors;if(null!=a){let e=s.findIndex(e=>e.route.id&&void 0!==(null===a||void 0===a?void 0:a[e.route.id]));g(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(a).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let o=!1,l=-1;if(n)for(let i=0;i<s.length;i++){let e=s[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=i),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){o=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((e,c,u)=>{let h,d=!1,p=null,f=null;n&&(h=a&&c.route.id?a[c.route.id]:void 0,p=c.route.errorElement||ge,o&&(l<0&&0===u?(Ae("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):l===u&&(d=!0,f=c.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,u+1)),m=()=>{let t;return t=h?p:d?f:c.route.Component?i.createElement(c.route.Component,null):c.route.element?c.route.element:e,i.createElement(ve,{match:c,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?i.createElement(me,{location:n.location,revalidation:n.revalidation,component:p,error:h,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0},unstable_onError:r}):m()},null)}function ye(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function we(e){let t=i.useContext(Q);return g(t,ye(e)),t}function _e(e){let t=i.useContext($);return g(t,ye(e)),t}function xe(e){let t=function(e){let t=i.useContext(se);return g(t,ye(e)),t}(e),n=t.matches[t.matches.length-1];return g(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function ke(){var e;let t=i.useContext(ae),n=_e("useRouteError"),r=xe("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[r]}var Se={};function Ae(e,t,n){t||Se[e]||(Se[e]=!0,m(!1,n))}var Ee={};function Ce(e,t){e||Ee[t]||(Ee[t]=!0,console.warn(t))}i.memo(function(e){let{routes:t,future:n,state:i,unstable_onError:r}=e;return pe(t,void 0,i,r,n)});function Te(e){g(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Me(e){let{basename:t="/",children:n=null,location:r,navigationType:s="POP",navigator:a,static:o=!1}=e;g(!oe(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=i.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);"string"===typeof r&&(r=w(r));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:f="default"}=r,v=i.useMemo(()=>{let e=B(u,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:p,key:f},navigationType:s}},[l,u,h,d,p,f,s]);return m(null!=v,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(h).concat(d,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==v?null:i.createElement(ie.Provider,{value:c},i.createElement(re.Provider,{children:n,value:v}))}function Pe(e){let{children:t,location:n}=e;return pe(Re(t),n)}i.Component;function Re(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,Re(e.props.children,s));g(e.type===Te,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),g(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Re(e.props.children,s)),n.push(a)}),n}var Oe="get",Ne="application/x-www-form-urlencoded";function Ie(e){return null!=e&&"string"===typeof e.tagName}var De=null;var je=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Le(e){return null==e||je.has(e)?e:(m(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ne,'"')),null)}function Fe(e,t){let n,i,r,s,a;if(Ie(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");i=a?B(a,t):null,n=e.getAttribute("method")||Oe,r=Le(e.getAttribute("enctype"))||Ne,s=new FormData(e)}else if(function(e){return Ie(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ie(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(i=o?B(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Oe,r=Le(e.getAttribute("formenctype"))||Le(a.getAttribute("enctype"))||Ne,s=new FormData(a,e),!function(){if(null===De)try{new FormData(document.createElement("form"),0),De=!1}catch(e){De=!0}return De}()){let{name:t,type:n,value:i}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,i)}}else{if(Ie(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Oe,i=null,r=Ne,a=e}var o;return s&&"text/plain"===r&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Be(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function We(e,t,n){let i="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===i.pathname?i.pathname="_root.".concat(n):t&&"/"===B(i.pathname,t)?i.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):i.pathname="".concat(i.pathname.replace(/\/$/,""),".").concat(n),i}async function Ue(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ze(e){return null!=e&&"string"===typeof e.page}function He(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ve(e,t,n,i,r,s){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var i;return n[t].pathname!==e.pathname||(null===(i=n[t].route.path)||void 0===i?void 0:i.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let l=i.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){var c;let i=t.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0}):[]}function qe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=e.map(e=>{let i=t.routes[e.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1),[...new Set(i)];var i}function Ge(e,t){let n=new Set,i=new Set(t);return e.reduce((e,r)=>{if(t&&!ze(r)&&"script"===r.as&&r.href&&i.has(r.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}(r));return n.has(s)||(n.add(s),e.push({key:s,link:r})),e},[])}function Ke(e,t){return"lazy"===e.mode&&!0===t}function Xe(){let e=i.useContext(Q);return Be(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ye(){let e=i.useContext($);return Be(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Je=i.createContext(void 0);function Qe(){let e=i.useContext(Je);return Be(e,"You must render this element inside a <HydratedRouter> element"),e}function $e(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Ze(e,t,n){if(n&&!it)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}Je.displayName="FrameworkContext";function et(e){let{page:t}=e,n=s(e,l),{router:r}=Xe(),o=i.useMemo(()=>k(r.routes,t,r.basename),[r.routes,t,r.basename]);return o?i.createElement(nt,(0,a.A)({page:t,matches:o},n)):null}function tt(e){let{manifest:t,routeModules:n}=Qe(),[r,s]=i.useState([]);return i.useEffect(()=>{let i=!1;return async function(e,t,n){return Ge((await Promise.all(e.map(async e=>{let i=t.routes[e.route.id];if(i){let e=await Ue(i,n);return e.links?e.links():[]}return[]}))).flat(1).filter(He).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?(0,a.A)((0,a.A)({},e),{},{rel:"prefetch",as:"style"}):(0,a.A)((0,a.A)({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{i||s(e)}),()=>{i=!0}},[e,t,n]),r}function nt(e){let{page:t,matches:n}=e,r=s(e,c),o=le(),{manifest:l,routeModules:u}=Qe(),{basename:h}=Xe(),{loaderData:d,matches:p}=Ye(),f=i.useMemo(()=>Ve(t,n,p,l,o,"data"),[t,n,p,l,o]),g=i.useMemo(()=>Ve(t,n,p,l,o,"assets"),[t,n,p,l,o]),m=i.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let e=new Set,i=!1;if(n.forEach(t=>{var n;let r=l.routes[t.route.id];r&&r.hasLoader&&(!f.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(n=u[t.route.id])&&void 0!==n&&n.shouldRevalidate||r.hasClientLoader?i=!0:e.add(t.route.id))}),0===e.size)return[];let r=We(t,h,"data");return i&&e.size>0&&r.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[r.pathname+r.search]},[h,d,o,l,f,n,t,u]),v=i.useMemo(()=>qe(g,l),[g,l]),b=tt(g);return i.createElement(i.Fragment,null,m.map(e=>i.createElement("link",(0,a.A)({key:e,rel:"prefetch",as:"fetch",href:e},r))),v.map(e=>i.createElement("link",(0,a.A)({key:e,rel:"modulepreload",href:e},r))),b.map(e=>{let{key:t,link:n}=e;return i.createElement("link",(0,a.A)({key:t,nonce:r.nonce},n))}))}var it=!1;function rt(e){let{manifest:t,serverHandoffString:n,isSpaMode:r,renderMeta:l,routeDiscovery:c,ssr:u}=Qe(),{router:h,static:d,staticContext:p}=Xe(),{matches:f}=Ye(),g=i.useContext(Z),m=Ke(c,u);l&&(l.didRenderScripts=!0);let v=Ze(f,null,r);i.useEffect(()=>{it=!0},[]);let b=i.useMemo(()=>{var r;if(g)return null;let l=p?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",c=d?"".concat(null!==(r=t.hmr)&&void 0!==r&&r.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(m?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(v.map((e,n)=>{let i="route".concat(n),r=t.routes[e.route.id];Be(r,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=r,u=[...s?[{module:s,varName:"".concat(i,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(i,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(i,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(i,"_HydrateFallback")}]:[],{module:c,varName:"".concat(i,"_main")}];return 1===u.length?"import * as ".concat(i," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(i," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(m?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,i=s(e,o),r=new Set(t.state.matches.map(e=>e.route.id)),l=t.state.location.pathname.split("/").filter(Boolean),c=["/"];for(l.pop();l.length>0;)c.push("/".concat(l.join("/"))),l.pop();c.forEach(e=>{let n=k(t.routes,e,t.basename);n&&n.forEach(e=>r.add(e.route.id))});let u=[...r].reduce((e,t)=>Object.assign(e,{[t]:i.routes[t]}),{});return(0,a.A)((0,a.A)({},i),{},{routes:u,sri:!!n||void 0})}(t,h),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return i.createElement(i.Fragment,null,i.createElement("script",(0,a.A)((0,a.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:l},type:void 0})),i.createElement("script",(0,a.A)((0,a.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:c},type:"module",async:!0})))},[]),y=it||g?[]:(w=t.entry.imports.concat(qe(v,t,{includeHydrateFallback:!0})),[...new Set(w)]);var w;let _="object"===typeof t.sri?t.sri:{};return Ce(!g,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),it||g?null:i.createElement(i.Fragment,null,"object"===typeof t.sri?i.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:_})}}):null,m?null:i.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:_[t.url],suppressHydrationWarning:!0}),i.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:_[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>i.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:_[t],suppressHydrationWarning:!0})),b)}function st(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}i.Component;function at(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,s=i.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(X(t))return i.createElement(ot,{title:"Unhandled Thrown Response!"},i.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),s);if(t instanceof Error)r=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);r=new Error(e)}return i.createElement(ot,{title:"Application Error!",isOutsideRemixApp:n},i.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),i.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),s)}function ot(e){var t;let{title:n,renderScripts:r,isOutsideRemixApp:s,children:a}=e,{routeModules:o}=Qe();return null!==(t=o.root)&&void 0!==t&&t.Layout&&!s?a:i.createElement("html",{lang:"en"},i.createElement("head",null,i.createElement("meta",{charSet:"utf-8"}),i.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),i.createElement("title",null,n)),i.createElement("body",null,i.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,r?i.createElement(rt,null):null)))}var lt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{lt&&(window.__reactRouterVersion="7.9.4")}catch(O_){}function ct(e){let{basename:t,children:n,window:r}=e,s=i.useRef();null==s.current&&(s.current=f({window:r,v5Compat:!0}));let a=s.current,[o,l]=i.useState({action:a.action,location:a.location}),c=i.useCallback(e=>{i.startTransition(()=>l(e))},[l]);return i.useLayoutEffect(()=>a.listen(c),[a,c]),i.createElement(Me,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a})}var ut=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ht=i.forwardRef(function(e,t){let n,{onClick:r,discover:o="render",prefetch:l="none",relative:c,reloadDocument:h,replace:d,state:p,target:f,to:v,preventScrollReset:b,viewTransition:w}=e,_=s(e,u),{basename:x}=i.useContext(ie),k="string"===typeof v&&ut.test(v),S=!1;if("string"===typeof v&&k&&(n=v,lt))try{let e=new URL(window.location.href),t=v.startsWith("//")?new URL(e.protocol+v):new URL(v),n=B(t.pathname,x);t.origin===e.origin&&null!=n?v=n+t.search+t.hash:S=!0}catch(O_){m(!1,'<Link to="'.concat(v,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let A=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(oe(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=i.useContext(ie),{hash:s,pathname:a,search:o}=de(e,{relative:t}),l=a;return"/"!==n&&(l="/"===a?n:V([n,a])),r.createHref({pathname:l,search:o,hash:s})}(v,{relative:c}),[E,C,T]=function(e,t){let n=i.useContext(Je),[r,s]=i.useState(!1),[a,o]=i.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=t,p=i.useRef(null);i.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),i.useEffect(()=>{if(r){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[r]);let f=()=>{s(!0)},g=()=>{s(!1),o(!1)};return n?"intent"!==e?[a,p,{}]:[a,p,{onFocus:$e(l,f),onBlur:$e(c,g),onMouseEnter:$e(u,f),onMouseLeave:$e(h,g),onTouchStart:$e(d,f)}]:[!1,p,{}]}(l,_),M=function(e){let{target:t,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=he(),c=le(),u=de(e,{relative:a});return i.useCallback(i=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(i,t)){i.preventDefault();let t=void 0!==n?n:y(c)===y(u);l(e,{replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,n,r,t,e,s,a,o])}(v,{replace:d,state:p,target:f,preventScrollReset:b,relative:c,viewTransition:w});let P=i.createElement("a",(0,a.A)((0,a.A)((0,a.A)({},_),T),{},{href:n||A,onClick:S||h?r:function(e){r&&r(e),e.defaultPrevented||M(e)},ref:st(t,C),target:f,"data-discover":k||"render"!==o?void 0:"true"}));return E&&!k?i.createElement(i.Fragment,null,P,i.createElement(et,{page:A})):P});ht.displayName="Link",i.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:o="",end:l=!1,style:c,to:u,viewTransition:d,children:p}=e,f=s(e,h),m=de(u,{relative:f.relative}),v=le(),b=i.useContext($),{navigator:y,basename:w}=i.useContext(ie),_=null!=b&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.useContext(ee);g(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ft("useViewTransitionState"),s=de(e,{relative:t});if(!n.isTransitioning)return!1;let a=B(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=B(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=j(s.pathname,o)||null!=j(s.pathname,a)}(m)&&!0===d,x=y.encodeLocation?y.encodeLocation(m).pathname:m.pathname,k=v.pathname,S=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(k=k.toLowerCase(),S=S?S.toLowerCase():null,x=x.toLowerCase()),S&&w&&(S=B(S,w)||S);const A="/"!==x&&x.endsWith("/")?x.length-1:x.length;let E,C=k===x||!l&&k.startsWith(x)&&"/"===k.charAt(A),T=null!=S&&(S===x||!l&&S.startsWith(x)&&"/"===S.charAt(x.length)),M={isActive:C,isPending:T,isTransitioning:_},P=C?n:void 0;E="function"===typeof o?o(M):[o,C?"active":null,T?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let R="function"===typeof c?c(M):c;return i.createElement(ht,(0,a.A)((0,a.A)({},f),{},{"aria-current":P,className:E,ref:t,style:R,to:u,viewTransition:d}),"function"===typeof p?p(M):p)}).displayName="NavLink";var dt=i.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:r,navigate:o,reloadDocument:l,replace:c,state:u,method:h=Oe,action:p,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:b}=e,w=s(e,d),_=vt(),x=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=i.useContext(ie),r=i.useContext(se);g(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o=(0,a.A)({},de(e||".",{relative:t})),l=le();if(null==e){o.search=l.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();o.search=n?"?".concat(n):""}}e&&"."!==e||!s.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:V([n,o.pathname]));return y(o)}(p,{relative:m}),k="get"===h.toLowerCase()?"get":"post",S="string"===typeof p&&ut.test(p);return i.createElement("form",(0,a.A)((0,a.A)({ref:t,method:k,action:x,onSubmit:l?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||h;_(t||e.currentTarget,{fetcherKey:r,method:n,navigate:o,replace:c,state:u,relative:m,preventScrollReset:v,viewTransition:b})}},w),{},{"data-discover":S||"render"!==n?void 0:"true"}))});function pt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function ft(e){let t=i.useContext(Q);return g(t,pt(e)),t}dt.displayName="Form";var gt=0,mt=()=>"__".concat(String(++gt),"__");function vt(){let{router:e}=ft("useSubmit"),{basename:t}=i.useContext(ie),n=xe("useRouteId");return i.useCallback(async function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:a,encType:o,formData:l,body:c}=Fe(i,t);if(!1===r.navigate){let t=r.fetcherKey||mt();await e.fetch(t,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await e.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,n])}const bt="https://test-ten-tau-16.vercel.app";var yt=n(414);let wt=bt;const _t=(0,i.createContext)();function xt(e){let{children:t}=e;const[n,r]=(0,i.useState)(null),[s,a]=(0,i.useState)(!0),o=localStorage.getItem("token");return(0,i.useEffect)(()=>{!async function(){if(o){try{const e=await fetch("".concat(wt,"/api/user/me"),{headers:{Authorization:"Bearer ".concat(o)}}),t=await e.json();e.ok&&r(t.user)}catch(e){console.log("Auth error:",e)}a(!1)}else a(!1)}()},[o]),(0,yt.jsx)(_t.Provider,{value:{user:n,setUser:r,loading:s,token:o},children:t})}function kt(e,t,n){t||(t=[]);var i=t.length++;return Object.defineProperty({},"_",{set:function(r){t[i]=r,e.apply(n,t)}})}function St(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function At(e,t){St(e,t),t.add(e)}function Et(e,t,n){St(e,t),t.set(e,n)}function Ct(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Tt(e,t,n){return n(Ct(e,t))}function Mt(e,t){return e.get(Ct(e,t))}function Pt(e,t,n){return e.set(Ct(e,t),n),n}var Rt,Ot,Nt,It,Dt,jt,Lt,Ft,Bt,Wt,Ut,zt,Ht,Vt,qt,Gt,Kt,Xt,Yt=n(705);function Jt(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Jt=function(e){this.s=e,this.n=e.next},Jt.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Jt(e)}const Qt="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),$t=[.001,0,0,.001,0,0],Zt=1.35,en=1,tn=2,nn=4,rn=16,sn=32,an=64,on=128,ln=256,cn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},un="pdfjs_internal_editor_",hn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},dn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},pn=1,fn=2,gn=0,mn=1,vn=2,bn=3,yn=3,wn=4,_n={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},xn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},kn=1,Sn=2,An=3,En=4,Cn=5,Tn={ERRORS:0,WARNINGS:1,INFOS:5},Mn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Pn=0,Rn=1,On=2,Nn=3,In=4;let Dn=Tn.WARNINGS;function jn(e){Number.isInteger(e)&&(Dn=e)}function Ln(){return Dn}function Fn(e){Dn>=Tn.INFOS&&console.info("Info: ".concat(e))}function Bn(e){Dn>=Tn.WARNINGS&&console.warn("Warning: ".concat(e))}function Wn(e){throw new Error(e)}function Un(e,t){e||Wn(t)}function zn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch(r){}}const i=t?URL.parse(e,t):URL.parse(e);return function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i)?i:null}function Hn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=URL.parse(e);return i?(i.hash=t,i.href):n&&zn(e,"http://example.com")?e.split("#",1)[0]+"".concat(t?"#".concat(t):""):""}function Vn(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const qn=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e,e}();class Gn extends qn{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Kn extends qn{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Xn extends qn{constructor(e){super(e,"InvalidPDFException")}}class Yn extends qn{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class Jn extends qn{constructor(e){super(e,"FormatError")}}class Qn extends qn{constructor(e){super(e,"AbortException")}}function $n(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||Wn("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const i=[];for(let r=0;r<t;r+=n){const s=Math.min(r+n,t),a=e.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Zn(e){"string"!==typeof e&&Wn("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let i=0;i<t;++i)n[i]=255&e.charCodeAt(i);return n}class ei{static get isLittleEndian(){return Vn(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return Vn(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return Vn(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get isImageDecoderSupported(){return Vn(this,"isImageDecoderSupported","undefined"!==typeof ImageDecoder)}static get isFloat16ArraySupported(){return Vn(this,"isFloat16ArraySupported","undefined"!==typeof Float16Array)}static get isSanitizerSupported(){return Vn(this,"isSanitizerSupported","undefined"!==typeof Sanitizer)}static get platform(){const{platform:e,userAgent:t}=navigator;return Vn(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Vn(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const ti=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class ni{static makeHexColor(e,t,n){return"#".concat(ti[e]).concat(ti[t]).concat(ti[n])}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=e[n],r=e[n+1];e[n]=i*t[0]+r*t[2]+t[4],e[n+1]=i*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5];for(let c=0;c<6;c+=2){const t=e[n+c],u=e[n+c+1];e[n+c]=t*i+u*s+o,e[n+c+1]=t*r+u*a+l}}static applyInverseTransform(e,t){const n=e[0],i=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,n){const i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5],c=e[0],u=e[1],h=e[2],d=e[3];let p=i*c+o,f=p,g=i*h+o,m=g,v=a*u+l,b=v,y=a*d+l,w=y;if(0!==r||0!==s){const e=r*c,t=r*h,n=s*u,i=s*d;p+=n,m+=n,g+=i,f+=i,v+=e,w+=e,y+=t,b+=t}n[0]=Math.min(n[0],p,g,f,m),n[1]=Math.min(n[1],v,y,b,w),n[2]=Math.max(n[2],p,g,f,m),n[3]=Math.max(n[3],v,y,b,w)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],r=e[2],s=e[3],a=n**2+i**2,o=n*r+i*s,l=r**2+s**2,c=(a+l)/2,u=Math.sqrt(c**2-(a*l-o**2));t[0]=Math.sqrt(c+u||1),t[1]=Math.sqrt(c-u||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>s?null:[n,r,i,s]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,r){r[0]=Math.min(r[0],e,n),r[1]=Math.min(r[1],t,i),r[2]=Math.max(r[2],e,n),r[3]=Math.max(r[3],t,i)}static bezierBoundingBox(e,t,n,i,r,s,a,o,l){l[0]=Math.min(l[0],e,a),l[1]=Math.min(l[1],t,o),l[2]=Math.max(l[2],e,a),l[3]=Math.max(l[3],t,o),Ct(ni,this,ri).call(this,e,n,r,a,t,i,s,o,3*(3*(n-r)-e+a),6*(e-2*n+r),3*(n-e),l),Ct(ni,this,ri).call(this,e,n,r,a,t,i,s,o,3*(3*(i-s)-t+o),6*(t-2*i+s),3*(i-t),l)}}function ii(e,t,n,i,r,s,a,o,l,c){if(l<=0||l>=1)return;const u=1-l,h=l*l,d=h*l,p=u*(u*(u*e+3*l*t)+3*h*n)+d*i,f=u*(u*(u*r+3*l*s)+3*h*a)+d*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],f),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],f)}function ri(e,t,n,i,r,s,a,o,l,c,u,h){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&Ct(Rt,this,ii).call(this,e,t,n,i,r,s,a,o,-u/c,h));const d=c**2-4*u*l;if(d<0)return;const p=Math.sqrt(d),f=2*l;Ct(Rt,this,ii).call(this,e,t,n,i,r,s,a,o,(-c+p)/f,h),Ct(Rt,this,ii).call(this,e,t,n,i,r,s,a,o,(-c-p)/f,h)}Rt=ni;let si=null,ai=null;function oi(){if("function"===typeof crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);return crypto.getRandomValues(e),$n(e)}const li="pdfjs_internal_id_";function ci(e,t,n){return Math.min(Math.max(e,t),n)}function ui(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa($n(e))}"function"!==typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise(t=>{t(e(...n))})}),"function"!==typeof Math.sumPrecise&&(Math.sumPrecise=function(e){return e.reduce((e,t)=>e+t,0)});class hi{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var i;if(!n)return;let r=null;const s=n.name;if("#text"===s)r=n.value;else{if(!hi.shouldBuildText(s))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?r=n.attributes.textContent:n.value&&(r=n.value)}if(null!==r&&t.push({str:r}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}class di{static setupStorage(e,t,n,i,r){const s=i.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==s.value&&(e.textContent=s.value),"print"===r)break;e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===r)break;e.addEventListener("change",e=>{i.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==s.value&&e.setAttribute("value",s.value),"print"===r)break;e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})})}break;case"select":if(null!==s.value){e.setAttribute("value",s.value);for(const e of n.children)e.attributes.value===s.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",e=>{const n=e.target.options,r=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(t,{value:r})})}}static setAttributes(e){let{html:t,element:n,storage:i=null,intent:r,linkService:s}=e;const{attributes:a}=n,o=t instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(r));for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&s.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,n,i)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,r=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:r,linkService:n});const a="richText"!==r,o=e.div;if(o.append(s),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");o.style.transform=t}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const e=document.createTextNode(i.value);s.append(e),a&&hi.shouldBuildText(i.name)&&l.push(e)}return{textDivs:l}}const c=[[i,-1,s]];for(;c.length>0;){var u,h;const[e,i,s]=c.at(-1);if(i+1===e.children.length){c.pop();continue}const o=e.children[++c.at(-1)[1]];if(null===o)continue;const{name:d}=o;if("#text"===d){const e=document.createTextNode(o.value);l.push(e),s.append(e);continue}const p=null!==o&&void 0!==o&&null!==(u=o.attributes)&&void 0!==u&&u.xmlns?document.createElementNS(o.attributes.xmlns,d):document.createElement(d);if(s.append(p),o.attributes&&this.setAttributes({html:p,element:o,storage:t,intent:r,linkService:n}),(null===(h=o.children)||void 0===h?void 0:h.length)>0)c.push([o,-1,p]);else if(o.value){const e=document.createTextNode(o.value);a&&hi.shouldBuildText(d)&&l.push(e),p.append(e)}}for(const d of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const pi="http://www.w3.org/2000/svg";class fi{}async function gi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(_i(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE)if(200!==r.status&&0!==r.status)i(new Error(r.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(r.response)}n(r.responseText)}},r.send(null)})}Ot=fi,(0,Yt.A)(fi,"CSS",96),(0,Yt.A)(fi,"PDF",72),(0,Yt.A)(fi,"PDF_TO_CSS_UNITS",Ot.CSS/Ot.PDF);class mi{constructor(e){let{viewBox:t,userUnit:n,scale:i,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}=e;this.viewBox=t,this.userUnit=n,this.scale=i,this.rotation=r,this.offsetX=s,this.offsetY=a,i*=n;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let u,h,d,p,f,g,m,v;switch(r%=360,r<0&&(r+=360),r){case 180:u=-1,h=0,d=0,p=1;break;case 90:u=0,h=1,d=1,p=0;break;case 270:u=0,h=-1,d=-1,p=0;break;case 0:u=1,h=0,d=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,p=-p),0===u?(f=Math.abs(c-t[1])*i+s,g=Math.abs(l-t[0])*i+a,m=(t[3]-t[1])*i,v=(t[2]-t[0])*i):(f=Math.abs(l-t[0])*i+s,g=Math.abs(c-t[1])*i+a,m=(t[2]-t[0])*i,v=(t[3]-t[1])*i),this.transform=[u*i,h*i,d*i,p*i,f-u*i*l-d*i*c,g-h*i*l-p*i*c],this.width=m,this.height=v}get rawDims(){const e=this.viewBox;return Vn(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new mi({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){const n=[e,t];return ni.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];ni.applyTransform(t,this.transform);const n=[e[2],e[3]];return ni.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return ni.applyInverseTransform(n,this.transform),n}}class vi extends qn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function bi(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function yi(e){return"string"===typeof e&&/\.pdf$/i.test(e)}class wi{constructor(){(0,Yt.A)(this,"started",Object.create(null)),(0,Yt.A)(this,"times",[])}time(e){e in this.started&&Bn("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||Bn("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:r}of this.times)e.push("".concat(n.padEnd(t)," ").concat(r-i,"ms\n"));return e.join("")}}function _i(e,t){const n=t?URL.parse(e,t):URL.parse(e);return"http:"===(null===n||void 0===n?void 0:n.protocol)||"https:"===(null===n||void 0===n?void 0:n.protocol)}function xi(e){e.preventDefault()}function ki(e){e.preventDefault(),e.stopPropagation()}class Si{static toDateObject(e){if(e instanceof Date)return e;if(!e||"string"!==typeof e)return null;Ct(Si,this,Ai)._||(Ai._=Ct(Si,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const t=Ct(Si,this,Ai)._.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===l?(s+=c,a+=u):"+"===l&&(s-=c,a-=u),new Date(Date.UTC(n,i,r,s,a,o))}}var Ai={_:void 0};function Ei(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Bn('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function Ci(e){const{a:t,b:n,c:i,d:r,e:s,f:a}=e.getTransform();return[t,n,i,r,s,a]}function Ti(e){const{a:t,b:n,c:i,d:r,e:s,f:a}=e.getTransform().invertSelf();return[t,n,i,r,s,a]}function Mi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof mi){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:s}=e,a=ei.isCSSRoundSupported,o="var(--total-scale-factor) * ".concat(i,"px"),l="var(--total-scale-factor) * ".concat(r,"px"),c=a?"round(down, ".concat(o,", var(--scale-round-x))"):"calc(".concat(o,")"),u=a?"round(down, ".concat(l,", var(--scale-round-y))"):"calc(".concat(l,")");n&&t.rotation%180!==0?(s.width=u,s.height=c):(s.width=c,s.height=u)}i&&e.setAttribute("data-main-rotation",t.rotation)}class Pi{constructor(){const{pixelRatio:e}=Pi;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=1/0,a=1/0,o=1/0;(n=Pi.capPixels(n,r))>0&&(s=Math.sqrt(n/(e*t))),-1!==i&&(a=i/e,o=i/t);const l=Math.min(s,a,o);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const Ri=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Oi{static get isDarkMode(){var e,t;return Vn(this,"isDarkMode",!(null===(e=window)||void 0===e||null===(t=e.matchMedia)||void 0===t||!t.call(e,"(prefers-color-scheme: dark)").matches))}}function Ni(e,t){const n=e[0]/255,i=e[1]/255,r=e[2]/255,s=Math.max(n,i,r),a=Math.min(n,i,r),o=(s+a)/2;if(s===a)t[0]=t[1]=0;else{const e=s-a;switch(t[1]=o<.5?e/(s+a):e/(2-s-a),s){case n:t[0]=60*((i-r)/e+(i<r?6:0));break;case i:t[0]=60*((r-n)/e+2);break;case r:t[0]=60*((n-i)/e+4)}}t[2]=o}function Ii(e,t){const n=e[0],i=e[1],r=e[2],s=(1-Math.abs(2*r-1))*i,a=s*(1-Math.abs(n/60%2-1)),o=r-s/2;switch(Math.floor(n/60)){case 0:t[0]=s+o,t[1]=a+o,t[2]=o;break;case 1:t[0]=a+o,t[1]=s+o,t[2]=o;break;case 2:t[0]=o,t[1]=s+o,t[2]=a+o;break;case 3:t[0]=o,t[1]=a+o,t[2]=s+o;break;case 4:t[0]=a+o,t[1]=o,t[2]=s+o;break;case 5:case 6:t[0]=s+o,t[1]=o,t[2]=a+o}}function Di(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function ji(e,t,n){Ii(e,n),n.map(Di);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];Ii(t,n),n.map(Di);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}const Li=new Map;function Fi(e,t){let{html:n,dir:i,className:r}=e;const s=document.createDocumentFragment();if("string"===typeof n){const e=document.createElement("p");e.dir=i||"auto";const t=n.split(/(?:\r\n?|\n)/);for(let n=0,i=t.length;n<i;++n){const r=t[n];e.append(document.createTextNode(r)),n<i-1&&e.append(document.createElement("br"))}s.append(e)}else di.render({xfaHtml:n,div:s,intent:"richText"});s.firstElementChild.classList.add("richText",r),t.append(s)}function Bi(e){const t=new Path2D;if(!e)return t;for(let n=0,i=e.length;n<i;)switch(e[n++]){case Pn:t.moveTo(e[n++],e[n++]);break;case Rn:t.lineTo(e[n++],e[n++]);break;case On:t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);break;case Nn:t.quadraticCurveTo(e[n++],e[n++],e[n++],e[n++]);break;case In:t.closePath();break;default:Bn("Unrecognized drawing path operator: ".concat(e[n-1]))}return t}var Wi=new WeakMap,Ui=new WeakMap,zi=new WeakMap,Hi=new WeakMap,Vi=new WeakMap,qi=new WeakMap,Gi=new WeakMap,Ki=new WeakMap,Xi=new WeakSet;class Yi{constructor(e){At(this,Xi),Et(this,Wi,null),Et(this,Ui,null),Et(this,zi,void 0),Et(this,Hi,null),Et(this,Vi,null),Et(this,qi,null),Et(this,Gi,null),Et(this,Ki,null),Pt(zi,this,e),tr._||(tr._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=Pt(Wi,this,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=Mt(zi,this)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",xi,{signal:t}),e.addEventListener("pointerdown",Ji,{signal:t}));const n=Pt(Hi,this,document.createElement("div"));n.className="buttons",e.append(n);const i=Mt(zi,this).toolbarPosition;if(i){const{style:t}=e,n="ltr"===Mt(zi,this)._uiManager.direction?1-i[0]:i[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return e}get div(){return Mt(Wi,this)}hide(){var e;Mt(Wi,this).classList.add("hidden"),null===(e=Mt(Ui,this))||void 0===e||e.hideDropdown()}show(){var e,t;Mt(Wi,this).classList.remove("hidden"),null===(e=Mt(Vi,this))||void 0===e||e.shown(),null===(t=Mt(qi,this))||void 0===t||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=Mt(zi,this),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",tr._[e]),Ct(Xi,this,Zi).call(this,n)&&n.addEventListener("click",e=>{t.delete()},{signal:t._signal}),Mt(Hi,this).append(n)}async addAltText(e){const t=await e.render();Ct(Xi,this,Zi).call(this,t),Mt(Hi,this).append(t,Tt(Xi,this,er)),Pt(Vi,this,e)}addComment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Mt(qi,this))return;const n=e.renderForToolbar();if(!n)return;Ct(Xi,this,Zi).call(this,n);const i=Pt(Gi,this,Tt(Xi,this,er));t?(Mt(Hi,this).insertBefore(n,t),Mt(Hi,this).insertBefore(i,t)):Mt(Hi,this).append(n,i),Pt(qi,this,e),e.toolbar=this}addColorPicker(e){if(Mt(Ui,this))return;Pt(Ui,this,e);const t=e.renderButton();Ct(Xi,this,Zi).call(this,t),Mt(Hi,this).append(t,Tt(Xi,this,er))}async addEditSignatureButton(e){const t=Pt(Ki,this,await e.renderEditButton(Mt(zi,this)));Ct(Xi,this,Zi).call(this,t),Mt(Hi,this).append(t,Tt(Xi,this,er))}removeButton(e){var t,n;if("comment"===e)null===(t=Mt(qi,this))||void 0===t||t.removeToolbarCommentButton(),Pt(qi,this,null),null===(n=Mt(Gi,this))||void 0===n||n.remove(),Pt(Gi,this,null)}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t)}}async addButtonBefore(e,t,n){if(!t&&"comment"===e)return;const i=Mt(Hi,this).querySelector(n);i&&"comment"===e&&this.addComment(t,i)}updateEditSignatureButton(e){Mt(Ki,this)&&(Mt(Ki,this).title=e)}remove(){var e;Mt(Wi,this).remove(),null===(e=Mt(Ui,this))||void 0===e||e.destroy(),Pt(Ui,this,null)}}function Ji(e){e.stopPropagation()}function Qi(e){Mt(zi,this)._focusEventsAllowed=!1,ki(e)}function $i(e){Mt(zi,this)._focusEventsAllowed=!0,ki(e)}function Zi(e){const t=Mt(zi,this)._uiManager._signal;return t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("focusin",Ct(Xi,this,Qi).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",Ct(Xi,this,$i).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",xi,{signal:t}),!0)}function er(e){const t=document.createElement("div");return t.className="divider",t}var tr={_:null},nr=new WeakMap,ir=new WeakMap,rr=new WeakMap,sr=new WeakSet;class ar{constructor(e){At(this,sr),Et(this,nr,null),Et(this,ir,null),Et(this,rr,void 0),Pt(rr,this,e)}show(e,t,n){const[i,r]=Ct(sr,this,lr).call(this,t,n),{style:s}=Mt(ir,this)||Pt(ir,this,Ct(sr,this,or).call(this));e.append(Mt(ir,this)),s.insetInlineEnd="".concat(100*i,"%"),s.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}hide(){Mt(ir,this).remove()}}function or(){const e=Pt(ir,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=Mt(rr,this)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",xi,{signal:t});const n=Pt(nr,this,document.createElement("div"));return n.className="buttons",e.append(n),Mt(rr,this).hasCommentManager()&&Ct(sr,this,cr).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{Mt(rr,this).commentSelection("floating_button")}),Ct(sr,this,cr).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{Mt(rr,this).highlightSelection("floating_button")}),e}function lr(e,t){let n=0,i=0;for(const r of e){const e=r.y+r.height;if(e<n)continue;const s=r.x+(t?r.width:0);e>n?(i=s,n=e):t?s>i&&(i=s):s<i&&(i=s)}return[t?1-i:i,n]}function cr(e,t,n,i){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const s=document.createElement("span");r.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",n);const a=Mt(rr,this)._signal;a instanceof AbortSignal&&!a.aborted&&(r.addEventListener("contextmenu",xi,{signal:a}),r.addEventListener("click",i,{signal:a})),Mt(nr,this).append(r)}function ur(e,t,n){for(const i of n)t.addEventListener(i,e[i].bind(e))}class hr{static initializeAndAddPointerId(e){(pr._||(pr._=new Set)).add(e)}static setPointer(e,t){var n;dr._||(dr._=t),null!==(n=gr._)&&void 0!==n||(gr._=e)}static setTimeStamp(e){fr._=e}static isSamePointerId(e){return dr._===e}static isSamePointerIdOrRemove(e){var t;return dr._===e||(null===(t=pr._)||void 0===t||t.delete(e),!1)}static isSamePointerType(e){return gr._===e}static isInitializedAndDifferentPointerType(e){return null!==gr._&&!hr.isSamePointerType(e)}static isSameTimeStamp(e){return fr._===e}static isUsingMultiplePointers(){var e;return(null===(e=pr._)||void 0===e?void 0:e.size)>=1}static clearPointerType(){gr._=null}static clearPointerIds(){dr._=NaN,pr._=null}static clearTimeStamp(){fr._=NaN}}var dr={_:NaN},pr={_:null},fr={_:NaN},gr={_:null},mr=new WeakMap;class vr{constructor(){Et(this,mr,0)}get id(){var e,t;return"".concat(un).concat((Pt(mr,this,(e=Mt(mr,this),t=e++,e)),t))}}var br=new WeakMap,yr=new WeakMap,wr=new WeakMap,_r=new WeakSet;class xr{constructor(){At(this,_r),Et(this,br,oi()),Et(this,yr,0),Et(this,wr,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return Vn(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){const{lastModified:t,name:n,size:i,type:r}=e;return Ct(_r,this,kr).call(this,"".concat(t,"_").concat(n,"_").concat(i,"_").concat(r),e)}async getFromUrl(e){return Ct(_r,this,kr).call(this,e,e)}async getFromBlob(e,t){const n=await t;return Ct(_r,this,kr).call(this,e,n)}async getFromId(e){Mt(wr,this)||Pt(wr,this,new Map);const t=Mt(wr,this).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){var n,i,r;Mt(wr,this)||Pt(wr,this,new Map);let s=Mt(wr,this).get(e);if(null!==(r=s)&&void 0!==r&&r.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(t.width,t.height);return a.getContext("2d").drawImage(t,0,0),s={bitmap:a.transferToImageBitmap(),id:"image_".concat(Mt(br,this),"_").concat((Pt(yr,this,(n=Mt(yr,this),i=n++,n)),i)),refCounter:1,isSvg:!1},Mt(wr,this).set(e,s),Mt(wr,this).set(s.id,s),s}getSvgUrl(e){const t=Mt(wr,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){var t;Mt(wr,this)||Pt(wr,this,new Map);const n=Mt(wr,this).get(e);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:i}=n;if(!n.url&&!n.file){const e=new OffscreenCanvas(i.width,i.height);e.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=e.convertToBlob()}null===(t=i.close)||void 0===t||t.call(i),n.bitmap=null}isValidId(e){return e.startsWith("image_".concat(Mt(br,this),"_"))}}async function kr(e,t){var n;Mt(wr,this)||Pt(wr,this,new Map);let i=Mt(wr,this).get(e);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var r,s;let e;if(i||(i={bitmap:null,id:"image_".concat(Mt(br,this),"_").concat((Pt(yr,this,(r=Mt(yr,this),s=r++,r)),s)),refCounter:0,isSvg:!1}),"string"===typeof t?(i.url=t,e=await gi(t,"blob")):t instanceof File?e=i.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){const t=Nt._isSVGFittingCanvas,n=new FileReader,r=new Image,s=new Promise((e,s)=>{r.onload=()=>{i.bitmap=r,i.isSvg=!0,e()},n.onload=async()=>{const e=i.svgUrl=n.result;r.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},r.onerror=n.onerror=s});n.readAsDataURL(e),await s}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(O_){Bn(O_),i=null}return Mt(wr,this).set(e,i),i&&Mt(wr,this).set(i.id,i),i}Nt=xr;var Sr=new WeakMap,Ar=new WeakMap,Er=new WeakMap,Cr=new WeakMap;class Tr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;Et(this,Sr,[]),Et(this,Ar,!1),Et(this,Er,void 0),Et(this,Cr,-1),Pt(Er,this,e)}add(e){let{cmd:t,undo:n,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=e;if(r&&t(),Mt(Ar,this))return;const l={cmd:t,undo:n,post:i,type:s};if(-1===Mt(Cr,this))return Mt(Sr,this).length>0&&(Mt(Sr,this).length=0),Pt(Cr,this,0),void Mt(Sr,this).push(l);if(a&&Mt(Sr,this)[Mt(Cr,this)].type===s)return o&&(l.undo=Mt(Sr,this)[Mt(Cr,this)].undo),void(Mt(Sr,this)[Mt(Cr,this)]=l);const c=Mt(Cr,this)+1;c===Mt(Er,this)?Mt(Sr,this).splice(0,1):(Pt(Cr,this,c),c<Mt(Sr,this).length&&Mt(Sr,this).splice(c)),Mt(Sr,this).push(l)}undo(){if(-1===Mt(Cr,this))return;Pt(Ar,this,!0);const{undo:e,post:t}=Mt(Sr,this)[Mt(Cr,this)];e(),null===t||void 0===t||t(),Pt(Ar,this,!1),Pt(Cr,this,Mt(Cr,this)-1)}redo(){if(Mt(Cr,this)<Mt(Sr,this).length-1){Pt(Cr,this,Mt(Cr,this)+1),Pt(Ar,this,!0);const{cmd:e,post:t}=Mt(Sr,this)[Mt(Cr,this)];e(),null===t||void 0===t||t(),Pt(Ar,this,!1)}}hasSomethingToUndo(){return-1!==Mt(Cr,this)}hasSomethingToRedo(){return Mt(Cr,this)<Mt(Sr,this).length-1}cleanType(e){if(-1!==Mt(Cr,this)){for(let t=Mt(Cr,this);t>=0;t--)if(Mt(Sr,this)[t].type!==e)return Mt(Sr,this).splice(t+1,Mt(Cr,this)-t),void Pt(Cr,this,t);Mt(Sr,this).length=0,Pt(Cr,this,-1)}}destroy(){Pt(Sr,this,null)}}var Mr=new WeakSet;class Pr{constructor(e){At(this,Mr),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=ei.platform;for(const[n,i,r={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:i,options:r}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:i,options:r}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(Ct(Mr,this,Rr).call(this,t));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:s=[],checker:a=null}}=n;a&&!a(e,t)||(i.bind(e,...s,t)(),r||ki(t))}}function Rr(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class Or{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of e.keys()){t.style.color=n;const i=window.getComputedStyle(t).color;e.set(n,Ei(i))}t.remove()}(e),Vn(this,"_colors",e)}convert(e){const t=Ei(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((e,n)=>e===t[n]))return Or._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?ni.makeHexColor(...t):e}}(0,Yt.A)(Or,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var Nr=new WeakMap,Ir=new WeakMap,Dr=new WeakMap,jr=new WeakMap,Lr=new WeakMap,Fr=new WeakMap,Br=new WeakMap,Wr=new WeakMap,Ur=new WeakMap,zr=new WeakMap,Hr=new WeakMap,Vr=new WeakMap,qr=new WeakMap,Gr=new WeakMap,Kr=new WeakMap,Xr=new WeakMap,Yr=new WeakMap,Jr=new WeakMap,Qr=new WeakMap,$r=new WeakMap,Zr=new WeakMap,es=new WeakMap,ts=new WeakMap,ns=new WeakMap,is=new WeakMap,rs=new WeakMap,ss=new WeakMap,as=new WeakMap,os=new WeakMap,ls=new WeakMap,cs=new WeakMap,us=new WeakMap,hs=new WeakMap,ds=new WeakMap,ps=new WeakMap,fs=new WeakMap,gs=new WeakMap,ms=new WeakMap,vs=new WeakMap,bs=new WeakMap,ys=new WeakMap,ws=new WeakMap,_s=new WeakMap,xs=new WeakMap,ks=new WeakMap,Ss=new WeakMap,As=new WeakMap,Es=new WeakMap,Cs=new WeakMap,Ts=new WeakSet;class Ms{static get _keyboardManager(){const e=Ms.prototype,t=e=>Mt(Ss,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Vn(this,"_keyboardManager",new Pr([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&Mt(Ss,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&Mt(Ss,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,n,i,r,s,a,o,l,c,u,h,d,p,f,g){At(this,Ts),Et(this,Nr,new AbortController),Et(this,Ir,null),Et(this,Dr,null),Et(this,jr,new Map),Et(this,Lr,new Map),Et(this,Fr,null),Et(this,Br,null),Et(this,Wr,null),Et(this,Ur,new Tr),Et(this,zr,null),Et(this,Hr,null),Et(this,Vr,null),Et(this,qr,0),Et(this,Gr,new Set),Et(this,Kr,null),Et(this,Xr,null),Et(this,Yr,new Set),(0,Yt.A)(this,"_editorUndoBar",null),Et(this,Jr,!1),Et(this,Qr,!1),Et(this,$r,!1),Et(this,Zr,null),Et(this,es,null),Et(this,ts,null),Et(this,ns,null),Et(this,is,!1),Et(this,rs,null),Et(this,ss,new vr),Et(this,as,!1),Et(this,os,!1),Et(this,ls,!1),Et(this,cs,null),Et(this,us,null),Et(this,hs,null),Et(this,ds,null),Et(this,ps,null),Et(this,fs,hn.NONE),Et(this,gs,new Set),Et(this,ms,null),Et(this,vs,null),Et(this,bs,null),Et(this,ys,null),Et(this,ws,null),Et(this,_s,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),Et(this,xs,[0,0]),Et(this,ks,null),Et(this,Ss,null),Et(this,As,null),Et(this,Es,null),Et(this,Cs,null);const m=this._signal=Mt(Nr,this).signal;Pt(Ss,this,e),Pt(As,this,t),Pt(Es,this,n),Pt(Fr,this,i),Pt(zr,this,r),Pt(vs,this,s),Pt(ws,this,o),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:m}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),a._on("setpreference",this.onSetPreference.bind(this),{signal:m}),a._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:m}),window.addEventListener("pointerdown",()=>{Pt(os,this,!0)},{capture:!0,signal:m}),window.addEventListener("pointerup",()=>{Pt(os,this,!1)},{capture:!0,signal:m}),Ct(Ts,this,Ds).call(this),Ct(Ts,this,zs).call(this),Ct(Ts,this,Fs).call(this),Pt(Br,this,o.annotationStorage),Pt(Zr,this,o.filterFactory),Pt(bs,this,l),Pt(ns,this,c||null),Pt(Jr,this,u),Pt(Qr,this,h),Pt($r,this,d),Pt(ps,this,p||null),this.viewParameters={realScale:fi.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=!1!==g,null===r||void 0===r||r.setSidebarUiManager(this)}destroy(){var e,t,n,i,r,s,a,o,l;null===(e=Mt(Cs,this))||void 0===e||e.resolve(),Pt(Cs,this,null),null===(t=Mt(Nr,this))||void 0===t||t.abort(),Pt(Nr,this,null),this._signal=null;for(const c of Mt(Lr,this).values())c.destroy();Mt(Lr,this).clear(),Mt(jr,this).clear(),Mt(Yr,this).clear(),null===(n=Mt(ds,this))||void 0===n||n.clear(),Pt(Ir,this,null),Mt(gs,this).clear(),Mt(Ur,this).destroy(),null===(i=Mt(Fr,this))||void 0===i||i.destroy(),null===(r=Mt(zr,this))||void 0===r||r.destroy(),null===(s=Mt(vs,this))||void 0===s||s.destroy(),null===(a=Mt(rs,this))||void 0===a||a.hide(),Pt(rs,this,null),null===(o=Mt(hs,this))||void 0===o||o.destroy(),Pt(hs,this,null),Pt(Dr,this,null),Mt(es,this)&&(clearTimeout(Mt(es,this)),Pt(es,this,null)),Mt(ks,this)&&(clearTimeout(Mt(ks,this)),Pt(ks,this,null)),null===(l=this._editorUndoBar)||void 0===l||l.destroy(),Pt(ws,this,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return Mt(ps,this)}get useNewAltTextFlow(){return Mt(Qr,this)}get useNewAltTextWhenAddingImage(){return Mt($r,this)}get hcmFilter(){return Vn(this,"hcmFilter",Mt(bs,this)?Mt(Zr,this).addHCMFilter(Mt(bs,this).foreground,Mt(bs,this).background):"none")}get direction(){return Vn(this,"direction",getComputedStyle(Mt(Ss,this)).direction)}get _highlightColors(){return Vn(this,"_highlightColors",Mt(ns,this)?new Map(Mt(ns,this).split(",").map(e=>((e=e.split("=").map(e=>e.trim()))[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Vn(this,"highlightColors",null);const t=new Map,n=!!Mt(bs,this);for(const[i,r]of e){const e=i.endsWith("_HCM");n&&e?t.set(i.replace("_HCM",""),r):n||e||t.set(i,r)}return Vn(this,"highlightColors",t)}get highlightColorNames(){return Vn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),Pt(Vr,this,e)}setMainHighlightColorPicker(e){Pt(hs,this,e)}editAltText(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=Mt(Fr,this))||void 0===t||t.editAltText(this,e,n)}hasCommentManager(){return!!Mt(zr,this)}editComment(e,t,n,i){var r;null===(r=Mt(zr,this))||void 0===r||r.showDialog(this,e,t,n,i)}selectComment(e,t){const n=Mt(Lr,this).get(e),i=null===n||void 0===n?void 0:n.getEditorByUID(t);null===i||void 0===i||i.toggleComment(!0,!0)}updateComment(e){var t;null===(t=Mt(zr,this))||void 0===t||t.updateComment(e.getData())}updatePopupColor(e){var t;null===(t=Mt(zr,this))||void 0===t||t.updatePopupColor(e)}removeComment(e){var t;null===(t=Mt(zr,this))||void 0===t||t.removeComments([e.uid])}toggleComment(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;null===(n=Mt(zr,this))||void 0===n||n.toggleCommentPopup(e,t,i)}makeCommentColor(e,t){var n;return e&&(null===(n=Mt(zr,this))||void 0===n?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return(null===(e=Mt(zr,this))||void 0===e?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(Mt(Lr,this).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),i=n=>{n.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){var t;null===(t=Mt(vs,this))||void 0===t||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return Mt(vs,this)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:n}=e;if("enableNewAltTextWhenAddingImage"===t)Pt($r,this,n)}onPageChanging(e){let{pageNumber:t}=e;Pt(qr,this,t-1)}focusMainContainer(){Mt(Ss,this).focus()}findParent(e,t){for(const n of Mt(Lr,this).values()){const{x:i,y:r,width:s,height:a}=n.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=r&&t<=r+a)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Mt(As,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){Mt(Yr,this).add(e)}removeShouldRescale(e){Mt(Yr,this).delete(e)}onScaleChanging(e){var t;let{scale:n}=e;this.commitOrRemove(),this.viewParameters.realScale=n*fi.PDF_TO_CSS_UNITS;for(const i of Mt(Yr,this))i.onScaleChanging();null===(t=Mt(Vr,this))||void 0===t||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a}=n,o=n.toString(),l=Ct(Ts,this,Ps).call(this,n).closest(".textLayer"),c=this.getSelectionBoxes(l);if(!c)return;n.empty();const u=Ct(Ts,this,Rs).call(this,l),h=Mt(fs,this)===hn.NONE,d=()=>{const n=null===u||void 0===u?void 0:u.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a,text:o});h&&this.showAllEditors("highlight",!0,!0),t&&(null===n||void 0===n||n.editComment())};h?this.switchToMode(hn.HIGHLIGHT,d):d()}commentSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!Mt(Br,this))return null;const t="".concat(un).concat(e),n=Mt(Br,this).getRawValue(t);return n&&Mt(Br,this).remove(t),n}addToAnnotationStorage(e){e.isEmpty()||!Mt(Br,this)||Mt(Br,this).has(e.id)||Mt(Br,this).setValue(e.id,e)}a11yAlert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Mt(Es,this);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,Mt(is,this)&&(Pt(is,this,!1),Ct(Ts,this,Is).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of Mt(gs,this))if(t.div.contains(e)){Pt(us,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!Mt(us,this))return;const[e,t]=Mt(us,this);Pt(us,this,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){Ct(Ts,this,Fs).call(this),this.setEditingState(!0)}removeEditListeners(){Ct(Ts,this,Bs).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of Mt(Xr,this))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of Mt(Xr,this))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null===(t=Mt(Ir,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of Mt(gs,this)){const e=i.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const e of Mt(Xr,this))if(e.isHandlingMimeForPasting(s.type))return void e.paste(s,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){return void Bn('paste: "'.concat(r.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const e=[];for(const s of n){const t=await i.deserialize(s);if(!t)return;e.push(t)}const t=()=>{for(const t of e)Ct(Ts,this,Ks).call(this,t);Ct(Ts,this,Js).call(this,e)},r=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:r,mustExec:!0})}catch(r){Bn('paste: "'.concat(r.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),Mt(fs,this)===hn.NONE||this.isEditorHandlingKeyboard||Ms._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,Mt(is,this)&&(Pt(is,this,!1),Ct(Ts,this,Is).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu")}}setEditingState(e){e?(Ct(Ts,this,js).call(this),Ct(Ts,this,Ws).call(this),Ct(Ts,this,Hs).call(this,{isEditing:Mt(fs,this)!==hn.NONE,isEmpty:Ct(Ts,this,Ys).call(this),hasSomethingToUndo:Mt(Ur,this).hasSomethingToUndo(),hasSomethingToRedo:Mt(Ur,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(Ct(Ts,this,Ls).call(this),Ct(Ts,this,Us).call(this),Ct(Ts,this,Hs).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!Mt(Xr,this)){Pt(Xr,this,e);for(const e of Mt(Xr,this))Ct(Ts,this,Vs).call(this,e.defaultPropertiesToUpdate)}}getId(){return Mt(ss,this).id}get currentLayer(){return Mt(Lr,this).get(Mt(qr,this))}getLayer(e){return Mt(Lr,this).get(e)}get currentPageIndex(){return Mt(qr,this)}addLayer(e){Mt(Lr,this).set(e.pageIndex,e),Mt(as,this)?e.enable():e.disable()}removeLayer(e){Mt(Lr,this).delete(e.pageIndex)}async updateMode(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Mt(fs,this)!==e&&(!Mt(Cs,this)||(await Mt(Cs,this).promise,Mt(Cs,this)))){var o,l;if(Pt(Cs,this,Promise.withResolvers()),null===(t=Mt(Vr,this))||void 0===t||t.commitOrRemove(),Mt(fs,this)===hn.POPUP)null===(o=Mt(zr,this))||void 0===o||o.hideSidebar();if(null===(n=Mt(zr,this))||void 0===n||n.destroyPopup(),Pt(fs,this,e),e===hn.NONE){var c;this.setEditingState(!1),Ct(Ts,this,Gs).call(this);for(const e of Mt(jr,this).values())e.hideStandaloneCommentButton();return null===(c=this._editorUndoBar)||void 0===c||c.hide(),this.toggleComment(null),void Mt(Cs,this).resolve()}for(const e of Mt(jr,this).values())e.addStandaloneCommentButton();if(e===hn.SIGNATURE)await(null===(l=Mt(vs,this))||void 0===l?void 0:l.loadSignatures());this.setEditingState(!0),await Ct(Ts,this,qs).call(this),this.unselectAll();for(const t of Mt(Lr,this).values())t.updateMode(e);if(e===hn.POPUP){var u;Mt(Dr,this)||Pt(Dr,this,await Mt(ws,this).getAnnotationsByType(new Set(Mt(Xr,this).map(e=>e._editorType))));const e=new Set,t=[];for(const n of Mt(jr,this).values()){const{annotationElementId:i,hasComment:r,deleted:s}=n;i&&e.add(i),r&&!s&&t.push(n.getData())}for(const n of Mt(Dr,this)){const{id:i,popupRef:r,contentsObj:s}=n;r&&null!==s&&void 0!==s&&s.str&&!e.has(i)&&!Mt(Gr,this).has(i)&&t.push(n)}null===(u=Mt(zr,this))||void 0===u||u.showSidebar(t)}if(!i)return r&&this.addNewEditorFromKeyboard(),void Mt(Cs,this).resolve();for(const e of Mt(jr,this).values())e.uid===i?(this.setSelected(e),a?e.editComment():s?e.enterInEditMode():e.focus()):e.unselect();Mt(Cs,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==Mt(fs,this)&&this._eventBus.dispatch("switchannotationeditormode",(0,a.A)({source:this},e))}updateParams(e,t){if(Mt(Xr,this)){switch(e){case dn.CREATE:return void this.currentLayer.addNewEditor(t);case dn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Mt(ys,this)||Pt(ys,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}if(this.hasSelection)for(const n of Mt(gs,this))n.updateParams(e,t);else for(const n of Mt(Xr,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,i;for(const r of Mt(jr,this).values())r.editorType===e&&r.show(t);(null===(n=null===(i=Mt(ys,this))||void 0===i?void 0:i.get(dn.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&Ct(Ts,this,Vs).call(this,[[dn.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Mt(ls,this)!==e){Pt(ls,this,e);for(const t of Mt(Lr,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of Mt(jr,this).values())t.pageIndex===e&&(yield t)}getEditor(e){return Mt(jr,this).get(e)}addEditor(e){Mt(jr,this).set(e.id,e)}removeEditor(e){var t,n;(e.div.contains(document.activeElement)&&(Mt(es,this)&&clearTimeout(Mt(es,this)),Pt(es,this,setTimeout(()=>{this.focusMainContainer(),Pt(es,this,null)},0))),Mt(jr,this).delete(e.id),e.annotationElementId)&&(null===(t=Mt(ds,this))||void 0===t||t.delete(e.annotationElementId));(this.unselect(e),e.annotationElementId&&Mt(Gr,this).has(e.annotationElementId))||(null===(n=Mt(Br,this))||void 0===n||n.remove(e.id))}addDeletedAnnotationElement(e){Mt(Gr,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return Mt(Gr,this).has(e)}removeDeletedAnnotationElement(e){Mt(Gr,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){Mt(Ir,this)!==e&&(Pt(Ir,this,e),e&&Ct(Ts,this,Vs).call(this,e.propertiesToUpdate))}updateUI(e){Tt(Ts,this,Xs)===e&&Ct(Ts,this,Vs).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){Ct(Ts,this,Vs).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(Mt(gs,this).has(e))return Mt(gs,this).delete(e),e.unselect(),void Ct(Ts,this,Hs).call(this,{hasSelectedEditor:this.hasSelection});Mt(gs,this).add(e),e.select(),Ct(Ts,this,Vs).call(this,e.propertiesToUpdate),Ct(Ts,this,Hs).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),null===(t=Mt(Vr,this))||void 0===t||t.commitOrRemove();for(const n of Mt(gs,this))n!==e&&n.unselect();Mt(gs,this).clear(),Mt(gs,this).add(e),e.select(),Ct(Ts,this,Vs).call(this,e.propertiesToUpdate),Ct(Ts,this,Hs).call(this,{hasSelectedEditor:!0})}isSelected(e){return Mt(gs,this).has(e)}get firstSelectedEditor(){return Mt(gs,this).values().next().value}unselect(e){e.unselect(),Mt(gs,this).delete(e),Ct(Ts,this,Hs).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==Mt(gs,this).size}get isEnterHandled(){return 1===Mt(gs,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;Mt(Ur,this).undo(),Ct(Ts,this,Hs).call(this,{hasSomethingToUndo:Mt(Ur,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Ct(Ts,this,Ys).call(this)}),null===(e=this._editorUndoBar)||void 0===e||e.hide()}redo(){Mt(Ur,this).redo(),Ct(Ts,this,Hs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Mt(Ur,this).hasSomethingToRedo(),isEmpty:Ct(Ts,this,Ys).call(this)})}addCommands(e){Mt(Ur,this).add(e),Ct(Ts,this,Hs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Ct(Ts,this,Ys).call(this)})}cleanUndoStack(e){Mt(Ur,this).cleanType(e)}delete(){var e;this.commitOrRemove();const t=null===(e=this.currentLayer)||void 0===e?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...Mt(gs,this)],i=()=>{for(const e of n)Ct(Ts,this,Ks).call(this,e)};this.addCommands({cmd:()=>{var e;null===(e=this._editorUndoBar)||void 0===e||e.show(i,1===n.length?n[0].editorType:n.length);for(const t of n)t.remove()},undo:i,mustExec:!0})}commitOrRemove(){var e;null===(e=Mt(Ir,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return Mt(Ir,this)||this.hasSelection}selectAll(){for(const e of Mt(gs,this))e.commit();Ct(Ts,this,Js).call(this,Mt(jr,this).values())}unselectAll(){var e;if((!Mt(Ir,this)||(Mt(Ir,this).commitOrRemove(),Mt(fs,this)===hn.NONE))&&(null===(e=Mt(Vr,this))||void 0===e||!e.commitOrRemove())&&this.hasSelection){for(const e of Mt(gs,this))e.unselect();Mt(gs,this).clear(),Ct(Ts,this,Hs).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;Mt(xs,this)[0]+=e,Mt(xs,this)[1]+=t;const[n,i]=Mt(xs,this),r=[...Mt(gs,this)];Mt(ks,this)&&clearTimeout(Mt(ks,this)),Pt(ks,this,setTimeout(()=>{Pt(ks,this,null),Mt(xs,this)[0]=Mt(xs,this)[1]=0,this.addCommands({cmd:()=>{for(const e of r)Mt(jr,this).has(e.id)&&(e.translateInPage(n,i),e.translationDone())},undo:()=>{for(const e of r)Mt(jr,this).has(e.id)&&(e.translateInPage(-n,-i),e.translationDone())},mustExec:!1})},1e3));for(const s of r)s.translateInPage(e,t),s.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Pt(Kr,this,new Map);for(const e of Mt(gs,this))Mt(Kr,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Mt(Kr,this))return!1;this.disableUserSelect(!1);const e=Mt(Kr,this);Pt(Kr,this,null);let t=!1;for(const[{x:i,y:r,pageIndex:s},a]of e)a.newX=i,a.newY=r,a.newPageIndex=s,t||(t=i!==a.savedX||r!==a.savedY||s!==a.savedPageIndex);if(!t)return!1;const n=(e,t,n,i)=>{if(Mt(jr,this).has(e.id)){const r=Mt(Lr,this).get(i);r?e._setParentAndPosition(r,t,n):(e.pageIndex=i,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:i,newY:r,newPageIndex:s}]of e)n(t,i,r,s)},undo:()=>{for(const[t,{savedX:i,savedY:r,savedPageIndex:s}]of e)n(t,i,r,s)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(Mt(Kr,this))for(const n of Mt(Kr,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===Mt(gs,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return Mt(Ir,this)===e}getActive(){return Mt(Ir,this)}getMode(){return Mt(fs,this)}isEditingMode(){return Mt(fs,this)!==hn.NONE}get imageManager(){return Vn(this,"imageManager",new xr)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:s}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(e,t,a,o)=>({x:(t-i)/s,y:1-(e+a-n)/r,width:o/s,height:a/r});break;case"180":a=(e,t,a,o)=>({x:1-(e+a-n)/r,y:1-(t+o-i)/s,width:a/r,height:o/s});break;case"270":a=(e,t,a,o)=>({x:1-(t+o-i)/s,y:(e-n)/r,width:o/s,height:a/r});break;default:a=(e,t,a,o)=>({x:(e-n)/r,y:(t-i)/s,width:a/r,height:o/s})}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:i,height:r}of e.getClientRects())0!==i&&0!==r&&o.push(a(t,n,i,r))}return 0===o.length?null:o}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(Mt(Wr,this)||Pt(Wr,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=Mt(Wr,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=Mt(Wr,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const i=Mt(Br,this).getRawValue(n);i&&(Mt(fs,this)!==hn.NONE||i.hasBeenModified)&&i.renderAnnotationElement(e)}setMissingCanvas(e,t,n){var i;const r=null===(i=Mt(ds,this))||void 0===i?void 0:i.get(e);r&&(r.setCanvas(t,n),Mt(ds,this).delete(e))}addMissingCanvas(e,t){(Mt(ds,this)||Pt(ds,this,new Map)).set(e,t)}}function Ps(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function Rs(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of Mt(Lr,this).values())if(n.hasTextLayer(e))return n;return null}function Os(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=Ct(Ts,this,Ps).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(Mt(rs,this)||Pt(rs,this,new ar(this)),Mt(rs,this).show(t,n,"ltr"===this.direction))}function Ns(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(Mt(ms,this))null===(n=Mt(rs,this))||void 0===n||n.hide(),Pt(ms,this,null),Ct(Ts,this,Hs).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=t;if(i===Mt(ms,this))return;const r=Ct(Ts,this,Ps).call(this,t).closest(".textLayer");var s;if(r){if(null===(e=Mt(rs,this))||void 0===e||e.hide(),Pt(ms,this,i),Ct(Ts,this,Hs).call(this,{hasSelectedText:!0}),(Mt(fs,this)===hn.HIGHLIGHT||Mt(fs,this)===hn.NONE)&&(Mt(fs,this)===hn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),Pt(is,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=Mt(fs,this)===hn.HIGHLIGHT?Ct(Ts,this,Rs).call(this,r):null;if(null===e||void 0===e||e.toggleDrawing(),Mt(os,this)){const t=new AbortController,n=this.combinedSignal(t),i=n=>{"pointerup"===n.type&&0!==n.button||(t.abort(),null===e||void 0===e||e.toggleDrawing(!0),"pointerup"===n.type&&Ct(Ts,this,Is).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}else null===e||void 0===e||e.toggleDrawing(!0),Ct(Ts,this,Is).call(this,"main_toolbar")}}else Mt(ms,this)&&(null===(s=Mt(rs,this))||void 0===s||s.hide(),Pt(ms,this,null),Ct(Ts,this,Hs).call(this,{hasSelectedText:!1}))}function Is(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Mt(fs,this)===hn.HIGHLIGHT?this.highlightSelection(e):Mt(Jr,this)&&Ct(Ts,this,Os).call(this)}function Ds(){document.addEventListener("selectionchange",Ct(Ts,this,Ns).bind(this),{signal:this._signal})}function js(){if(Mt(ts,this))return;Pt(ts,this,new AbortController);const e=this.combinedSignal(Mt(ts,this));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function Ls(){var e;null===(e=Mt(ts,this))||void 0===e||e.abort(),Pt(ts,this,null)}function Fs(){if(Mt(cs,this))return;Pt(cs,this,new AbortController);const e=this.combinedSignal(Mt(cs,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function Bs(){var e;null===(e=Mt(cs,this))||void 0===e||e.abort(),Pt(cs,this,null)}function Ws(){if(Mt(Hr,this))return;Pt(Hr,this,new AbortController);const e=this.combinedSignal(Mt(Hr,this));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function Us(){var e;null===(e=Mt(Hr,this))||void 0===e||e.abort(),Pt(Hr,this,null)}function zs(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function Hs(e){Object.entries(e).some(e=>{let[t,n]=e;return Mt(_s,this)[t]!==n})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Mt(_s,this),e)}),Mt(fs,this)===hn.HIGHLIGHT&&!1===e.hasSelectedEditor&&Ct(Ts,this,Vs).call(this,[[dn.HIGHLIGHT_FREE,!0]]))}function Vs(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function qs(){if(!Mt(as,this)){Pt(as,this,!0);const e=[];for(const t of Mt(Lr,this).values())e.push(t.enable());await Promise.all(e);for(const t of Mt(jr,this).values())t.enable()}}function Gs(){if(this.unselectAll(),Mt(as,this)){Pt(as,this,!1);for(const e of Mt(Lr,this).values())e.disable();for(const e of Mt(jr,this).values())e.disable()}}function Ks(e){const t=Mt(Lr,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function Xs(e){let t=null;for(t of Mt(gs,e));return t}function Ys(){if(0===Mt(jr,this).size)return!0;if(1===Mt(jr,this).size)for(const e of Mt(jr,this).values())return e.isEmpty();return!1}function Js(e){for(const t of Mt(gs,this))t.unselect();Mt(gs,this).clear();for(const t of e)t.isEmpty()||(Mt(gs,this).add(t),t.select());Ct(Ts,this,Hs).call(this,{hasSelectedEditor:this.hasSelection})}(0,Yt.A)(Ms,"TRANSLATE_SMALL",1),(0,Yt.A)(Ms,"TRANSLATE_BIG",10);var Qs=new WeakMap,$s=new WeakMap,Zs=new WeakMap,ea=new WeakMap,ta=new WeakMap,na=new WeakMap,ia=new WeakMap,ra=new WeakMap,sa=new WeakMap,aa=new WeakMap,oa=new WeakMap,la=new WeakMap,ca=new WeakSet;class ua{constructor(e){At(this,ca),Et(this,Qs,null),Et(this,$s,!1),Et(this,Zs,null),Et(this,ea,null),Et(this,ta,null),Et(this,na,null),Et(this,ia,!1),Et(this,ra,null),Et(this,sa,null),Et(this,aa,null),Et(this,oa,null),Et(this,la,!1),Pt(sa,this,e),Pt(la,this,e._uiManager.useNewAltTextFlow),pa._||(pa._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){var t;null!==(t=ua._l10n)&&void 0!==t||(ua._l10n=e)}async render(){const e=Pt(Zs,this,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=Pt(ea,this,document.createElement("span"));e.append(t),Mt(la,this)?(e.classList.add("new"),e.setAttribute("data-l10n-id",pa._.missing),t.setAttribute("data-l10n-id",pa._["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=Mt(sa,this)._uiManager._signal;e.addEventListener("contextmenu",xi,{signal:n}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const i=e=>{e.preventDefault(),Mt(sa,this)._uiManager.editAltText(Mt(sa,this)),Mt(la,this)&&Mt(sa,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:Tt(ca,this,ha)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(Pt(ia,this,!0),i(t))},{signal:n}),await Ct(ca,this,da).call(this),e}finish(){Mt(Zs,this)&&(Mt(Zs,this).focus({focusVisible:Mt(ia,this)}),Pt(ia,this,!1))}isEmpty(){return Mt(la,this)?null===Mt(Qs,this):!Mt(Qs,this)&&!Mt($s,this)}hasData(){return Mt(la,this)?null!==Mt(Qs,this)||!!Mt(aa,this):this.isEmpty()}get guessedText(){return Mt(aa,this)}async setGuessedText(e){null===Mt(Qs,this)&&(Pt(aa,this,e),Pt(oa,this,await ua._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),Ct(ca,this,da).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;if(!Mt(la,this)||Mt(Qs,this))return null===(t=Mt(ra,this))||void 0===t||t.remove(),void Pt(ra,this,null);if(!Mt(ra,this)){const e=Pt(ra,this,document.createElement("div"));e.className="noAltTextBadge",Mt(sa,this).div.append(e)}Mt(ra,this).classList.toggle("hidden",!e)}serialize(e){let t=Mt(Qs,this);return e||Mt(aa,this)!==t||(t=Mt(oa,this)),{altText:t,decorative:Mt($s,this),guessedText:Mt(aa,this),textWithDisclaimer:Mt(oa,this)}}get data(){return{altText:Mt(Qs,this),decorative:Mt($s,this)}}set data(e){let{altText:t,decorative:n,guessedText:i,textWithDisclaimer:r,cancel:s=!1}=e;i&&(Pt(aa,this,i),Pt(oa,this,r)),Mt(Qs,this)===t&&Mt($s,this)===n||(s||(Pt(Qs,this,t),Pt($s,this,n)),Ct(ca,this,da).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Mt(Zs,this)&&(!e&&Mt(na,this)&&(clearTimeout(Mt(na,this)),Pt(na,this,null)),Mt(Zs,this).disabled=!e)}shown(){Mt(sa,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:Tt(ca,this,ha)}})}destroy(){var e,t;null===(e=Mt(Zs,this))||void 0===e||e.remove(),Pt(Zs,this,null),Pt(ea,this,null),Pt(ta,this,null),null===(t=Mt(ra,this))||void 0===t||t.remove(),Pt(ra,this,null)}}function ha(e){return(Mt(Qs,e)?"added":null===Mt(Qs,e)&&e.guessedText&&"review")||"missing"}async function da(){const e=Mt(Zs,this);if(!e)return;if(Mt(la,this)){var t,n;if(e.classList.toggle("done",!!Mt(Qs,this)),e.setAttribute("data-l10n-id",pa._[Tt(ca,this,ha)]),null===(t=Mt(ea,this))||void 0===t||t.setAttribute("data-l10n-id",pa._["".concat(Tt(ca,this,ha),"-label")]),!Mt(Qs,this))return void(null===(n=Mt(ta,this))||void 0===n||n.remove())}else{var i;if(!Mt(Qs,this)&&!Mt($s,this))return e.classList.remove("done"),void(null===(i=Mt(ta,this))||void 0===i||i.remove());e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=Mt(ta,this);if(!r){Pt(ta,this,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id="alt-text-tooltip-".concat(Mt(sa,this).id);const t=100,n=Mt(sa,this)._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(Mt(na,this)),Pt(na,this,null)},{once:!0}),e.addEventListener("mouseenter",()=>{Pt(na,this,setTimeout(()=>{Pt(na,this,null),Mt(ta,this).classList.add("show"),Mt(sa,this)._reportTelemetry({action:"alt_text_tooltip"})},t))},{signal:n}),e.addEventListener("mouseleave",()=>{var e;Mt(na,this)&&(clearTimeout(Mt(na,this)),Pt(na,this,null)),null===(e=Mt(ta,this))||void 0===e||e.classList.remove("show")},{signal:n})}Mt($s,this)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=Mt(Qs,this)),r.parentNode||e.append(r);const s=Mt(sa,this).getElementForAltText();null===s||void 0===s||s.setAttribute("aria-describedby",r.id)}var pa={_:null};(0,Yt.A)(ua,"_l10n",null);var fa=new WeakMap,ga=new WeakMap,ma=new WeakMap,va=new WeakMap,ba=new WeakMap,ya=new WeakMap,wa=new WeakMap,_a=new WeakMap,xa=new WeakMap,ka=new WeakMap,Sa=new WeakSet;class Aa{constructor(e){At(this,Sa),Et(this,fa,null),Et(this,ga,null),Et(this,ma,!1),Et(this,va,null),Et(this,ba,null),Et(this,ya,null),Et(this,wa,null),Et(this,_a,null),Et(this,xa,!1),Et(this,ka,null),Pt(va,this,e)}renderForToolbar(){const e=Pt(ga,this,document.createElement("button"));return e.className="comment",Ct(Sa,this,Ea).call(this,e,!1)}renderForStandalone(){const e=Pt(fa,this,document.createElement("button"));e.className="annotationCommentButton";const t=Mt(va,this).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd="calc(".concat(100*("ltr"===Mt(va,this)._uiManager.direction?1-t[0]:t[0]),"% - var(--comment-button-dim))"),n.top="calc(".concat(100*t[1],"% - var(--comment-button-dim))");const i=Mt(va,this).commentButtonColor;i&&(n.backgroundColor=i)}return Ct(Sa,this,Ea).call(this,e,!0)}focusButton(){setTimeout(()=>{var e,t;null===(e=null!==(t=Mt(fa,this))&&void 0!==t?t:Mt(ga,this))||void 0===e||e.focus()},0)}onUpdatedColor(){if(!Mt(fa,this))return;const e=Mt(va,this).commentButtonColor;e&&(Mt(fa,this).style.backgroundColor=e),Mt(va,this)._uiManager.updatePopupColor(Mt(va,this))}get commentButtonWidth(){var e,t;return(null!==(e=null===(t=Mt(fa,this))||void 0===t?void 0:t.getBoundingClientRect().width)&&void 0!==e?e:0)/Mt(va,this).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(Mt(ka,this))return Mt(ka,this);if(!Mt(fa,this))return null;const{x:e,y:t,height:n}=Mt(fa,this).getBoundingClientRect(),{x:i,y:r,width:s,height:a}=Mt(va,this).parent.boundingClientRect;return[(e-i)/s,(t+n-r)/a]}set commentPopupPositionInLayer(e){Pt(ka,this,e)}hasDefaultPopupPosition(){return null===Mt(ka,this)}removeStandaloneCommentButton(){var e;null===(e=Mt(fa,this))||void 0===e||e.remove(),Pt(fa,this,null)}removeToolbarCommentButton(){var e;null===(e=Mt(ga,this))||void 0===e||e.remove(),Pt(ga,this,null)}setCommentButtonStates(e){let{selected:t,hasPopup:n}=e;Mt(fa,this)&&(Mt(fa,this).classList.toggle("selected",t),Mt(fa,this).ariaExpanded=n)}edit(e){const t=this.commentPopupPositionInLayer;let n,i;if(t)[n,i]=t;else{[n,i]=Mt(va,this).commentButtonPosition;const{width:e,height:t,x:r,y:s}=Mt(va,this);n=r+n*e,i=s+i*t}const r=Mt(va,this).parent.boundingClientRect,{x:s,y:o,width:l,height:c}=r;Mt(va,this)._uiManager.editComment(Mt(va,this),s+n*l,o+i*c,(0,a.A)((0,a.A)({},e),{},{parentDimensions:r}))}finish(){Mt(ga,this)&&(Mt(ga,this).focus({focusVisible:Mt(ma,this)}),Pt(ma,this,!1))}isDeleted(){return Mt(xa,this)||""===Mt(wa,this)}isEmpty(){return null===Mt(wa,this)}hasBeenEdited(){return this.isDeleted()||Mt(wa,this)!==Mt(ba,this)}serialize(){return this.data}get data(){return{text:Mt(wa,this),richText:Mt(ya,this),date:Mt(_a,this),deleted:this.isDeleted()}}set data(e){if(e!==Mt(wa,this)&&Pt(ya,this,null),null===e)return Pt(wa,this,""),void Pt(xa,this,!0);Pt(wa,this,e),Pt(_a,this,new Date),Pt(xa,this,!1)}setInitialText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Pt(ba,this,e),this.data=e,Pt(_a,this,null),Pt(ya,this,t)}shown(){}destroy(){var e,t;null===(e=Mt(ga,this))||void 0===e||e.remove(),Pt(ga,this,null),null===(t=Mt(fa,this))||void 0===t||t.remove(),Pt(fa,this,null),Pt(wa,this,""),Pt(ya,this,null),Pt(_a,this,null),Pt(va,this,null),Pt(ma,this,!1),Pt(xa,this,!1)}}function Ea(e,t){if(!Mt(va,this)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[Mt(va,this)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=Mt(va,this)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",xi,{signal:n}),t&&(e.addEventListener("focusin",e=>{Mt(va,this)._focusEventsAllowed=!1,ki(e)},{capture:!0,signal:n}),e.addEventListener("focusout",e=>{Mt(va,this)._focusEventsAllowed=!0,ki(e)},{capture:!0,signal:n})),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const i=t=>{t.preventDefault(),e===Mt(ga,this)?this.edit():Mt(va,this).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(Pt(ma,this,!0),i(t))},{signal:n}),e.addEventListener("pointerenter",()=>{Mt(va,this).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{Mt(va,this).toggleComment(!1,!1)},{signal:n}),e}var Ca=new WeakMap,Ta=new WeakMap,Ma=new WeakMap,Pa=new WeakMap,Ra=new WeakMap,Oa=new WeakMap,Na=new WeakMap,Ia=new WeakMap,Da=new WeakMap,ja=new WeakMap,La=new WeakMap,Fa=new WeakMap,Ba=new WeakSet;class Wa{constructor(e){let{container:t,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:o}=e;At(this,Ba),Et(this,Ca,void 0),Et(this,Ta,!1),Et(this,Ma,null),Et(this,Pa,void 0),Et(this,Ra,void 0),Et(this,Oa,void 0),Et(this,Na,void 0),Et(this,Ia,null),Et(this,Da,void 0),Et(this,ja,null),Et(this,La,void 0),Et(this,Fa,null),Pt(Ca,this,t),Pt(Ma,this,i),Pt(Pa,this,n),Pt(Ra,this,r),Pt(Oa,this,s),Pt(Na,this,a),Pt(La,this,new AbortController),Pt(Da,this,AbortSignal.any([o,Mt(La,this).signal])),t.addEventListener("touchstart",Ct(Ba,this,Ua).bind(this),{passive:!1,signal:Mt(Da,this)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Pi.pixelRatio}destroy(){var e,t;null===(e=Mt(La,this))||void 0===e||e.abort(),Pt(La,this,null),null===(t=Mt(Ia,this))||void 0===t||t.abort(),Pt(Ia,this,null)}}function Ua(e){var t,n;if(null!==(t=Mt(Pa,this))&&void 0!==t&&t.call(this))return;if(1===e.touches.length){if(Mt(Ia,this))return;const e=Pt(Ia,this,new AbortController),t=AbortSignal.any([Mt(Da,this),e.signal]),n=Mt(Ca,this),i={capture:!0,signal:t,passive:!1},r=e=>{var t;"touch"===e.pointerType&&(null===(t=Mt(Ia,this))||void 0===t||t.abort(),Pt(Ia,this,null))};return n.addEventListener("pointerdown",e=>{"touch"===e.pointerType&&(ki(e),r(e))},i),n.addEventListener("pointerup",r,i),void n.addEventListener("pointercancel",r,i)}if(!Mt(Fa,this)){var i;Pt(Fa,this,new AbortController);const e=AbortSignal.any([Mt(Da,this),Mt(Fa,this).signal]),t=Mt(Ca,this),n={signal:e,capture:!1,passive:!1};t.addEventListener("touchmove",Ct(Ba,this,za).bind(this),n);const r=Ct(Ba,this,Ha).bind(this);t.addEventListener("touchend",r,n),t.addEventListener("touchcancel",r,n),n.capture=!0,t.addEventListener("pointerdown",ki,n),t.addEventListener("pointermove",ki,n),t.addEventListener("pointercancel",ki,n),t.addEventListener("pointerup",ki,n),null===(i=Mt(Ra,this))||void 0===i||i.call(this)}if(ki(e),2!==e.touches.length||null!==(n=Mt(Ma,this))&&void 0!==n&&n.call(this))return void Pt(ja,this,null);let[r,s]=e.touches;r.identifier>s.identifier&&([r,s]=[s,r]),Pt(ja,this,{touch0X:r.screenX,touch0Y:r.screenY,touch1X:s.screenX,touch1Y:s.screenY})}function za(e){var t;if(!Mt(ja,this)||2!==e.touches.length)return;ki(e);let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:r,screenY:s}=n,{screenX:a,screenY:o}=i,l=Mt(ja,this),{touch0X:c,touch0Y:u,touch1X:h,touch1Y:d}=l,p=h-c,f=d-u,g=a-r,m=o-s,v=Math.hypot(g,m)||1,b=Math.hypot(p,f)||1;if(!Mt(Ta,this)&&Math.abs(b-v)<=It.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!Mt(Ta,this))return void Pt(Ta,this,!0);const y=[(r+a)/2,(s+o)/2];null===(t=Mt(Oa,this))||void 0===t||t.call(this,y,b,v)}function Ha(e){if(!(e.touches.length>=2)){var t;if(Mt(Fa,this))Mt(Fa,this).abort(),Pt(Fa,this,null),null===(t=Mt(Na,this))||void 0===t||t.call(this);Mt(ja,this)&&(ki(e),Pt(ja,this,null),Pt(Ta,this,!1))}}It=Wa;var Va=new WeakMap,qa=new WeakMap,Ga=new WeakMap,Ka=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,Ja=new WeakMap,Qa=new WeakMap,$a=new WeakMap,Za=new WeakMap,eo=new WeakMap,to=new WeakMap,no=new WeakMap,io=new WeakMap,ro=new WeakMap,so=new WeakMap,ao=new WeakMap,oo=new WeakMap,lo=new WeakMap,co=new WeakMap,uo=new WeakMap,ho=new WeakMap,po=new WeakMap,fo=new WeakMap,go=new WeakMap,mo=new WeakMap,vo=new WeakSet;class bo{static get _resizerKeyboardManager(){const e=bo.prototype._resizeWithKeyboard,t=Ms.TRANSLATE_SMALL,n=Ms.TRANSLATE_BIG;return Vn(this,"_resizerKeyboardManager",new Pr([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],bo.prototype._stopResizingWithKeyboard]]))}constructor(e){At(this,vo),Et(this,Va,null),Et(this,qa,null),Et(this,Ga,null),Et(this,Ka,null),Et(this,Xa,null),Et(this,Ya,!1),Et(this,Ja,null),Et(this,Qa,""),Et(this,$a,null),Et(this,Za,null),Et(this,eo,null),Et(this,to,null),Et(this,no,null),Et(this,io,""),Et(this,ro,!1),Et(this,so,null),Et(this,ao,!1),Et(this,oo,!1),Et(this,lo,!1),Et(this,co,null),Et(this,uo,0),Et(this,ho,0),Et(this,po,null),Et(this,fo,null),(0,Yt.A)(this,"isSelected",!1),(0,Yt.A)(this,"_isCopy",!1),(0,Yt.A)(this,"_editToolbar",null),(0,Yt.A)(this,"_initialOptions",Object.create(null)),(0,Yt.A)(this,"_initialData",null),(0,Yt.A)(this,"_isVisible",!0),(0,Yt.A)(this,"_uiManager",null),(0,Yt.A)(this,"_focusEventsAllowed",!0),Et(this,go,!1),Et(this,mo,bo._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,s];const[a,o]=this.parentDimensions;this.x=e.x/a,this.y=e.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Vn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Fo({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){var n;if(null!==(n=bo._l10n)&&void 0!==n||(bo._l10n=e),bo._l10nResizer||(bo._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==bo._borderLineWidth)return;const i=getComputedStyle(document.documentElement);bo._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Wn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Mt(go,this)}set _isDraggable(e){var t;Pt(go,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Mt(mo,this)}setParent(e){var t;null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(Ct(vo,this,Lo).call(this),null===(t=Mt(to,this))||void 0===t||t.remove(),Pt(to,this,null));this.parent=e}focusin(e){this._focusEventsAllowed&&(Mt(ro,this)?Pt(ro,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[r,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/r,this.y=(t+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){Ct(vo,this,yo).call(this,this.parentDimensions,e,t)}translateInPage(e,t){Mt(so,this)||Pt(so,this,[this.x,this.y,this.width,this.height]),Ct(vo,this,yo).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){Mt(so,this)||Pt(so,this,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this;const[o,l]=this.getBaseTranslation();s+=o,a+=l;const{style:c}=n;c.left="".concat((100*s).toFixed(2),"%"),c.top="".concat((100*a).toFixed(2),"%"),this._onTranslating(s,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!Mt(so,this)&&(Mt(so,this)[0]!==this.x||Mt(so,this)[1]!==this.y)}get _hasBeenResized(){return!!Mt(so,this)&&(Mt(so,this)[2]!==this.width||Mt(so,this)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=bo,i=n/e,r=n/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const{div:{style:t},pageDimensions:[n,i]}=this;let{x:r,y:s,width:a,height:o}=this;if(a*=n,o*=i,r*=n,s*=i,this._mustFixPosition)switch(e){case 0:r=ci(r,0,n-a),s=ci(s,0,i-o);break;case 90:r=ci(r,0,n-o),s=ci(s,a,i);break;case 180:r=ci(r,a,n),s=ci(s,o,i);break;case 270:r=ci(r,o,n),s=ci(s,0,i-a)}this.x=r/=n,this.y=s/=i;const[l,c]=this.getBaseTranslation();r+=l,s+=c,t.left="".concat((100*r).toFixed(2),"%"),t.top="".concat((100*s).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return wo.call(bo,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return wo.call(bo,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width="".concat((100*t).toFixed(2),"%"),e.height="".concat((100*n).toFixed(2),"%")}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null===(e=Mt(Ga,this))||void 0===e||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||Mt(oo,this))return this._editToolbar;this._editToolbar=new Yi(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;null===(e=this._editToolbar)||void 0===e||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;null===(e=this._editToolbar)||void 0===e||e.removeButton("comment")}removeEditToolbar(){var e,t;null===(e=this._editToolbar)||void 0===e||e.remove(),this._editToolbar=null,null===(t=Mt(Ga,this))||void 0===t||t.destroy()}addContainer(e){var t;const n=null===(t=this._editToolbar)||void 0===t?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return Mt(Ga,this)||(ua.initialize(bo._l10n),Pt(Ga,this,new ua(this)),Mt(Va,this)&&(Mt(Ga,this).data=Mt(Va,this),Pt(Va,this,null))),Mt(Ga,this)}get altTextData(){var e;return null===(e=Mt(Ga,this))||void 0===e?void 0:e.data}set altTextData(e){Mt(Ga,this)&&(Mt(Ga,this).data=e)}get guessedAltText(){var e;return null===(e=Mt(Ga,this))||void 0===e?void 0:e.guessedText}async setGuessedAltText(e){var t;await(null===(t=Mt(Ga,this))||void 0===t?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null===(t=Mt(Ga,this))||void 0===t?void 0:t.serialize(e)}hasAltText(){return!!Mt(Ga,this)&&!Mt(Ga,this).isEmpty()}hasAltTextData(){var e,t;return null!==(e=null===(t=Mt(Ga,this))||void 0===t?void 0:t.hasData())&&void 0!==e&&e}focusCommentButton(){var e;null===(e=Mt(Ka,this))||void 0===e||e.focusButton()}addCommentButton(){return this.canAddComment?Mt(Ka,this)||Pt(Ka,this,new Aa(this)):null}addStandaloneCommentButton(){this._uiManager.hasCommentManager()&&(Mt(Xa,this)?this._uiManager.isEditingMode()&&Mt(Xa,this).classList.remove("hidden"):this.hasComment&&(Pt(Xa,this,Mt(Ka,this).renderForStandalone()),this.div.append(Mt(Xa,this))))}removeStandaloneCommentButton(){Mt(Ka,this).removeStandaloneCommentButton(),Pt(Xa,this,null)}hideStandaloneCommentButton(){var e;null===(e=Mt(Xa,this))||void 0===e||e.classList.add("hidden")}get comment(){var e;const{data:{richText:t,text:n,date:i,deleted:r}}=Mt(Ka,this);return{text:n,richText:t,date:i,deleted:r,color:this.getNonHCMColor(),opacity:null!==(e=this.opacity)&&void 0!==e?e:1}}set comment(e){Mt(Ka,this)||Pt(Ka,this,new Aa(this)),Mt(Ka,this).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData(e){let{comment:t,popupRef:n,richText:i}=e;if(!n)return;if(Mt(Ka,this)||Pt(Ka,this,new Aa(this)),Mt(Ka,this).setInitialText(t,i),!this.annotationElementId)return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return null===(e=Mt(Ka,this))||void 0===e?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return null===(e=Mt(Ka,this))||void 0===e?void 0:e.isDeleted()}get hasComment(){return!!Mt(Ka,this)&&!Mt(Ka,this).isEmpty()&&!Mt(Ka,this).isDeleted()}async editComment(e){Mt(Ka,this)||Pt(Ka,this,new Aa(this)),Mt(Ka,this).edit(e)}toggleComment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){Mt(Ka,this).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const t=180,n=100,[,,,i]=e.rect,[r]=this.pageDimensions,[s]=this.pageTranslation,a=s+r+1,o=i-n,l=a+t;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,o,l,i]}}}updateFromAnnotationLayer(e){let{popup:{contents:t,deleted:n}}=e;Mt(Ka,this).data=n?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var e;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=Mt(Ya,this)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),Ct(vo,this,Oo).call(this);const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth="".concat((100*i/n).toFixed(2),"%"),t.style.maxHeight="".concat((100*n/i).toFixed(2),"%"));const[r,s]=this.getInitialTranslation();return this.translate(r,s),ur(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(Mt(fo,this)||Pt(fo,this,new Wa({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:Ct(vo,this,Co).bind(this),onPinching:Ct(vo,this,To).bind(this),onPinchEnd:Ct(vo,this,Mo).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),null===(e=this._uiManager._editorUndoBar)||void 0===e||e.hide(),t}pointerdown(e){const{isMac:t}=ei.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(Pt(ro,this,!0),this._isDraggable?Ct(vo,this,Ro).call(this,e):Ct(vo,this,Po).call(this,e))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){Mt(co,this)&&clearTimeout(Mt(co,this)),Pt(co,this,setTimeout(()=>{var e;Pt(co,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[r,s]=this.pageDimensions,[a,o]=this.pageTranslation,l=e/i,c=t/i,u=this.x*r,h=this.y*s,d=this.width*r,p=this.height*s;switch(n){case 0:return[u+l+a,s-h-c-p+o,u+l+d+a,s-h-c+o];case 90:return[u+c+a,s-h+l+o,u+c+p+a,s-h+l+d+o];case 180:return[u-l-d+a,s-h+c+o,u-l+a,s-h+c+p+o];case 270:return[u-c-p+a,s-h-l-d+o,u-c+a,s-h-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,r,s]=e,a=r-n,o=s-i;switch(this.rotation){case 0:return[n,t-s,a,o];case 90:return[n,t-i,o,a];case 180:return[r,t-i,a,o];case 270:return[r,t-s,o,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&bo._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;null===(e=Mt(Ka,this))||void 0===e||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:i,deleted:r,richText:s},uid:a,pageIndex:o,creationDate:l,modificationDate:c}=this;return{id:a,pageIndex:o,rect:this.getPDFRect(),richText:s,contentsObj:{str:e},creationDate:l,modificationDate:n||c,popupRef:!r,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),Pt(oo,this,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),Pt(oo,this,!1),!0)}isInEditMode(){return Mt(oo,this)}shouldGetKeyboardEvents(){return Mt(lo,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:s}=window;return t<s&&i>0&&e<r&&n>0}rebuild(){Ct(vo,this,Oo).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}serialize(){var e;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,Pt(Va,i,e.accessibilityData),i._isCopy=e.isCopy||!1;const[r,s]=i.pageDimensions,[a,o,l,c]=i.getRectInCurrentCoords(e.rect,s);return i.x=a/r,i.y=o/s,i.width=l/r,i.height=c/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t,n;if(null===(e=Mt(no,this))||void 0===e||e.abort(),Pt(no,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),Mt(co,this)&&(clearTimeout(Mt(co,this)),Pt(co,this,null)),Ct(vo,this,Lo).call(this),this.removeEditToolbar(),Mt(po,this)){for(const e of Mt(po,this).values())clearTimeout(e);Pt(po,this,null)}this.parent=null,null===(t=Mt(fo,this))||void 0===t||t.destroy(),Pt(fo,this,null),null===(n=Mt(to,this))||void 0===n||n.remove(),Pt(to,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Ct(vo,this,xo).call(this),Mt($a,this).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return"ltr"===this._uiManager.direction?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,i,r,s]=this.getPDFRect();return[bo._round(n+(r-n)*e),bo._round(i+(s-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return Mt(Ka,this).commentPopupPositionInLayer}set commentPopupPosition(e){Mt(Ka,this).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return Mt(Ka,this).hasDefaultPopupPosition()}get commentButtonWidth(){return Mt(Ka,this).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;null===(t=Mt(Ka,this))||void 0===t||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),Pt(eo,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=Mt($a,this).children;if(!Mt(qa,this)){Pt(qa,this,Array.from(t));const e=Ct(vo,this,No).bind(this),n=Ct(vo,this,Io).bind(this),i=this._uiManager._signal;for(const t of Mt(qa,this)){const r=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:i}),t.addEventListener("blur",n,{signal:i}),t.addEventListener("focus",Ct(vo,this,Do).bind(this,r),{signal:i}),t.setAttribute("data-l10n-id",bo._l10nResizer[r])}}const n=Mt(qa,this)[0];let i=0;for(const s of t){if(s===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(Mt(qa,this).length/4);if(r!==i){if(r<i)for(let t=0;t<i-r;t++)Mt($a,this).append(Mt($a,this).firstElementChild);else if(r>i)for(let t=0;t<r-i;t++)Mt($a,this).firstElementChild.before(Mt($a,this).lastElementChild);let e=0;for(const n of t){const t=Mt(qa,this)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",bo._l10nResizer[t])}}Ct(vo,this,jo).call(this,0),Pt(lo,this,!0),Mt($a,this).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){Mt(lo,this)&&Ct(vo,this,Eo).call(this,Mt(io,this),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){Ct(vo,this,Lo).call(this),this.div.focus()}select(){var e,t,n;this.isSelected&&this._editToolbar?this._editToolbar.show():(this.isSelected=!0,this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),this._editToolbar?(null===(t=this._editToolbar)||void 0===t||t.show(),null===(n=Mt(Ga,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=this._editToolbar)||void 0===t||t.show())}))}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return null===(e=this.div)||void 0===e?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,i,r;this.isSelected&&(this.isSelected=!1,null===(e=Mt($a,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=this._editToolbar)||void 0===i||i.hide(),null===(r=Mt(Ga,this))||void 0===r||r.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){"BUTTON"!==e.target.nodeName&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return Mt(ao,this)}set isEditing(e){Pt(ao,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){Mt(po,this)||Pt(po,this,new Map);const{action:t}=e;let n=Mt(po,this).get(t);return n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),Mt(po,this).delete(t),0===Mt(po,this).size&&Pt(po,this,null)},bo._telemetryTimeout),void Mt(po,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),Pt(Ya,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),Pt(Ya,this,!0)}updateFakeAnnotationElement(e){if(Mt(to,this)||this.deleted)return this.deleted?(Mt(to,this).remove(),void Pt(to,this,null)):void((this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&Mt(to,this).updateEdited({rect:this.getPDFRect(),popup:this.comment}));Pt(to,this,e.addFakeAnnotation(this))}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;"DIV"===(null===t||void 0===t?void 0:t.nodeName)&&t.classList.contains("annotationContent")&&t.remove()}}function yo(e,t,n){let[i,r]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/i,this.y+=n/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function wo(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function _o(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function xo(){if(Mt($a,this))return;Pt($a,this,document.createElement("div")),Mt($a,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");Mt($a,this).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",Ct(vo,this,ko).bind(this,n),{signal:t}),e.addEventListener("contextmenu",xi,{signal:t}),e.tabIndex=-1}this.div.prepend(Mt($a,this))}function ko(e,t){var n;t.preventDefault();const{isMac:i}=ei.platform;if(0!==t.button||t.ctrlKey&&i)return;null===(n=Mt(Ga,this))||void 0===n||n.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,Pt(Za,this,[t.screenX,t.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",Ct(vo,this,Eo).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",ki,{passive:!1,signal:a}),window.addEventListener("contextmenu",xi,{signal:a}),Pt(eo,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var e;s.abort(),this.parent.togglePointerEvents(!0),null===(e=Mt(Ga,this))||void 0===e||e.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=l,Ct(vo,this,Ao).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}function So(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}function Ao(){if(!Mt(eo,this))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=Mt(eo,this);Pt(eo,this,null);const r=this.x,s=this.y,a=this.width,o=this.height;r===e&&s===t&&a===n&&o===i||this.addCommands({cmd:Ct(vo,this,So).bind(this,r,s,a,o),undo:Ct(vo,this,So).bind(this,e,t,n,i),mustExec:!0})}function Eo(e,t){const[n,i]=this.parentDimensions,r=this.x,s=this.y,a=this.width,o=this.height,l=Dt.MIN_SIZE/n,c=Dt.MIN_SIZE/i,u=Ct(vo,this,_o).call(this,this.rotation),h=(e,t)=>[u[0]*e+u[2]*t,u[1]*e+u[3]*t],d=Ct(vo,this,_o).call(this,360-this.rotation);let p,f,g=!1,m=!1;switch(e){case"topLeft":g=!0,p=(e,t)=>[0,0],f=(e,t)=>[e,t];break;case"topMiddle":p=(e,t)=>[e/2,0],f=(e,t)=>[e/2,t];break;case"topRight":g=!0,p=(e,t)=>[e,0],f=(e,t)=>[0,t];break;case"middleRight":m=!0,p=(e,t)=>[e,t/2],f=(e,t)=>[0,t/2];break;case"bottomRight":g=!0,p=(e,t)=>[e,t],f=(e,t)=>[0,0];break;case"bottomMiddle":p=(e,t)=>[e/2,t],f=(e,t)=>[e/2,0];break;case"bottomLeft":g=!0,p=(e,t)=>[0,t],f=(e,t)=>[e,0];break;case"middleLeft":m=!0,p=(e,t)=>[0,t/2],f=(e,t)=>[e,t/2]}const v=p(a,o),b=f(a,o);let y=h(...b);const w=Dt._round(r+y[0]),_=Dt._round(s+y[1]);let x,k,S=1,A=1;if(t.fromKeyboard)({deltaX:x,deltaY:k}=t);else{const{screenX:e,screenY:n}=t,[i,r]=Mt(Za,this);[x,k]=this.screenToPageTranslation(e-i,n-r),Mt(Za,this)[0]=e,Mt(Za,this)[1]=n}var E,C;if([x,k]=(E=x/n,C=k/i,[d[0]*E+d[2]*C,d[1]*E+d[3]*C]),g){const e=Math.hypot(a,o);S=A=Math.max(Math.min(Math.hypot(b[0]-v[0]-x,b[1]-v[1]-k)/e,1/a,1/o),l/a,c/o)}else m?S=ci(Math.abs(b[0]-v[0]-x),l,1)/a:A=ci(Math.abs(b[1]-v[1]-k),c,1)/o;const T=Dt._round(a*S),M=Dt._round(o*A);y=h(...f(T,M));const P=w-y[0],R=_-y[1];Mt(so,this)||Pt(so,this,[this.x,this.y,this.width,this.height]),this.width=T,this.height=M,this.x=P,this.y=R,this.setDims(),this.fixAndSetPosition(),this._onResizing()}function Co(){var e;Pt(eo,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(e=Mt(Ga,this))||void 0===e||e.toggle(!1),this.parent.togglePointerEvents(!1)}function To(e,t,n){let i=n/t*.7+1-.7;if(1===i)return;const r=Ct(vo,this,_o).call(this,this.rotation),s=(e,t)=>[r[0]*e+r[2]*t,r[1]*e+r[3]*t],[a,o]=this.parentDimensions,l=this.x,c=this.y,u=this.width,h=this.height,d=Dt.MIN_SIZE/a,p=Dt.MIN_SIZE/o;i=Math.max(Math.min(i,1/u,1/h),d/u,p/h);const f=Dt._round(u*i),g=Dt._round(h*i);if(f===u&&g===h)return;Mt(so,this)||Pt(so,this,[l,c,u,h]);const m=s(u/2,h/2),v=Dt._round(l+m[0]),b=Dt._round(c+m[1]),y=s(f/2,g/2);this.x=v-y[0],this.y=b-y[1],this.width=f,this.height=g,this.setDims(),this.fixAndSetPosition(),this._onResizing()}function Mo(){var e;null===(e=Mt(Ga,this))||void 0===e||e.toggle(!0),this.parent.togglePointerEvents(!0),Ct(vo,this,Ao).call(this)}function Po(e){const{isMac:t}=ei.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function Ro(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:r},a=e=>{i.abort(),Pt(Ja,this,null),Pt(ro,this,!1),this._uiManager.endDragSession()||Ct(vo,this,Po).call(this,e),n&&this._onStopDragging()};t&&(Pt(uo,this,e.clientX),Pt(ho,this,e.clientY),Pt(Ja,this,e.pointerId),Pt(Qa,this,e.pointerType),window.addEventListener("pointermove",e=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:t,clientY:i,pointerId:r}=e;if(r!==Mt(Ja,this))return void ki(e);const[s,a]=this.screenToPageTranslation(t-Mt(uo,this),i-Mt(ho,this));Pt(uo,this,t),Pt(ho,this,i),this._uiManager.dragSelectedEditors(s,a)},s),window.addEventListener("touchmove",ki,s),window.addEventListener("pointerdown",e=>{e.pointerType===Mt(Qa,this)&&(Mt(fo,this)||e.isPrimary)&&a(e),ki(e)},s));const o=e=>{Mt(Ja,this)&&Mt(Ja,this)!==e.pointerId?ki(e):a(e)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})}function Oo(){if(Mt(no,this)||!this.div)return;Pt(no,this,new AbortController);const e=this._uiManager.combinedSignal(Mt(no,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function No(e){Dt._resizerKeyboardManager.exec(this,e)}function Io(e){var t;Mt(lo,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==Mt($a,this)&&Ct(vo,this,Lo).call(this)}function Do(e){Pt(io,this,Mt(lo,this)?e:"")}function jo(e){if(Mt(qa,this))for(const t of Mt(qa,this))t.tabIndex=e}function Lo(){Pt(lo,this,!1),Ct(vo,this,jo).call(this,-1),Ct(vo,this,Ao).call(this)}Dt=bo,(0,Yt.A)(bo,"_l10n",null),(0,Yt.A)(bo,"_l10nResizer",null),(0,Yt.A)(bo,"_borderLineWidth",-1),(0,Yt.A)(bo,"_colorManager",new Or),(0,Yt.A)(bo,"_zIndex",1),(0,Yt.A)(bo,"_telemetryTimeout",1e3);class Fo extends bo{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Bo=3285377520,Wo=4294901760,Uo=65535;class zo{constructor(e){this.h1=e?4294967295&e:Bo,this.h2=e?4294967295&e:Bo}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let i=0,r=e.length;i<r;i++){const r=e.charCodeAt(i);r<=255?t[n++]=r:(t[n++]=r>>>8,t[n++]=255&r)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const i=n>>2,r=n-4*i,s=new Uint32Array(t.buffer,0,i);let a=0,o=0,l=this.h1,c=this.h2;const u=3432918353,h=461845907,d=11601,p=13715;for(let f=0;f<i;f++)1&f?(a=s[f],a=a*u&Wo|a*d&Uo,a=a<<15|a>>>17,a=a*h&Wo|a*p&Uo,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=s[f],o=o*u&Wo|o*d&Uo,o=o<<15|o>>>17,o=o*h&Wo|o*p&Uo,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,r){case 3:a^=t[4*i+2]<<16;case 2:a^=t[4*i+1]<<8;case 1:a^=t[4*i],a=a*u&Wo|a*d&Uo,a=a<<15|a>>>17,a=a*h&Wo|a*p&Uo,1&i?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&Wo|36045*e&Uo,t=4283543511*t&Wo|(2950163797*(t<<16|e>>>16)&Wo)>>>16,e^=t>>>1,e=444984403*e&Wo|60499*e&Uo,t=3301882366*t&Wo|(3120437893*(t<<16|e>>>16)&Wo)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Ho=Object.freeze({map:null,hash:"",transfer:void 0});var Vo=new WeakMap,qo=new WeakMap,Go=new WeakMap,Ko=new WeakMap,Xo=new WeakSet;class Yo{constructor(){At(this,Xo),Et(this,Vo,!1),Et(this,qo,null),Et(this,Go,null),Et(this,Ko,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=Mt(Ko,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return Mt(Ko,this).get(e)}remove(e){const t=Mt(Ko,this).get(e);if(void 0!==t&&(t instanceof bo&&Mt(Go,this).delete(t.annotationElementId),Mt(Ko,this).delete(e),0===Mt(Ko,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor)){for(const e of Mt(Ko,this).values())if(e instanceof bo)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=Mt(Ko,this).get(e);let i=!1;if(void 0!==n)for(const[r,s]of Object.entries(t))n[r]!==s&&(i=!0,n[r]=s);else i=!0,Mt(Ko,this).set(e,t);i&&Ct(Xo,this,Jo).call(this),t instanceof bo&&((Mt(Go,this)||Pt(Go,this,new Map)).set(t.annotationElementId,t),"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type))}has(e){return Mt(Ko,this).has(e)}get size(){return Mt(Ko,this).size}resetModified(){Mt(Vo,this)&&(Pt(Vo,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new $o(this)}get serializable(){if(0===Mt(Ko,this).size)return Ho;const e=new Map,t=new zo,n=[],i=Object.create(null);let r=!1;for(const[s,a]of Mt(Ko,this)){const n=a instanceof bo?a.serialize(!1,i):a;n&&(e.set(s,n),t.update("".concat(s,":").concat(JSON.stringify(n))),r||(r=!!n.bitmap))}if(r)for(const s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Ho}get editorStats(){let e=null;const t=new Map;let n=0,i=0;for(const a of Mt(Ko,this).values()){var r;if(!(a instanceof bo)){a.popup&&(a.popup.deleted?i+=1:n+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(n+=1);const o=a.telemetryFinalData;if(!o)continue;const{type:l}=o;t.has(l)||t.set(l,Object.getPrototypeOf(a).constructor),e||(e=Object.create(null));const c=(r=e)[l]||(r[l]=new Map);for(const[e,t]of Object.entries(o)){var s;if("type"===e)continue;let n=c.get(e);n||(n=new Map,c.set(e,n));const i=null!==(s=n.get(t))&&void 0!==s?s:0;n.set(t,i+1)}}if((i>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:n}),!e)return null;for(const[a,o]of t)e[a]=o.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){Pt(qo,this,null)}updateEditor(e,t){var n;const i=null===(n=Mt(Go,this))||void 0===n?void 0:n.get(e);return!!i&&(i.updateFromAnnotationLayer(t),!0)}getEditor(e){var t;return(null===(t=Mt(Go,this))||void 0===t?void 0:t.get(e))||null}get modifiedIds(){if(Mt(qo,this))return Mt(qo,this);const e=[];if(Mt(Go,this))for(const t of Mt(Go,this).values())t.serialize()&&e.push(t.annotationElementId);return Pt(qo,this,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return Mt(Ko,this).entries()}}function Jo(){Mt(Vo,this)||(Pt(Vo,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var Qo=new WeakMap;class $o extends Yo{constructor(e){super(),Et(this,Qo,void 0);const{map:t,hash:n,transfer:i}=e.serializable,r=structuredClone(t,i?{transfer:i}:null);Pt(Qo,this,{map:r,hash:n,transfer:i})}get print(){Wn("Should not call PrintAnnotationStorage.print")}get serializable(){return Mt(Qo,this)}get modifiedIds(){return Vn(this,"modifiedIds",{ids:new Set,hash:""})}}var Zo=new WeakMap;class el{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;Et(this,Zo,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),Mt(Zo,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,disableFontFace:n,_inspectFont:i}=e;if(t&&!Mt(Zo,this).has(t.loadedName)){if(Un(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:n,style:s}=t,a=new FontFace(e,n,s);this.addNativeFontFace(a);try{await a.load(),Mt(Zo,this).add(e),null===i||void 0===i||i(t)}catch(r){Bn("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}return}Wn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw Bn("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var e;return Vn(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){return Vn(this,"isSyncFontLoadingSupported",Qt||ei.platform.isFirefox)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(Un(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return Vn(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,i){return e.substring(0,t)+i+e.substring(t+n)}let r,s;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let u=this._loadTestFont;u=i(u,976,c.length,c);const h=1482184792;let d=n(u,16);for(r=0,s=c.length-3;r<s;r+=4)d=d-h+n(c,r)|0;var p;r<c.length&&(d=d-h+n(c+"XXX",r)|0),u=i(u,16,4,(p=d,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f="url(data:font/opentype;base64,".concat(btoa(u),");"),g='@font-face {font-family:"'.concat(c,'";src:').concat(f,"}");this.insertRule(g);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const v of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=v,m.append(e)}this._document.body.append(m),function e(t,n){if(++l>30)return Bn("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,()=>{m.remove(),t.complete()})}}var tl=new WeakMap;class nl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;Et(this,tl,void 0),this.compiledGlyphs=Object.create(null),Pt(tl,this,e),this._inspectFont=t,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t="url(data:".concat(this.mimetype,";base64,").concat(ui(this.data),");");let n;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(t,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(s){Bn('getPathGenerator - ignoring character: "'.concat(s,'".'))}const r=Bi(i);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=r}get black(){return Mt(tl,this).black}get bold(){return Mt(tl,this).bold}get disableFontFace(){var e;return null!==(e=Mt(tl,this).disableFontFace)&&void 0!==e&&e}set disableFontFace(e){Vn(this,"disableFontFace",!!e)}get fontExtraProperties(){var e;return null!==(e=Mt(tl,this).fontExtraProperties)&&void 0!==e&&e}get isInvalidPDFjsFont(){return Mt(tl,this).isInvalidPDFjsFont}get isType3Font(){return Mt(tl,this).isType3Font}get italic(){return Mt(tl,this).italic}get missingFile(){return Mt(tl,this).missingFile}get remeasure(){return Mt(tl,this).remeasure}get vertical(){return Mt(tl,this).vertical}get ascent(){return Mt(tl,this).ascent}get defaultWidth(){return Mt(tl,this).defaultWidth}get descent(){return Mt(tl,this).descent}get bbox(){return Mt(tl,this).bbox}set bbox(e){Vn(this,"bbox",e)}get fontMatrix(){return Mt(tl,this).fontMatrix}get fallbackName(){return Mt(tl,this).fallbackName}get loadedName(){return Mt(tl,this).loadedName}get mimetype(){return Mt(tl,this).mimetype}get name(){return Mt(tl,this).name}get data(){return Mt(tl,this).data}clearData(){Mt(tl,this).clearData()}get cssFontInfo(){return Mt(tl,this).cssFontInfo}get systemFontInfo(){return Mt(tl,this).systemFontInfo}get defaultVMetrics(){return Mt(tl,this).defaultVMetrics}}var il=new WeakMap,rl=new WeakMap,sl=new WeakMap,al=new WeakSet;class ol{static write(e){const t=new TextEncoder,n={};let i=0;for(const l of ol.strings){const r=t.encode(e[l]);n[l]=r,i+=4+r.length}const r=new ArrayBuffer(i),s=new Uint8Array(r),a=new DataView(r);let o=0;for(const l of ol.strings){const e=n[l],t=e.length;a.setUint32(o,t),s.set(e,o+4),o+=4+t}return Un(o===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}constructor(e){At(this,al),Et(this,il,void 0),Et(this,rl,void 0),Et(this,sl,void 0),Pt(il,this,e),Pt(rl,this,new DataView(Mt(il,this))),Pt(sl,this,new TextDecoder)}get fontFamily(){return Ct(al,this,ll).call(this,0)}get fontWeight(){return Ct(al,this,ll).call(this,1)}get italicAngle(){return Ct(al,this,ll).call(this,2)}}function ll(e){Un(e<jt.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=Mt(rl,this).getUint32(t)+4;const n=Mt(rl,this).getUint32(t);return Mt(sl,this).decode(new Uint8Array(Mt(il,this),t+4,n))}jt=ol,(0,Yt.A)(ol,"strings",["fontFamily","fontWeight","italicAngle"]);var cl=new WeakMap,ul=new WeakMap,hl=new WeakMap,dl=new WeakSet;class pl{static write(e){const t=new TextEncoder,n={};let i=0;for(const h of pl.strings){const r=t.encode(e[h]);n[h]=r,i+=4+r.length}i+=4;let r,s,a=1+i;e.style&&(r=t.encode(e.style.style),s=t.encode(e.style.weight),a+=4+r.length+4+s.length);const o=new ArrayBuffer(a),l=new Uint8Array(o),c=new DataView(o);let u=0;c.setUint8(u++,e.guessFallback?1:0),c.setUint32(u,0),u+=4,i=0;for(const h of pl.strings){const e=n[h],t=e.length;i+=4+t,c.setUint32(u,t),l.set(e,u+4),u+=4+t}return c.setUint32(u-i-4,i),e.style&&(c.setUint32(u,r.length),l.set(r,u+4),u+=4+r.length,c.setUint32(u,s.length),l.set(s,u+4),u+=4+s.length),Un(u<=o.byteLength,"SubstitionInfo.write: Buffer overflow"),o.transferToFixedLength(u)}constructor(e){At(this,dl),Et(this,cl,void 0),Et(this,ul,void 0),Et(this,hl,void 0),Pt(cl,this,e),Pt(ul,this,new DataView(Mt(cl,this))),Pt(hl,this,new TextDecoder)}get guessFallback(){return 0!==Mt(ul,this).getUint8(0)}get css(){return Ct(dl,this,fl).call(this,0)}get loadedName(){return Ct(dl,this,fl).call(this,1)}get baseFontName(){return Ct(dl,this,fl).call(this,2)}get src(){return Ct(dl,this,fl).call(this,3)}get style(){let e=1;e+=4+Mt(ul,this).getUint32(e);const t=Mt(ul,this).getUint32(e),n=Mt(hl,this).decode(new Uint8Array(Mt(cl,this),e+4,t));e+=4+t;const i=Mt(ul,this).getUint32(e);return{style:n,weight:Mt(hl,this).decode(new Uint8Array(Mt(cl,this),e+4,i))}}}function fl(e){Un(e<Lt.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=Mt(ul,this).getUint32(t)+4;const n=Mt(ul,this).getUint32(t);return Mt(hl,this).decode(new Uint8Array(Mt(cl,this),t+4,n))}Lt=pl,(0,Yt.A)(pl,"strings",["css","loadedName","baseFontName","src"]);var gl=new WeakMap,ml=new WeakMap,vl=new WeakMap,bl=new WeakSet;class yl{constructor(e){let{data:t,extra:n}=e;At(this,bl),Et(this,gl,void 0),Et(this,ml,void 0),Et(this,vl,void 0),Pt(gl,this,t),Pt(ml,this,new TextDecoder),Pt(vl,this,new DataView(Mt(gl,this))),n&&Object.assign(this,n)}get black(){return Ct(bl,this,wl).call(this,0)}get bold(){return Ct(bl,this,wl).call(this,1)}get disableFontFace(){return Ct(bl,this,wl).call(this,2)}get fontExtraProperties(){return Ct(bl,this,wl).call(this,3)}get isInvalidPDFjsFont(){return Ct(bl,this,wl).call(this,4)}get isType3Font(){return Ct(bl,this,wl).call(this,5)}get italic(){return Ct(bl,this,wl).call(this,6)}get missingFile(){return Ct(bl,this,wl).call(this,7)}get remeasure(){return Ct(bl,this,wl).call(this,8)}get vertical(){return Ct(bl,this,wl).call(this,9)}get ascent(){return Ct(bl,this,_l).call(this,0)}get defaultWidth(){return Ct(bl,this,_l).call(this,1)}get descent(){return Ct(bl,this,_l).call(this,2)}get bbox(){let e=Sl._;if(0===Mt(vl,this).getUint8(e))return;e+=1;const t=[];for(let n=0;n<4;n++)t.push(Mt(vl,this).getInt16(e,!0)),e+=2;return t}get fontMatrix(){let e=Al._;if(0===Mt(vl,this).getUint8(e))return;e+=1;const t=[];for(let n=0;n<6;n++)t.push(Mt(vl,this).getFloat64(e,!0)),e+=8;return t}get defaultVMetrics(){let e=El._;if(0===Mt(vl,this).getUint8(e))return;e+=1;const t=[];for(let n=0;n<3;n++)t.push(Mt(vl,this).getInt16(e,!0)),e+=2;return t}get fallbackName(){return Ct(bl,this,xl).call(this,0)}get loadedName(){return Ct(bl,this,xl).call(this,1)}get mimetype(){return Ct(bl,this,xl).call(this,2)}get name(){return Ct(bl,this,xl).call(this,3)}get data(){let e=Cl._;e+=4+Mt(vl,this).getUint32(e);e+=4+Mt(vl,this).getUint32(e);e+=4+Mt(vl,this).getUint32(e);const t=Mt(vl,this).getUint32(e);if(0!==t)return new Uint8Array(Mt(gl,this),e+4,t)}clearData(){let e=Cl._;e+=4+Mt(vl,this).getUint32(e);e+=4+Mt(vl,this).getUint32(e);e+=4+Mt(vl,this).getUint32(e);const t=Mt(vl,this).getUint32(e);new Uint8Array(Mt(gl,this),e+4,t).fill(0),Mt(vl,this).setUint32(e,0)}get cssFontInfo(){let e=Cl._;e+=4+Mt(vl,this).getUint32(e);e+=4+Mt(vl,this).getUint32(e);const t=Mt(vl,this).getUint32(e);if(0===t)return null;const n=new Uint8Array(t);return n.set(new Uint8Array(Mt(gl,this),e+4,t)),new ol(n.buffer)}get systemFontInfo(){let e=Cl._;e+=4+Mt(vl,this).getUint32(e);const t=Mt(vl,this).getUint32(e);if(0===t)return null;const n=new Uint8Array(t);return n.set(new Uint8Array(Mt(gl,this),e+4,t)),new pl(n.buffer)}static write(e){const t=e.systemFontInfo?pl.write(e.systemFontInfo):null,n=e.cssFontInfo?ol.write(e.cssFontInfo):null,i=new TextEncoder,r={};let s=0;for(const f of yl.strings)r[f]=i.encode(e[f]),s+=4+r[f].length;const a=Cl._+4+s+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),o=new ArrayBuffer(a),l=new Uint8Array(o),c=new DataView(o);let u=0;const h=yl.bools.length;let d=0,p=0;for(let f=0;f<h;f++){const t=e[yl.bools[f]];d|=(void 0===t?0:t?2:1)<<p,p+=2,8!==p&&f!==h-1||(c.setUint8(u++,d),d=0,p=0)}Un(u===kl._,"FontInfo.write: Boolean properties offset mismatch");for(const f of yl.numbers)c.setFloat64(u,e[f]),u+=8;if(Un(u===Sl._,"FontInfo.write: Number properties offset mismatch"),e.bbox){c.setUint8(u++,4);for(const t of e.bbox)c.setInt16(u,t,!0),u+=2}else c.setUint8(u++,0),u+=8;if(Un(u===Al._,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){c.setUint8(u++,6);for(const t of e.fontMatrix)c.setFloat64(u,t,!0),u+=8}else c.setUint8(u++,0),u+=48;if(Un(u===El._,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){c.setUint8(u++,1);for(const t of e.defaultVMetrics)c.setInt16(u,t,!0),u+=2}else c.setUint8(u++,0),u+=6;Un(u===Cl._,"FontInfo.write: DefaultVMetrics properties offset mismatch"),c.setUint32(Cl._,0),u+=4;for(const f of yl.strings){const e=r[f],t=e.length;c.setUint32(u,t),l.set(e,u+4),u+=4+t}if(c.setUint32(Cl._,u-Cl._-4),t){const e=t.byteLength;c.setUint32(u,e),Un(u+4+e<=o.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),l.set(new Uint8Array(t),u+4),u+=4+e}else c.setUint32(u,0),u+=4;if(n){const e=n.byteLength;c.setUint32(u,e),Un(u+4+e<=o.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),l.set(new Uint8Array(n),u+4),u+=4+e}else c.setUint32(u,0),u+=4;return void 0===e.data?(c.setUint32(u,0),u+=4):(c.setUint32(u,e.data.length),l.set(e.data,u+4),u+=4+e.data.length),Un(u<=o.byteLength,"FontInfo.write: Buffer overflow"),o.transferToFixedLength(u)}}function wl(e){Un(e<Ft.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=2*e%8,i=Mt(vl,this).getUint8(t)>>n&3;return 0===i?void 0:2===i}function _l(e){return Un(e<Ft.numbers.length,"Invalid number index"),Mt(vl,this).getFloat64(kl._+8*e)}function xl(e){Un(e<Ft.strings.length,"Invalid string index");let t=Cl._+4;for(let r=0;r<e;r++)t+=Mt(vl,this).getUint32(t)+4;const n=Mt(vl,this).getUint32(t),i=new Uint8Array(n);return i.set(new Uint8Array(Mt(gl,this),t+4,n)),Mt(ml,this).decode(i)}Ft=yl,(0,Yt.A)(yl,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),(0,Yt.A)(yl,"numbers",["ascent","defaultWidth","descent"]),(0,Yt.A)(yl,"strings",["fallbackName","loadedName","mimetype","name"]);var kl={_:Math.ceil(2*Ft.bools.length/8)},Sl={_:Ct(Ft,Ft,kl)._+8*Ft.numbers.length},Al={_:Ct(Ft,Ft,Sl)._+1+8},El={_:Ct(Ft,Ft,Al)._+1+48},Cl={_:Ct(Ft,Ft,El)._+1+6};class Tl{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,i=[],r=[],s=[],a=[],o=null,l=null;switch(e[0]){case"RadialAxial":t="axial"===e[1]?1:2,n=e[2],s=e[3],1===t?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,o=e[1],i=e[2],r=e[3],a=e[4]||[],n=e[6],l=e[7];break;default:throw new Error("Unsupported pattern type: ".concat(e[0]))}const c=Math.floor(i.length/2),u=Math.floor(r.length/3),h=s.length,d=a.length;let p=0;for(const b of a)p+=1,p=4*Math.ceil(p/4),p+=4+4*b.coords.length,p+=4+4*b.colors.length,void 0!==b.verticesPerRow&&(p+=4);const f=new ArrayBuffer(20+8*c+3*u+8*h+(n?16:0)+(l?3:0)+p),g=new DataView(f),m=new Uint8Array(f);g.setUint8(Ml._,t),g.setUint8(Pl._,n?1:0),g.setUint8(Rl._,l?1:0),g.setUint8(Ol._,o),g.setUint32(Nl._,c,!0),g.setUint32(Il._,u,!0),g.setUint32(Dl._,h,!0),g.setUint32(jl._,d,!0);let v=20;new Float32Array(f,v,2*c).set(i),v+=8*c,m.set(r,v),v+=3*u;for(const[b,y]of s)g.setFloat32(v,b,!0),v+=4,g.setUint32(v,parseInt(y.slice(1),16),!0),v+=4;if(n)for(const b of n)g.setFloat32(v,b,!0),v+=4;l&&(m.set(l,v),v+=3);for(let b=0;b<a.length;b++){const e=a[b];g.setUint8(v,e.type),v+=1,v=4*Math.ceil(v/4),g.setUint32(v,e.coords.length,!0),v+=4;new Int32Array(f,v,e.coords.length).set(e.coords),v+=4*e.coords.length,g.setUint32(v,e.colors.length,!0),v+=4;new Int32Array(f,v,e.colors.length).set(e.colors),v+=4*e.colors.length,void 0!==e.verticesPerRow&&(g.setUint32(v,e.verticesPerRow,!0),v+=4)}return f}getIR(){const e=this.view,t=this.data[Ml._],n=!!this.data[Pl._],i=!!this.data[Rl._],r=e.getUint32(Nl._,!0),s=e.getUint32(Il._,!0),a=e.getUint32(Dl._,!0),o=e.getUint32(jl._,!0);let l=20;const c=new Float32Array(this.buffer,l,2*r);l+=8*r;const u=new Uint8Array(this.buffer,l,3*s);l+=3*s;const h=[];for(let g=0;g<a;++g){const t=e.getFloat32(l,!0);l+=4;const n=e.getUint32(l,!0);l+=4,h.push([t,"#".concat(n.toString(16).padStart(6,"0"))])}let d=null;if(n){d=[];for(let t=0;t<4;++t)d.push(e.getFloat32(l,!0)),l+=4}let p=null;i&&(p=new Uint8Array(this.buffer,l,3),l+=3);const f=[];for(let g=0;g<o;++g){const t=e.getUint8(l);l+=1,l=4*Math.ceil(l/4);const n=e.getUint32(l,!0);l+=4;const i=new Int32Array(this.buffer,l,n);l+=4*n;const r=e.getUint32(l,!0);l+=4;const s=new Int32Array(this.buffer,l,r);l+=4*r;const a={type:t,coords:i,colors:s};t===fn&&(a.verticesPerRow=e.getUint32(l,!0),l+=4),f.push(a)}if(1===t)return["RadialAxial","axial",d,h,Array.from(c.slice(0,2)),Array.from(c.slice(2,4)),null,null];if(2===t)return["RadialAxial","radial",d,h,[c[0],c[1]],[c[3],c[4]],c[2],c[5]];if(3===t){const e=this.data[Ol._];let t=null;if(c.length>0){let e=c[0],n=c[0],i=c[1],r=c[1];for(let t=0;t<c.length;t+=2){const s=c[t],a=c[t+1];e=e>s?s:e,i=i>a?a:i,n=n<s?s:n,r=r<a?a:r}t=[e,i,n,r]}return["Mesh",e,c,u,f,t,d,p]}throw new Error("Unsupported pattern kind: ".concat(t))}}var Ml={_:0},Pl={_:1},Rl={_:2},Ol={_:3},Nl={_:4},Il={_:8},Dl={_:12},jl={_:16};function Ll(e){if("string"!==typeof e)return null;if(e.endsWith("/"))return e;throw new Error('Invalid factory url: "'.concat(e,'" must include trailing slash.'))}const Fl=e=>"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0,Bl=function(e,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,r,...s]=n;if(!e(i)&&!Number.isInteger(i))return!1;if(!t(r))return!1;const a=s.length;let o=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return 0===a;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(4!==a)return!1;o=!1;break;default:return!1}for(const l of s)if(!("number"===typeof l||o&&null===l))return!1;return!0}.bind(null,Fl,e=>"object"===typeof e&&"string"===typeof(null===e||void 0===e?void 0:e.name));var Wl=new WeakMap,Ul=new WeakMap;class zl{constructor(){Et(this,Wl,new Map),Et(this,Ul,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};Mt(Ul,this).then(()=>{for(const[e]of Mt(Wl,this))e.call(this,n)})}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted)return void Bn("LoopbackPort - cannot use an `aborted` signal.");const s=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",s),r.addEventListener("abort",s)}Mt(Wl,this).set(t,i)}removeEventListener(e,t){const n=Mt(Wl,this).get(t);null===n||void 0===n||n(),Mt(Wl,this).delete(t)}terminate(){for(const[,e]of Mt(Wl,this))null===e||void 0===e||e();Mt(Wl,this).clear()}}const Hl=1,Vl=2,ql=1,Gl=2,Kl=3,Xl=4,Yl=5,Jl=6,Ql=7,$l=8;function Zl(){}function ec(e){if(e instanceof Qn||e instanceof Xn||e instanceof Gn||e instanceof Yn||e instanceof Kn)return e;switch(e instanceof Error||"object"===typeof e&&null!==e||Wn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new Qn(e.message);case"InvalidPDFException":return new Xn(e.message);case"PasswordException":return new Gn(e.message,e.code);case"ResponseException":return new Yn(e.message,e.status,e.missing);case"UnknownErrorException":return new Kn(e.message,e.details)}return new Kn(e.message,e.toString())}var tc=new WeakMap,nc=new WeakSet;class ic{constructor(e,t,n){At(this,nc),Et(this,tc,new AbortController),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",Ct(nc,this,rc).bind(this),{signal:Mt(tc,this).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(s){r.reject(s)}return r.promise}sendWithStream(e,t,n,i){const r=this.streamId++,s=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[r]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:s,targetName:a,action:e,streamId:r,data:t,desiredSize:n.desiredSize},i),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[r].pullCall=t,o.postMessage({sourceName:s,targetName:a,stream:Jl,streamId:r,desiredSize:e.desiredSize}),t.promise},cancel:e=>{Un(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[r].cancelCall=t,this.streamControllers[r].isClosed=!0,o.postMessage({sourceName:s,targetName:a,stream:ql,streamId:r,reason:ec(e)}),t.promise}},n)}destroy(){var e;null===(e=Mt(tc,this))||void 0===e||e.abort(),Pt(tc,this,null)}}function rc(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void Ct(nc,this,ac).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===Hl)n.resolve(t.data);else{if(t.callback!==Vl)throw new Error("Unexpected callback case");n.reject(ec(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,i=t.sourceName,r=this.comObj;return void Promise.try(n,t.data).then(function(n){r.postMessage({sourceName:e,targetName:i,callback:Hl,callbackId:t.callbackId,data:n})},function(n){r.postMessage({sourceName:e,targetName:i,callback:Vl,callbackId:t.callbackId,reason:ec(n)})})}t.streamId?Ct(nc,this,sc).call(this,t):n(t.data)}function sc(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,s=this,a=this.actionHandler[e.action],o={enqueue(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=s,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:Xl,streamId:t,chunk:e},a)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Kl,streamId:t}),delete s.streamSinks[t])},error(e){Un(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Yl,streamId:t,reason:ec(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,Promise.try(a,e.data,o).then(function(){r.postMessage({sourceName:n,targetName:i,stream:$l,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:i,stream:$l,streamId:t,reason:ec(e)})})}function ac(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,s=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case $l:e.success?s.startCall.resolve():s.startCall.reject(ec(e.reason));break;case Ql:e.success?s.pullCall.resolve():s.pullCall.reject(ec(e.reason));break;case Jl:if(!a){r.postMessage({sourceName:n,targetName:i,stream:Ql,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||Zl).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ql,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:i,stream:Ql,streamId:t,reason:ec(e)})});break;case Xl:if(Un(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case Kl:if(Un(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),Ct(nc,this,oc).call(this,s,t);break;case Yl:Un(s,"error should have stream controller"),s.controller.error(ec(e.reason)),Ct(nc,this,oc).call(this,s,t);break;case Gl:e.success?s.cancelCall.resolve():s.cancelCall.reject(ec(e.reason)),Ct(nc,this,oc).call(this,s,t);break;case ql:if(!a)break;const o=ec(e.reason);Promise.try(a.onCancel||Zl,o).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Gl,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:i,stream:Gl,streamId:t,reason:ec(e)})}),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function oc(e,t){var n,i,r;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(i=e.pullCall)||void 0===i?void 0:i.promise,null===(r=e.cancelCall)||void 0===r?void 0:r.promise]),delete this.streamControllers[t]}var lc=new WeakMap;class cc{constructor(e){let{enableHWA:t=!1}=e;Et(this,lc,!1),Pt(lc,this,t)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!Mt(lc,this)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Wn("Abstract method `_createCanvas` called.")}}class uc extends cc{constructor(e){let{ownerDocument:t=globalThis.document,enableHWA:n=!1}=e;super({enableHWA:n}),this._document=t}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class hc{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))})}async _fetch(e){Wn("Abstract method `_fetch` called.")}}class dc extends hc{async _fetch(e){const t=await gi(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Zn(t)}}class pc{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,r){return"none"}destroy(){}}var fc=new WeakMap,gc=new WeakMap,mc=new WeakMap,vc=new WeakMap,bc=new WeakMap,yc=new WeakMap,wc=new WeakMap,_c=new WeakSet;class xc extends pc{constructor(e){let{docId:t,ownerDocument:n=globalThis.document}=e;super(),At(this,_c),Et(this,fc,void 0),Et(this,gc,void 0),Et(this,mc,void 0),Et(this,vc,void 0),Et(this,bc,void 0),Et(this,yc,void 0),Et(this,wc,0),Pt(vc,this,t),Pt(bc,this,n)}addFilter(e){var t,n;if(!e)return"none";let i=Tt(_c,this,kc).get(e);if(i)return i;const[r,s,a]=Ct(_c,this,Ec).call(this,e),o=1===e.length?r:"".concat(r).concat(s).concat(a);if(i=Tt(_c,this,kc).get(o),i)return Tt(_c,this,kc).set(e,i),i;const l="g_".concat(Mt(vc,this),"_transfer_map_").concat((Pt(wc,this,(t=Mt(wc,this),n=t++,t)),n)),c=Ct(_c,this,Cc).call(this,l);Tt(_c,this,kc).set(e,c),Tt(_c,this,kc).set(o,c);const u=Ct(_c,this,Pc).call(this,l);return Ct(_c,this,Oc).call(this,r,s,a,u),c}addHCMFilter(e,t){var n;const i="".concat(e,"-").concat(t),r="base";let s=Tt(_c,this,Sc).get(r);if((null===(n=s)||void 0===n?void 0:n.key)===i)return s.url;var a;s?(null===(a=s.filter)||void 0===a||a.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},Tt(_c,this,Sc).set(r,s));if(!e||!t)return s.url;const o=Ct(_c,this,Ic).call(this,e);e=ni.makeHexColor(...o);const l=Ct(_c,this,Ic).call(this,t);if(t=ni.makeHexColor(...l),Tt(_c,this,Ac).style.color="","#000000"===e&&"#ffffff"===t||e===t)return s.url;const c=new Array(256);for(let f=0;f<=255;f++){const e=f/255;c[f]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const u=c.join(","),h="g_".concat(Mt(vc,this),"_hcm_filter"),d=s.filter=Ct(_c,this,Pc).call(this,h);Ct(_c,this,Oc).call(this,u,u,u,d),Ct(_c,this,Mc).call(this,d);const p=(e,t)=>{const n=o[e]/255,i=l[e]/255,r=new Array(t+1);for(let s=0;s<=t;s++)r[s]=n+s/t*(i-n);return r.join(",")};return Ct(_c,this,Oc).call(this,p(0,5),p(1,5),p(2,5),d),s.url=Ct(_c,this,Cc).call(this,h),s.url}addAlphaFilter(e){var t,n;let i=Tt(_c,this,kc).get(e);if(i)return i;const[r]=Ct(_c,this,Ec).call(this,[e]),s="alpha_".concat(r);if(i=Tt(_c,this,kc).get(s),i)return Tt(_c,this,kc).set(e,i),i;const a="g_".concat(Mt(vc,this),"_alpha_map_").concat((Pt(wc,this,(t=Mt(wc,this),n=t++,t)),n)),o=Ct(_c,this,Cc).call(this,a);Tt(_c,this,kc).set(e,o),Tt(_c,this,kc).set(s,o);const l=Ct(_c,this,Pc).call(this,a);return Ct(_c,this,Nc).call(this,r,l),o}addLuminosityFilter(e){var t,n;let i,r,s=Tt(_c,this,kc).get(e||"luminosity");if(s)return s;if(e?([i]=Ct(_c,this,Ec).call(this,[e]),r="luminosity_".concat(i)):r="luminosity",s=Tt(_c,this,kc).get(r),s)return Tt(_c,this,kc).set(e,s),s;const a="g_".concat(Mt(vc,this),"_luminosity_map_").concat((Pt(wc,this,(t=Mt(wc,this),n=t++,t)),n)),o=Ct(_c,this,Cc).call(this,a);Tt(_c,this,kc).set(e,o),Tt(_c,this,kc).set(r,o);const l=Ct(_c,this,Pc).call(this,a);return Ct(_c,this,Tc).call(this,l),e&&Ct(_c,this,Nc).call(this,i,l),o}addHighlightHCMFilter(e,t,n,i,r){var s;const a="".concat(t,"-").concat(n,"-").concat(i,"-").concat(r);let o=Tt(_c,this,Sc).get(e);if((null===(s=o)||void 0===s?void 0:s.key)===a)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},Tt(_c,this,Sc).set(e,o));if(!t||!n)return o.url;const[c,u]=[t,n].map(Ct(_c,this,Ic).bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[p,f]=[i,r].map(Ct(_c,this,Ic).bind(this));d<h&&([h,d,p,f]=[d,h,f,p]),Tt(_c,this,Ac).style.color="";const g=(e,t,n)=>{const i=new Array(256),r=(d-h)/n,s=e/255,a=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(h+l*r),t=s+l*a;for(let n=o;n<=e;n++)i[n]=t;o=e+1}for(let l=o;l<256;l++)i[l]=i[o-1];return i.join(",")},m="g_".concat(Mt(vc,this),"_hcm_").concat(e,"_filter"),v=o.filter=Ct(_c,this,Pc).call(this,m);return Ct(_c,this,Mc).call(this,v),Ct(_c,this,Oc).call(this,g(p[0],f[0],5),g(p[1],f[1],5),g(p[2],f[2],5),v),o.url=Ct(_c,this,Cc).call(this,m),o.url}destroy(){var e,t,n,i;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(e=Mt(yc,this))&&void 0!==e&&e.size||(null===(t=Mt(mc,this))||void 0===t||t.parentNode.parentNode.remove(),Pt(mc,this,null),null===(n=Mt(gc,this))||void 0===n||n.clear(),Pt(gc,this,null),null===(i=Mt(yc,this))||void 0===i||i.clear(),Pt(yc,this,null),Pt(wc,this,0))}}function kc(e){return Mt(gc,e)||Pt(gc,e,new Map)}function Sc(e){return Mt(yc,e)||Pt(yc,e,new Map)}function Ac(e){if(!Mt(mc,e)){const t=Mt(bc,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=Mt(bc,e).createElementNS(pi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),Pt(mc,e,Mt(bc,e).createElementNS(pi,"defs")),t.append(i),i.append(Mt(mc,e)),Mt(bc,e).body.append(t)}return Mt(mc,e)}function Ec(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const i=n.join(",");return[i,i,i]}const[t,n,i]=e,r=new Array(256),s=new Array(256),a=new Array(256);for(let o=0;o<256;o++)r[o]=t[o]/255,s[o]=n[o]/255,a[o]=i[o]/255;return[r.join(","),s.join(","),a.join(",")]}function Cc(e){if(void 0===Mt(fc,this)){Pt(fc,this,"");const e=Mt(bc,this).URL;e!==Mt(bc,this).baseURI&&(bi(e)?Bn('#createUrl: ignore "data:"-URL for performance reasons.'):Pt(fc,this,Hn(e,"")))}return"url(".concat(Mt(fc,this),"#").concat(e,")")}function Tc(e){const t=Mt(bc,this).createElementNS(pi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function Mc(e){const t=Mt(bc,this).createElementNS(pi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function Pc(e){const t=Mt(bc,this).createElementNS(pi,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),Tt(_c,this,Ac).append(t),t}function Rc(e,t,n){const i=Mt(bc,this).createElementNS(pi,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}function Oc(e,t,n,i){const r=Mt(bc,this).createElementNS(pi,"feComponentTransfer");i.append(r),Ct(_c,this,Rc).call(this,r,"feFuncR",e),Ct(_c,this,Rc).call(this,r,"feFuncG",t),Ct(_c,this,Rc).call(this,r,"feFuncB",n)}function Nc(e,t){const n=Mt(bc,this).createElementNS(pi,"feComponentTransfer");t.append(n),Ct(_c,this,Rc).call(this,n,"feFuncA",e)}function Ic(e){return Tt(_c,this,Ac).style.color=e,Ei(getComputedStyle(Tt(_c,this,Ac)).getPropertyValue("color"))}class Dc{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load font data at: ".concat(n))})}async _fetch(e){Wn("Abstract method `_fetch` called.")}}class jc extends Dc{async _fetch(e){const t=await gi(e,"arraybuffer");return new Uint8Array(t)}}class Lc{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load wasm data at: ".concat(n))})}async _fetch(e){Wn("Abstract method `_fetch` called.")}}class Fc extends Lc{async _fetch(e){const t=await gi(e,"arraybuffer");return new Uint8Array(t)}}async function Bc(e){const t=process.getBuiltinModule("fs"),n=await t.promises.readFile(e);return new Uint8Array(n)}Qt&&Bn("Please use the `legacy` build in Node.js environments.");class Wc extends pc{}class Uc extends cc{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("file:///home/saroj/test/front/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(e,t)}}class zc extends hc{async _fetch(e){return Bc(e)}}class Hc extends Dc{async _fetch(e){return Bc(e)}}class Vc extends Lc{async _fetch(e){return Bc(e)}}const qc="__forcedDependency",{floor:Gc,ceil:Kc}=Math;function Xc(e,t,n,i,r,s){e[4*t+0]=Math.min(e[4*t+0],n),e[4*t+1]=Math.min(e[4*t+1],i),e[4*t+2]=Math.max(e[4*t+2],r),e[4*t+3]=Math.max(e[4*t+3],s)}const Yc=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Jc=new WeakMap,Qc=new WeakMap;class $c{constructor(e,t){Et(this,Jc,void 0),Et(this,Qc,void 0),Pt(Jc,this,e),Pt(Qc,this,t)}get length(){return Mt(Jc,this).length}isEmpty(e){return Mt(Jc,this)[e]===Yc}minX(e){return Mt(Qc,this)[4*e+0]/256}minY(e){return Mt(Qc,this)[4*e+1]/256}maxX(e){return(Mt(Qc,this)[4*e+2]+1)/256}maxY(e){return(Mt(Qc,this)[4*e+3]+1)/256}}const Zc=(e,t)=>{if(!e)return;let n=e.get(t);return n||(n={dependencies:new Set,isRenderingOperation:!1},e.set(t,n)),n};var eu=new WeakMap,tu=new WeakMap,nu=new WeakMap,iu=new WeakMap,ru=new WeakMap,su=new WeakMap,au=new WeakMap,ou=new WeakMap,lu=new WeakMap,cu=new WeakMap,uu=new WeakMap,hu=new WeakMap,du=new WeakMap,pu=new WeakMap,fu=new WeakMap,gu=new WeakMap,mu=new WeakMap,vu=new WeakSet;class bu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];At(this,vu),Et(this,eu,{__proto__:null}),Et(this,tu,{__proto__:null,transform:[],moveText:[],sameLineText:[],[qc]:[]}),Et(this,nu,new Map),Et(this,iu,[]),Et(this,ru,[]),Et(this,su,[[1,0,0,1,0,0]]),Et(this,au,[-1/0,-1/0,1/0,1/0]),Et(this,ou,new Float64Array([1/0,1/0,-1/0,-1/0])),Et(this,lu,-1),Et(this,cu,new Set),Et(this,uu,new Map),Et(this,hu,new Map),Et(this,du,void 0),Et(this,pu,void 0),Et(this,fu,void 0),Et(this,gu,void 0),Et(this,mu,void 0),Pt(du,this,e.width),Pt(pu,this,e.height),Ct(vu,this,yu).call(this,t),n&&Pt(mu,this,new Map)}growOperationsCount(e){e>=Mt(gu,this).length&&Ct(vu,this,yu).call(this,e,Mt(gu,this))}save(e){return Pt(eu,this,{__proto__:Mt(eu,this)}),Pt(tu,this,{__proto__:Mt(tu,this),transform:{__proto__:Mt(tu,this).transform},moveText:{__proto__:Mt(tu,this).moveText},sameLineText:{__proto__:Mt(tu,this).sameLineText},[qc]:{__proto__:Mt(tu,this)[qc]}}),Pt(au,this,{__proto__:Mt(au,this)}),Mt(iu,this).push(e),this}restore(e){const t=Object.getPrototypeOf(Mt(eu,this));if(null===t)return this;Pt(eu,this,t),Pt(tu,this,Object.getPrototypeOf(Mt(tu,this))),Pt(au,this,Object.getPrototypeOf(Mt(au,this)));const n=Mt(iu,this).pop();var i;void 0!==n&&(null===(i=Zc(Mt(mu,this),e))||void 0===i||i.dependencies.add(n),Mt(gu,this)[e]=Mt(gu,this)[n]);return this}recordOpenMarker(e){return Mt(iu,this).push(e),this}getOpenMarker(){return 0===Mt(iu,this).length?null:Mt(iu,this).at(-1)}recordCloseMarker(e){const t=Mt(iu,this).pop();var n;void 0!==t&&(null===(n=Zc(Mt(mu,this),e))||void 0===n||n.dependencies.add(t),Mt(gu,this)[e]=Mt(gu,this)[t]);return this}beginMarkedContent(e){return Mt(ru,this).push(e),this}endMarkedContent(e){const t=Mt(ru,this).pop();var n;void 0!==t&&(null===(n=Zc(Mt(mu,this),e))||void 0===n||n.dependencies.add(t),Mt(gu,this)[e]=Mt(gu,this)[t]);return this}pushBaseTransform(e){return Mt(su,this).push(ni.multiplyByDOMMatrix(Mt(su,this).at(-1),e.getTransform())),this}popBaseTransform(){return Mt(su,this).length>1&&Mt(su,this).pop(),this}recordSimpleData(e,t){return Mt(eu,this)[e]=t,this}recordIncrementalData(e,t){return Mt(tu,this)[e].push(t),this}resetIncrementalData(e,t){return Mt(tu,this)[e].length=0,this}recordNamedData(e,t){return Mt(nu,this).set(e,t),this}recordSimpleDataFromNamed(e,t,n){var i;Mt(eu,this)[e]=null!==(i=Mt(nu,this).get(t))&&void 0!==i?i:n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(qc,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in Mt(eu,this)&&this.recordFutureForcedDependency(t,Mt(eu,this)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of Mt(cu,this))this.recordFutureForcedDependency(qc,e);return this}resetBBox(e){return Mt(lu,this)!==e&&(Pt(lu,this,e),Mt(ou,this)[0]=1/0,Mt(ou,this)[1]=1/0,Mt(ou,this)[2]=-1/0,Mt(ou,this)[3]=-1/0),this}recordClipBox(e,t,n,i,r,s){const a=ni.multiplyByDOMMatrix(Mt(su,this).at(-1),t.getTransform()),o=[1/0,1/0,-1/0,-1/0];ni.axialAlignedBoundingBox([n,r,i,s],a,o);const l=ni.intersect(Mt(au,this),o);return l?(Mt(au,this)[0]=l[0],Mt(au,this)[1]=l[1],Mt(au,this)[2]=l[2],Mt(au,this)[3]=l[3]):(Mt(au,this)[0]=Mt(au,this)[1]=1/0,Mt(au,this)[2]=Mt(au,this)[3]=-1/0),this}recordBBox(e,t,n,i,r,s){const a=Mt(au,this);if(a[0]===1/0)return this;const o=ni.multiplyByDOMMatrix(Mt(su,this).at(-1),t.getTransform());if(a[0]===-1/0)return ni.axialAlignedBoundingBox([n,r,i,s],o,Mt(ou,this)),this;const l=[1/0,1/0,-1/0,-1/0];return ni.axialAlignedBoundingBox([n,r,i,s],o,l),Mt(ou,this)[0]=Math.min(Mt(ou,this)[0],Math.max(l[0],a[0])),Mt(ou,this)[1]=Math.min(Mt(ou,this)[1],Math.max(l[1],a[1])),Mt(ou,this)[2]=Math.max(Mt(ou,this)[2],Math.min(l[2],a[2])),Mt(ou,this)[3]=Math.max(Mt(ou,this)[3],Math.min(l[3],a[3])),this}recordCharacterBBox(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;const o=n.bbox;let l,c;if(o&&(l=o[2]!==o[0]&&o[3]!==o[1]&&Mt(hu,this).get(n),!1!==l&&(c=[0,0,0,0],ni.axialAlignedBoundingBox(o,n.fontMatrix,c),1===i&&0===r&&0===s||ni.scaleMinMax([i,0,0,-i,r,s],c),l)))return this.recordBBox(e,t,c[0],c[2],c[1],c[3]);if(!a)return this.recordFullPageBBox(e);const u=a();return o&&c&&void 0===l&&(l=c[0]<=r-u.actualBoundingBoxLeft&&c[2]>=r+u.actualBoundingBoxRight&&c[1]<=s-u.actualBoundingBoxAscent&&c[3]>=s+u.actualBoundingBoxDescent,Mt(hu,this).set(n,l),l)?this.recordBBox(e,t,c[0],c[2],c[1],c[3]):this.recordBBox(e,t,r-u.actualBoundingBoxLeft,r+u.actualBoundingBoxRight,s-u.actualBoundingBoxAscent,s+u.actualBoundingBoxDescent)}recordFullPageBBox(e){return Mt(ou,this)[0]=Math.max(0,Mt(au,this)[0]),Mt(ou,this)[1]=Math.max(0,Mt(au,this)[1]),Mt(ou,this)[2]=Math.min(Mt(du,this),Mt(au,this)[2]),Mt(ou,this)[3]=Math.min(Mt(pu,this),Mt(au,this)[3]),this}getSimpleIndex(e){return Mt(eu,this)[e]}recordDependencies(e,t){const n=Mt(cu,this),i=Mt(eu,this),r=Mt(tu,this);for(const s of t)s in Mt(eu,this)?n.add(i[s]):s in r&&r[s].forEach(n.add,n);return this}recordNamedDependency(e,t){return Mt(nu,this).has(t)&&Mt(cu,this).add(Mt(nu,this).get(t)),this}recordOperation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.recordDependencies(e,[qc]),Mt(mu,this)){const t=Zc(Mt(mu,this),e),{dependencies:n}=t;Mt(cu,this).forEach(n.add,n),Mt(iu,this).forEach(n.add,n),Mt(ru,this).forEach(n.add,n),n.delete(e),t.isRenderingOperation=!0}if(Mt(lu,this)===e){const n=Gc(256*Mt(ou,this)[0]/Mt(du,this)),i=Gc(256*Mt(ou,this)[1]/Mt(pu,this)),r=Kc(256*Mt(ou,this)[2]/Mt(du,this)),s=Kc(256*Mt(ou,this)[3]/Mt(pu,this));Xc(Mt(fu,this),e,n,i,r,s);for(const t of Mt(cu,this))t!==e&&Xc(Mt(fu,this),t,n,i,r,s);for(const t of Mt(iu,this))t!==e&&Xc(Mt(fu,this),t,n,i,r,s);for(const t of Mt(ru,this))t!==e&&Xc(Mt(fu,this),t,n,i,r,s);t||(Mt(cu,this).clear(),Pt(lu,this,-1))}return this}recordShowTextOperation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Array.from(Mt(cu,this));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Mt(lu,this)===e&&(Pt(lu,this,-1),Mt(au,this)[0]=Math.max(Mt(au,this)[0],Mt(ou,this)[0]),Mt(au,this)[1]=Math.max(Mt(au,this)[1],Mt(ou,this)[1]),Mt(au,this)[2]=Math.min(Mt(au,this)[2],Mt(ou,this)[2]),Mt(au,this)[3]=Math.min(Mt(au,this)[3],Mt(ou,this)[3]),t||Mt(cu,this).clear()),this}_takePendingDependencies(){const e=Mt(cu,this);return Pt(cu,this,new Set),e}_extractOperation(e){const t=Mt(uu,this).get(e);return Mt(uu,this).delete(e),t}_pushPendingDependencies(e){for(const t of e)Mt(cu,this).add(t)}take(){return Mt(hu,this).clear(),new $c(Mt(gu,this),Mt(fu,this))}takeDebugMetadata(){return Mt(mu,this)}}function yu(e,t){const n=new ArrayBuffer(4*e);Pt(fu,this,new Uint8ClampedArray(n)),Pt(gu,this,new Uint32Array(n)),t&&t.length>0?(Mt(gu,this).set(t),Mt(gu,this).fill(Yc,t.length)):Mt(gu,this).fill(Yc)}var wu=new WeakMap,_u=new WeakMap,xu=new WeakMap,ku=new WeakMap,Su=new WeakMap;class Au{constructor(e,t,n){if(Et(this,wu,void 0),Et(this,_u,void 0),Et(this,xu,void 0),Et(this,ku,0),Et(this,Su,0),e instanceof Au&&Mt(xu,e)===!!n)return e;Pt(wu,this,e),Pt(_u,this,t),Pt(xu,this,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){var t;return Pt(Su,this,(t=Mt(Su,this),t++,t)),Mt(wu,this).save(Mt(_u,this)),this}restore(e){var t;Mt(Su,this)>0&&(Mt(wu,this).restore(Mt(_u,this)),Pt(Su,this,(t=Mt(Su,this),t--,t)));return this}recordOpenMarker(e){var t;return Pt(ku,this,(t=Mt(ku,this),t++,t)),this}getOpenMarker(){return Mt(ku,this)>0?Mt(_u,this):Mt(wu,this).getOpenMarker()}recordCloseMarker(e){var t;return Pt(ku,this,(t=Mt(ku,this),t--,t)),this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return Mt(wu,this).pushBaseTransform(e),this}popBaseTransform(){return Mt(wu,this).popBaseTransform(),this}recordSimpleData(e,t){return Mt(wu,this).recordSimpleData(e,Mt(_u,this)),this}recordIncrementalData(e,t){return Mt(wu,this).recordIncrementalData(e,Mt(_u,this)),this}resetIncrementalData(e,t){return Mt(wu,this).resetIncrementalData(e,Mt(_u,this)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return Mt(wu,this).recordSimpleDataFromNamed(e,t,Mt(_u,this)),this}recordFutureForcedDependency(e,t){return Mt(wu,this).recordFutureForcedDependency(e,Mt(_u,this)),this}inheritSimpleDataAsFutureForcedDependencies(e){return Mt(wu,this).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return Mt(wu,this).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return Mt(xu,this)||Mt(wu,this).resetBBox(Mt(_u,this)),this}recordClipBox(e,t,n,i,r,s){return Mt(xu,this)||Mt(wu,this).recordClipBox(Mt(_u,this),t,n,i,r,s),this}recordBBox(e,t,n,i,r,s){return Mt(xu,this)||Mt(wu,this).recordBBox(Mt(_u,this),t,n,i,r,s),this}recordCharacterBBox(e,t,n,i,r,s,a){return Mt(xu,this)||Mt(wu,this).recordCharacterBBox(Mt(_u,this),t,n,i,r,s,a),this}recordFullPageBBox(e){return Mt(xu,this)||Mt(wu,this).recordFullPageBBox(Mt(_u,this)),this}getSimpleIndex(e){return Mt(wu,this).getSimpleIndex(e)}recordDependencies(e,t){return Mt(wu,this).recordDependencies(Mt(_u,this),t),this}recordNamedDependency(e,t){return Mt(wu,this).recordNamedDependency(Mt(_u,this),t),this}recordOperation(e){return Mt(wu,this).recordOperation(Mt(_u,this),!0),this}recordShowTextOperation(e){return Mt(wu,this).recordShowTextOperation(Mt(_u,this),!0),this}bboxToClipBoxDropOperation(e){return Mt(xu,this)||Mt(wu,this).bboxToClipBoxDropOperation(Mt(_u,this),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Eu=["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],Cu=["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],Tu=["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],Mu=["filter","fillColor","fillAlpha"],Pu=["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],Ru=["transform"],Ou=["transform","fillColor"],Nu="Fill",Iu="Stroke",Du="Shading";function ju(e,t){if(!t)return;const n=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],n,i),e.clip(r)}class Lu{isModifyingCurrentTransform(){return!1}getPattern(){Wn("Abstract method `getPattern` called.")}}class Fu extends Lu{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let r;if(i===Iu||i===Nu){const s=t.current.getClippedPathBoundingBox(i,Ci(e))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,o=Math.ceil(s[3]-s[1])||1,l=t.cachedCanvases.getCanvas("pattern",a,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),n=ni.transform(n,[1,0,0,1,s[0],s[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),ju(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=e.createPattern(l.canvas,"no-repeat");const u=new DOMMatrix(n);r.setTransform(u)}else ju(e,this._bbox),r=this._createGradient(e);return r}}function Bu(e,t,n,i,r,s,a,o){const l=t.coords,c=t.colors,u=e.data,h=4*e.width;let d;l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=s,s=a,a=d),l[i+1]>l[r+1]&&(d=i,i=r,r=d,d=a,a=o,o=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=s,s=a,a=d);const p=(l[n]+t.offsetX)*t.scaleX,f=(l[n+1]+t.offsetY)*t.scaleY,g=(l[i]+t.offsetX)*t.scaleX,m=(l[i+1]+t.offsetY)*t.scaleY,v=(l[r]+t.offsetX)*t.scaleX,b=(l[r+1]+t.offsetY)*t.scaleY;if(f>=b)return;const y=c[s],w=c[s+1],_=c[s+2],x=c[a],k=c[a+1],S=c[a+2],A=c[o],E=c[o+1],C=c[o+2],T=Math.round(f),M=Math.round(b);let P,R,O,N,I,D,j,L;for(let F=T;F<=M;F++){if(F<m){const e=F<f?0:(f-F)/(f-m);P=p-(p-g)*e,R=y-(y-x)*e,O=w-(w-k)*e,N=_-(_-S)*e}else{let e;e=F>b?1:m===b?0:(m-F)/(m-b),P=g-(g-v)*e,R=x-(x-A)*e,O=k-(k-E)*e,N=S-(S-C)*e}let e;e=F<f?0:F>b?1:(f-F)/(f-b),I=p-(p-v)*e,D=y-(y-A)*e,j=w-(w-E)*e,L=_-(_-C)*e;const t=Math.round(Math.min(P,I)),n=Math.round(Math.max(P,I));let i=h*F+4*t;for(let r=t;r<=n;r++)e=(P-r)/(P-I),e<0?e=0:e>1&&(e=1),u[i++]=R-(R-D)*e|0,u[i++]=O-(O-j)*e|0,u[i++]=N-(N-L)*e|0,u[i++]=255}}function Wu(e,t,n){const i=t.coords,r=t.colors;let s,a;switch(t.type){case fn:const o=t.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(s=0;s<l;s++){let t=s*o;for(let s=0;s<c;s++,t++)Bu(e,n,i[t],i[t+1],i[t+o],r[t],r[t+1],r[t+o]),Bu(e,n,i[t+o+1],i[t+1],i[t+o],r[t+o+1],r[t+1],r[t+o])}break;case pn:for(s=0,a=i.length;s<a;s+=3)Bu(e,n,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class Uu extends Lu{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const i=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-i,a=Math.ceil(this._bounds[3])-r,o=Math.min(Math.ceil(Math.abs(s*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*e[1]*1.1)),3e3),c=s/o,u=a/l,h={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-r,scaleX:1/c,scaleY:1/u},d=o+4,p=l+4,f=n.getCanvas("mesh",d,p),g=f.context,m=g.createImageData(o,l);if(t){const e=m.data;for(let n=0,i=e.length;n<i;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)Wu(m,v,h);g.putImageData(m,2,2);return{canvas:f.canvas,offsetX:i-2*c,offsetY:r-2*u,scaleX:c,scaleY:u}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){ju(e,this._bbox);const r=new Float32Array(2);if(i===Du)ni.singularValueDecompose2dScale(Ci(e),r);else if(this.matrix){ni.singularValueDecompose2dScale(this.matrix,r);const[e,n]=r;ni.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=e,r[1]*=n}else ni.singularValueDecompose2dScale(t.baseTransform,r);const s=this._createMeshCanvas(r,i===Du?null:this._background,t.cachedCanvases);return i!==Du&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class zu extends Lu{getPattern(){return"hotpink"}}const Hu=1,Vu=2;class qu{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,t){var n,i;const{bbox:r,operatorList:s,paintType:a,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),Fn("TilingType: "+o);const d=r[0],p=r[1],f=r[2],g=r[3],m=f-d,v=g-p,b=new Float32Array(2);ni.singularValueDecompose2dScale(this.matrix,b);const[y,w]=b;ni.singularValueDecompose2dScale(this.baseTransform,b);const _=y*b[0],x=w*b[1];let k=m,S=v,A=!1,E=!1;const C=Math.ceil(u*_),T=Math.ceil(h*x);C>=Math.ceil(m*_)?k=u:A=!0,T>=Math.ceil(v*x)?S=h:E=!0;const M=this.getSizeAndScale(k,this.ctx.canvas.width,_),P=this.getSizeAndScale(S,this.ctx.canvas.height,x),R=e.cachedCanvases.getCanvas("pattern",M.size,P.size),O=R.context,N=c.createCanvasGraphics(O,t);if(N.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(N,a,l),O.translate(-M.scale*d,-P.scale*p),N.transform(0,M.scale,0,0,P.scale,0,0),O.save(),null===(n=N.dependencyTracker)||void 0===n||n.save(),this.clipBbox(N,d,p,f,g),N.baseTransform=Ci(N.ctx),N.executeOperatorList(s),N.endDrawing(),null===(i=N.dependencyTracker)||void 0===i||i.restore(),O.restore(),A||E){const t=R.canvas;A&&(k=u),E&&(S=h);const n=this.getSizeAndScale(k,this.ctx.canvas.width,_),i=this.getSizeAndScale(S,this.ctx.canvas.height,x),r=n.size,s=i.size,a=e.cachedCanvases.getCanvas("pattern-workaround",r,s),o=a.context,l=A?Math.floor(m/u):0,c=E?Math.floor(v/h):0;for(let e=0;e<=l;e++)for(let n=0;n<=c;n++)o.drawImage(t,r*e,s*n,r,s,0,0,r,s);return{canvas:a.canvas,scaleX:n.scale,scaleY:i.scale,offsetX:d,offsetY:p}}return{canvas:R.canvas,scaleX:M.scale,scaleY:P.scale,offsetX:d,offsetY:p}}getSizeAndScale(e,t,n){const i=Math.max(qu.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=i?r=i:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,i,r){const s=i-t,a=r-n;e.ctx.rect(t,n,s,a),ni.axialAlignedBoundingBox([t,n,i,r],Ci(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,r=e.current;switch(t){case Hu:const{fillStyle:e,strokeStyle:s}=this.ctx;i.fillStyle=r.fillColor=e,i.strokeStyle=r.strokeColor=s;break;case Vu:i.fillStyle=i.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new Jn("Unsupported paint type: ".concat(t))}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i,r){let s=n;i!==Du&&(s=ni.transform(s,t.baseTransform),this.matrix&&(s=ni.transform(s,this.matrix)));const a=this.createPatternCanvas(t,r);let o=new DOMMatrix(s);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}}function Gu(e){let{src:t,srcPos:n=0,dest:i,width:r,height:s,nonBlackColor:a=4294967295,inverseDecode:o=!1}=e;const l=ei.isLittleEndian?4278190080:255,[c,u]=o?[a,l]:[l,a],h=r>>3,d=7&r,p=t.length;i=new Uint32Array(i.buffer);let f=0;for(let g=0;g<s;g++){for(const r=n+h;n<r;n++){const e=n<p?t[n]:255;i[f++]=128&e?u:c,i[f++]=64&e?u:c,i[f++]=32&e?u:c,i[f++]=16&e?u:c,i[f++]=8&e?u:c,i[f++]=4&e?u:c,i[f++]=2&e?u:c,i[f++]=1&e?u:c}if(0===d)continue;const e=n<p?t[n++]:255;for(let t=0;t<d;t++)i[f++]=e&1<<7-t?u:c}return{srcPos:n,destPos:f}}(0,Yt.A)(qu,"MAX_PATTERN_SIZE",3e3);const Ku=16,Xu=new DOMMatrix,Yu=new Float32Array(2),Ju=new Float32Array([1/0,1/0,-1/0,-1/0]);class Qu{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function $u(e,t,n,i,r,s,a,o,l,c){const[u,h,d,p,f,g]=Ci(e);if(0===h&&0===d){const m=a*u+f,v=Math.round(m),b=o*p+g,y=Math.round(b),w=(a+l)*u+f,_=Math.abs(Math.round(w)-v)||1,x=(o+c)*p+g,k=Math.abs(Math.round(x)-y)||1;return e.setTransform(Math.sign(u),0,0,Math.sign(p),v,y),e.drawImage(t,n,i,r,s,0,0,_,k),e.setTransform(u,h,d,p,f,g),[_,k]}if(0===u&&0===p){const m=o*d+f,v=Math.round(m),b=a*h+g,y=Math.round(b),w=(o+c)*d+f,_=Math.abs(Math.round(w)-v)||1,x=(a+l)*h+g,k=Math.abs(Math.round(x)-y)||1;return e.setTransform(0,Math.sign(h),Math.sign(d),0,v,y),e.drawImage(t,n,i,r,s,0,0,k,_),e.setTransform(u,h,d,p,f,g),[k,_]}e.drawImage(t,n,i,r,s,a,o,l,c);return[Math.hypot(u,h)*l,Math.hypot(d,p)*c]}class Zu{constructor(e,t,n){(0,Yt.A)(this,"alphaIsShape",!1),(0,Yt.A)(this,"fontSize",0),(0,Yt.A)(this,"fontSizeScale",1),(0,Yt.A)(this,"textMatrix",null),(0,Yt.A)(this,"textMatrixScale",1),(0,Yt.A)(this,"fontMatrix",$t),(0,Yt.A)(this,"leading",0),(0,Yt.A)(this,"x",0),(0,Yt.A)(this,"y",0),(0,Yt.A)(this,"lineX",0),(0,Yt.A)(this,"lineY",0),(0,Yt.A)(this,"charSpacing",0),(0,Yt.A)(this,"wordSpacing",0),(0,Yt.A)(this,"textHScale",1),(0,Yt.A)(this,"textRenderingMode",gn),(0,Yt.A)(this,"textRise",0),(0,Yt.A)(this,"fillColor","#000000"),(0,Yt.A)(this,"strokeColor","#000000"),(0,Yt.A)(this,"patternFill",!1),(0,Yt.A)(this,"patternStroke",!1),(0,Yt.A)(this,"fillAlpha",1),(0,Yt.A)(this,"strokeAlpha",1),(0,Yt.A)(this,"lineWidth",1),(0,Yt.A)(this,"activeSMask",null),(0,Yt.A)(this,"transferMaps","none"),null===n||void 0===n||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Ju.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nu,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.minMax.slice();if(e===Iu){t||Wn("Stroke bounding box must include transform."),ni.singularValueDecompose2dScale(t,Yu);const e=Yu[0]*this.lineWidth/2,i=Yu[1]*this.lineWidth/2;n[0]-=e,n[1]-=i,n[2]+=e,n[3]+=i}return n}updateClipFromPath(){const e=ni.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Ju,0)}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nu,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return ni.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function eh(e,t){if(t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,i=t.width,r=n%Ku,s=(n-r)/Ku,a=0===r?s:s+1,o=e.createImageData(i,Ku);let l,c=0;const u=t.data,h=o.data;let d,p,f,g;if(t.kind===_n.GRAYSCALE_1BPP){const t=u.byteLength,n=new Uint32Array(h.buffer,0,h.byteLength>>2),g=n.length,m=i+7>>3,v=4294967295,b=ei.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(f=d<s?Ku:r,l=0,p=0;p<f;p++){const e=t-c;let r=0;const s=e>m?i:8*e-7,a=-8&s;let o=0,h=0;for(;r<a;r+=8)h=u[c++],n[l++]=128&h?v:b,n[l++]=64&h?v:b,n[l++]=32&h?v:b,n[l++]=16&h?v:b,n[l++]=8&h?v:b,n[l++]=4&h?v:b,n[l++]=2&h?v:b,n[l++]=1&h?v:b;for(;r<s;r++)0===o&&(h=u[c++],o=128),n[l++]=h&o?v:b,o>>=1}for(;l<g;)n[l++]=0;e.putImageData(o,0,d*Ku)}}else if(t.kind===_n.RGBA_32BPP){for(p=0,g=i*Ku*4,d=0;d<s;d++)h.set(u.subarray(c,c+g)),c+=g,e.putImageData(o,0,p),p+=Ku;d<a&&(g=i*r*4,h.set(u.subarray(c,c+g)),e.putImageData(o,0,p))}else{if(t.kind!==_n.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(f=Ku,g=i*f,d=0;d<a;d++){for(d>=s&&(f=r,g=i*f),l=0,p=g;p--;)h[l++]=u[c++],h[l++]=u[c++],h[l++]=u[c++],h[l++]=255;e.putImageData(o,0,d*Ku)}}}function th(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,i=t.width,r=n%Ku,s=(n-r)/Ku,a=0===r?s:s+1,o=e.createImageData(i,Ku);let l=0;const c=t.data,u=o.data;for(let h=0;h<a;h++){const t=h<s?Ku:r;({srcPos:l}=Gu({src:c,srcPos:l,dest:u,width:i,height:t,nonBlackColor:0})),e.putImageData(o,0,h*Ku)}}function nh(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==e[i]&&(t[i]=e[i]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function ih(e){e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0);const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}function rh(e,t){if(t)return!0;ni.singularValueDecompose2dScale(e,Yu);const n=Math.fround(Pi.pixelRatio*fi.PDF_TO_CSS_UNITS);return Yu[0]<=n&&Yu[1]<=n}const sh=["butt","round","square"],ah=["miter","round","bevel"],oh={},lh={};var ch=new WeakSet;class uh{constructor(e,t,n,i,r,s,a,o,l){let{optionalContentConfig:c,markedContentStack:u=null}=s;At(this,ch),this.ctx=e,this.current=new Zu(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new Qu(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=null!==l&&void 0!==l?l:null}getObject(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var i;return"string"===typeof t?(null===(i=this.dependencyTracker)||void 0===i||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing(e){let{transform:t,viewport:n,transparency:i=!1,background:r=null}=e;const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const e=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...Ci(this.compositeCtx))}this.ctx.save(),ih(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Ci(this.ctx)}executeOperatorList(e,t,n,i,r){const s=e.argsArray,a=e.fnArray;let o=t||0;const l=s.length;if(l===o)return o;const c=l-o>10&&"function"===typeof n,u=c?Date.now()+15:0;let h=0;const d=this.commonObjs,p=this.objs;let f,g;for(;;){if(void 0!==i&&o===i.nextBreakPoint)return i.breakIt(o,n),o;var m;if(!r||r(o))if(f=a[o],g=null!==(m=s[o])&&void 0!==m?m:null,f!==Mn.dependency)null===g?this[f](o):this[f](o,...g);else for(const e of g){var v;null===(v=this.dependencyTracker)||void 0===v||v.recordNamedData(e,o);const t=e.startsWith("g_")?d:p;if(!t.has(e))return t.get(e,n),o}if(o++,o===l)return o;if(c&&++h>10){if(Date.now()>u)return n(),o;h=0}}}endDrawing(){Ct(ch,this,hh).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),Ct(ch,this,dh).call(this)}_scaleImage(e,t){var n,i;const r=null!==(n=e.width)&&void 0!==n?n:e.displayWidth,s=null!==(i=e.height)&&void 0!==i?i:e.displayHeight;let a,o,l=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),u=r,h=s,d="prescale1";for(;l>2&&u>1||c>2&&h>1;){let t=u,n=h;l>2&&u>1&&(t=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/t),c>2&&h>1&&(n=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/n),a=this.cachedCanvases.getCanvas(d,t,n),o=a.context,o.clearRect(0,0,t,n),o.drawImage(e,0,0,u,h,0,0,t,n),e=a.canvas,u=t,h=n,d="prescale1"===d?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:h}}_createMaskCanvas(e,t){var n;const i=this.ctx,{width:r,height:s}=t,a=this.current.fillColor,o=this.current.patternFill,l=Ci(i);let c,u,h,d;if((t.bitmap||t.data)&&t.count>1){const n=t.bitmap||t.data.buffer;u=JSON.stringify(o?l:[l.slice(0,4),a]),c=this._cachedBitmapsMap.get(n),c||(c=new Map,this._cachedBitmapsMap.set(n,c));const i=c.get(u);if(i&&!o){var p;const t=Math.round(Math.min(l[0],l[2])+l[4]),n=Math.round(Math.min(l[1],l[3])+l[5]);return null===(p=this.dependencyTracker)||void 0===p||p.recordDependencies(e,Ou),{canvas:i,offsetX:t,offsetY:n}}h=i}h||(d=this.cachedCanvases.getCanvas("maskCanvas",r,s),th(d.context,t));let f=ni.transform(l,[1/r,0,0,-1/s,0,0]);f=ni.transform(f,[1,0,0,1,0,-s]);const g=Ju.slice();ni.axialAlignedBoundingBox([0,0,r,s],f,g);const[m,v,b,y]=g,w=Math.round(b-m)||1,_=Math.round(y-v)||1,x=this.cachedCanvases.getCanvas("fillCanvas",w,_),k=x.context,S=m,A=v;k.translate(-S,-A),k.transform(...f),h||(h=this._scaleImage(d.canvas,Ti(k)),h=h.img,c&&o&&c.set(u,h)),k.imageSmoothingEnabled=rh(Ci(k),t.interpolate),$u(k,h,0,0,h.width,h.height,0,0,r,s),k.globalCompositeOperation="source-in";const E=ni.transform(Ti(k),[1,0,0,1,-S,-A]);return k.fillStyle=o?a.getPattern(i,this,E,Nu,e):a,k.fillRect(0,0,r,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,x.canvas)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,Ou),{canvas:x.canvas,offsetX:Math.round(S),offsetY:Math.round(A)}}setLineWidth(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineCap",e),this.ctx.lineCap=sh[t]}setLineJoin(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=ah[t]}setMiterLimit(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("dash",e);const r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(t),r.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,i,r,s,a;for(const[o,l]of t)switch(o){case"LW":this.setLineWidth(e,l);break;case"LC":this.setLineCap(e,l);break;case"LJ":this.setLineJoin(e,l);break;case"ML":this.setMiterLimit(e,l);break;case"D":this.setDash(e,l[0],l[1]);break;case"RI":this.setRenderingIntent(e,l);break;case"FL":this.setFlatness(e,l);break;case"Font":this.setFont(e,l[0],l[1]);break;case"CA":null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=l;break;case"ca":null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=l;break;case"BM":null===(r=this.dependencyTracker)||void 0===r||r.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=l;break;case"SMask":null===(s=this.dependencyTracker)||void 0===s||s.recordSimpleData("SMask",e),this.current.activeSMask=l?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":null===(a=this.dependencyTracker)||void 0===a||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(l)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const s=this.ctx=r.context;s.setTransform(this.suspendedCtx.getTransform()),nh(this.suspendedCtx,s),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,i,r,s,a){t.transform(e,n,i,r,s,a),this.__originalTransform(e,n,i,r,s,a)},e.setTransform=function(e,n,i,r,s,a){t.setTransform(e,n,i,r,s,a),this.__originalSetTransform(e,n,i,r,s,a)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,i,r,s,a){t.bezierCurveTo(e,n,i,r,s,a),this.__originalBezierCurveTo(e,n,i,r,s,a)},e.rect=function(e,n,i,r){t.rect(e,n,i,r),this.__originalRect(e,n,i,r)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),nh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const r=i[0],s=i[1],a=i[2]-r,o=i[3]-s;0!==a&&0!==o&&(this.genericComposeSMask(t.context,n,a,o,t.subtype,t.backdrop,t.transferMap,r,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,r,s,a,o,l,c,u){let h=e.canvas,d=o-c,p=l-u;if(s)if(d<0||p<0||d+n>h.width||p+i>h.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,i),t=e.context;t.drawImage(h,-d,-p),t.globalCompositeOperation="destination-atop",t.fillStyle=s,t.fillRect(0,0,n,i),t.globalCompositeOperation="source-over",h=e.canvas,d=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(d,p,n,i),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(d,p,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===r&&a?t.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===r&&(t.filter=this.filterFactory.addLuminosityFilter(a));const f=new Path2D;f.rect(o,l,n,i),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(h,d,p,n,i,o,l,n,i),t.restore()}save(e){var t;this.inSMaskMode&&nh(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),null===(t=this.dependencyTracker)||void 0===t||t.save(e)}restore(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.restore(e),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&nh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(e,t,n,i,r,s,a){var o;null===(o=this.dependencyTracker)||void 0===o||o.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,r,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[r]=n;if(!i)return r||(r=n[0]=new Path2D),void this[t](e,r);if(null!==this.dependencyTracker){const n=t===Mn.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-n,i[2]+n,i[1]-n,i[3]+n).recordDependencies(e,["transform"])}r instanceof Path2D||(r=n[0]=Bi(r)),ni.axialAlignedBoundingBox(i,Ci(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t){var n;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===typeof s&&null!==s&&void 0!==s&&s.getPattern){const n=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,Ti(r),Iu,e),n){const e=new Path2D;e.addPath(t,r.getTransform().invertSelf().multiplySelf(n)),t=e}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,Eu),i&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Iu,Ci(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t){var n;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.ctx,s=this.current.fillColor;let a=!1;if(this.current.patternFill){var o;const n=s.isModifyingCurrentTransform()?r.getTransform():null;if(null===(o=this.dependencyTracker)||void 0===o||o.save(e),r.save(),r.fillStyle=s.getPattern(r,this,Ti(r),Nu,e),n){const e=new Path2D;e.addPath(t,r.getTransform().invertSelf().multiplySelf(n)),t=e}a=!0}const l=this.current.getClippedPathBoundingBox();var c;(this.contentVisible&&null!==l&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,Cu),a)&&(r.restore(),null===(c=this.dependencyTracker)||void 0===c||c.restore(e));i&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,Mu).recordOperation(e)}clip(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=oh}eoClip(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=lh}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,null===(t=this.dependencyTracker)||void 0===t||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:n}=this;void 0!==t&&n.recordFutureForcedDependency("textClip",n.getOpenMarker()).recordFutureForcedDependency("textClip",e),n.recordCloseMarker(e)}if(void 0!==t){const e=new Path2D,i=n.getTransform().invertSelf();for(const{transform:n,x:r,y:s,fontSize:a,path:o}of t)o&&e.addPath(o,new DOMMatrix(n).preMultiplySelf(i).translate(r,s).scale(a,-a));n.clip(e)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var i,r;null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),a=this.current;if(!s)throw new Error("Can't find font for ".concat(t));if(a.fontMatrix=s.fontMatrix||$t,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||Bn("Invalid font matrix for font "+t),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const o=s.loadedName||"sans-serif",l=(null===(r=s.systemFontInfo)||void 0===r?void 0:r.css)||'"'.concat(o,'", ').concat(s.fallbackName);let c="normal";s.black?c="900":s.bold&&(c="bold");const u=s.italic?"italic":"normal";let h=n;n<16?h=16:n>100&&(h=100),this.current.fontSizeScale=n/h,this.ctx.font="".concat(u," ").concat(c," ").concat(h,"px ").concat(l)}setTextRenderingMode(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:i}=this;i.textMatrix=t,i.textMatrixScale=Math.hypot(t[0],t[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(e){var t,n;this.moveText(e,0,this.current.leading),null===(t=this.dependencyTracker)||void 0===t||t.recordIncrementalData("moveText",null!==(n=this.dependencyTracker.getSimpleIndex("leading"))&&void 0!==n?n:e)}paintChar(e,t,n,i,r,s){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&yn,d=!!(c&wn),p=o.patternFill&&!l.missingFile,f=o.patternStroke&&!l.missingFile;let g;if((l.disableFontFace||d||p||f)&&!l.missingFile&&(g=l.getPathGenerator(this.commonObjs,t)),g&&(l.disableFontFace||p||f)){var m;let t;if(a.save(),a.translate(n,i),a.scale(u,-u),null===(m=this.dependencyTracker)||void 0===m||m.recordCharacterBBox(e,a,l),h===gn||h===vn)if(r){t=a.getTransform(),a.setTransform(...r);const e=Ct(ch,this,ph).call(this,g,t,r);a.fill(e)}else a.fill(g);if(h===mn||h===vn)if(s){t||(t=a.getTransform()),a.setTransform(...s);const{a:e,b:n,c:i,d:r}=t,o=ni.inverseTransform(s),l=ni.transform([e,n,i,r,0,0],o);ni.singularValueDecompose2dScale(l,Yu),a.lineWidth*=Math.max(Yu[0],Yu[1])/u,a.stroke(Ct(ch,this,ph).call(this,g,t,s))}else a.lineWidth/=u,a.stroke(g);a.restore()}else{var v;if(h===gn||h===vn)a.fillText(t,n,i),null===(v=this.dependencyTracker)||void 0===v||v.recordCharacterBBox(e,a,l,u,n,i,()=>a.measureText(t));if(h===mn||h===vn){var b;if(this.dependencyTracker)null===(b=this.dependencyTracker)||void 0===b||b.recordCharacterBBox(e,a,l,u,n,i,()=>a.measureText(t)).recordDependencies(e,Eu);a.strokeText(t,n,i)}}if(d){var y;(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ci(a),x:n,y:i,fontSize:u,path:g}),null===(y=this.dependencyTracker)||void 0===y||y.recordCharacterBBox(e,a,l,u,n,i)}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Vn(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var n;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Pu).resetBBox(e),this.current.textRenderingMode&wn&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;var s;if(r.isType3Font)return this.showType3Text(e,t),void(null===(s=this.dependencyTracker)||void 0===s||s.recordShowTextOperation(e));const a=i.fontSize;var o;if(0===a)return void(null===(o=this.dependencyTracker)||void 0===o||o.recordOperation(e));const l=this.ctx,c=i.fontSizeScale,u=i.charSpacing,h=i.wordSpacing,d=i.fontDirection,p=i.textHScale*d,f=t.length,g=r.vertical,m=g?1:-1,v=r.defaultVMetrics,b=a*i.fontMatrix[0],y=i.textRenderingMode===gn&&!r.disableFontFace&&!i.patternFill;let w,_;if(l.save(),i.textMatrix&&l.transform(...i.textMatrix),l.translate(i.x,i.y+i.textRise),d>0?l.scale(p,-1):l.scale(p,1),i.patternFill){l.save();const t=i.fillColor.getPattern(l,this,Ti(l),Nu,e);w=Ci(l),l.restore(),l.fillStyle=t}if(i.patternStroke){l.save();const t=i.strokeColor.getPattern(l,this,Ti(l),Iu,e);_=Ci(l),l.restore(),l.strokeStyle=t}let x=i.lineWidth;const k=i.textMatrixScale;if(0===k||0===x){const e=i.textRenderingMode&yn;e!==mn&&e!==vn||(x=this.getSinglePixelWidth())}else x/=k;if(1!==c&&(l.scale(c,c),x/=c),l.lineWidth=x,r.isInvalidPDFjsFont){const n=[];let r=0;for(const e of t)n.push(e.unicode),r+=e.width;const s=n.join("");if(l.fillText(s,0,0),null!==this.dependencyTracker){const t=l.measureText(s);this.dependencyTracker.recordBBox(e,this.ctx,-t.actualBoundingBoxLeft,t.actualBoundingBoxRight,-t.actualBoundingBoxAscent,t.actualBoundingBoxDescent).recordShowTextOperation(e)}return i.x+=r*b*p,l.restore(),void this.compose()}let S,A=0;for(S=0;S<f;++S){const n=t[S];if("number"===typeof n){A+=m*n*a/1e3;continue}let i=!1;const s=(n.isSpace?h:0)+u,o=n.fontChar,p=n.accent;let f,x,k,C=n.width;if(g){const e=n.vmetric||v,t=-(n.vmetric?e[1]:.5*C)*b,i=e[2]*b;C=e?-e[0]:C,f=t/c,x=(A+i)/c}else f=A/c,x=0;if(r.remeasure&&C>0){k=l.measureText(o);const e=1e3*k.width/a*c;if(C<e&&this.isFontSubpixelAAEnabled){const t=C/e;i=!0,l.save(),l.scale(t,1),f/=t}else C!==e&&(f+=(C-e)/2e3*a/c)}var E;if(this.contentVisible&&(n.isInFont||r.missingFile))if(y&&!p)l.fillText(o,f,x),null===(E=this.dependencyTracker)||void 0===E||E.recordCharacterBBox(e,l,k?{bbox:null}:r,a/c,f,x,()=>null!==k&&void 0!==k?k:l.measureText(o));else if(this.paintChar(e,o,f,x,w,_),p){const t=f+a*p.offset.x/c,n=x-a*p.offset.y/c;this.paintChar(e,p.fontChar,t,n,w,_)}A+=g?C*b-s*d:C*b+s*d,i&&l.restore()}g?i.y-=A:i.x+=A*p,l.restore(),this.compose(),null===(n=this.dependencyTracker)||void 0===n||n.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,i=this.current,r=i.font,s=i.fontSize,a=i.fontDirection,o=r.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,u=i.textHScale*a,h=i.fontMatrix||$t,d=t.length;let p,f,g,m;if(i.textRenderingMode===bn||0===s)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(u,a);const v=this.dependencyTracker;for(this.dependencyTracker=v?new Au(v,e):null,p=0;p<d;++p){if(f=t[p],"number"===typeof f){m=o*f*s/1e3,this.ctx.translate(m,0),i.x+=m*u;continue}const e=(f.isSpace?c:0)+l,a=r.charProcOperatorList[f.operatorListId];a?this.contentVisible&&(this.save(),n.scale(s,s),n.transform(...h),this.executeOperatorList(a),this.restore()):Bn('Type3 character "'.concat(f.operatorListId,'" is not available.'));const d=[f.width,0];ni.applyTransform(d,h),g=d[0]*s+e,n.translate(g,0),i.x+=g*u}n.restore(),v&&(this.dependencyTracker=v)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,r,s,a){var o;const l=new Path2D;l.rect(i,r,s-i,a-r),this.ctx.clip(l),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(e,this.ctx,i,s,r,a).recordClipBox(e,this.ctx,i,s,r,a),this.endPath(e)}getColorN_Pattern(e,t){let n;if("TilingPattern"===t[0]){const e=this.baseTransform||Ci(this.ctx),i={createCanvasGraphics:(e,t)=>new uh(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Au(this.dependencyTracker,t,!0):null)};n=new qu(t,this.ctx,i,e)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("strokeColor",e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.current.strokeColor=this.getColorN_Pattern(e,i),this.current.patternStroke=!0}setFillColorN(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("fillColor",e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.current.fillColor=this.getColorN_Pattern(e,i),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=function(e){switch(e[0]){case"RadialAxial":return new Fu(e);case"Mesh":return new Uu(e);case"Dummy":return new zu}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e,t)),this.cachedPatterns.set(t,n)),i&&(n.matrix=i),n}shadingFill(e,t){var n;if(!this.contentVisible)return;const i=this.ctx;this.save(e);const r=this._getPattern(e,t);i.fillStyle=r.getPattern(i,this,Ti(i),Du,e);const s=Ti(i);if(s){const{width:e,height:t}=i.canvas,n=Ju.slice();ni.axialAlignedBoundingBox([0,0,e,t],s,n);const[r,a,o,l]=n;this.ctx.fillRect(r,a,o-r,l-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Ru).recordDependencies(e,Cu).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Wn("Should not call beginInlineImage")}beginImageData(){Wn("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Ci(this.ctx),n)){var i;ni.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[t,r,s,a]=n,o=new Path2D;o.rect(t,r,s-t,a-r),this.ctx.clip(o),null===(i=this.dependencyTracker)||void 0===i||i.recordClipBox(e,this.ctx,t,s,r,a),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var n;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||Fn("TODO: Support non-isolated groups."),t.knockout&&Bn("Knockout groups not supported.");const r=Ci(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=Ju.slice();ni.axialAlignedBoundingBox(t.bbox,Ci(i),s);const a=[0,0,i.canvas.width,i.canvas.height];s=ni.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),u=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),p=d.context;p.translate(-o,-l),p.transform(...r);let f=new Path2D;const[g,m,v,b]=t.bbox;if(f.rect(g,m,v-g,b-m),t.matrix){const e=new Path2D;e.addPath(f,new DOMMatrix(t.matrix)),f=e}p.clip(f),t.smask&&this.smaskStack.push({canvas:d.canvas,context:p,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),t.smask&&!this.dependencyTracker||(i.setTransform(1,0,0,1,0,0),i.translate(o,l),i.save()),nh(i,p),this.ctx=p,null===(n=this.dependencyTracker)||void 0===n||n.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(e,t){var n;if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,null===(n=this.dependencyTracker)||void 0===n||n.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const t=Ci(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...t);const n=Ju.slice();ni.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],t,n),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,i,r,s){if(Ct(ch,this,hh).call(this),ih(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const r=n[2]-n[0],a=n[3]-n[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=n[0],i[5]-=n[1],(n=n.slice())[0]=n[1]=0,n[2]=r,n[3]=a,ni.singularValueDecompose2dScale(Ci(this.ctx),Yu);const{viewportScale:e}=this,s=Math.ceil(r*this.outputScaleX*e),o=Math.ceil(a*this.outputScaleY*e);this.annotationCanvas=this.canvasFactory.create(s,o);const{canvas:l,context:c}=this.annotationCanvas;this.annotationCanvasMap.set(t,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(Yu[0],0,0,-Yu[1],0,a*Yu[1]),ih(this.ctx)}else{ih(this.ctx),this.endPath(e);const t=new Path2D;t.rect(n[0],n[1],r,a),this.ctx.clip(t)}}this.current=new Zu(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),Ct(ch,this,dh).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var n;if(!this.contentVisible)return;const i=t.count;(t=this.getObject(e,t.data,t)).count=i;const r=this.ctx,s=this._createMaskCanvas(e,t),a=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,s.offsetX,s.offsetY),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n){var i,r;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const u=Ci(c);c.transform(n,s,a,o,0,0);const h=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),null===(i=this.dependencyTracker)||void 0===i||i.resetBBox(e);for(let p=0,f=l.length;p<f;p+=2){var d;const t=ni.transform(u,[n,s,a,o,l[p],l[p+1]]);c.drawImage(h.canvas,t[4],t[5]),null===(d=this.dependencyTracker)||void 0===d||d.recordBBox(e,this.ctx,t[4],t[4]+h.canvas.width,t[5],t[5]+h.canvas.height)}c.restore(),this.compose(),null===(r=this.dependencyTracker)||void 0===r||r.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var n,i;if(!this.contentVisible)return;const r=this.ctx,s=this.current.fillColor,a=this.current.patternFill;null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordDependencies(e,Ou);for(const l of t){var o;const{data:t,width:n,height:i,transform:c}=l,u=this.cachedCanvases.getCanvas("maskCanvas",n,i),h=u.context;h.save();th(h,this.getObject(e,t,l)),h.globalCompositeOperation="source-in",h.fillStyle=a?s.getPattern(h,this,Ti(r),Nu,e):s,h.fillRect(0,0,n,i),h.restore(),r.save(),r.transform(...c),r.scale(1,-1),$u(r,u.canvas,0,0,n,i,0,-1,1,1),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(e,r,0,n,0,i),r.restore()}this.compose(),null===(i=this.dependencyTracker)||void 0===i||i.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);n?this.paintInlineImageXObject(e,n):Bn("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i,r){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s)return void Bn("Dependent image isn't ready yet");const a=s.width,o=s.height,l=[];for(let c=0,u=r.length;c<u;c+=2)l.push({transform:[n,0,0,i,r[c],r[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(e,s,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,i),s=r.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",r.canvas}paintInlineImageXObject(e,t){var n;if(!this.contentVisible)return;const i=t.width,r=t.height,s=this.ctx;this.save(e);const{filter:a}=s;let o;if("none"!==a&&""!==a&&(s.filter="none"),s.scale(1/i,-1/r),t.bitmap)o=this.applyTransferMapsToBitmap(t);else if("function"===typeof HTMLElement&&t instanceof HTMLElement||!t.data)o=t;else{const e=this.cachedCanvases.getCanvas("inlineImage",i,r).context;eh(e,t),o=this.applyTransferMapsToCanvas(e)}const l=this._scaleImage(o,Ti(s));s.imageSmoothingEnabled=rh(Ci(s),t.interpolate),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordBBox(e,s,0,i,-r,0).recordDependencies(e,Tu).recordOperation(e),$u(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-r,i,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var i,r;if(!this.contentVisible)return;const s=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const e=t.width,n=t.height,i=this.cachedCanvases.getCanvas("inlineImage",e,n).context;eh(i,t),a=this.applyTransferMapsToCanvas(i)}null===(i=this.dependencyTracker)||void 0===i||i.resetBBox(e);for(const l of n){var o;s.save(),s.transform(...l.transform),s.scale(1,-1),$u(s,a,l.x,l.y,l.w,l.h,0,-1,1,1),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(e,s,0,1,-1,0),s.restore()}null===(r=this.dependencyTracker)||void 0===r||r.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&(null===(t=this.dependencyTracker)||void 0===t||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Cu).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.beginMarkedContent(e),"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;var s,a;this.pendingClip?(i||(this.pendingClip===lh?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,null===(s=this.dependencyTracker)||void 0===s||s.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):null===(a=this.dependencyTracker)||void 0===a||a.recordOperation(e);this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ci(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:r}=this.ctx.getTransform();let s,a;if(0===n&&0===i){const n=Math.abs(t),i=Math.abs(r);if(n===i)if(0===e)s=a=1/n;else{const t=n*e;s=a=t<1?1/t:1}else if(0===e)s=1/n,a=1/i;else{const t=n*e,r=i*e;s=t<1?1/t:1,a=r<1?1/r:1}}else{const o=Math.abs(t*r-n*i),l=Math.hypot(t,n),c=Math.hypot(i,r);if(0===e)s=c/o,a=l/o;else{const t=e*o;s=c>t?c/t:1,a=l>t?l/t:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[r,s]=this.getScaleForStroking();if(r===s)return n.lineWidth=(i||1)*r,void n.stroke(e);const a=n.getLineDash();t&&n.save(),n.scale(r,s),Xu.a=1/r,Xu.d=1/s;const o=new Path2D;if(o.addPath(e,Xu),a.length>0){const e=Math.max(r,s);n.setLineDash(a.map(t=>t/e)),n.lineDashOffset/=e}n.lineWidth=i||1,n.stroke(o),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function hh(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function dh(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function ph(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i}for(const N_ in Mn)void 0!==uh.prototype[N_]&&(uh.prototype[Mn[N_]]=uh.prototype[N_]);class fh{static get workerPort(){return Ct(fh,this,gh)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");gh._=Ct(fh,this,e)}static get workerSrc(){return Ct(fh,this,mh)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");mh._=Ct(fh,this,e)}}var gh={_:null},mh={_:""},vh=new WeakMap,bh=new WeakMap;class yh{constructor(e){let{parsedData:t,rawData:n}=e;Et(this,vh,void 0),Et(this,bh,void 0),Pt(vh,this,t),Pt(bh,this,n)}getRaw(){return Mt(bh,this)}get(e){var t;return null!==(t=Mt(vh,this).get(e))&&void 0!==t?t:null}[Symbol.iterator](){return Mt(vh,this).entries()}}const wh=Symbol("INTERNAL");var _h=new WeakMap,xh=new WeakMap,kh=new WeakMap,Sh=new WeakMap;class Ah{constructor(e,t){let{name:n,intent:i,usage:r,rbGroups:s}=t;Et(this,_h,!1),Et(this,xh,!1),Et(this,kh,!1),Et(this,Sh,!0),Pt(_h,this,!!(e&tn)),Pt(xh,this,!!(e&nn)),this.name=n,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(Mt(kh,this))return Mt(Sh,this);if(!Mt(Sh,this))return!1;const{print:e,view:t}=this.usage;return Mt(_h,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!Mt(xh,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==wh&&Wn("Internal method `_setVisible` called."),Pt(kh,this,n),Pt(Sh,this,t)}}var Eh=new WeakMap,Ch=new WeakMap,Th=new WeakMap,Mh=new WeakMap,Ph=new WeakSet;class Rh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tn;if(At(this,Ph),Et(this,Eh,null),Et(this,Ch,new Map),Et(this,Th,null),Et(this,Mh,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,Pt(Mh,this,e.order);for(const n of e.groups)Mt(Ch,this).set(n.id,new Ah(t,n));if("OFF"===e.baseState)for(const e of Mt(Ch,this).values())e._setVisible(wh,!1);for(const t of e.on)Mt(Ch,this).get(t)._setVisible(wh,!0);for(const t of e.off)Mt(Ch,this).get(t)._setVisible(wh,!1);Pt(Th,this,this.getHash())}}isVisible(e){if(0===Mt(Ch,this).size)return!0;if(!e)return Fn("Optional content group not defined."),!0;if("OCG"===e.type)return Mt(Ch,this).has(e.id)?Mt(Ch,this).get(e.id).visible:(Bn("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return Ct(Ph,this,Oh).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!Mt(Ch,this).has(t))return Bn("Optional content group not found: ".concat(t)),!0;if(Mt(Ch,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!Mt(Ch,this).has(t))return Bn("Optional content group not found: ".concat(t)),!0;if(!Mt(Ch,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!Mt(Ch,this).has(t))return Bn("Optional content group not found: ".concat(t)),!0;if(!Mt(Ch,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!Mt(Ch,this).has(t))return Bn("Optional content group not found: ".concat(t)),!0;if(Mt(Ch,this).get(t).visible)return!1}return!0}return Bn("Unknown optional content policy ".concat(e.policy,".")),!0}return Bn("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=Mt(Ch,this).get(e);if(i){if(n&&t&&i.rbGroups.length)for(const t of i.rbGroups)for(const n of t){var r;if(n!==e)null===(r=Mt(Ch,this).get(n))||void 0===r||r._setVisible(wh,!1,!0)}i._setVisible(wh,!!t,!0),Pt(Eh,this,null)}else Bn("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:i}=e;for(const r of n){switch(r){case"ON":case"OFF":case"Toggle":t=r;continue}const e=Mt(Ch,this).get(r);if(e)switch(t){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!e.visible,i)}}Pt(Eh,this,null)}get hasInitialVisibility(){return null===Mt(Th,this)||this.getHash()===Mt(Th,this)}getOrder(){return Mt(Ch,this).size?Mt(Mh,this)?Mt(Mh,this).slice():[...Mt(Ch,this).keys()]:null}getGroup(e){return Mt(Ch,this).get(e)||null}getHash(){if(null!==Mt(Eh,this))return Mt(Eh,this);const e=new zo;for(const[t,n]of Mt(Ch,this))e.update("".concat(t,":").concat(n.visible));return Pt(Eh,this,e.hexdigest())}[Symbol.iterator](){return Mt(Ch,this).entries()}}function Oh(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let r;if(Array.isArray(t))r=Ct(Ph,this,Oh).call(this,t);else{if(!Mt(Ch,this).has(t))return Bn("Optional content group not found: ".concat(t)),!0;r=Mt(Ch,this).get(t).visible}switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===n}class Nh{constructor(e,t){let{disableRange:n=!1,disableStream:i=!1}=t;Un(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===s||void 0===s?void 0:s.length)>0){const e=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{Un(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,i,r;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(r=i.onProgress)||void 0===r||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Un(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Ih(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Dh(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class Ih{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=yi(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Dh{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function jh(e,t){const n=new Headers;if(!e||!t||"object"!==typeof t)return n;for(const i in t){const e=t[i];void 0!==e&&n.append(i,e)}return n}function Lh(e){var t,n;return null!==(t=null===(n=URL.parse(e))||void 0===n?void 0:n.origin)&&void 0!==t?t:null}function Fh(e){let{responseHeaders:t,isHttp:n,rangeChunkSize:i,disableRange:r}=e;const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);if(!Number.isInteger(a))return s;if(s.suggestedLength=a,a<=2*i)return s;if(r||!n)return s;if("bytes"!==t.get("Accept-Ranges"))return s;return"identity"!==(t.get("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s}function Bh(e){const t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=a(n);return e=unescape(e),e=o(e),e=l(e),s(e)}if(n=function(e){const t=[];let n;const r=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=r.exec(e));){let[,e,i,r]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[i,r]}const s=[];for(let i=0;i<t.length&&i in t;++i){let[e,n]=t[i];n=a(n),e&&(n=unescape(n),0===i&&(n=o(n))),s.push(n)}return s.join("")}(e),n)return s(l(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=a(n);return e=l(e),s(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function r(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),r=Zn(n);n=i.decode(r),t=!1}catch(i){}}return n}function s(e){return t&&/[\x80-\xff]/.test(e)&&(e=r("utf-8",e),t&&(e=r("iso-8859-1",e))),e}function a(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:r(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,i){if("q"===n||"Q"===n)return r(t,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{i=atob(i)}catch(s){}return r(t,i)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if(yi(e))return e}return null}function Wh(e,t){return new Yn("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e,404===e||0===e&&t.startsWith("file:"))}function Uh(e){return 200===e||206===e}function zh(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Hh(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(Bn("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class Vh{constructor(e){(0,Yt.A)(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=jh(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return Un(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new qh(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Gh(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class qh{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,zh(n,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=Lh(t.url),!Uh(t.status))throw Wh(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const n=t.headers,{allowRangeRequests:r,suggestedLength:s}=Fh({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=s||this._contentLength,this._filename=Bh(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Qn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Hh(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class Gh{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range","bytes=".concat(t,"-").concat(n-1));const s=i.url;fetch(s,zh(r,this._withCredentials,this._abortController)).then(t=>{const n=Lh(t.url);if(n!==e._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(e._responseOrigin,'".'));if(!Uh(t.status))throw Wh(t.status,s);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:Hh(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class Kh{constructor(e){let{url:t,httpHeaders:n,withCredentials:i}=e;(0,Yt.A)(this,"_responseOrigin",null),this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=jh(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,s]of this.headers)t.setRequestHeader(r,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),i.expectedStatus=206):i.expectedStatus=200,t.responseType="arraybuffer",Un(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const i=this.pendingRequests[e];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void n.onError(i.status);const r=i.status||200;if(!(200===r&&206===n.expectedStatus)&&r!==n.expectedStatus)return void n.onError(i.status);const s=function(e){const t=e.response;return"string"!==typeof t?t:Zn(t).buffer}(i);if(206===r){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?n.onDone({begin:parseInt(t[1],10),chunk:s}):(Bn('Missing or invalid "Content-Range" header.'),n.onError(0))}else s?n.onDone({begin:0,chunk:s}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Xh{constructor(e){this._source=e,this._manager=new Kh(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Un(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Yh(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new Jh(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Yh{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Lh(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{const[t,...n]=e.split(": ");return[t,n.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:s}=Fh({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=Bh(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Wh(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Jh{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Lh(null===(e=this._manager.getRequestXhr(this._requestId))||void 0===e?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){var t;null!==(t=this._storedError)&&void 0!==t||(this._storedError=Wh(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Qh=/^[a-z][a-z0-9\-+.]+:/i;class $h{constructor(e){this.source=e,this.url=function(e){if(Qh.test(e))return new URL(e);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(e))}(e.url),Un("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return Un(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Zh(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new ed(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Zh{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=Wh(0,this._url.href)),this._storedError=e,this._headersCapability.reject(e)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Qn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ed{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const td=Symbol("INITIAL_DATA");var nd=new WeakMap,id=new WeakSet;class rd{constructor(){At(this,id),Et(this,nd,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=Ct(id,this,sd).call(this,e);return n.promise.then(()=>t(n.data)),null}const n=Mt(nd,this)[e];if(!n||n.data===td)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=Mt(nd,this)[e];return!!t&&t.data!==td}delete(e){const t=Mt(nd,this)[e];return!(!t||t.data===td)&&(delete Mt(nd,this)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Ct(id,this,sd).call(this,e);n.data=t,n.resolve()}clear(){for(const t in Mt(nd,this)){var e;const{data:n}=Mt(nd,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}Pt(nd,this,Object.create(null))}*[Symbol.iterator](){for(const e in Mt(nd,this)){const{data:t}=Mt(nd,this)[e];t!==td&&(yield[e,t])}}}function sd(e){var t;return(t=Mt(nd,this))[e]||(t[e]=(0,a.A)((0,a.A)({},Promise.withResolvers()),{},{data:td}))}var ad=new WeakMap,od=new WeakMap,ld=new WeakMap,cd=new WeakMap,ud=new WeakMap,hd=new WeakMap,dd=new WeakMap,pd=new WeakMap,fd=new WeakMap,gd=new WeakMap,md=new WeakMap,vd=new WeakMap,bd=new WeakMap,yd=new WeakMap,wd=new WeakMap,_d=new WeakMap,xd=new WeakMap,kd=new WeakMap,Sd=new WeakSet;class Ad{constructor(e){var t;let{textContentSource:n,container:i,viewport:r}=e;if(At(this,Sd),Et(this,ad,Promise.withResolvers()),Et(this,od,null),Et(this,ld,!1),Et(this,cd,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),Et(this,ud,null),Et(this,hd,null),Et(this,dd,0),Et(this,pd,0),Et(this,fd,null),Et(this,gd,null),Et(this,md,0),Et(this,vd,0),Et(this,bd,Object.create(null)),Et(this,yd,[]),Et(this,wd,null),Et(this,_d,[]),Et(this,xd,new WeakMap),Et(this,kd,null),n instanceof ReadableStream)Pt(wd,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');Pt(wd,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}Pt(od,this,Pt(gd,this,i)),Pt(vd,this,r.scale*Pi.pixelRatio),Pt(md,this,r.rotation),Pt(hd,this,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:o,pageY:l}=r.rawDims;Pt(kd,this,[1,0,0,-1,-o,l+a]),Pt(pd,this,s),Pt(dd,this,a),Rd.call(Ad),Mi(i,r),Mt(ad,this).promise.finally(()=>{Ld._.delete(this),Pt(hd,this,null),Pt(bd,this,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=ei.platform;return Vn(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){const e=()=>{Mt(fd,this).read().then(t=>{var n;let{value:i,done:r}=t;r?Mt(ad,this).resolve():(null!==(n=Mt(ud,this))&&void 0!==n||Pt(ud,this,i.lang),Object.assign(Mt(bd,this),i.styles),Ct(Sd,this,Ed).call(this,i.items),e())},Mt(ad,this).reject)};return Pt(fd,this,Mt(wd,this).getReader()),Ld._.add(this),e(),Mt(ad,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const i=t.scale*Pi.pixelRatio,r=t.rotation;if(r!==Mt(md,this)&&(null===n||void 0===n||n(),Pt(md,this,r),Mi(Mt(gd,this),{rotation:r})),i!==Mt(vd,this)){null===n||void 0===n||n(),Pt(vd,this,i);const e={div:null,properties:null,ctx:Md.call(Ad,Mt(ud,this))};for(const t of Mt(_d,this))e.properties=Mt(xd,this).get(t),e.div=t,Ct(Sd,this,Td).call(this,e)}}cancel(){var e;const t=new Qn("TextLayer task cancelled.");null===(e=Mt(fd,this))||void 0===e||e.cancel(t).catch(()=>{}),Pt(fd,this,null),Mt(ad,this).reject(t)}get textDivs(){return Mt(_d,this)}get textContentItemsStr(){return Mt(yd,this)}static cleanup(){if(!(Ct(Ad,this,Ld)._.size>0)){Ct(Ad,this,Nd)._.clear();for(const{canvas:e}of Ct(Ad,this,Id)._.values())e.remove();Ct(Ad,this,Id)._.clear()}}}function Ed(e){var t,n;if(Mt(ld,this))return;null!==(n=(t=Mt(hd,this)).ctx)&&void 0!==n||(t.ctx=Md.call(Bt,Mt(ud,this)));const i=Mt(_d,this),r=Mt(yd,this);for(const s of e){if(i.length>1e5)return Bn("Ignoring additional textDivs for performance reasons."),void Pt(ld,this,!0);if(void 0!==s.str)r.push(s.str),Ct(Sd,this,Cd).call(this,s);else if("beginMarkedContentProps"===s.type||"beginMarkedContent"===s.type){const e=Mt(od,this);Pt(od,this,document.createElement("span")),Mt(od,this).classList.add("markedContent"),s.id&&Mt(od,this).setAttribute("id","".concat(s.id)),e.append(Mt(od,this))}else"endMarkedContent"===s.type&&Pt(od,this,Mt(od,this).parentNode)}}function Cd(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};Mt(_d,this).push(t);const i=ni.transform(Mt(kd,this),e.transform);let r=Math.atan2(i[1],i[0]);const s=Mt(bd,this)[e.fontName];s.vertical&&(r+=Math.PI/2);let a=Mt(cd,this)&&s.fontSubstitution||s.fontFamily;a=Bt.fontFamilyMap.get(a)||a;const o=Math.hypot(i[2],i[3]),l=o*Od.call(Bt,a,s,Mt(ud,this));let c,u;0===r?(c=i[4],u=i[5]-l):(c=i[4]+l*Math.sin(r),u=i[5]-l*Math.cos(r));const h="calc(var(--total-scale-factor) *",d=t.style;Mt(od,this)===Mt(gd,this)?(d.left="".concat((100*c/Mt(pd,this)).toFixed(2),"%"),d.top="".concat((100*u/Mt(dd,this)).toFixed(2),"%")):(d.left="".concat(h).concat(c.toFixed(2),"px)"),d.top="".concat(h).concat(u.toFixed(2),"px)")),d.fontSize="".concat(h).concat((jd._*o).toFixed(2),"px)"),d.fontFamily=a,n.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,Mt(cd,this)&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),0!==r&&(n.angle=r*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(p=!0)}if(p&&(n.canvasWidth=s.vertical?e.height:e.width),Mt(xd,this).set(t,n),Mt(hd,this).div=t,Mt(hd,this).properties=n,Ct(Sd,this,Td).call(this,Mt(hd,this)),n.hasText&&Mt(od,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),Mt(od,this).append(e)}}function Td(e){const{div:t,properties:n,ctx:i}=e,{style:r}=t;let s="";if(jd._>1&&(s="scale(".concat(1/jd._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:e}=r,{canvasWidth:a,fontSize:o}=n;Pd.call(Bt,i,o*Mt(vd,this),e);const{width:l}=i.measureText(t.textContent);l>0&&(s="scaleX(".concat(a*Mt(vd,this)/l,") ").concat(s))}0!==n.angle&&(s="rotate(".concat(n.angle,"deg) ").concat(s)),s.length>0&&(r.transform=s)}function Md(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Ct(Bt,this,Id)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),Ct(Bt,this,Id)._.set(e,t),Ct(Bt,this,Dd)._.set(t,{size:0,family:""})}return t}function Pd(e,t,n){const i=Ct(Bt,this,Dd)._.get(e);t===i.size&&n===i.family||(e.font="".concat(t,"px ").concat(n),i.size=t,i.family=n)}function Rd(){if(null!==Ct(Bt,this,jd)._)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),jd._=Ct(Bt,this,e.getBoundingClientRect().height),e.remove()}function Od(e,t,n){const i=Ct(Bt,this,Nd)._.get(e);if(i)return i;const r=Ct(Bt,this,Md).call(this,n);r.canvas.width=r.canvas.height=30,Ct(Bt,this,Pd).call(this,r,30,e);const s=r.measureText(""),a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let l=.8;return a?l=a/(a+o):(ei.platform.isFirefox&&Bn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?l=t.ascent:t.descent&&(l=1+t.descent)),Ct(Bt,this,Nd)._.set(e,l),l}Bt=Ad;var Nd={_:new Map},Id={_:new Map},Dd={_:new WeakMap},jd={_:null},Ld={_:new Set};function Fd(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const i=new Bd,{docId:r}=i,s=n.url?function(e){if(e instanceof URL)return e.href;if("string"===typeof e){if(Qt)return e;const t=URL.parse(e,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,a=n.data?function(e){if(Qt&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return Zn(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,l=!0===n.withCredentials,c=null!==(e=n.password)&&void 0!==e?e:null,u=n.range instanceof Gd?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let d=n.worker instanceof ip?n.worker:null;const p=n.verbosity,f="string"!==typeof n.docBaseUrl||bi(n.docBaseUrl)?null:n.docBaseUrl,g=Ll(n.cMapUrl),m=!1!==n.cMapPacked,v=n.CMapReaderFactory||(Qt?zc:dc),b=Ll(n.iccUrl),y=Ll(n.standardFontDataUrl),w=n.StandardFontDataFactory||(Qt?Hc:jc),_=Ll(n.wasmUrl),x=n.WasmFactory||(Qt?Vc:Fc),k=!0!==n.stopAtErrors,S=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,A=!1!==n.isEvalSupported,E="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!Qt,C="boolean"===typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!Qt&&(ei.platform.isFirefox||!globalThis.chrome),T=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,M="boolean"===typeof n.disableFontFace?n.disableFontFace:Qt,P=!0===n.fontExtraProperties,R=!0===n.enableXfa,O=n.ownerDocument||globalThis.document,N=!0===n.disableRange,I=!0===n.disableStream,D=!0===n.disableAutoFetch,j=!0===n.pdfBug,L=n.CanvasFactory||(Qt?Uc:uc),F=n.FilterFactory||(Qt?Wc:xc),B=!0===n.enableHWA,W=!1!==n.useWasm,U=u?u.length:null!==(t=n.length)&&void 0!==t?t:NaN,z="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!Qt&&!M,H="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===dc&&w===jc&&x===Fc&&g&&y&&_&&_i(g,document.baseURI)&&_i(y,document.baseURI)&&_i(_,document.baseURI));jn(p);const V={canvasFactory:new L({ownerDocument:O,enableHWA:B}),filterFactory:new F({docId:r,ownerDocument:O}),cMapReaderFactory:H?null:new v({baseUrl:g,isCompressed:m}),standardFontDataFactory:H?null:new w({baseUrl:y}),wasmFactory:H?null:new x({baseUrl:_})};d||(d=ip.create({verbosity:p,port:fh.workerPort}),i._worker=d);const q={docId:r,apiVersion:"5.4.449",data:a,password:c,disableAutoFetch:D,rangeChunkSize:h,length:U,docBaseUrl:f,enableXfa:R,evaluatorOptions:{maxImageSize:S,disableFontFace:M,ignoreErrors:k,isEvalSupported:A,isOffscreenCanvasSupported:E,isImageDecoderSupported:C,canvasMaxAreaInBytes:T,fontExtraProperties:P,useSystemFonts:z,useWasm:W,useWorkerFetch:H,cMapUrl:g,iccUrl:b,standardFontDataUrl:y,wasmUrl:_}},G={ownerDocument:O,pdfBug:j,styleElement:null,loadingParams:{disableAutoFetch:D,enableXfa:R}};return d.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const e=d.messageHandler.sendWithPromise("GetDocRequest",q,a?[a.buffer]:null);let t;if(u)t=new Nh(u,{disableRange:N,disableStream:I});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const e=_i(s)?Vh:Qt?$h:Xh;t=new e({url:s,length:U,httpHeaders:o,withCredentials:l,rangeChunkSize:h,disableRange:N,disableStream:I})}return e.then(e=>{if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const n=new ic(r,e,d.port),s=new bp(n,i,t,G,V,B);i._transport=s,n.send("Ready",null)})}).catch(i._capability.reject),i}class Bd{constructor(){(0,Yt.A)(this,"_capability",Promise.withResolvers()),(0,Yt.A)(this,"_transport",null),(0,Yt.A)(this,"_worker",null),(0,Yt.A)(this,"docId","d".concat((Wd._=(Wt=Wd._,Ut=Wt++,Wt),Ut))),(0,Yt.A)(this,"destroyed",!1),(0,Yt.A)(this,"onPassword",null),(0,Yt.A)(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0;try{var t,n;null!==(t=this._worker)&&void 0!==t&&t.port&&(this._worker._pendingDestroy=!0),await(null===(n=this._transport)||void 0===n?void 0:n.destroy())}catch(r){var i;throw null!==(i=this._worker)&&void 0!==i&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,null===(e=this._worker)||void 0===e||e.destroy(),this._worker=null}async getData(){return this._transport.getData()}}var Wd={_:0},Ud=new WeakMap,zd=new WeakMap,Hd=new WeakMap,Vd=new WeakMap,qd=new WeakMap;class Gd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Et(this,Ud,Promise.withResolvers()),Et(this,zd,[]),Et(this,Hd,[]),Et(this,Vd,[]),Et(this,qd,[]),this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){Mt(qd,this).push(e)}addProgressListener(e){Mt(Vd,this).push(e)}addProgressiveReadListener(e){Mt(Hd,this).push(e)}addProgressiveDoneListener(e){Mt(zd,this).push(e)}onDataRange(e,t){for(const n of Mt(qd,this))n(e,t)}onDataProgress(e,t){Mt(Ud,this).promise.then(()=>{for(const n of Mt(Vd,this))n(e,t)})}onDataProgressiveRead(e){Mt(Ud,this).promise.then(()=>{for(const t of Mt(Hd,this))t(e)})}onDataProgressiveDone(){Mt(Ud,this).promise.then(()=>{for(const e of Mt(zd,this))e()})}transportReady(){Mt(Ud,this).resolve()}requestDataRange(e,t){Wn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Kd{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Vn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Xd=new WeakMap,Yd=new WeakSet;class Jd{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];At(this,Yd),Et(this,Xd,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new wi:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new rd,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new mi({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Vn(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n,i;let{canvasContext:r,canvas:s=r.canvas,viewport:a,intent:o="display",annotationMode:l=cn.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:f=null,isEditing:g=!1,recordOperations:m=!1,operationsFilter:v=null}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const b=this._transport.getRenderingIntent(o,l,f,g),{renderingIntent:y,cacheKey:w}=b;Pt(Xd,this,!1),h||(h=this._transport.getOptionalContentConfig(y));let _=this._intentStates.get(w);_||(_=Object.create(null),this._intentStates.set(w,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const x=!!(y&nn);var k;_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(k=this._stats)||void 0===k||k.time("Page Request"),this._pumpOperatorList(b));const S=Boolean(this._pdfBug&&(null===(n=globalThis.StepperManager)||void 0===n?void 0:n.enabled)),A=!this.recordedBBoxes&&(m||S),E=e=>{if(_.renderTasks.delete(C),A){var t;const e=null===(t=C.gfx)||void 0===t?void 0:t.dependencyTracker.take();e&&(C.stepper&&C.stepper.setOperatorBBoxes(e,C.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=e))}var n;(x&&Pt(Xd,this,!0),Ct(Yd,this,Qd).call(this),e?(C.capability.reject(e),this._abortOperatorList({intentState:_,reason:e instanceof Error?e:new Error(e)})):C.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(n=globalThis.Stats)&&void 0!==n&&n.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new kp({callback:E,params:{canvas:s,canvasContext:r,dependencyTracker:A?new bu(s,_.operatorList.length,S):null,viewport:a,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:v});((i=_).renderTasks||(i.renderTasks=new Set)).add(C);const T=C.task;return Promise.all([_.displayReadyCapability.promise,h]).then(e=>{var t;let[n,i]=e;if(this.destroyed)E();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(i.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:n,optionalContentConfig:i}),C.operatorListChanged()}}).catch(E),T}getOperatorList(){let{intent:e="display",annotationMode:t=cn.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this._transport.getRenderingIntent(e,t,n,i,!0);let s,a=this._intentStates.get(r.cacheKey);var o,l;(a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a)),a.opListReadCapability)||(s=Object.create(null),s.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(s))},a.opListReadCapability=Promise.withResolvers(),((o=a).renderTasks||(o.renderTasks=new Set)).add(s),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(r));return a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>hi.textContent(e));const t=this.streamTextContent(e);return new Promise(function(e,n){const i=t.getReader(),r={items:[],styles:Object.create(null),lang:null};!function t(){i.read().then(function(n){var i;let{value:s,done:a}=n;a?e(r):(null!==(i=r.lang)&&void 0!==i||(r.lang=s.lang),Object.assign(r.styles,s.styles),r.items.push(...s.items),t())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),Pt(Xd,this,!1),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Pt(Xd,this,!0);const t=Ct(Yd,this,Qd).call(this);return e&&t&&this._stats&&(this._stats=new wi),t}_startRenderPage(e,t){var n,i;const r=this._intentStates.get(t);r&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=r.displayReadyCapability)||void 0===i||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&Ct(Yd,this,Qd).call(this)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:i,modifiedIds:r}=e;const{map:s,transfer:a}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:s,modifiedIds:r},a).getReader(),l=this._intentStates.get(n);l.streamReader=o;const c=()=>{o.read().then(e=>{let{value:t,done:n}=e;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,l),c())},e=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const e of l.renderTasks)e.operatorListChanged();Ct(Yd,this,Qd).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(e);else{if(!l.opListReadCapability)throw e;l.opListReadCapability.reject(e)}}})};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:i=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(n instanceof vi){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},e))}}if(t.streamReader.cancel(new Qn(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function Qd(){if(!Mt(Xd,this)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Pt(Xd,this,!1),!0}var $d=new WeakMap,Zd=new WeakMap,ep=new WeakMap,tp=new WeakMap,np=new WeakSet;class ip{constructor(){let{name:e=null,port:t=null,verbosity:n=Ln()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(At(this,np),Et(this,$d,Promise.withResolvers()),Et(this,Zd,null),Et(this,ep,null),Et(this,tp,null),this.name=e,this.destroyed=!1,this.verbosity=n,t){if(hp._.has(t))throw new Error("Cannot use more than one PDFWorker per port.");hp._.set(t,this),Ct(np,this,sp).call(this,t)}else Ct(np,this,ap).call(this)}get promise(){return Mt($d,this).promise}get port(){return Mt(ep,this)}get messageHandler(){return Mt(Zd,this)}destroy(){var e,t;this.destroyed=!0,null===(e=Mt(tp,this))||void 0===e||e.terminate(),Pt(tp,this,null),hp._.delete(Mt(ep,this)),Pt(ep,this,null),null===(t=Mt(Zd,this))||void 0===t||t.destroy(),Pt(Zd,this,null)}static create(e){const t=Ct(ip,this,hp)._.get(null===e||void 0===e?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ip(e)}static get workerSrc(){if(fh.workerSrc)return fh.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Vn(this,"_setupFakeWorkerGlobal",(async()=>{if(Tt(ip,this,lp))return Tt(ip,this,lp);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function rp(){Mt($d,this).resolve(),Mt(Zd,this).send("configure",{verbosity:this.verbosity})}function sp(e){Pt(ep,this,e),Pt(Zd,this,new ic("main","worker",e)),Mt(Zd,this).on("ready",()=>{}),Ct(np,this,rp).call(this)}function ap(){if(up._||lp(zt))return void Ct(np,this,op).call(this);let{workerSrc:e}=zt;try{zt._isSameOrigin(window.location,e)||(e=zt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new ic("main","worker",t),i=()=>{r.abort(),n.destroy(),t.terminate(),this.destroyed?Mt($d,this).reject(new Error("Worker was destroyed")):Ct(np,this,op).call(this)},r=new AbortController;t.addEventListener("error",()=>{Mt(tp,this)||i()},{signal:r.signal}),n.on("test",e=>{r.abort(),!this.destroyed&&e?(Pt(Zd,this,n),Pt(ep,this,t),Pt(tp,this,t),Ct(np,this,rp).call(this)):i()}),n.on("ready",e=>{if(r.abort(),this.destroyed)i();else try{s()}catch(t){Ct(np,this,op).call(this)}});const s=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void s()}catch(t){Fn("The worker has been disabled.")}Ct(np,this,op).call(this)}function op(){up._||(Bn("Setting up fake worker."),up._=!0),zt._setupFakeWorkerGlobal.then(e=>{var t,n;if(this.destroyed)return void Mt($d,this).reject(new Error("Worker was destroyed"));const i=new zl;Pt(ep,this,i);const r="fake".concat((cp._=(t=cp._,n=t++,t),n)),s=new ic(r+"_worker",r,i);e.setup(s,i),Pt(Zd,this,new ic(r,r+"_worker",i)),Ct(np,this,rp).call(this)}).catch(e=>{Mt($d,this).reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}function lp(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(n){return null}}zt=ip;var cp={_:0},up={_:!1},hp={_:new WeakMap};Qt&&(up._=Ct(zt,zt,!0),fh.workerSrc||(fh.workerSrc="./pdf.worker.mjs")),zt._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(null===n||void 0===n||!n.origin||"null"===n.origin)return!1;const i=new URL(t,n);return n.origin===i.origin},zt._createCDNWrapper=e=>{const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},zt.fromPort=e=>{var t;if(t="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+t),null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return zt.create(e)};var dp=new WeakMap,pp=new WeakMap,fp=new WeakMap,gp=new WeakMap,mp=new WeakMap,vp=new WeakSet;class bp{constructor(e,t,n,i,r,s){At(this,vp),Et(this,dp,new Map),Et(this,pp,new Map),Et(this,fp,new Map),Et(this,gp,new Map),Et(this,mp,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new rd,this.fontLoader=new el({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return Vn(this,"annotationStorage",new Yo)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cn.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=tn,a=Ho;switch(e){case"any":s=en;break;case"display":break;case"print":s=nn;break;default:Bn("getRenderingIntent - invalid intent: ".concat(e))}const o=s&nn&&n instanceof $o?n:this.annotationStorage;switch(t){case cn.DISABLE:s+=an;break;case cn.ENABLE:break;case cn.ENABLE_FORMS:s+=rn;break;case cn.ENABLE_STORAGE:s+=sn,a=o.serializable;break;default:Bn("getRenderingIntent - invalid annotationMode: ".concat(t))}i&&(s+=on),r&&(s+=ln);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:s,cacheKey:[s,a.hash,c].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=Mt(mp,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of Mt(pp,this).values())t.push(i._destroy());Mt(pp,this).clear(),Mt(fp,this).clear(),Mt(gp,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),Mt(dp,this).clear(),this.filterFactory.destroy(),Ad.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new Qn("Worker was terminated.")),null===(t=this.messageHandler)||void 0===t||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{Un(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:n,done:i}=e;i?t.close():(Un(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:r}=this._fullReader;if(!n||!i){var s;if(this._lastProgress)null===(s=t.onProgress)||void 0===s||s.call(t,this._lastProgress);this._fullReader.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:n,isRangeSupported:i,contentLength:r}}),e.on("GetRangeReader",(e,t)=>{Un(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then(function(e){let{value:n,done:i}=e;i?t.close():(Un(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}):t.close()}),e.on("GetDoc",e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new Kd(n,this))}),e.on("DocException",e=>{t._capability.reject(ec(e))}),e.on("PasswordRequest",e=>{Pt(mp,this,Promise.withResolvers());try{if(!t.onPassword)throw ec(e);const n=e=>{e instanceof Error?Mt(mp,this).reject(e):Mt(mp,this).resolve({password:e})};t.onPassword(n,e.code)}catch(n){Mt(mp,this).reject(n)}return Mt(mp,this).promise}),e.on("DataLoaded",e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{if(this.destroyed)return;Mt(pp,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{var n;let[i,r,s]=t;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in s){const e=s.error;Bn("Error during font loading: ".concat(e)),this.commonObjs.resolve(i,e);break}const t=new yl(s),a=this._params.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,o=new nl(t,a,s.extra,s.charProcOperatorList);this.fontLoader.bind(o).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!o.fontExtraProperties&&o.data&&o.clearData(),this.commonObjs.resolve(i,o)});break;case"CopyLocalImage":const{imageRef:l}=s;Un(l,"The imageRef must be defined.");for(const e of Mt(pp,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===l)return t.dataLen?(this.commonObjs.resolve(i,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(i,s);break;case"Pattern":const c=new Tl(s);this.commonObjs.resolve(i,c.getIR());break;default:throw new Error("Got unknown common object type ".concat(r))}return null}),e.on("obj",e=>{let[t,n,i,r]=e;if(this.destroyed)return;const s=Mt(pp,this).get(n);var a;if(!s.objs.has(t))if(0!==s._intentStates.size)switch(i){case"Image":case"Pattern":s.objs.resolve(t,r);break;default:throw new Error("Got unknown object type ".concat(i))}else null===r||void 0===r||null===(a=r.bitmap)||void 0===a||a.close()}),e.on("DocProgress",e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBinaryData",async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");const t=this[e.type];if(!t)throw new Error("".concat(e.type," not initialized, see the `useWorkerFetch` parameter."));return t.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&Bn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},i).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=Mt(fp,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&Mt(gp,this).set(n.refStr,e);const i=new Jd(t,n,this,this._params.pdfBug);return Mt(pp,this).set(t,i),i});return Mt(fp,this).set(t,i),i}getPageIndex(e){return Fl(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return Ct(vp,this,yp).call(this,"GetFieldObjects")}hasJSActions(){return Ct(vp,this,yp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return Ct(vp,this,yp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return Ct(vp,this,yp).call(this,"GetOptionalContentConfig").then(t=>new Rh(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=Mt(dp,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,n,i,r;return{info:e[0],metadata:e[1]?new yh(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(i=null===(r=this._fullReader)||void 0===r?void 0:r.contentLength)&&void 0!==i?i:null,hasStructTree:e[2]}});return Mt(dp,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of Mt(pp,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),Mt(dp,this).clear(),this.filterFactory.destroy(!0),Ad.cleanup()}}cachedPageNumber(e){var t;if(!Fl(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=Mt(gp,this).get(n))&&void 0!==t?t:null}}function yp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Mt(dp,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return Mt(dp,this).set(e,i),i}var wp=new WeakMap;class _p{constructor(e){Et(this,wp,null),(0,Yt.A)(this,"onContinue",null),(0,Yt.A)(this,"onError",null),Pt(wp,this,e)}get promise(){return Mt(wp,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Mt(wp,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=Mt(wp,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=Mt(wp,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}var xp=new WeakMap;class kp{constructor(e){let{callback:t,params:n,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:p=!1,operationsFilter:f=null}=e;Et(this,xp,null),this.callback=t,this.params=n,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===u&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new _p(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=p,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=f}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,n;let{transparency:i=!1,optionalContentConfig:r}=e;if(this.cancelled)return;if(this._canvas){if(Sp._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Sp._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new uh(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:s,transparency:i,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e,t,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),Mt(xp,this)&&(window.cancelAnimationFrame(Mt(xp,this)),Pt(xp,this,null)),Sp._.delete(this._canvas),i||(i=new vi("Rendering cancelled, page ".concat(this._pageIndex+1),r)),this.callback(i),null===(t=(n=this.task).onError)||void 0===t||t.call(n,i)}operatorListChanged(){var e,t;this.graphicsReady?(null===(e=this.gfx.dependencyTracker)||void 0===e||e.growOperationsCount(this.operatorList.fnArray.length),null===(t=this.stepper)||void 0===t||t.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?Pt(xp,this,window.requestAnimationFrame(()=>{Pt(xp,this,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Sp._.delete(this._canvas),this.callback())))}}var Sp={_:new WeakSet};var Ap=new WeakMap,Ep=new WeakMap,Cp=new WeakMap,Tp=new WeakMap,Mp=new WeakMap,Pp=new WeakMap,Rp=new WeakMap,Op=new WeakMap,Np=new WeakMap,Ip=new WeakMap,Dp=new WeakSet;class jp{static get _keyboardManager(){return Vn(this,"_keyboardManager",new Pr([[["Escape","mac+Escape"],jp.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],jp.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],jp.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],jp.prototype._moveToPrevious],[["Home","mac+Home"],jp.prototype._moveToBeginning],[["End","mac+End"],jp.prototype._moveToEnd]]))}constructor(e){var t,n;let{editor:i=null,uiManager:r=null}=e;At(this,Dp),Et(this,Ap,null),Et(this,Ep,null),Et(this,Cp,void 0),Et(this,Tp,null),Et(this,Mp,!1),Et(this,Pp,!1),Et(this,Rp,null),Et(this,Op,void 0),Et(this,Np,null),Et(this,Ip,null),i?(Pt(Pp,this,!1),Pt(Rp,this,i)):Pt(Pp,this,!0),Pt(Ip,this,(null===i||void 0===i?void 0:i._uiManager)||r),Pt(Op,this,Mt(Ip,this)._eventBus),Pt(Cp,this,(null===i||void 0===i||null===(t=i.color)||void 0===t?void 0:t.toUpperCase())||(null===(n=Mt(Ip,this))||void 0===n?void 0:n.highlightColors.values().next().value)||"#FFFF98"),Hp._||(Hp._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const e=Pt(Ap,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",Mt(Rp,this)&&(e.ariaControls="".concat(Mt(Rp,this).id,"_colorpicker_dropdown"));const t=Mt(Ip,this)._signal;e.addEventListener("click",Ct(Dp,this,Wp).bind(this),{signal:t}),e.addEventListener("keydown",Ct(Dp,this,Bp).bind(this),{signal:t});const n=Pt(Ep,this,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=Mt(Cp,this),e.append(n),e}renderMainDropdown(){const e=Pt(Tp,this,Ct(Dp,this,Lp).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===Mt(Ap,this))return void Ct(Dp,this,Wp).call(this,e);const t=e.target.getAttribute("data-color");t&&Ct(Dp,this,Fp).call(this,t,e)}_moveToNext(e){var t,n;Tt(Dp,this,zp)?e.target!==Mt(Ap,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=Mt(Tp,this).firstElementChild)||void 0===n||n.focus():Ct(Dp,this,Wp).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=Mt(Tp,this))||void 0===t?void 0:t.firstElementChild)&&e.target!==Mt(Ap,this)?(Tt(Dp,this,zp)||Ct(Dp,this,Wp).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):Tt(Dp,this,zp)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;Tt(Dp,this,zp)?null===(t=Mt(Tp,this).firstElementChild)||void 0===t||t.focus():Ct(Dp,this,Wp).call(this,e)}_moveToEnd(e){var t;Tt(Dp,this,zp)?null===(t=Mt(Tp,this).lastElementChild)||void 0===t||t.focus():Ct(Dp,this,Wp).call(this,e)}hideDropdown(){var e,t;null===(e=Mt(Tp,this))||void 0===e||e.classList.add("hidden"),Mt(Ap,this).ariaExpanded="false",null===(t=Mt(Np,this))||void 0===t||t.abort(),Pt(Np,this,null)}_hideDropdownFromKeyboard(){var e;Mt(Pp,this)||(Tt(Dp,this,zp)?(this.hideDropdown(),Mt(Ap,this).focus({preventScroll:!0,focusVisible:Mt(Mp,this)})):null===(e=Mt(Rp,this))||void 0===e||e.unselect())}updateColor(e){if(Mt(Ep,this)&&(Mt(Ep,this).style.backgroundColor=e),!Mt(Tp,this))return;const t=Mt(Ip,this).highlightColors.values();for(const n of Mt(Tp,this).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;null===(e=Mt(Ap,this))||void 0===e||e.remove(),Pt(Ap,this,null),Pt(Ep,this,null),null===(t=Mt(Tp,this))||void 0===t||t.remove(),Pt(Tp,this,null)}}function Lp(){const e=document.createElement("div"),t=Mt(Ip,this)._signal;e.addEventListener("contextmenu",xi,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),Mt(Rp,this)&&(e.id="".concat(Mt(Rp,this).id,"_colorpicker_dropdown"));for(const[n,i]of Mt(Ip,this).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",Hp._[n]);const s=document.createElement("span");r.append(s),s.className="swatch",s.style.backgroundColor=i,r.ariaSelected=i===Mt(Cp,this),r.addEventListener("click",Ct(Dp,this,Fp).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",Ct(Dp,this,Bp).bind(this),{signal:t}),e}function Fp(e,t){t.stopPropagation(),Mt(Op,this).dispatch("switchannotationeditorparams",{source:this,type:dn.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}function Bp(e){Ht._keyboardManager.exec(this,e)}function Wp(e){if(Tt(Dp,this,zp))return void this.hideDropdown();if(Pt(Mp,this,0===e.detail),Mt(Np,this)||(Pt(Np,this,new AbortController),window.addEventListener("pointerdown",Ct(Dp,this,Up).bind(this),{signal:Mt(Ip,this).combinedSignal(Mt(Np,this))})),Mt(Ap,this).ariaExpanded="true",Mt(Tp,this))return void Mt(Tp,this).classList.remove("hidden");const t=Pt(Tp,this,Ct(Dp,this,Lp).call(this));Mt(Ap,this).append(t)}function Up(e){var t;null!==(t=Mt(Tp,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function zp(e){return Mt(Tp,e)&&!Mt(Tp,e).classList.contains("hidden")}Ht=jp;var Hp={_:null},Vp=new WeakMap,qp=new WeakMap,Gp=new WeakMap;class Kp{constructor(e){Et(this,Vp,null),Et(this,qp,null),Et(this,Gp,null),Pt(qp,this,e),Pt(Gp,this,e._uiManager),Xp._||(Xp._=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(Mt(Vp,this))return Mt(Vp,this);const{editorType:e,colorType:t,color:n}=Mt(qp,this),i=Pt(Vp,this,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",Xp._[e]),i.addEventListener("input",()=>{Mt(Gp,this).updateParams(t,i.value)},{signal:Mt(Gp,this)._signal}),i}update(e){Mt(Vp,this)&&(Mt(Vp,this).value=e)}destroy(){var e;null===(e=Mt(Vp,this))||void 0===e||e.remove(),Pt(Vp,this,null)}hideDropdown(){}}var Xp={_:null};function Yp(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function Jp(e){return Math.max(0,Math.min(255,255*e))}class Qp{static CMYK_G(e){let[t,n,i,r]=e;return["G",1-Math.min(1,.3*t+.59*i+.11*n+r)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=Jp(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=Yp(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,i]=e;return["G",.3*t+.59*n+.11*i]}static RGB_rgb(e){return e.map(Jp)}static RGB_HTML(e){return"#".concat(e.map(Yp).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,i,r]=e;return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,n+r)]}static CMYK_rgb(e){let[t,n,i,r]=e;return[Jp(1-Math.min(1,t+r)),Jp(1-Math.min(1,i+r)),Jp(1-Math.min(1,n+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,i]=e;const r=1-t,s=1-n,a=1-i;return["CMYK",r,s,a,Math.min(r,s,a)]}}class $p{create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(e,"px")),i.setAttribute("height","".concat(t,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),i}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Wn("Abstract method `_createSVG` called.")}}class Zp extends $p{_createSVG(e){return document.createElementNS(pi,e)}}const ef=new WeakSet,tf=60*(new Date).getTimezoneOffset()*1e3;class nf{static create(e){switch(e.data.annotationType){case xn.LINK:return new df(e);case xn.TEXT:return new mf(e);case xn.WIDGET:switch(e.data.fieldType){case"Tx":return new bf(e);case"Btn":return e.data.radioButton?new _f(e):e.data.checkBox?new wf(e):new xf(e);case"Ch":return new kf(e);case"Sig":return new yf(e)}return new vf(e);case xn.POPUP:return new Af(e);case xn.FREETEXT:return new fg(e);case xn.LINE:return new mg(e);case xn.SQUARE:return new bg(e);case xn.CIRCLE:return new wg(e);case xn.POLYLINE:return new xg(e);case xn.CARET:return new Sg(e);case xn.INK:return new Tg(e);case xn.POLYGON:return new kg(e);case xn.HIGHLIGHT:return new Pg(e);case xn.UNDERLINE:return new Rg(e);case xn.SQUIGGLY:return new Og(e);case xn.STRIKEOUT:return new Ng(e);case xn.STAMP:return new Ig(e);case xn.FILEATTACHMENT:return new Lg(e);default:return new lf(e)}}}var rf=new WeakMap,sf=new WeakMap,af=new WeakMap,of=new WeakSet;class lf{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};At(this,of),Et(this,rf,null),Et(this,sf,!1),Et(this,af,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(e){let{contentsObj:t,richText:n}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return lf._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var e;const{data:t}=this,n=null===(e=this.annotationStorage)||void 0===e?void 0:e.getEditor(t.id);return n?n.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var e;const t=null===(e=this.annotationStorage)||void 0===e?void 0:e.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:n,inkLists:i,rect:r}=this.data;let s=-1/0,a=-1/0;if((null===n||void 0===n?void 0:n.length)>=8){for(let e=0;e<n.length;e+=8)n[e+1]>a?(a=n[e+1],s=n[e+2]):n[e+1]===a&&(s=Math.max(s,n[e+2]));return[s,a]}if((null===i||void 0===i?void 0:i.length)>=1){for(const e of i)for(let t=0,n=e.length;t<n;t+=2)e[t+1]>a?(a=e[t+1],s=e[t]):e[t+1]===a&&(s=Math.max(s,e[t]));if(s!==1/0)return[s,a]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/n,e[1]=100*(e[1]-s)/i,e}get commentText(){var e,t;const{data:n}=this;return(null===(e=this.annotationStorage.getRawValue("".concat(un).concat(n.id)))||void 0===e||null===(e=e.popup)||void 0===e?void 0:e.contents)||(null===(t=n.contentsObj)||void 0===t?void 0:t.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue("".concat(un).concat(t.id),{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;null===(e=(null===(t=Mt(af,this))||void 0===t?void 0:t.popup)||this.popup)||void 0===e||e.remove(),Pt(af,this,this.popup=null)}updateEdited(e){var t;if(!this.container)return;e.rect&&(Mt(rf,this)||Pt(rf,this,{rect:this.data.rect.slice(0)}));const{rect:n,popup:i}=e;n&&Ct(of,this,cf).call(this,n);let r=(null===(t=Mt(af,this))||void 0===t?void 0:t.popup)||this.popup;!r&&null!==i&&void 0!==i&&i.text&&(this._createPopup(i),r=Mt(af,this).popup),r&&(r.updateEdited(e),null!==i&&void 0!==i&&i.deleted&&(r.remove(),Pt(af,this,null),this.popup=null))}resetEdited(){var e;Mt(rf,this)&&(Ct(of,this,cf).call(this,Mt(rf,this).rect),null===(e=Mt(af,this))||void 0===e||e.popup.resetEdited(),Pt(rf,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof vf||this instanceof df||(r.tabIndex=0);const{style:s}=r;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Af){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,r),r}const{width:a,height:o}=this;if(!e&&t.borderStyle.width>0){s.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--total-scale-factor)) / calc(").concat(n,"px * var(--total-scale-factor))");s.borderRadius=t}else if(this instanceof _f){const e="calc(".concat(a,"px * var(--total-scale-factor)) / calc(").concat(o,"px * var(--total-scale-factor))");s.borderRadius=e}switch(t.borderStyle.style){case kn:s.borderStyle="solid";break;case Sn:s.borderStyle="dashed";break;case An:Bn("Unimplemented border style: beveled");break;case En:Bn("Unimplemented border style: inset");break;case Cn:s.borderBottomStyle="solid"}const i=t.borderColor||null;i?(Pt(sf,this,!0),s.borderColor=ni.makeHexColor(0|i[0],0|i[1],0|i[2])):s.borderWidth=0}const l=ni.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:u,pageX:h,pageY:d}=i.rawDims;s.left="".concat(100*(l[0]-h)/c,"%"),s.top="".concat(100*(l[1]-d)/u,"%");const{rotation:p}=t;return t.hasOwnCanvas||0===p?(s.width="".concat(100*a/c,"%"),s.height="".concat(100*o/u,"%")):this.setRotation(p,r),r}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:s}=this;e%180!==0&&([r,s]=[s,r]),t.style.width="".concat(100*r/n,"%"),t.style.height="".concat(100*s/i,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const i=n.detail[e],r=i[0],s=i.slice(1);n.target.style[t]=Qp["".concat(r,"_HTML")](s),this.annotationStorage.setValue(this.data.id,{[t]:Qp["".concat(r,"_rgb")](s)})};return Vn(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||n[i];null===r||void 0===r||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,r]of Object.entries(t)){const s=n[i];if(s){s({detail:{[i]:r},target:e}),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,r]=this.data.rect.map(e=>Math.fround(e));if(8===e.length){const[s,a,o,l]=e.subarray(2,6);if(i===s&&r===a&&t===o&&n===l)return}const{style:s}=this.container;let a;if(Mt(sf,this)){const{borderColor:e,borderWidth:t}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=i-t,l=r-n,{svgFactory:c}=this,u=c.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0),u.role="none";const h=c.createElement("defs");u.append(h);const d=c.createElement("clipPath"),p="clippath_".concat(this.data.id);d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),h.append(d);for(let g=2,m=e.length;g<m;g+=8){var f;const n=e[g],i=e[g+1],s=e[g+2],u=e[g+3],h=c.createElement("rect"),p=(s-t)/o,m=(r-i)/l,v=(n-s)/o,b=(i-u)/l;h.setAttribute("x",p),h.setAttribute("y",m),h.setAttribute("width",v),h.setAttribute("height",b),d.append(h),null===(f=a)||void 0===f||f.push('<rect vector-effect="non-scaling-stroke" x="'.concat(p,'" y="').concat(m,'" width="').concat(v,'" height="').concat(b,'"/>'))}Mt(sf,this)&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(u),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate),Pt(af,this,new Af({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:"popup_".concat(t.id),rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(Mt(af,this)||this.popup||this.data.popupRef)}get extraPopupElement(){return Mt(af,this)}render(){Wn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:r,exportValues:s}of i){if(-1===e)continue;if(r===t)continue;const i="string"===typeof s?s:null,a=document.querySelector('[data-element-id="'.concat(r,'"]'));!a||ef.has(a)?n.push({id:r,exportValue:i,domElement:a}):Bn("_getElementsByName - element not allowed: ".concat(r))}return n}for(const i of document.getElementsByName(e)){const{exportValue:e}=i,r=i.getAttribute("data-element-id");r!==t&&(ef.has(i)&&n.push({id:r,exportValue:e,domElement:i}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}function cf(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...e),t.left="".concat(100*(e[0]-a)/r,"%"),t.top="".concat(100*(s-e[3]+o)/s,"%"),0===i?(t.width="".concat(100*(e[2]-e[0])/r,"%"),t.height="".concat(100*(e[3]-e[1])/s,"%")):this.setRotation(i)}class uf extends lf{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var hf=new WeakSet;class df extends lf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),At(this,hf),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),i=!0):e.attachment?(Ct(hf,this,ff).call(this,n,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(Ct(hf,this,gf).call(this,n,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=n,this.container.append(n)),this.container}_bindLink(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&Ct(hf,this,pf).call(this),n&&(e.title=n)}_bindNamedAction(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),Ct(hf,this,pf).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const r=n.get(i);r&&(e[r]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1})}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),Ct(hf,this,pf).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),Ct(hf,this,pf).call(this),!this._fieldObjects)return Bn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:i,include:r}=t,s=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===r&&s.push(n)}else for(const t of Object.values(this._fieldObjects))s.push(...t);const a=this.annotationStorage,o=[];for(const t of s){const{id:e}=t;switch(o.push(e),t.type){case"text":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;a.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(ef.has(n)?n.dispatchEvent(new Event("resetform")):Bn("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function pf(){this.container.setAttribute("data-internal-link","")}function ff(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,i),!1},Ct(hf,this,pf).call(this)}function gf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),Ct(hf,this,pf).call(this)}class mf extends lf{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class vf extends lf{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return ei.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,r){n.includes("mouse")?e.addEventListener(n,e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{var s;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}r&&(null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(e)}}))})}_setEventListeners(e,t,n,i){for(const[o,l]of n){var r,s,a;if("Action"===l||null!==(r=this.data.actions)&&void 0!==r&&r[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,i),"Focus"!==l||null!==(s=this.data.actions)&&void 0!==s&&s.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":ni.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,r=e.style;let s;const a=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(Zt*i))||1);s=Math.min(i,a(t/Zt))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(i,a(e/Zt))}r.fontSize="calc(".concat(s,"px * var(--total-scale-factor))"),r.color=ni.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class bf extends vf{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,i){const r=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),r.setValue(s.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const s=e.getValue(t,{value:this.data.fieldValue});let a=s.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=s.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",null!==l&&void 0!==l?l:a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),ef.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:u,datetimeType:h,timeStep:d}=this.data,p=!!h&&this.enableScripting;u&&(n.title=u),this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",i=>{e.setValue(t,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",e=>{var t;const i=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=c.userValue=i,c.formattedValue=null});let f=e=>{const{formattedValue:t}=c;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var r;n.addEventListener("focus",e=>{var t;if(c.focused)return;const{target:n}=e;if(p&&(n.type=h,d&&(n.step=d)),c.userValue){const e=c.userValue;if(p)if("time"===h){const t=new Date(e),i=[t.getHours(),t.getMinutes(),t.getSeconds()];n.value=i.map(e=>e.toString().padStart(2,"0")).join(":")}else n.value=new Date(e-tf).toISOString().split("date"===h?"T":".",1)[0];else n.value=e}c.lastCommittedValue=n.value,c.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;c.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",p||e.setValue(t,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:i}=n.detail;c.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i);const r={formattedValue:i};p&&(r.value=i),e.setValue(t,r)},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var i;const{charLimit:r}=n.detail,{target:s}=n;if(0===r)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",r);let a=c.userValue;!a||a.length<=r||(a=a.slice(0,r),s.value=c.userValue=a,e.setValue(t,{value:a}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)}),n.addEventListener("keydown",e=>{var n;c.commitKey=1;let i=-1;if("Escape"===e.key?i=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):i=2,-1===i)return;const{value:r}=e.target;c.lastCommittedValue!==r&&(c.lastCommittedValue=r,c.userValue=r,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:i,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});const i=f;f=null,n.addEventListener("blur",e=>{var n;if(!c.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{target:r}=e;let{value:s}=r;if(p){if(s&&"time"===h){const e=s.split(":").map(e=>parseInt(e,10));s=new Date(2e3,0,1,e[0],e[1],e[2]||0).valueOf(),r.step=""}else s.includes("T")||(s="".concat(s,"T00:00")),s=new Date(s).valueOf();r.type="text"}var a;(c.userValue=s,c.lastCommittedValue!==s)&&(null===(a=this.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:c.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));i(e)}),null!==(r=this.data.actions)&&void 0!==r&&r.Keystroke&&n.addEventListener("beforeinput",e=>{var n;c.lastCommittedValue=null;const{data:i,target:r}=e,{value:s,selectionStart:a,selectionEnd:o}=r;let l=a,u=o;switch(e.inputType){case"deleteWordBackward":{const e=s.substring(0,a).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=s.substring(a).match(/^[^\w]*\w*/);e&&(u+=e[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(u+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,change:i||"",willCommit:!1,selStart:l,selEnd:u}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--total-scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class yf extends vf{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class wf extends vf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return ef.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",i=>{const{name:r,checked:s}=i.target;for(const a of this._getElementsByName(r,n)){const n=s&&a.exportValue===t.exportValue;a.domElement&&(a.domElement.checked=n),e.setValue(a.id,{value:n})}e.setValue(n,{value:s})}),r.addEventListener("resetform",e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",t=>{const i={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(i,t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class _f extends vf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof i&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});const r=document.createElement("input");if(ef.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",t=>{const{name:i,checked:r}=t.target;for(const s of this._getElementsByName(i,n))e.setValue(s.id,{value:!1});e.setValue(n,{value:r})}),r.addEventListener("resetform",e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){const i=t.buttonValue;r.addEventListener("updatefromsandbox",t=>{const r={value:t=>{const r=i===t.detail.value;for(const i of this._getElementsByName(t.target.name)){const t=r&&i.id===n;i.domElement&&(i.domElement.checked=t),e.setValue(i.id,{value:t})}}};this._dispatchEventFromSandbox(r,t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class xf extends df{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class kf extends vf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");ef.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===t});for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),r=!1),i.append(e)}let s=null;if(r){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),i.prepend(e),s=()=>{e.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const a=e=>{const t=e?"value":"textContent",{options:n,multiple:r}=i;return r?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=a(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",n=>{const r={value(n){var r;null===(r=s)||void 0===r||r();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of i.options)e.selected=c.has(e.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(e){i.multiple=!0},remove(n){const r=i.options,s=n.detail.remove;if(r[s].selected=!1,i.remove(s),r.length>0){-1===Array.prototype.findIndex.call(r,e=>e.selected)&&(r[0].selected=!0)}e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==i.length;)i.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(n){const{index:r,displayValue:s,exportValue:c}=n.detail.insert,u=i.children[r],h=document.createElement("option");h.textContent=s,h.value=c,u?u.before(h):i.append(h),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:r}=n.detail;for(;0!==i.length;)i.remove(0);for(const e of r){const{displayValue:t,exportValue:n}=e,r=document.createElement("option");r.textContent=t,r.value=n,i.append(r)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const i=new Set(n.detail.indices);for(const e of n.target.options)e.selected=i.has(e.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(r,n)}),i.addEventListener("input",n=>{var i;const r=a(!0),s=a(!1);e.setValue(t,{value:r}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:s,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):i.addEventListener("input",function(n){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var Sf=new WeakSet;class Af extends lf{constructor(e){const{data:t,elements:n,parent:i}=e,r=!!i._commentManager;if(super(e,{isRenderable:!r&&lf._hasPopupData(t)}),At(this,Sf),this.elements=n,r&&lf._hasPopupData(t)){const e=this.popup=Ct(Sf,this,Ef).call(this);for(const t of n)t.popup=e}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=Ct(Sf,this,Ef).call(this),n=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(e=>"".concat(li).concat(e)).join(",")),this.container}}function Ef(){return new eg({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}var Cf=new WeakMap,Tf=new WeakMap,Mf=new WeakMap,Pf=new WeakMap,Rf=new WeakMap,Of=new WeakMap,Nf=new WeakMap,If=new WeakMap,Df=new WeakMap,jf=new WeakMap,Lf=new WeakMap,Ff=new WeakMap,Bf=new WeakMap,Wf=new WeakMap,Uf=new WeakMap,zf=new WeakMap,Hf=new WeakMap,Vf=new WeakMap,qf=new WeakMap,Gf=new WeakMap,Kf=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,Jf=new WeakMap,Qf=new WeakMap,$f=new WeakMap,Zf=new WeakSet;class eg{constructor(e){let{container:t,color:n,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:u,open:h,commentManager:d=null}=e;At(this,Zf),Et(this,Cf,null),Et(this,Tf,Ct(Zf,this,cg).bind(this)),Et(this,Mf,Ct(Zf,this,pg).bind(this)),Et(this,Pf,Ct(Zf,this,dg).bind(this)),Et(this,Rf,Ct(Zf,this,hg).bind(this)),Et(this,Of,null),Et(this,Nf,null),Et(this,If,null),Et(this,Df,null),Et(this,jf,null),Et(this,Lf,null),Et(this,Ff,null),Et(this,Bf,!1),Et(this,Wf,null),Et(this,Uf,null),Et(this,zf,null),Et(this,Hf,null),Et(this,Vf,null),Et(this,qf,null),Et(this,Gf,null),Et(this,Kf,null),Et(this,Xf,null),Et(this,Yf,null),Et(this,Jf,!1),Et(this,Qf,null),Et(this,$f,null),Pt(Nf,this,t),Pt(Xf,this,r),Pt(If,this,a),Pt(Kf,this,o),Pt(Lf,this,l),Pt(Of,this,n),Pt(Gf,this,c),Pt(Ff,this,u),Pt(jf,this,i),Pt(Cf,this,d),Pt(Qf,this,i[0]),Pt(Df,this,Si.toDateObject(s)),this.trigger=i.flatMap(e=>e.getElementsToTriggerPopup()),d||(Ct(Zf,this,tg).call(this),Mt(Nf,this).hidden=!0,h&&Ct(Zf,this,hg).call(this))}renderCommentButton(){if(Mt(Hf,this))return void(Mt(Hf,this).parentNode||Mt(Qf,this).container.after(Mt(Hf,this)));if(Mt(Vf,this)||Ct(Zf,this,ng).call(this),!Mt(Vf,this))return;const{signal:e}=Pt(Uf,this,new AbortController),t=Mt(Qf,this).hasOwnCommentButton,n=()=>{Mt(Cf,this).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{Mt(Cf,this).toggleCommentPopup(this,!1,!0,!t)},r=()=>{Mt(Cf,this).toggleCommentPopup(this,!1,!1)};if(t){Pt(Hf,this,Mt(Qf,this).container);for(const t of this.trigger)t.ariaHasPopup="dialog",t.ariaControls="commentPopup",t.addEventListener("keydown",Mt(Tf,this),{signal:e}),t.addEventListener("click",n,{signal:e}),t.addEventListener("pointerenter",i,{signal:e}),t.addEventListener("pointerleave",r,{signal:e}),t.classList.add("popupTriggerArea")}else{const t=Pt(Hf,this,document.createElement("button"));t.className="annotationCommentButton";const s=Mt(Qf,this).container;t.style.zIndex=s.style.zIndex+1,t.tabIndex=0,t.ariaHasPopup="dialog",t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button"),Ct(Zf,this,rg).call(this),Ct(Zf,this,ig).call(this),t.addEventListener("keydown",Mt(Tf,this),{signal:e}),t.addEventListener("click",n,{signal:e}),t.addEventListener("pointerenter",i,{signal:e}),t.addEventListener("pointerleave",r,{signal:e}),s.after(t)}}get commentButtonColor(){const{color:e,opacity:t}=Mt(Qf,this).commentData;return e?Mt(Lf,this)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;null===(e=Mt(Hf,this))||void 0===e||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:i,modificationDate:r}=Mt(Qf,this).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:i,modificationDate:r}}get elementBeforePopup(){return Mt(Hf,this)}get comment(){return Mt($f,this)||Pt($f,this,Mt(Qf,this).commentText),Mt($f,this)}set comment(e){e!==this.comment&&(Mt(Qf,this).commentText=Pt($f,this,e))}focus(){var e;null===(e=Mt(Qf,this).container)||void 0===e||e.focus()}get parentBoundingClientRect(){return Mt(Qf,this).layer.getBoundingClientRect()}setCommentButtonStates(e){let{selected:t,hasPopup:n}=e;Mt(Hf,this)&&(Mt(Hf,this).classList.toggle("selected",t),Mt(Hf,this).ariaExpanded=n)}setSelectedCommentButton(e){Mt(Hf,this).classList.toggle("selected",e)}get commentPopupPosition(){if(Mt(qf,this))return Mt(qf,this);const{x:e,y:t,height:n}=Mt(Hf,this).getBoundingClientRect(),{x:i,y:r,width:s,height:a}=Mt(Qf,this).layer.getBoundingClientRect();return[(e-i)/s,(t+n-r)/a]}set commentPopupPosition(e){Pt(qf,this,e)}hasDefaultPopupPosition(){return null===Mt(qf,this)}get commentButtonPosition(){return Mt(Vf,this)}get commentButtonWidth(){return Mt(Hf,this).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=Mt(qf,this)||this.commentButtonPosition.map(e=>e/100),i=this.parentBoundingClientRect,{x:r,y:s,width:o,height:l}=i;Mt(Cf,this).showDialog(null,this,r+t*o,s+n*l,(0,a.A)((0,a.A)({},e),{},{parentDimensions:i}))}render(){var e,t;if(Mt(Wf,this))return;const n=Pt(Wf,this,document.createElement("div"));if(n.className="popup",Mt(Of,this)){const e=n.style.outlineColor=ni.makeHexColor(...Mt(Of,this));n.style.backgroundColor="color-mix(in srgb, ".concat(e," 30%, white)")}const i=document.createElement("span");if(i.className="header",null!==(e=Mt(Xf,this))&&void 0!==e&&e.str){const e=document.createElement("span");e.className="title",i.append(e),({dir:e.dir,str:e.textContent}=Mt(Xf,this))}if(n.append(i),Mt(Df,this)){const e=document.createElement("time");e.className="popupDate",e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:Mt(Df,this).valueOf()})),e.dateTime=Mt(Df,this).toISOString(),i.append(e)}Fi({html:Tt(Zf,this,sg)||Mt(If,this).str,dir:null===(t=Mt(If,this))||void 0===t?void 0:t.dir,className:"popupContent"},n),Mt(Nf,this).append(n)}updateEdited(e){var t;let{rect:n,popup:i,deleted:r}=e;if(Mt(Cf,this))return r?(this.remove(),Pt($f,this,null)):i&&(i.deleted?this.remove():(Ct(Zf,this,rg).call(this),Pt($f,this,i.text))),void(n&&(Pt(Vf,this,null),Ct(Zf,this,ng).call(this),Ct(Zf,this,ig).call(this)));r||null!==i&&void 0!==i&&i.deleted?this.remove():(Ct(Zf,this,tg).call(this),Mt(Yf,this)||Pt(Yf,this,{contentsObj:Mt(If,this),richText:Mt(Kf,this)}),n&&Pt(zf,this,null),i&&i.text&&(Pt(Kf,this,Ct(Zf,this,lg).call(this,i.text)),Pt(Df,this,Si.toDateObject(i.date)),Pt(If,this,null)),null===(t=Mt(Wf,this))||void 0===t||t.remove(),Pt(Wf,this,null))}resetEdited(){var e;Mt(Yf,this)&&(({contentsObj:kt(Pt,[If,this])._,richText:kt(Pt,[Kf,this])._}=Mt(Yf,this)),Pt(Yf,this,null),null===(e=Mt(Wf,this))||void 0===e||e.remove(),Pt(Wf,this,null),Pt(zf,this,null))}remove(){var e,t,n;if(null===(e=Mt(Uf,this))||void 0===e||e.abort(),Pt(Uf,this,null),null===(t=Mt(Wf,this))||void 0===t||t.remove(),Pt(Wf,this,null),Pt(Jf,this,!1),Pt(Bf,this,!1),null===(n=Mt(Hf,this))||void 0===n||n.remove(),Pt(Hf,this,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){Pt(Jf,this,this.isVisible),Mt(Jf,this)&&(Mt(Nf,this).hidden=!0)}maybeShow(){Mt(Cf,this)||(Ct(Zf,this,tg).call(this),Mt(Jf,this)&&(Mt(Wf,this)||Ct(Zf,this,dg).call(this),Pt(Jf,this,!1),Mt(Nf,this).hidden=!1))}get isVisible(){return!Mt(Cf,this)&&!1===Mt(Nf,this).hidden}}function tg(){if(Mt(Uf,this))return;Pt(Uf,this,new AbortController);const{signal:e}=Mt(Uf,this);for(const n of this.trigger)n.addEventListener("click",Mt(Rf,this),{signal:e}),n.addEventListener("pointerenter",Mt(Pf,this),{signal:e}),n.addEventListener("pointerleave",Mt(Mf,this),{signal:e}),n.classList.add("popupTriggerArea");for(const n of Mt(jf,this)){var t;null===(t=n.container)||void 0===t||t.addEventListener("keydown",Mt(Tf,this),{signal:e})}}function ng(){const e=Mt(jf,this).find(e=>e.hasCommentButton);e&&Pt(Vf,this,e._normalizePoint(e.commentButtonPosition))}function ig(){if(Mt(Qf,this).extraPopupElement&&!Mt(Qf,this).editor)return;Mt(Hf,this)||this.renderCommentButton();const[e,t]=Mt(Vf,this),{style:n}=Mt(Hf,this);n.left="calc(".concat(e,"%)"),n.top="calc(".concat(t,"% - var(--comment-button-dim))")}function rg(){Mt(Qf,this).extraPopupElement||(Mt(Hf,this)||this.renderCommentButton(),Mt(Hf,this).style.backgroundColor=this.commentButtonColor||"")}function sg(e){const t=Mt(Kf,e),n=Mt(If,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:Mt(Kf,e).html||null}function ag(e){var t;return(null===(t=Tt(Zf,e,sg))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function og(e){var t;return(null===(t=Tt(Zf,e,sg))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function lg(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:Tt(Zf,this,og),fontSize:Tt(Zf,this,ag)?"calc(".concat(Tt(Zf,this,ag),"px * var(--total-scale-factor))"):""}};for(const r of e.split("\n"))t.push({name:"span",value:r,attributes:i});return n}function cg(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&Mt(Bf,this))&&Ct(Zf,this,hg).call(this)}function ug(){if(null!==Mt(zf,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:r}}}=Mt(Lf,this);let s=!!Mt(Ff,this),a=Mt(s?Ff:Gf,this);for(const d of Mt(jf,this))if(!a||null!==ni.intersect(d.data.rect,a)){a=d.data.rect,s=!0;break}const o=ni.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),l=s?a[2]-a[0]+5:0,c=o[0]+l,u=o[1];Pt(zf,this,[100*(c-i)/t,100*(u-r)/n]);const{style:h}=Mt(Nf,this);h.left="".concat(Mt(zf,this)[0],"%"),h.top="".concat(Mt(zf,this)[1],"%")}function hg(){Mt(Cf,this)?Mt(Cf,this).toggleCommentPopup(this,!1):(Pt(Bf,this,!Mt(Bf,this)),Mt(Bf,this)?(Ct(Zf,this,dg).call(this),Mt(Nf,this).addEventListener("click",Mt(Rf,this)),Mt(Nf,this).addEventListener("keydown",Mt(Tf,this))):(Ct(Zf,this,pg).call(this),Mt(Nf,this).removeEventListener("click",Mt(Rf,this)),Mt(Nf,this).removeEventListener("keydown",Mt(Tf,this))))}function dg(){Mt(Wf,this)||this.render(),this.isVisible?Mt(Bf,this)&&Mt(Nf,this).classList.add("focused"):(Ct(Zf,this,ug).call(this),Mt(Nf,this).hidden=!1,Mt(Nf,this).style.zIndex=parseInt(Mt(Nf,this).style.zIndex)+1e3)}function pg(){Mt(Nf,this).classList.remove("focused"),!Mt(Bf,this)&&this.isVisible&&(Mt(Nf,this).hidden=!0,Mt(Nf,this).style.zIndex=parseInt(Mt(Nf,this).style.zIndex)-1e3)}class fg extends lf{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=hn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var gg=new WeakMap;class mg extends lf{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Et(this,gg,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),r=Pt(gg,this,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return Mt(gg,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var vg=new WeakMap;class bg extends lf{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Et(this,vg,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,s=Pt(vg,this,this.svgFactory.createElement("svg:rect"));return s.setAttribute("x",r/2),s.setAttribute("y",r/2),s.setAttribute("width",t-r),s.setAttribute("height",n-r),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return Mt(vg,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var yg=new WeakMap;class wg extends lf{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Et(this,yg,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,s=Pt(yg,this,this.svgFactory.createElement("svg:ellipse"));return s.setAttribute("cx",t/2),s.setAttribute("cy",n/2),s.setAttribute("rx",t/2-r/2),s.setAttribute("ry",n/2-r/2),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return Mt(yg,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var _g=new WeakMap;class xg extends lf{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Et(this,_g,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i},width:r,height:s}=this;if(!t)return this.container;const a=this.svgFactory.create(r,s,!0);let o=[];for(let c=0,u=t.length;c<u;c+=2){const n=t[c]-e[0],i=e[3]-t[c+1];o.push("".concat(n,",").concat(i))}o=o.join(" ");const l=Pt(_g,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return Mt(_g,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class kg extends xg{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Sg extends lf{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Ag=new WeakMap,Eg=new WeakMap,Cg=new WeakSet;class Tg extends lf{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),At(this,Cg),Et(this,Ag,null),Et(this,Eg,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?hn.HIGHLIGHT:hn.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:i,popupRef:r}}=this,{transform:s,width:a,height:o}=Ct(Cg,this,Mg).call(this,t,e),l=this.svgFactory.create(a,o,!0),c=Pt(Ag,this,this.svgFactory.createElement("svg:g"));l.append(c),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",s);for(let u=0,h=n.length;u<h;u++){const e=this.svgFactory.createElement(this.svgElementName);Mt(Eg,this).push(e),e.setAttribute("points",n[u].join(",")),c.append(e)}return!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:i}=e,r=Mt(Ag,this);if(t>=0&&r.setAttribute("stroke-width",t||1),n)for(let s=0,a=Mt(Eg,this).length;s<a;s++)Mt(Eg,this)[s].setAttribute("points",n[s].join(","));if(i){const{transform:e,width:t,height:n}=Ct(Cg,this,Mg).call(this,this.data.rotation,i);r.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),r.setAttribute("transform",e)}}getElementsToTriggerPopup(){return Mt(Eg,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function Mg(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class Pg extends lf{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=hn.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const t=document.createElement("mark");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Rg extends lf{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Og extends lf{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Ng extends lf{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const t=document.createElement("s");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Ig extends lf{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=hn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Dg=new WeakMap,jg=new WeakSet;class Lg extends lf{constructor(e){var t;super(e,{isRenderable:!0}),At(this,jg),Et(this,Dg,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",(0,a.A)({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",Ct(jg,this,Fg).bind(this)),Pt(Dg,this,n);const{isMac:i}=ei.platform;return e.addEventListener("keydown",e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&Ct(jg,this,Fg).call(this)}),!t.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return Mt(Dg,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function Fg(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var Bg=new WeakMap,Wg=new WeakMap,Ug=new WeakMap,zg=new WeakMap,Hg=new WeakMap,Vg=new WeakMap,qg=new WeakMap,Gg=new WeakMap,Kg=new WeakSet;class Xg{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o,commentManager:l,linkService:c,annotationStorage:u}=e;At(this,Kg),Et(this,Bg,null),Et(this,Wg,null),Et(this,Ug,null),Et(this,zg,new Map),Et(this,Hg,null),Et(this,Vg,null),Et(this,qg,[]),Et(this,Gg,!1),this.div=t,Pt(Bg,this,n),Pt(Wg,this,i),Pt(Hg,this,o||null),Pt(Vg,this,c||null),Pt(Ug,this,u||new Yo),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=l||null}hasEditableAnnotations(){return Mt(zg,this).size>0}async render(e){const{annotations:t}=e,n=this.div;Mi(n,this.viewport);const i=new Map,r=[],s={data:null,layer:n,linkService:Mt(Vg,this),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new Zp,annotationStorage:Mt(Ug,this),enableComment:!0===e.enableComment,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const e=o.annotationType===xn.POPUP;if(e){const e=i.get(o.id);if(!e)continue;if(!this._commentManager){r.push(o);continue}s.elements=e}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;s.data=o;const t=nf.create(s);if(!t.isRenderable)continue;if(!e&&(Mt(qg,this).push(t),o.popupRef)){const e=i.get(o.popupRef);e?e.push(t):i.set(o.popupRef,[t])}const n=t.render();var a;if(o.hidden&&(n.style.visibility="hidden"),t._isEditable)Mt(zg,this).set(t.data.id,t),null===(a=this._annotationEditorUIManager)||void 0===a||a.renderAnnotationElement(t)}await Ct(Kg,this,Yg).call(this);for(const o of r){const e=s.elements=i.get(o.id);s.data=o;const t=nf.create(s);if(!t.isRenderable)continue;const n=t.render();t.contentElement.id="".concat(li).concat(o.id),o.hidden&&(n.style.visibility="hidden"),e.at(-1).container.after(n)}Ct(Kg,this,Jg).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:Mt(Vg,this),svgFactory:new Zp,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=Xg._defaultBorderStyle),t.data=n;const e=nf.create(t);e.isRenderable&&(e.render(),e.contentElement.id="".concat(li).concat(n.id),Mt(qg,this).push(e))}await Ct(Kg,this,Yg).call(this)}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,Mi(n,{rotation:t.rotation}),Ct(Kg,this,Jg).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(Mt(zg,this).values())}getEditableAnnotation(e){return Mt(zg,this).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:i}=e,r=new uf({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:Mt(Vg,this),annotationStorage:Mt(Ug,this)});return r.render(),r.contentElement.id="".concat(li).concat(n),r.createOrUpdatePopup(),Mt(qg,this).push(r),r}removeAnnotation(e){var t;const n=Mt(qg,this).findIndex(t=>t.data.id===e);if(n<0)return;const[i]=Mt(qg,this).splice(n,1);null===(t=Mt(Bg,this))||void 0===t||t.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(e){if(0!==e.length){for(const t of e)t.updateFakeAnnotationElement(this);Ct(Kg,this,Yg).call(this)}}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Vn(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:kn,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}async function Yg(){if(0===Mt(qg,this).length)return;this.div.replaceChildren();const e=[];if(!Mt(Gg,this)){Pt(Gg,this,!0);for(const{contentElement:n,data:{id:i}}of Mt(qg,this)){var t;const r=n.id="".concat(li).concat(i);e.push(null===(t=Mt(Hg,this))||void 0===t?void 0:t.getAriaAttributes(r).then(e=>{if(e)for(const[t,i]of e)n.setAttribute(t,i)}))}}Mt(qg,this).sort((e,t)=>{let{data:{rect:[n,i,r,s]}}=e,{data:{rect:[a,o,l,c]}}=t;if(n===r&&i===s)return 1;if(a===l&&o===c)return-1;const u=(i+s)/2,h=(o+c)/2;if(u>=c&&h<=i)return-1;if(h>=s&&u<=o)return 1;return(n+r)/2-(a+l)/2});const n=document.createDocumentFragment();for(const s of Mt(qg,this)){var i,r;if(n.append(s.container),this._commentManager)null===(i=(null===(r=s.extraPopupElement)||void 0===r?void 0:r.popup)||s.popup)||void 0===i||i.renderCommentButton();else s.extraPopupElement&&n.append(s.extraPopupElement.render())}if(this.div.append(n),await Promise.all(e),Mt(Bg,this))for(const s of Mt(qg,this))Mt(Bg,this).addPointerInTextLayer(s.contentElement,!1)}function Jg(){if(!Mt(Wg,this))return;const e=this.div;for(const[n,i]of Mt(Wg,this)){const r=e.querySelector('[data-annotation-id="'.concat(n,'"]'));if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?"CANVAS"===s.nodeName?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i);const a=Mt(zg,this).get(n);var t;if(a)if(a._hasNoCanvas)null===(t=this._annotationEditorUIManager)||void 0===t||t.setMissingCanvas(n,r.id,i),a._hasNoCanvas=!1;else a.canvas=i}Mt(Wg,this).clear()}const Qg=/\r\n?|\n/g;var $g=new WeakMap,Zg=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=new WeakSet;class im extends bo{static get _keyboardManager(){const e=im.prototype,t=e=>e.isEmpty(),n=Ms.TRANSLATE_SMALL,i=Ms.TRANSLATE_BIG;return Vn(this,"_keyboardManager",new Pr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}constructor(e){super((0,a.A)((0,a.A)({},e),{},{name:"freeTextEditor"})),At(this,nm),Et(this,$g,""),Et(this,Zg,"".concat(this.id,"-editor")),Et(this,em,null),Et(this,tm,void 0),(0,Yt.A)(this,"_colorPicker",null),this.color=e.color||im._defaultColor||bo._defaultLineColor,Pt(tm,this,e.fontSize||im._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(e,t){bo.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case dn.FREETEXT_SIZE:im._defaultFontSize=t;break;case dn.FREETEXT_COLOR:im._defaultColor=t}}updateParams(e,t){switch(e){case dn.FREETEXT_SIZE:Ct(nm,this,rm).call(this,t);break;case dn.FREETEXT_COLOR:Ct(nm,this,sm).call(this,t)}}static get defaultPropertiesToUpdate(){return[[dn.FREETEXT_SIZE,im._defaultFontSize],[dn.FREETEXT_COLOR,im._defaultColor||bo._defaultLineColor]]}get propertiesToUpdate(){return[[dn.FREETEXT_SIZE,Mt(tm,this)],[dn.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Kp(this)),[["colorPicker",this._colorPicker]]}get colorType(){return dn.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,null===(e=this._colorPicker)||void 0===e||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-im._internalPadding*e,-(im._internalPadding+Mt(tm,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),Pt(em,this,new AbortController);const e=this._uiManager.combinedSignal(Mt(em,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Mt(Zg,this)),this._isDraggable=!0,null===(e=Mt(em,this))||void 0===e||e.abort(),Pt(em,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=Mt($g,this),t=Pt($g,this,Ct(nm,this,am).call(this).trimEnd());if(e===t)return;const n=e=>{Pt($g,this,e),e?(Ct(nm,this,cm).call(this),this._uiManager.rebuild(this),Ct(nm,this,om).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),Ct(nm,this,om).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){im._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Mt(Zg,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(Mt(tm,this),"px * var(--total-scale-factor))"),n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:r}=this._initialData;let[s,a]=this.getInitialTranslation();[s,a]=this.pageTranslationToScreen(s,a);const[o,l]=this.pageDimensions,[c,u]=this.pageTranslation;let h,d;switch(this.rotation){case 0:h=e+(r[0]-c)/o,d=t+this.height-(r[1]-u)/l;break;case 90:h=e+(r[0]-c)/o,d=t-(r[1]-u)/l,[s,a]=[a,-s];break;case 180:h=e-this.width+(r[0]-c)/o,d=t-(r[1]-u)/l,[s,a]=[-s,-a];break;case 270:h=e+(r[0]-c-this.height*l)/o,d=t+(r[1]-u-this.width*o)/l,[s,a]=[-a,s]}this.setAt(h*n,d*i,s,a)}else this._moveAfterPaste(e,t);Ct(nm,this,cm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const i=hm.call(im,t.getData("text")||"").replaceAll(Qg,"\n");if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const s=r.getRangeAt(0);if(!i.includes("\n"))return s.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void r.collapseToStart();const{startContainer:a,startOffset:o}=s,l=[],c=[];if(a.nodeType===Node.TEXT_NODE){const e=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(Qg,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(lm.call(im,n)):t=c}l.push(a.nodeValue.slice(0,o).replaceAll(Qg,""))}else if(a===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===o&&(e=c),e.push(lm.call(im,n))}Pt($g,this,"".concat(l.join("\n")).concat(i).concat(c.join("\n"))),Ct(nm,this,cm).call(this);const u=new Range;let h=Math.sumPrecise(l.map(e=>e.length));for(const{firstChild:d}of this.editorDiv.childNodes)if(d.nodeType===Node.TEXT_NODE){const e=d.nodeValue.length;if(h<=e){u.setStart(d,h),u.setEnd(d,h);break}h-=e}r.removeAllRanges(),r.addRange(u)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=im._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,n){let i=null;if(e instanceof fg){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:r,rotation:s,id:a,popupRef:o,richText:l,contentsObj:c,creationDate:u,modificationDate:h},textContent:d,textPosition:p,parent:{page:{pageNumber:f}}}=e;if(!d||0===d.length)return null;i=e={annotationType:hn.FREETEXT,color:Array.from(n),fontSize:t,value:d.join("\n"),position:p,pageIndex:f-1,rect:r.slice(0),rotation:s,annotationElementId:a,id:a,deleted:!1,popupRef:o,comment:(null===c||void 0===c?void 0:c.str)||null,richText:l,creationDate:u,modificationDate:h}}const r=await super.deserialize(e,t,n);return Pt(tm,r,e.fontSize),r.color=ni.makeHexColor(...e.color),Pt($g,r,hm.call(im,e.value)),r._initialData=i,e.comment&&r.setCommentData(e),r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=bo._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:Mt(tm,this),value:Ct(nm,this,um).call(this)});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!Ct(nm,this,dm).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize="calc(".concat(Mt(tm,this),"px * var(--total-scale-factor))"),n.color=this.color,t.replaceChildren();for(const i of Mt($g,this).split("\n")){const e=document.createElement("div");e.append(i?document.createTextNode(i):document.createElement("br")),t.append(e)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:Mt($g,this)}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function rm(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--total-scale-factor))"),this.translate(0,-(e-Mt(tm,this))*this.parentScale),Pt(tm,this,e),Ct(nm,this,om).call(this)},n=Mt(tm,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function sm(e){const t=e=>{this.color=e,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function am(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes){var n;(null===(n=t)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===i.nodeName||(e.push(lm.call(Vt,i)),t=i)}return e.join("\n")}function om(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,i=t.style.display,r=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=i,t.classList.toggle("hidden",r)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function lm(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Qg,"")}function cm(){if(this.editorDiv.replaceChildren(),Mt($g,this))for(const e of Mt($g,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function um(){return Mt($g,this).replaceAll("\xa0"," ")}function hm(e){return e.replaceAll(" ","\xa0")}function dm(e){const{value:t,fontSize:n,color:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((e,t)=>e!==i[t])||e.pageIndex!==r}Vt=im,(0,Yt.A)(im,"_freeTextDefaultContent",""),(0,Yt.A)(im,"_internalPadding",0),(0,Yt.A)(im,"_defaultColor",null),(0,Yt.A)(im,"_defaultFontSize",10),(0,Yt.A)(im,"_type","freetext"),(0,Yt.A)(im,"_editorType",hn.FREETEXT);class pm{toSVGPath(){Wn("Abstract method `toSVGPath` must be implemented.")}get box(){Wn("Abstract getter `box` must be implemented.")}serialize(e,t){Wn("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,r,s){s||(s=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)s[a]=t+e[a]*i,s[a+1]=n+e[a+1]*r;return s}static _rescaleAndSwap(e,t,n,i,r,s){s||(s=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)s[a]=t+e[a+1]*i,s[a+1]=n+e[a]*r;return s}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let r=0,s=e.length;r<s;r+=2)i[r]=t+e[r],i[r+1]=n+e[r+1];return i}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,n,i,r){switch(r){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,r,s){return[(e+5*n)/6,(t+5*i)/6,(5*n+r)/6,(5*i+s)/6,(n+r)/2,(i+s)/2]}}(0,Yt.A)(pm,"PRECISION",1e-4);var fm=new WeakMap,gm=new WeakMap,mm=new WeakMap,vm=new WeakMap,bm=new WeakMap,ym=new WeakMap,wm=new WeakMap,_m=new WeakMap,xm=new WeakMap,km=new WeakMap,Sm=new WeakMap,Am=new WeakMap,Em=new WeakMap,Cm=new WeakSet;class Tm{constructor(e,t,n,i,r){let{x:s,y:a}=e,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;At(this,Cm),Et(this,fm,void 0),Et(this,gm,[]),Et(this,mm,void 0),Et(this,vm,void 0),Et(this,bm,[]),Et(this,ym,new Float32Array(18)),Et(this,wm,void 0),Et(this,_m,void 0),Et(this,xm,void 0),Et(this,km,void 0),Et(this,Sm,void 0),Et(this,Am,void 0),Et(this,Em,[]),Pt(fm,this,t),Pt(Am,this,i*n),Pt(vm,this,r),Mt(ym,this).set([NaN,NaN,NaN,NaN,s,a],6),Pt(mm,this,o),Pt(km,this,jm._*n),Pt(xm,this,Lm._*n),Pt(Sm,this,n),Mt(Em,this).push(s,a)}isEmpty(){return isNaN(Mt(ym,this)[8])}add(e){var t;let{x:n,y:i}=e;Pt(wm,this,n),Pt(_m,this,i);const[r,s,a,o]=Mt(fm,this);let[l,c,u,h]=Mt(ym,this).subarray(8,12);const d=n-u,p=i-h,f=Math.hypot(d,p);if(f<Mt(xm,this))return!1;const g=f-Mt(km,this),m=g/f,v=m*d,b=m*p;let y=l,w=c;l=u,c=h,u+=v,h+=b,null===(t=Mt(Em,this))||void 0===t||t.push(n,i);const _=v/g,x=-b/g*Mt(Am,this),k=_*Mt(Am,this);if(Mt(ym,this).set(Mt(ym,this).subarray(2,8),0),Mt(ym,this).set([u+x,h+k],4),Mt(ym,this).set(Mt(ym,this).subarray(14,18),12),Mt(ym,this).set([u-x,h-k],16),isNaN(Mt(ym,this)[6]))return 0===Mt(bm,this).length&&(Mt(ym,this).set([l+x,c+k],2),Mt(bm,this).push(NaN,NaN,NaN,NaN,(l+x-r)/a,(c+k-s)/o),Mt(ym,this).set([l-x,c-k],14),Mt(gm,this).push(NaN,NaN,NaN,NaN,(l-x-r)/a,(c-k-s)/o)),Mt(ym,this).set([y,w,l,c,u,h],6),!this.isEmpty();Mt(ym,this).set([y,w,l,c,u,h],6);return Math.abs(Math.atan2(w-c,y-l)-Math.atan2(b,v))<Math.PI/2?([l,c,u,h]=Mt(ym,this).subarray(2,6),Mt(bm,this).push(NaN,NaN,NaN,NaN,((l+u)/2-r)/a,((c+h)/2-s)/o),[l,c,y,w]=Mt(ym,this).subarray(14,18),Mt(gm,this).push(NaN,NaN,NaN,NaN,((y+l)/2-r)/a,((w+c)/2-s)/o),!0):([y,w,l,c,u,h]=Mt(ym,this).subarray(0,6),Mt(bm,this).push(((y+5*l)/6-r)/a,((w+5*c)/6-s)/o,((5*l+u)/6-r)/a,((5*c+h)/6-s)/o,((l+u)/2-r)/a,((c+h)/2-s)/o),[u,h,l,c,y,w]=Mt(ym,this).subarray(12,18),Mt(gm,this).push(((y+5*l)/6-r)/a,((w+5*c)/6-s)/o,((5*l+u)/6-r)/a,((5*c+h)/6-s)/o,((l+u)/2-r)/a,((c+h)/2-s)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const e=Mt(bm,this),t=Mt(gm,this);if(isNaN(Mt(ym,this)[6])&&!this.isEmpty())return Ct(Cm,this,Pm).call(this);const n=[];n.push("M".concat(e[4]," ").concat(e[5]));for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push("L".concat(e[i+4]," ").concat(e[i+5])):n.push("C".concat(e[i]," ").concat(e[i+1]," ").concat(e[i+2]," ").concat(e[i+3]," ").concat(e[i+4]," ").concat(e[i+5]));Ct(Cm,this,Om).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push("L".concat(t[i+4]," ").concat(t[i+5])):n.push("C".concat(t[i]," ").concat(t[i+1]," ").concat(t[i+2]," ").concat(t[i+3]," ").concat(t[i+4]," ").concat(t[i+5]));return Ct(Cm,this,Rm).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,r,s){return new Gm(e,t,n,i,r,s)}getOutlines(){var e,t;const n=Mt(bm,this),i=Mt(gm,this),r=Mt(ym,this),[s,a,o,l]=Mt(fm,this),c=new Float32Array((null!==(e=null===(t=Mt(Em,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let d=0,p=c.length-2;d<p;d+=2)c[d]=(Mt(Em,this)[d]-s)/o,c[d+1]=(Mt(Em,this)[d+1]-a)/l;if(c[c.length-2]=(Mt(wm,this)-s)/o,c[c.length-1]=(Mt(_m,this)-a)/l,isNaN(r[6])&&!this.isEmpty())return Ct(Cm,this,Nm).call(this,c);const u=new Float32Array(Mt(bm,this).length+24+Mt(gm,this).length);let h=n.length;for(let d=0;d<h;d+=2)isNaN(n[d])?u[d]=u[d+1]=NaN:(u[d]=n[d],u[d+1]=n[d+1]);h=Ct(Cm,this,Dm).call(this,u,h);for(let d=i.length-6;d>=6;d-=6)for(let e=0;e<6;e+=2)isNaN(i[d+e])?(u[h]=u[h+1]=NaN,h+=2):(u[h]=i[d+e],u[h+1]=i[d+e+1],h+=2);return Ct(Cm,this,Im).call(this,u,h),this.newFreeDrawOutline(u,c,Mt(fm,this),Mt(Sm,this),Mt(mm,this),Mt(vm,this))}}function Mm(){const e=Mt(ym,this).subarray(4,6),t=Mt(ym,this).subarray(16,18),[n,i,r,s]=Mt(fm,this);return[(Mt(wm,this)+(e[0]-t[0])/2-n)/r,(Mt(_m,this)+(e[1]-t[1])/2-i)/s,(Mt(wm,this)+(t[0]-e[0])/2-n)/r,(Mt(_m,this)+(t[1]-e[1])/2-i)/s]}function Pm(){const[e,t,n,i]=Mt(fm,this),[r,s,a,o]=Ct(Cm,this,Mm).call(this);return"M".concat((Mt(ym,this)[2]-e)/n," ").concat((Mt(ym,this)[3]-t)/i," L").concat((Mt(ym,this)[4]-e)/n," ").concat((Mt(ym,this)[5]-t)/i," L").concat(r," ").concat(s," L").concat(a," ").concat(o," L").concat((Mt(ym,this)[16]-e)/n," ").concat((Mt(ym,this)[17]-t)/i," L").concat((Mt(ym,this)[14]-e)/n," ").concat((Mt(ym,this)[15]-t)/i," Z")}function Rm(e){const t=Mt(gm,this);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function Om(e){const[t,n,i,r]=Mt(fm,this),s=Mt(ym,this).subarray(4,6),a=Mt(ym,this).subarray(16,18),[o,l,c,u]=Ct(Cm,this,Mm).call(this);e.push("L".concat((s[0]-t)/i," ").concat((s[1]-n)/r," L").concat(o," ").concat(l," L").concat(c," ").concat(u," L").concat((a[0]-t)/i," ").concat((a[1]-n)/r))}function Nm(e){const t=Mt(ym,this),[n,i,r,s]=Mt(fm,this),[a,o,l,c]=Ct(Cm,this,Mm).call(this),u=new Float32Array(36);return u.set([NaN,NaN,NaN,NaN,(t[2]-n)/r,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-n)/r,(t[5]-i)/s,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-n)/r,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-n)/r,(t[15]-i)/s],0),this.newFreeDrawOutline(u,e,Mt(fm,this),Mt(Sm,this),Mt(mm,this),Mt(vm,this))}function Im(e,t){const n=Mt(gm,this);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6}function Dm(e,t){const n=Mt(ym,this).subarray(4,6),i=Mt(ym,this).subarray(16,18),[r,s,a,o]=Mt(fm,this),[l,c,u,h]=Ct(Cm,this,Mm).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-s)/o],t),t+24}var jm={_:8},Lm={_:jm._+2},Fm=new WeakMap,Bm=new WeakMap,Wm=new WeakMap,Um=new WeakMap,zm=new WeakMap,Hm=new WeakMap,Vm=new WeakMap,qm=new WeakSet;class Gm extends pm{constructor(e,t,n,i,r,s){super(),At(this,qm),Et(this,Fm,void 0),Et(this,Bm,new Float32Array(4)),Et(this,Wm,void 0),Et(this,Um,void 0),Et(this,zm,void 0),Et(this,Hm,void 0),Et(this,Vm,void 0),Pt(Vm,this,e),Pt(zm,this,t),Pt(Fm,this,n),Pt(Hm,this,i),Pt(Wm,this,r),Pt(Um,this,s),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],Ct(qm,this,Km).call(this,s);const[a,o,l,c]=Mt(Bm,this);for(let u=0,h=e.length;u<h;u+=2)e[u]=(e[u]-a)/l,e[u+1]=(e[u+1]-o)/c;for(let u=0,h=t.length;u<h;u+=2)t[u]=(t[u]-a)/l,t[u+1]=(t[u+1]-o)/c}toSVGPath(){const e=["M".concat(Mt(Vm,this)[4]," ").concat(Mt(Vm,this)[5])];for(let t=6,n=Mt(Vm,this).length;t<n;t+=6)isNaN(Mt(Vm,this)[t])?e.push("L".concat(Mt(Vm,this)[t+4]," ").concat(Mt(Vm,this)[t+5])):e.push("C".concat(Mt(Vm,this)[t]," ").concat(Mt(Vm,this)[t+1]," ").concat(Mt(Vm,this)[t+2]," ").concat(Mt(Vm,this)[t+3]," ").concat(Mt(Vm,this)[t+4]," ").concat(Mt(Vm,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,i,r,s]=e;const a=r-n,o=s-i;let l,c;switch(t){case 0:l=pm._rescale(Mt(Vm,this),n,s,a,-o),c=pm._rescale(Mt(zm,this),n,s,a,-o);break;case 90:l=pm._rescaleAndSwap(Mt(Vm,this),n,i,a,o),c=pm._rescaleAndSwap(Mt(zm,this),n,i,a,o);break;case 180:l=pm._rescale(Mt(Vm,this),r,i,-a,o),c=pm._rescale(Mt(zm,this),r,i,-a,o);break;case 270:l=pm._rescaleAndSwap(Mt(Vm,this),r,s,-a,-o),c=pm._rescaleAndSwap(Mt(zm,this),r,s,-a,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return Mt(Bm,this)}newOutliner(e,t,n,i,r){return new Tm(e,t,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(e,t){const[n,i,r,s]=Mt(Bm,this),[a,o,l,c]=Mt(Fm,this),u=r*l,h=s*c,d=n*l+a,p=i*c+o,f=this.newOutliner({x:Mt(zm,this)[0]*u+d,y:Mt(zm,this)[1]*h+p},Mt(Fm,this),Mt(Hm,this),e,Mt(Um,this),null!==t&&void 0!==t?t:Mt(Wm,this));for(let g=2;g<Mt(zm,this).length;g+=2)f.add({x:Mt(zm,this)[g]*u+d,y:Mt(zm,this)[g+1]*h+p});return f.getOutlines()}}function Km(e){const t=Mt(Vm,this);let n=t[4],i=t[5];const r=[n,i,n,i];let s=n,a=i,o=n,l=i;const c=e?Math.max:Math.min,u=new Float32Array(4);for(let d=6,p=t.length;d<p;d+=6){const e=t[d+4],h=t[d+5];isNaN(t[d])?(ni.pointBoundingBox(e,h,r),a>h?(s=e,a=h):a===h&&(s=c(s,e)),l<h?(o=e,l=h):l===h&&(o=c(o,e))):(u[0]=u[1]=1/0,u[2]=u[3]=-1/0,ni.bezierBoundingBox(n,i,...t.slice(d,d+6),u),ni.rectBoundingBox(u[0],u[1],u[2],u[3],r),a>u[1]?(s=u[0],a=u[1]):a===u[1]&&(s=c(s,u[0])),l<u[3]?(o=u[2],l=u[3]):l===u[3]&&(o=c(o,u[2]))),n=e,i=h}const h=Mt(Bm,this);h[0]=r[0]-Mt(Wm,this),h[1]=r[1]-Mt(Wm,this),h[2]=r[2]-r[0]+2*Mt(Wm,this),h[3]=r[3]-r[1]+2*Mt(Wm,this),this.firstPoint=[s,a],this.lastPoint=[o,l]}var Xm=new WeakMap,Ym=new WeakMap,Jm=new WeakMap,Qm=new WeakMap,$m=new WeakMap,Zm=new WeakSet;class ev{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];At(this,Zm),Et(this,Xm,void 0),Et(this,Ym,void 0),Et(this,Jm,void 0),Et(this,Qm,[]),Et(this,$m,[]);const r=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:f,y:g,width:m,height:v}of e){const e=Math.floor((f-t)/s)*s,n=Math.ceil((f+m+t)/s)*s,i=Math.floor((g-t)/s)*s,a=Math.ceil((g+v+t)/s)*s,o=[e,i,a,!0],l=[n,i,a,!1];Mt(Qm,this).push(o,l),ni.rectBoundingBox(e,i,n,a,r)}const a=r[2]-r[0]+2*n,o=r[3]-r[1]+2*n,l=r[0]-n,c=r[1]-n;let u=i?-1/0:1/0,h=1/0;const d=Mt(Qm,this).at(i?-1:-2),p=[d[0],d[2]];for(const f of Mt(Qm,this)){const[e,t,n,r]=f;!r&&i?t<h?(h=t,u=e):t===h&&(u=Math.max(u,e)):r&&!i&&(t<h?(h=t,u=e):t===h&&(u=Math.min(u,e))),f[0]=(e-l)/a,f[1]=(t-c)/o,f[2]=(n-c)/o}Pt(Xm,this,new Float32Array([l,c,a,o])),Pt(Ym,this,[u,h]),Pt(Jm,this,p)}getOutlines(){Mt(Qm,this).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);const e=[];for(const t of Mt(Qm,this))t[3]?(e.push(...Ct(Zm,this,sv).call(this,t)),Ct(Zm,this,iv).call(this,t)):(Ct(Zm,this,rv).call(this,t),e.push(...Ct(Zm,this,sv).call(this,t)));return Ct(Zm,this,tv).call(this,e)}}function tv(e){const t=[],n=new Set;for(const s of e){const[e,n,i]=s;t.push([e,n,s],[e,i,s])}t.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let s=0,a=t.length;s<a;s+=2){const e=t[s][2],i=t[s+1][2];e.push(i),i.push(e),n.add(e),n.add(i)}const i=[];let r;for(;n.size>0;){const e=n.values().next().value;let[t,s,a,o,l]=e;n.delete(e);let c=t,u=s;for(r=[t,a],i.push(r);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,s,a,o,l]=e,c!==t&&(r.push(c,u,t,u===s?s:a),c=t),u=u===s?a:s}r.push(c,u)}return new lv(i,Mt(Xm,this),Mt(Ym,this),Mt(Jm,this))}function nv(e){const t=Mt($m,this);let n=0,i=t.length-1;for(;n<=i;){const r=n+i>>1,s=t[r][0];if(s===e)return r;s<e?n=r+1:i=r-1}return i+1}function iv(e){let[,t,n]=e;const i=Ct(Zm,this,nv).call(this,t);Mt($m,this).splice(i,0,[t,n])}function rv(e){let[,t,n]=e;const i=Ct(Zm,this,nv).call(this,t);for(let r=i;r<Mt($m,this).length;r++){const[e,i]=Mt($m,this)[r];if(e!==t)break;if(e===t&&i===n)return void Mt($m,this).splice(r,1)}for(let r=i-1;r>=0;r--){const[e,i]=Mt($m,this)[r];if(e!==t)break;if(e===t&&i===n)return void Mt($m,this).splice(r,1)}}function sv(e){const[t,n,i]=e,r=[[t,n,i]],s=Ct(Zm,this,nv).call(this,i);for(let a=0;a<s;a++){const[e,n]=Mt($m,this)[a];for(let i=0,s=r.length;i<s;i++){const[,a,o]=r[i];if(!(n<=a||o<=e))if(a>=e)if(o>n)r[i][1]=n;else{if(1===s)return[];r.splice(i,1),i--,s--}else r[i][2]=e,o>n&&r.push([t,n,o])}}return r}var av=new WeakMap,ov=new WeakMap;class lv extends pm{constructor(e,t,n,i){super(),Et(this,av,void 0),Et(this,ov,void 0),Pt(ov,this,e),Pt(av,this,t),this.firstPoint=n,this.lastPoint=i}toSVGPath(){const e=[];for(const t of Mt(ov,this)){let[n,i]=t;e.push("M".concat(n," ").concat(i));for(let r=2;r<t.length;r+=2){const s=t[r],a=t[r+1];s===n?(e.push("V".concat(a)),i=a):a===i&&(e.push("H".concat(s)),n=s)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,i,r,s]=e;const a=[],o=r-n,l=s-i;for(const c of Mt(ov,this)){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*o,e[t+1]=s-c[t+1]*l;a.push(e)}return a}get box(){return Mt(av,this)}get classNamesForOutlining(){return["highlightOutline"]}}class cv extends Tm{newFreeDrawOutline(e,t,n,i,r,s){return new uv(e,t,n,i,r,s)}}class uv extends Gm{newOutliner(e,t,n,i,r){return new cv(e,t,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var hv=new WeakMap,dv=new WeakMap,pv=new WeakMap,fv=new WeakMap,gv=new WeakMap,mv=new WeakMap,vv=new WeakMap,bv=new WeakMap,yv=new WeakMap,wv=new WeakMap,_v=new WeakMap,xv=new WeakMap,kv=new WeakMap,Sv=new WeakMap,Av=new WeakMap,Ev=new WeakMap,Cv=new WeakMap,Tv=new WeakMap,Mv=new WeakSet;class Pv extends bo{static get _keyboardManager(){const e=Pv.prototype;return Vn(this,"_keyboardManager",new Pr([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super((0,a.A)((0,a.A)({},e),{},{name:"highlightEditor"})),At(this,Mv),Et(this,hv,null),Et(this,dv,0),Et(this,pv,void 0),Et(this,fv,null),Et(this,gv,null),Et(this,mv,null),Et(this,vv,null),Et(this,bv,0),Et(this,yv,null),Et(this,wv,null),Et(this,_v,null),Et(this,xv,!1),Et(this,kv,null),Et(this,Sv,null),Et(this,Av,null),Et(this,Ev,""),Et(this,Cv,void 0),Et(this,Tv,""),this.color=e.color||Pv._defaultColor,Pt(Cv,this,e.thickness||Pv._defaultThickness),this.opacity=e.opacity||Pv._defaultOpacity,Pt(pv,this,e.boxes||null),Pt(Tv,this,e.methodOfCreation||""),Pt(Ev,this,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(Pt(xv,this,!0),Ct(Mv,this,Ov).call(this,e),Ct(Mv,this,Lv).call(this)):Mt(pv,this)&&(Pt(hv,this,e.anchorNode),Pt(dv,this,e.anchorOffset),Pt(vv,this,e.focusNode),Pt(bv,this,e.focusOffset),Ct(Mv,this,Rv).call(this),Ct(Mv,this,Lv).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:Mt(xv,this)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:Mt(Cv,this),methodOfCreation:Mt(Tv,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;bo.initialize(e,t),Pv._defaultColor||(Pv._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case dn.HIGHLIGHT_COLOR:Pv._defaultColor=t;break;case dn.HIGHLIGHT_THICKNESS:Pv._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return Mt(Sv,this)}get commentButtonPosition(){return Mt(kv,this)}updateParams(e,t){switch(e){case dn.HIGHLIGHT_COLOR:Ct(Mv,this,Nv).call(this,t);break;case dn.HIGHLIGHT_THICKNESS:Ct(Mv,this,Iv).call(this,t)}}static get defaultPropertiesToUpdate(){return[[dn.HIGHLIGHT_COLOR,Pv._defaultColor],[dn.HIGHLIGHT_THICKNESS,Pv._defaultThickness]]}get propertiesToUpdate(){return[[dn.HIGHLIGHT_COLOR,this.color||Pv._defaultColor],[dn.HIGHLIGHT_THICKNESS,Mt(Cv,this)||Pv._defaultThickness],[dn.HIGHLIGHT_FREE,Mt(xv,this)]]}onUpdatedColor(){var e,t;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(Mt(_v,this),{root:{fill:this.color,"fill-opacity":this.opacity}}),null===(t=Mt(gv,this))||void 0===t||t.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){if(this._uiManager.highlightColors){return[["colorPicker",Pt(gv,this,new jp({editor:this}))]]}return super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Ct(Mv,this,Uv).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,Ct(Mv,this,Uv).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){Ct(Mv,this,jv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(Ct(Mv,this,Lv).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)Ct(Mv,this,jv).call(this);else if(e){var n;Ct(Mv,this,Lv).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;Mt(xv,this)?(e=(e-this.rotation+360)%360,n=Fv.call(Pv,Mt(wv,this).box,e)):n=Fv.call(Pv,[this.x,this.y,this.width,this.height],e),t.updateProperties(Mt(_v,this),{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(Mt(Av,this),{bbox:Fv.call(Pv,Mt(mv,this).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();Mt(Ev,this)&&(e.setAttribute("aria-label",Mt(Ev,this)),e.setAttribute("role","mark")),Mt(xv,this)?e.classList.add("free"):this.div.addEventListener("keydown",Ct(Mv,this,Bv).bind(this),{signal:this._uiManager._signal});const t=Pt(yv,this,document.createElement("div"));return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=Mt(fv,this),this.setDims(),ur(this,Mt(yv,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(Mt(Av,this),{rootClass:{hovered:!0}}))}pointerleave(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(Mt(Av,this),{rootClass:{hovered:!1}}))}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:Ct(Mv,this,Wv).call(this,!0);break;case 1:case 3:Ct(Mv,this,Wv).call(this,!1)}}select(){var e;super.select(),Mt(Av,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(Mt(Av,this),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),Mt(Av,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(Mt(Av,this),{rootClass:{selected:!1}}),Mt(xv,this)||Ct(Mv,this,Wv).call(this,!1))}get _mustFixPosition(){return!Mt(xv,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(Mt(_v,this),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(Mt(Av,this),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,n){let{target:i,x:r,y:s}=n;const{x:a,y:o,width:l,height:c}=i.getBoundingClientRect(),u=new AbortController,h=e.combinedSignal(u),d=t=>{u.abort(),Ct(Pv,this,qv).call(this,e,t)};window.addEventListener("blur",d,{signal:h}),window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("pointerdown",ki,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",xi,{signal:h}),i.addEventListener("pointermove",Ct(Pv,this,Vv).bind(this,e),{signal:h}),this._freeHighlight=new cv({x:r,y:s},[a,o,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(e,t,n){let i=null;if(e instanceof Pg){const{data:{quadPoints:t,rect:n,rotation:r,id:s,color:a,opacity:o,popupRef:l,richText:c,contentsObj:u,creationDate:h,modificationDate:d},parent:{page:{pageNumber:p}}}=e;i=e={annotationType:hn.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:t,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:c,comment:(null===u||void 0===u?void 0:u.str)||null,creationDate:h,modificationDate:d}}else if(e instanceof Tg){const{data:{inkLists:t,rect:n,rotation:r,id:s,color:a,borderStyle:{rawWidth:o},popupRef:l,richText:c,contentsObj:u,creationDate:h,modificationDate:d},parent:{page:{pageNumber:p}}}=e;i=e={annotationType:hn.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:t,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:c,comment:(null===u||void 0===u?void 0:u.str)||null,creationDate:h,modificationDate:d}}const{color:r,quadPoints:s,inkLists:a,opacity:o}=e,l=await super.deserialize(e,t,n);l.color=ni.makeHexColor(...r),l.opacity=o||1,a&&Pt(Cv,l,e.thickness),l._initialData=i,e.comment&&l.setCommentData(e);const[c,u]=l.pageDimensions,[h,d]=l.pageTranslation;if(s){const e=Pt(pv,l,[]);for(let t=0;t<s.length;t+=8)e.push({x:(s[t]-h)/c,y:1-(s[t+1]-d)/u,width:(s[t+2]-s[t])/c,height:(s[t+1]-s[t+5])/u});Ct(Mv,l,Rv).call(l),Ct(Mv,l,Lv).call(l),l.rotate(l.rotation)}else if(a){Pt(xv,l,!0);const e=a[0],n={x:e[0]-h,y:u-(e[1]-d)},i=new cv(n,[0,0,c,u],1,Mt(Cv,l)/2,!0,.001);for(let t=0,a=e.length;t<a;t+=2)n.x=e[t]-h,n.y=u-(e[t+1]-d),i.add(n);const{id:r,clipPathId:s}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:i.toSVGPath()}},!0,!0);Ct(Mv,l,Ov).call(l,{highlightOutlines:i.getOutlines(),highlightId:r,clipPathId:s}),Ct(Mv,l,Lv).call(l),l.rotate(l.parentRotation)}return l}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=bo._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:Mt(Cv,this),quadPoints:Ct(Mv,this,zv).call(this),outlines:Ct(Mv,this,Hv).call(this,n.rect)}),this.addComment(n),this.annotationElementId&&!Ct(Mv,this,Gv).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}function Rv(){const e=new ev(Mt(pv,this),.001);Pt(wv,this,e.getOutlines()),[this.x,this.y,this.width,this.height]=Mt(wv,this).box;const t=new ev(Mt(pv,this),.0025,.001,"ltr"===this._uiManager.direction);Pt(mv,this,t.getOutlines());const{firstPoint:n}=Mt(wv,this);Pt(kv,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]);const{lastPoint:i}=Mt(mv,this);Pt(Sv,this,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])}function Ov(e){let{highlightOutlines:t,highlightId:n,clipPathId:i}=e;Pt(wv,this,t);if(Pt(mv,this,t.getNewOutline(Mt(Cv,this)/2+1.5,.0025)),n>=0)Pt(_v,this,n),Pt(fv,this,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),Pt(Av,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:Mt(mv,this).box,path:{d:Mt(mv,this).toSVGPath()}},!0));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(Mt(_v,this),{bbox:Fv.call(qt,Mt(wv,this).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(Mt(Av,this),{bbox:Fv.call(qt,Mt(mv,this).box,e),path:{d:Mt(mv,this).toSVGPath()}})}const[r,s,a,o]=t.box;switch(this.rotation){case 0:this.x=r,this.y=s,this.width=a,this.height=o;break;case 90:{const[e,t]=this.parentDimensions;this.x=s,this.y=1-r,this.width=a*t/e,this.height=o*e/t;break}case 180:this.x=1-r,this.y=1-s,this.width=a,this.height=o;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-s,this.y=r,this.width=a*t/e,this.height=o*e/t;break}}const{firstPoint:l}=t;Pt(kv,this,[(l[0]-r)/a,(l[1]-s)/o]);const{lastPoint:c}=Mt(mv,this);Pt(Sv,this,[(c[0]-r)/a,(c[1]-s)/o])}function Nv(e){const t=(e,t)=>{this.color=e,this.opacity=t,this.onUpdatedColor()},n=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,qt._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}function Iv(e){const t=Mt(Cv,this),n=e=>{Pt(Cv,this,e),Ct(Mv,this,Dv).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:dn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function Dv(e){Mt(xv,this)&&(Ct(Mv,this,Ov).call(this,{highlightOutlines:Mt(wv,this).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}function jv(){null!==Mt(_v,this)&&this.parent&&(this.parent.drawLayer.remove(Mt(_v,this)),Pt(_v,this,null),this.parent.drawLayer.remove(Mt(Av,this)),Pt(Av,this,null))}function Lv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===Mt(_v,this)&&(({id:kt(Pt,[_v,this])._,clipPathId:kt(Pt,[fv,this])._}=e.drawLayer.draw({bbox:Mt(wv,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:Mt(xv,this)},path:{d:Mt(wv,this).toSVGPath()}},!1,!0)),Pt(Av,this,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:Mt(xv,this)},bbox:Mt(mv,this).box,path:{d:Mt(mv,this).toSVGPath()}},Mt(xv,this))),Mt(yv,this)&&(Mt(yv,this).style.clipPath=Mt(fv,this)))}function Fv(e,t){let[n,i,r,s]=e;switch(t){case 90:return[1-i-s,n,s,r];case 180:return[1-n-r,1-i-s,r,s];case 270:return[i,1-n-r,s,r]}return[n,i,r,s]}function Bv(e){qt._keyboardManager.exec(this,e)}function Wv(e){if(!Mt(hv,this))return;const t=window.getSelection();e?t.setPosition(Mt(hv,this),Mt(dv,this)):t.setPosition(Mt(vv,this),Mt(bv,this))}function Uv(){return Mt(xv,this)?this.rotation:0}function zv(){if(Mt(xv,this))return null;const[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,r=Mt(pv,this),s=new Float32Array(8*r.length);let a=0;for(const{x:o,y:l,width:c,height:u}of r){const r=o*e+n,h=(1-l)*t+i;s[a]=s[a+4]=r,s[a+1]=s[a+3]=h,s[a+2]=s[a+6]=r+c*e,s[a+5]=s[a+7]=h-u*t,a+=8}return s}function Hv(e){return Mt(wv,this).serialize(e,Ct(Mv,this,Uv).call(this))}function Vv(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function qv(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function Gv(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((e,n)=>e!==t[n])}qt=Pv,(0,Yt.A)(Pv,"_defaultColor",null),(0,Yt.A)(Pv,"_defaultOpacity",1),(0,Yt.A)(Pv,"_defaultThickness",12),(0,Yt.A)(Pv,"_type","highlight"),(0,Yt.A)(Pv,"_editorType",hn.HIGHLIGHT),(0,Yt.A)(Pv,"_freeHighlightId",-1),(0,Yt.A)(Pv,"_freeHighlight",null),(0,Yt.A)(Pv,"_freeHighlightClipId","");var Kv=new WeakMap;class Xv{constructor(){Et(this,Kv,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){Mt(Kv,this)[e]=t}toSVGProperties(){const e=Mt(Kv,this);return Pt(Kv,this,Object.create(null)),{root:e}}reset(){Pt(Kv,this,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){Wn("Not implemented")}}var Yv=new WeakMap,Jv=new WeakMap,Qv=new WeakSet;class $v extends bo{constructor(e){super(e),At(this,Qv),Et(this,Yv,null),Et(this,Jv,void 0),(0,Yt.A)(this,"_colorPicker",null),(0,Yt.A)(this,"_drawId",null),Pt(Jv,this,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;null===(e=this._colorPicker)||void 0===e||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(Ct(Qv,this,Zv).call(this,e),Ct(Qv,this,nb).call(this))}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[i,r]of Object.entries(t))n.has(i)?Object.assign(e[i],r):e[i]=r;return e}static getDefaultDrawingOptions(e){Wn("Not implemented")}static get typesMap(){Wn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(ob._.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)e.push([n,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,i]of this.constructor.typesMap)e.push([n,t[i]]);return e}_updateProperty(e,t,n){const i=this._drawingOptions,r=i[t],s=n=>{var r;i.updateProperty(t,n);const s=Mt(Yv,this).updateProperty(t,n);s&&Ct(Qv,this,sb).call(this,s),null===(r=this.parent)||void 0===r||r.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:s.bind(this,n),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,$v._mergeSVGProperties(Mt(Yv,this).getPathResizingSVGProperties(Ct(Qv,this,rb).call(this)),{bbox:Ct(Qv,this,ab).call(this)}))}_onResized(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,$v._mergeSVGProperties(Mt(Yv,this).getPathResizedSVGProperties(Ct(Qv,this,rb).call(this)),{bbox:Ct(Qv,this,ab).call(this)}))}_onTranslating(e,t){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:Ct(Qv,this,ab).call(this)})}_onTranslated(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,$v._mergeSVGProperties(Mt(Yv,this).getPathTranslatedSVGProperties(Ct(Qv,this,rb).call(this),this.parentDimensions),{bbox:Ct(Qv,this,ab).call(this)}))}_onStartDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,Mt(Jv,this)&&(Pt(Jv,this,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){Ct(Qv,this,tb).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(Ct(Qv,this,nb).call(this),Ct(Qv,this,sb).call(this,Mt(Yv,this).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),Ct(Qv,this,tb).call(this);else if(e){var n;this._uiManager.addShouldRescale(this),Ct(Qv,this,nb).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,$v._mergeSVGProperties({bbox:Ct(Qv,this,ab).call(this)},Mt(Yv,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&Ct(Qv,this,sb).call(this,Mt(Yv,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");return n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,i,r){Wn("Not implemented")}static startDrawing(e,t,n,i){var r;const{target:s,offsetX:a,offsetY:o,pointerId:l,pointerType:c}=i;if(hr.isInitializedAndDifferentPointerType(c))return;const{viewport:{rotation:u}}=e,{width:h,height:d}=s.getBoundingClientRect(),p=lb._=new AbortController,f=e.combinedSignal(p);hr.setPointer(c,l),window.addEventListener("pointerup",e=>{hr.isSamePointerIdOrRemove(e.pointerId)&&this._endDraw(e)},{signal:f}),window.addEventListener("pointercancel",e=>{hr.isSamePointerIdOrRemove(e.pointerId)&&this._currentParent.endDrawingSession()},{signal:f}),window.addEventListener("pointerdown",e=>{hr.isSamePointerType(e.pointerType)&&(hr.initializeAndAddPointerId(e.pointerId),ob._.isCancellable()&&(ob._.removeLastElement(),ob._.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",xi,{signal:f}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:f}),s.addEventListener("touchmove",e=>{hr.isSameTimeStamp(e.timeStamp)&&ki(e)},{signal:f}),e.toggleDrawing(),null===(r=t._editorUndoBar)||void 0===r||r.hide(),ob._?e.drawLayer.updateProperties(this._currentDrawId,ob._.startNew(a,o,h,d,u)):(t.updateUIForDefaultProperties(this),ob._=this.createDrawerInstance(a,o,h,d,u),cb._=this.getDefaultDrawingOptions(),this._currentParent=e,({id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(cb._.toSVGProperties(),ob._.defaultSVGProperties),!0,!1)))}static _drawMove(e){if(hr.isSameTimeStamp(e.timeStamp),!ob._)return;const{offsetX:t,offsetY:n,pointerId:i}=e;hr.isSamePointerId(i)&&(hr.isUsingMultiplePointers()?this._endDraw(e):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,ob._.add(t,n)),hr.setTimeStamp(e.timeStamp),ki(e)))}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,ob._=null,cb._=null,hr.clearPointerType(),hr.clearTimeStamp()),lb._&&(lb._.abort(),lb._=null,hr.clearPointerIds())}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),(null===e||void 0===e?void 0:e.target)===t.div&&t.drawLayer.updateProperties(this._currentDrawId,ob._.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const e=ob._,n=this._currentDrawId,i=e.getLastElement();return void t.addCommands({cmd:()=>{t.drawLayer.updateProperties(n,e.setLastElement(i))},undo:()=>{t.drawLayer.updateProperties(n,e.removeLastElement())},mustExec:!1,type:dn.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(dn.DRAW_STEP),!ob._.isEmpty()){const{pageDimensions:[n,i],scale:r}=t,s=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ob._.getOutlines(n*r,i*r,r,this._INNER_MARGIN),drawingOptions:cb._,mustBeCommitted:!e});return this._cleanup(!0),s}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,i,r,s){Wn("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}=t.viewport,o=this.deserializeDraw(s,a,i,r,this._INNER_MARGIN,e),l=await super.deserialize(e,t,n);return l.createDrawingOptions(e),Ct(Qv,l,Zv).call(l,{drawOutlines:o}),Ct(Qv,l,nb).call(l),l.onScaleChanging(),l.rotate(),l}serializeDraw(e){const[t,n]=this.pageTranslation,[i,r]=this.pageDimensions;return Mt(Yv,this).serialize([t,n,i,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}function Zv(e){let{drawOutlines:t,drawId:n,drawingOptions:i}=e;Pt(Yv,this,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-".concat(this.editorType,"-added-alert")),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=Ct(Qv,this,eb).call(this,t,this.parent),Ct(Qv,this,sb).call(this,t.box)}function eb(e,t){const{id:n}=t.drawLayer.draw(Gt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}function tb(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function nb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===e||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=Ct(Qv,this,eb).call(this,Mt(Yv,this),e)):this.parent.drawLayer.updateParent(this._drawId,e.drawLayer))}function ib(e){let[t,n,i,r]=e;const{parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[n,1-t,i*(a/s),r*(s/a)];case 180:return[1-t,1-n,i,r];case 270:return[1-n,t,i*(a/s),r*(s/a)];default:return[t,n,i,r]}}function rb(){const{x:e,y:t,width:n,height:i,parentDimensions:[r,s],rotation:a}=this;switch(a){case 90:return[1-t,e,n*(r/s),i*(s/r)];case 180:return[1-e,1-t,n,i];case 270:return[t,1-e,n*(r/s),i*(s/r)];default:return[e,t,n,i]}}function sb(e){[this.x,this.y,this.width,this.height]=Ct(Qv,this,ib).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}function ab(){const{x:e,y:t,width:n,height:i,rotation:r,parentRotation:s,parentDimensions:[a,o]}=this;switch((4*r+s)/90){case 1:return[1-t-i,e,i,n];case 2:return[1-e-n,1-t-i,n,i];case 3:return[t,1-e-n,i,n];case 4:return[e,t-n*(a/o),i*(o/a),n*(a/o)];case 5:return[1-t,e,n*(a/o),i*(o/a)];case 6:return[1-e-i*(o/a),1-t,i*(o/a),n*(a/o)];case 7:return[t-n*(a/o),1-e-i*(o/a),n*(a/o),i*(o/a)];case 8:return[e-n,t-i,n,i];case 9:return[1-t,e-n,i,n];case 10:return[1-e,1-t,n,i];case 11:return[t-i,1-e,i,n];case 12:return[e-i*(o/a),t,i*(o/a),n*(a/o)];case 13:return[1-t-n*(a/o),e-i*(o/a),n*(a/o),i*(o/a)];case 14:return[1-e,1-t-n*(a/o),i*(o/a),n*(a/o)];case 15:return[t,1-e,n*(a/o),i*(o/a)];default:return[e,t,n,i]}}Gt=$v,(0,Yt.A)($v,"_currentDrawId",-1),(0,Yt.A)($v,"_currentParent",null);var ob={_:null},lb={_:null},cb={_:null};(0,Yt.A)($v,"_INNER_MARGIN",3);var ub=new WeakMap,hb=new WeakMap,db=new WeakMap,pb=new WeakMap,fb=new WeakMap,gb=new WeakMap,mb=new WeakMap,vb=new WeakMap,bb=new WeakMap,yb=new WeakMap,wb=new WeakMap,_b=new WeakSet;class xb{constructor(e,t,n,i,r,s){At(this,_b),Et(this,ub,new Float64Array(6)),Et(this,hb,void 0),Et(this,db,void 0),Et(this,pb,void 0),Et(this,fb,void 0),Et(this,gb,void 0),Et(this,mb,""),Et(this,vb,0),Et(this,bb,new Ib),Et(this,yb,void 0),Et(this,wb,void 0),Pt(yb,this,n),Pt(wb,this,i),Pt(pb,this,r),Pt(fb,this,s),[e,t]=Ct(_b,this,kb).call(this,e,t);const a=Pt(hb,this,[NaN,NaN,NaN,NaN,e,t]);Pt(gb,this,[e,t]),Pt(db,this,[{line:a,points:Mt(gb,this)}]),Mt(ub,this).set(a,0)}updateProperty(e,t){"stroke-width"===e&&Pt(fb,this,t)}isEmpty(){return!Mt(db,this)||0===Mt(db,this).length}isCancellable(){return Mt(gb,this).length<=10}add(e,t){[e,t]=Ct(_b,this,kb).call(this,e,t);const[n,i,r,s]=Mt(ub,this).subarray(2,6),a=e-r,o=t-s;return Math.hypot(Mt(yb,this)*a,Mt(wb,this)*o)<=2?null:(Mt(gb,this).push(e,t),isNaN(n)?(Mt(ub,this).set([r,s,e,t],2),Mt(hb,this).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(Mt(ub,this)[0])&&Mt(hb,this).splice(6,6),Mt(ub,this).set([n,i,r,s,e,t],0),Mt(hb,this).push(...pm.createBezierPoints(n,i,r,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(2===Mt(gb,this).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,r){Pt(yb,this,n),Pt(wb,this,i),Pt(pb,this,r),[e,t]=Ct(_b,this,kb).call(this,e,t);const s=Pt(hb,this,[NaN,NaN,NaN,NaN,e,t]);Pt(gb,this,[e,t]);const a=Mt(db,this).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),Mt(db,this).push({line:s,points:Mt(gb,this)}),Mt(ub,this).set(s,0),Pt(vb,this,0),this.toSVGPath(),null}getLastElement(){return Mt(db,this).at(-1)}setLastElement(e){return Mt(db,this)?(Mt(db,this).push(e),Pt(hb,this,e.line),Pt(gb,this,e.points),Pt(vb,this,0),{path:{d:this.toSVGPath()}}):Mt(bb,this).setLastElement(e)}removeLastElement(){if(!Mt(db,this))return Mt(bb,this).removeLastElement();Mt(db,this).pop(),Pt(mb,this,"");for(let e=0,t=Mt(db,this).length;e<t;e++){const{line:t,points:n}=Mt(db,this)[e];Pt(hb,this,t),Pt(gb,this,n),Pt(vb,this,0),this.toSVGPath()}return{path:{d:Mt(mb,this)}}}toSVGPath(){const e=pm.svgRound(Mt(hb,this)[4]),t=pm.svgRound(Mt(hb,this)[5]);if(2===Mt(gb,this).length)return Pt(mb,this,"".concat(Mt(mb,this)," M ").concat(e," ").concat(t," Z")),Mt(mb,this);if(Mt(gb,this).length<=6){const n=Mt(mb,this).lastIndexOf("M");Pt(mb,this,"".concat(Mt(mb,this).slice(0,n)," M ").concat(e," ").concat(t)),Pt(vb,this,6)}if(4===Mt(gb,this).length){const e=pm.svgRound(Mt(hb,this)[10]),t=pm.svgRound(Mt(hb,this)[11]);return Pt(mb,this,"".concat(Mt(mb,this)," L ").concat(e," ").concat(t)),Pt(vb,this,12),Mt(mb,this)}const n=[];0===Mt(vb,this)&&(n.push("M ".concat(e," ").concat(t)),Pt(vb,this,6));for(let i=Mt(vb,this),r=Mt(hb,this).length;i<r;i+=6){const[e,t,r,s,a,o]=Mt(hb,this).slice(i,i+6).map(pm.svgRound);n.push("C".concat(e," ").concat(t," ").concat(r," ").concat(s," ").concat(a," ").concat(o))}return Pt(mb,this,Mt(mb,this)+n.join(" ")),Pt(vb,this,Mt(hb,this).length),Mt(mb,this)}getOutlines(e,t,n,i){const r=Mt(db,this).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),Mt(bb,this).build(Mt(db,this),e,t,n,Mt(pb,this),Mt(fb,this),i),Pt(ub,this,null),Pt(hb,this,null),Pt(db,this,null),Pt(mb,this,null),Mt(bb,this)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}function kb(e,t){return pm._normalizePoint(e,t,Mt(yb,this),Mt(wb,this),Mt(pb,this))}var Sb=new WeakMap,Ab=new WeakMap,Eb=new WeakMap,Cb=new WeakMap,Tb=new WeakMap,Mb=new WeakMap,Pb=new WeakMap,Rb=new WeakMap,Ob=new WeakMap,Nb=new WeakSet;class Ib extends pm{constructor(){super(...arguments),At(this,Nb),Et(this,Sb,void 0),Et(this,Ab,0),Et(this,Eb,void 0),Et(this,Cb,void 0),Et(this,Tb,void 0),Et(this,Mb,void 0),Et(this,Pb,void 0),Et(this,Rb,void 0),Et(this,Ob,void 0)}build(e,t,n,i,r,s,a){Pt(Tb,this,t),Pt(Mb,this,n),Pt(Pb,this,i),Pt(Rb,this,r),Pt(Ob,this,s),Pt(Eb,this,null!==a&&void 0!==a?a:0),Pt(Cb,this,e),Ct(Nb,this,Lb).call(this)}get thickness(){return Mt(Ob,this)}setLastElement(e){return Mt(Cb,this).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return Mt(Cb,this).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of Mt(Cb,this))if(e.push("M".concat(pm.svgRound(t[4])," ").concat(pm.svgRound(t[5]))),6!==t.length)if(12===t.length&&isNaN(t[6]))e.push("L".concat(pm.svgRound(t[10])," ").concat(pm.svgRound(t[11])));else for(let n=6,i=t.length;n<i;n+=6){const[i,r,s,a,o,l]=t.subarray(n,n+6).map(pm.svgRound);e.push("C".concat(i," ").concat(r," ").concat(s," ").concat(a," ").concat(o," ").concat(l))}else e.push("Z");return e.join("")}serialize(e,t){let[n,i,r,s]=e;const a=[],o=[],[l,c,u,h]=Ct(Nb,this,jb).call(this);let d,p,f,g,m,v,b,y,w;switch(Mt(Rb,this)){case 0:w=pm._rescale,d=n,p=i+s,f=r,g=-s,m=n+l*r,v=i+(1-c-h)*s,b=n+(l+u)*r,y=i+(1-c)*s;break;case 90:w=pm._rescaleAndSwap,d=n,p=i,f=r,g=s,m=n+c*r,v=i+l*s,b=n+(c+h)*r,y=i+(l+u)*s;break;case 180:w=pm._rescale,d=n+r,p=i,f=-r,g=s,m=n+(1-l-u)*r,v=i+c*s,b=n+(1-l)*r,y=i+(c+h)*s;break;case 270:w=pm._rescaleAndSwap,d=n+r,p=i+s,f=-r,g=-s,m=n+(1-c-h)*r,v=i+(1-l-u)*s,b=n+(1-c)*r,y=i+(1-l)*s}for(const{line:_,points:x}of Mt(Cb,this))a.push(w(_,d,p,f,g,t?new Array(_.length):null)),o.push(w(x,d,p,f,g,t?new Array(x.length):null));return{lines:a,points:o,rect:[m,v,b,y]}}static deserialize(e,t,n,i,r,s){let{paths:{lines:a,points:o},rotation:l,thickness:c}=s;const u=[];let h,d,p,f,g;switch(l){case 0:g=pm._rescale,h=-e/n,d=t/i+1,p=1/n,f=-1/i;break;case 90:g=pm._rescaleAndSwap,h=-t/i,d=-e/n,p=1/i,f=1/n;break;case 180:g=pm._rescale,h=e/n+1,d=-t/i,p=-1/n,f=1/i;break;case 270:g=pm._rescaleAndSwap,h=t/i+1,d=e/n+1,p=-1/i,f=-1/n}if(!a){a=[];for(const e of o){const t=e.length;if(2===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}const n=new Float32Array(3*(t-2));a.push(n);let[i,r,s,o]=e.subarray(0,4);n.set([NaN,NaN,NaN,NaN,i,r],0);for(let a=4;a<t;a+=2){const t=e[a],l=e[a+1];n.set(pm.createBezierPoints(i,r,s,o,t,l),3*(a-2)),[i,r,s,o]=[s,o,t,l]}}}for(let v=0,b=a.length;v<b;v++)u.push({line:g(a[v].map(e=>null!==e&&void 0!==e?e:NaN),h,d,p,f),points:g(o[v].map(e=>null!==e&&void 0!==e?e:NaN),h,d,p,f)});const m=new this.prototype.constructor;return m.build(u,n,i,1,l,c,r),m}get box(){return Mt(Sb,this)}updateProperty(e,t){return"stroke-width"===e?Ct(Nb,this,Fb).call(this,t):null}updateParentDimensions(e,t){let[n,i]=e;const[r,s]=Ct(Nb,this,Db).call(this);Pt(Tb,this,n),Pt(Mb,this,i),Pt(Pb,this,t);const[a,o]=Ct(Nb,this,Db).call(this),l=a-r,c=o-s,u=Mt(Sb,this);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(e){return Pt(Ab,this,e),{path:{transform:this.rotationTransform}}}get viewBox(){return Mt(Sb,this).map(pm.svgRound).join(" ")}get defaultProperties(){const[e,t]=Mt(Sb,this);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(pm.svgRound(e)," ").concat(pm.svgRound(t))}}}get rotationTransform(){const[,,e,t]=Mt(Sb,this);let n=0,i=0,r=0,s=0,a=0,o=0;switch(Mt(Ab,this)){case 90:i=t/e,r=-e/t,a=e;break;case 180:n=-1,s=-1,a=e,o=t;break;case 270:i=-t/e,r=e/t,o=t;break;default:return""}return"matrix(".concat(n," ").concat(i," ").concat(r," ").concat(s," ").concat(pm.svgRound(a)," ").concat(pm.svgRound(o),")")}getPathResizingSVGProperties(e){let[t,n,i,r]=e;const[s,a]=Ct(Nb,this,Db).call(this),[o,l,c,u]=Mt(Sb,this);if(Math.abs(c-s)<=pm.PRECISION||Math.abs(u-a)<=pm.PRECISION){const e=t+i/2-(o+c/2),s=n+r/2-(l+u/2);return{path:{"transform-origin":"".concat(pm.svgRound(t)," ").concat(pm.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(e," ").concat(s,")")}}}const h=(i-2*s)/(c-2*s),d=(r-2*a)/(u-2*a),p=c/i,f=u/r;return{path:{"transform-origin":"".concat(pm.svgRound(o)," ").concat(pm.svgRound(l)),transform:"".concat(this.rotationTransform," scale(").concat(p," ").concat(f,") ")+"translate(".concat(pm.svgRound(s)," ").concat(pm.svgRound(a),") scale(").concat(h," ").concat(d,") ")+"translate(".concat(pm.svgRound(-s)," ").concat(pm.svgRound(-a),")")}}}getPathResizedSVGProperties(e){let[t,n,i,r]=e;const[s,a]=Ct(Nb,this,Db).call(this),o=Mt(Sb,this),[l,c,u,h]=o;if(o[0]=t,o[1]=n,o[2]=i,o[3]=r,Math.abs(u-s)<=pm.PRECISION||Math.abs(h-a)<=pm.PRECISION){const e=t+i/2-(l+u/2),s=n+r/2-(c+h/2);for(const{line:t,points:n}of Mt(Cb,this))pm._translate(t,e,s,t),pm._translate(n,e,s,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(pm.svgRound(t)," ").concat(pm.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(i-2*s)/(u-2*s),p=(r-2*a)/(h-2*a),f=-d*(l+s)+t+s,g=-p*(c+a)+n+a;if(1!==d||1!==p||0!==f||0!==g)for(const{line:m,points:v}of Mt(Cb,this))pm._rescale(m,f,g,d,p,m),pm._rescale(v,f,g,d,p,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(pm.svgRound(t)," ").concat(pm.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[n,i]=e;const[r,s]=t,a=Mt(Sb,this),o=n-a[0],l=i-a[1];if(Mt(Tb,this)===r&&Mt(Mb,this)===s)for(const{line:c,points:u}of Mt(Cb,this))pm._translate(c,o,l,c),pm._translate(u,o,l,u);else{const e=Mt(Tb,this)/r,t=Mt(Mb,this)/s;Pt(Tb,this,r),Pt(Mb,this,s);for(const{line:n,points:i}of Mt(Cb,this))pm._rescale(n,o,l,e,t,n),pm._rescale(i,o,l,e,t,i);a[2]*=e,a[3]*=t}return a[0]=n,a[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(pm.svgRound(n)," ").concat(pm.svgRound(i))}}}get defaultSVGProperties(){const e=Mt(Sb,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(pm.svgRound(e[0])," ").concat(pm.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}}function Db(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt(Ob,this);const t=Mt(Eb,this)+e/2*Mt(Pb,this);return Mt(Rb,this)%180===0?[t/Mt(Tb,this),t/Mt(Mb,this)]:[t/Mt(Mb,this),t/Mt(Tb,this)]}function jb(){const[e,t,n,i]=Mt(Sb,this),[r,s]=Ct(Nb,this,Db).call(this,0);return[e+r,t+s,n-2*r,i-2*s]}function Lb(){const e=Pt(Sb,this,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of Mt(Cb,this)){if(i.length<=12){for(let t=4,n=i.length;t<n;t+=6)ni.pointBoundingBox(i[t],i[t+1],e);continue}let t=i[4],n=i[5];for(let r=6,s=i.length;r<s;r+=6){const[s,a,o,l,c,u]=i.subarray(r,r+6);ni.bezierBoundingBox(t,n,s,a,o,l,c,u,e),t=c,n=u}}const[t,n]=Ct(Nb,this,Db).call(this);e[0]=ci(e[0]-t,0,1),e[1]=ci(e[1]-n,0,1),e[2]=ci(e[2]+t,0,1),e[3]=ci(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}function Fb(e){const[t,n]=Ct(Nb,this,Db).call(this);Pt(Ob,this,e);const[i,r]=Ct(Nb,this,Db).call(this),[s,a]=[i-t,r-n],o=Mt(Sb,this);return o[0]-=s,o[1]-=a,o[2]+=2*s,o[3]+=2*a,o}class Bb extends Xv{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:bo._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){"stroke-width"===e&&(null!==t&&void 0!==t||(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Bb(this._viewParameters);return e.updateAll(this),e}}var Wb=new WeakSet;class Ub extends $v{constructor(e){super((0,a.A)((0,a.A)({},e),{},{name:"inkEditor"})),At(this,Wb),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){bo.initialize(e,t),this._defaultDrawingOptions=new Bb(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Vn(this,"typesMap",new Map([[dn.INK_THICKNESS,"stroke-width"],[dn.INK_COLOR,"stroke"],[dn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,i,r){return new xb(e,t,n,i,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,i,r,s){return Ib.deserialize(e,t,n,i,r,s)}static async deserialize(e,t,n){let i=null;if(e instanceof Tg){const{data:{inkLists:t,rect:n,rotation:r,id:s,color:a,opacity:o,borderStyle:{rawWidth:l},popupRef:c,richText:u,contentsObj:h,creationDate:d,modificationDate:p},parent:{page:{pageNumber:f}}}=e;i=e={annotationType:hn.INK,color:Array.from(a),thickness:l,opacity:o,paths:{points:t},boxes:null,pageIndex:f-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:c,richText:u,comment:(null===h||void 0===h?void 0:h.str)||null,creationDate:d,modificationDate:p}}const r=await super.deserialize(e,t,n);return r._initialData=i,e.comment&&r.setCommentData(e),r}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Kp(this)),[["colorPicker",this._colorPicker]]}get colorType(){return dn.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:n,opacity:i}=e;this._drawingOptions=Ub.getDefaultDrawingOptions({stroke:ni.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":r,"stroke-width":s}}=this,a=Object.assign(super.serialize(e),{color:bo._colorManager.convert(i),opacity:r,thickness:s,paths:{lines:t,points:n}});return this.addComment(a),e?(a.isCopy=!0,a):this.annotationElementId&&!Ct(Wb,this,zb).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}function zb(e){const{color:t,thickness:n,opacity:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((e,n)=>e!==t[n])||e.thickness!==n||e.opacity!==i||e.pageIndex!==r}(0,Yt.A)(Ub,"_type","ink"),(0,Yt.A)(Ub,"_editorType",hn.INK),(0,Yt.A)(Ub,"_defaultDrawingOptions",null);class Hb extends Ib{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}class Vb{static extractContoursFromText(e,t,n,i,r,s){let{fontFamily:a,fontStyle:o,fontWeight:l}=t,c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const h=u.font="".concat(o," ").concat(l," ").concat(200,"px ").concat(a),{actualBoundingBoxLeft:d,actualBoundingBoxRight:p,actualBoundingBoxAscent:f,actualBoundingBoxDescent:g,fontBoundingBoxAscent:m,fontBoundingBoxDescent:v,width:b}=u.measureText(e),y=1.5,w=Math.ceil(Math.max(Math.abs(d)+Math.abs(p)||0,b)*y),_=Math.ceil(Math.max(Math.abs(f)+Math.abs(g)||200,Math.abs(m)+Math.abs(v)||200)*y);c=new OffscreenCanvas(w,_),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=h,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,w,_),u.fillStyle="black",u.fillText(e,.5*w/2,1.5*_/2);const x=Ct(Vb,this,Zb).call(this,u.getImageData(0,0,w,_).data),k=Ct(Vb,this,$b).call(this,x),S=Ct(Vb,this,ey).call(this,k),A=Ct(Vb,this,Xb).call(this,x,w,_,S);return this.processDrawnLines({lines:{curves:A,width:w,height:_},pageWidth:n,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,r){const[s,a,o]=Ct(Vb,this,ty).call(this,e),[l,c]=Ct(Vb,this,Qb).call(this,s,a,o,Math.hypot(a,o)*Ct(Vb,this,ny)._.sigmaSFactor,Ct(Vb,this,ny)._.sigmaR,Ct(Vb,this,ny)._.kernelSize),u=Ct(Vb,this,ey).call(this,c),h=Ct(Vb,this,Xb).call(this,l,a,o,u);return this.processDrawnLines({lines:{curves:h,width:a,height:o},pageWidth:t,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines(e){var t;let{lines:n,pageWidth:i,pageHeight:r,rotation:s,innerMargin:a,mustSmooth:o,areContours:l}=e;s%180!==0&&([i,r]=[r,i]);const{curves:c,width:u,height:h}=n,d=null!==(t=n.thickness)&&void 0!==t?t:0,p=[],f=Math.min(i/u,r/h),g=f/i,m=f/r,v=[];for(const{points:y}of c){const e=o?Ct(Vb,this,Jb).call(this,y):y;if(!e)continue;v.push(e);const t=e.length,n=new Float32Array(t),i=new Float32Array(3*(2===t?2:t-2));if(p.push({line:i,points:n}),2===t){n[0]=e[0]*g,n[1]=e[1]*m,i.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[r,s,a,l]=e;r*=g,s*=m,a*=g,l*=m,n.set([r,s,a,l],0),i.set([NaN,NaN,NaN,NaN,r,s],0);for(let o=4;o<t;o+=2){const t=n[o]=e[o]*g,c=n[o+1]=e[o+1]*m;i.set(pm.createBezierPoints(r,s,a,l,t,c),3*(o-2)),[r,s,a,l]=[a,l,t,c]}}if(0===p.length)return null;const b=l?new Hb:new Ib;return b.build(p,i,r,1,s,l?0:d,a),{outline:b,newCurves:v,areContours:l,thickness:d,width:u,height:h}}static async compressSignature(e){let t,{outlines:n,areContours:i,thickness:r,width:s,height:a}=e,o=1/0,l=-1/0,c=0;for(const b of n){c+=b.length;for(let e=2,t=b.length;e<t;e++){const t=b[e]-b[e-2];o=Math.min(o,t),l=Math.max(l,t)}}t=o>=-128&&l<=127?Int8Array:o>=-32768&&l<=32767?Int16Array:Int32Array;const u=n.length,h=8+3*u,d=new Uint32Array(h);let p=0;d[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*t.BYTES_PER_ELEMENT,d[p++]=0,d[p++]=s,d[p++]=a,d[p++]=i?0:1,d[p++]=Math.max(0,Math.floor(null!==r&&void 0!==r?r:0)),d[p++]=u,d[p++]=t.BYTES_PER_ELEMENT;for(const b of n)d[p++]=b.length-2,d[p++]=b[0],d[p++]=b[1];const f=new CompressionStream("deflate-raw"),g=f.writable.getWriter();await g.ready,g.write(d);const m=t.prototype.constructor;for(const b of n){const e=new m(b.length-2);for(let t=2,n=b.length;t<n;t++)e[t-2]=b[t]-b[t-2];g.write(e)}g.close();const v=await new Response(f.readable).arrayBuffer();return ui(new Uint8Array(v))}static async decompressSignature(e){try{const l=(a=e,Uint8Array.fromBase64?Uint8Array.fromBase64(a):Zn(atob(a))),{readable:c,writable:u}=new DecompressionStream("deflate-raw"),h=u.getWriter();await h.ready,h.write(l).then(async()=>{await h.ready,await h.close()}).catch(()=>{});let d=null,p=0;var t,n=!1,i=!1;try{for(var r,s=function(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new Jt(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(c);n=!(r=await s.next()).done;n=!1){const e=r.value;d||(d=new Uint8Array(new Uint32Array(e.buffer,0,4)[0])),d.set(e,p),p+=e.length}}catch(o){i=!0,t=o}finally{try{n&&null!=s.return&&await s.return()}finally{if(i)throw t}}const f=new Uint32Array(d.buffer,0,d.length>>2),g=f[1];if(0!==g)throw new Error("Invalid version: ".concat(g));const m=f[2],v=f[3],b=0===f[4],y=f[5],w=f[6],_=f[7],x=[],k=(8+3*w)*Uint32Array.BYTES_PER_ELEMENT;let S;switch(_){case Int8Array.BYTES_PER_ELEMENT:S=new Int8Array(d.buffer,k);break;case Int16Array.BYTES_PER_ELEMENT:S=new Int16Array(d.buffer,k);break;case Int32Array.BYTES_PER_ELEMENT:S=new Int32Array(d.buffer,k)}p=0;for(let e=0;e<w;e++){const t=f[3*e+8],n=new Float32Array(t+2);x.push(n);for(let i=0;i<2;i++)n[i]=f[3*e+8+i+1];for(let e=0;e<t;e++)n[e+2]=n[e]+S[p++]}return{areContours:b,thickness:y,outlines:x,width:m,height:v}}catch(O_){return Bn("decompressSignature: ".concat(O_)),null}var a}}function qb(e,t,n,i){return i-=t,0===(n-=e)?i>0?0:4:1===n?i+6:2-i}function Gb(e,t,n,i,r,s,a){const o=Ct(Kt,this,qb).call(this,n,i,r,s);for(let l=0;l<8;l++){const r=(-l+o-a+16)%8;if(0!==e[(n+Ct(Kt,this,iy)._[2*r])*t+(i+Ct(Kt,this,iy)._[2*r+1])])return r}return-1}function Kb(e,t,n,i,r,s,a){const o=Ct(Kt,this,qb).call(this,n,i,r,s);for(let l=0;l<8;l++){const r=(l+o+a+16)%8;if(0!==e[(n+Ct(Kt,this,iy)._[2*r])*t+(i+Ct(Kt,this,iy)._[2*r+1])])return r}return-1}function Xb(e,t,n,i){const r=e.length,s=new Int32Array(r);for(let c=0;c<r;c++)s[c]=e[c]<=i?1:0;for(let c=1;c<n-1;c++)s[c*t]=s[c*t+t-1]=0;for(let c=0;c<t;c++)s[c]=s[t*n-1-c]=0;let a,o=1;const l=[];for(let c=1;c<n-1;c++){a=1;for(let e=1;e<t-1;e++){const n=c*t+e,i=s[n];if(0===i)continue;let r=c,u=e;if(1===i&&0===s[n-1])o+=1,u-=1;else{if(!(i>=1&&0===s[n+1])){1!==i&&(a=Math.abs(i));continue}o+=1,u+=1,i>1&&(a=i)}const h=[e,c],d=u===e+1,p={isHole:d,points:h,id:o,parent:0};let f;l.push(p);for(const e of l)if(e.id===a){f=e;break}f?f.isHole?p.parent=d?f.parent:a:p.parent=d?a:f.parent:p.parent=d?a:0;const g=Ct(Kt,this,Gb).call(this,s,t,c,e,r,u,0);if(-1===g){s[n]=-o,1!==s[n]&&(a=Math.abs(s[n]));continue}let m=Ct(Kt,this,iy)._[2*g],v=Ct(Kt,this,iy)._[2*g+1];const b=c+m,y=e+v;r=b,u=y;let w=c,_=e;for(;;){const i=Ct(Kt,this,Kb).call(this,s,t,w,_,r,u,1);m=Ct(Kt,this,iy)._[2*i],v=Ct(Kt,this,iy)._[2*i+1];const l=w+m,d=_+v;h.push(d,l);const p=w*t+_;if(0===s[p+1]?s[p]=-o:1===s[p]&&(s[p]=o),l===c&&d===e&&w===b&&_===y){1!==s[n]&&(a=Math.abs(s[n]));break}r=w,u=_,w=l,_=d}}}return l}function Yb(e,t,n,i){if(n-t<=4){for(let r=t;r<n-2;r+=2)i.push(e[r],e[r+1]);return}const r=e[t],s=e[t+1],a=e[n-4]-r,o=e[n-3]-s,l=Math.hypot(a,o),c=a/l,u=o/l,h=c*s-u*r,d=o/a,p=1/l,f=Math.atan(d),g=Math.cos(f),m=Math.sin(f),v=p*(Math.abs(g)+Math.abs(m)),b=p*(1-v+v**2),y=Math.max(Math.atan(Math.abs(m+g)*b),Math.atan(Math.abs(m-g)*b));let w=0,_=t;for(let x=t+2;x<n-2;x+=2){const t=Math.abs(h-c*e[x+1]+u*e[x]);t>w&&(_=x,w=t)}w>(l*y)**2?(Ct(Kt,this,Yb).call(this,e,t,_+2,i),Ct(Kt,this,Yb).call(this,e,_,n,i)):i.push(r,s)}function Jb(e){const t=[],n=e.length;return Ct(Kt,this,Yb).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}function Qb(e,t,n,i,r,s){const a=new Float32Array(s**2),o=-2*i**2,l=s>>1;for(let f=0;f<s;f++){const e=(f-l)**2;for(let t=0;t<s;t++)a[f*s+t]=Math.exp((e+(t-l)**2)/o)}const c=new Float32Array(256),u=-2*r**2;for(let f=0;f<256;f++)c[f]=Math.exp(f**2/u);const h=e.length,d=new Uint8Array(h),p=new Uint32Array(256);for(let f=0;f<n;f++)for(let i=0;i<t;i++){const r=f*t+i,o=e[r];let u=0,h=0;for(let d=0;d<s;d++){const r=f+d-l;if(!(r<0||r>=n))for(let n=0;n<s;n++){const p=i+n-l;if(p<0||p>=t)continue;const f=e[r*t+p],g=a[d*s+n]*c[Math.abs(f-o)];u+=f*g,h+=g}}p[d[r]=Math.round(u/h)]++}return[d,p]}function $b(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}function Zb(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,r=1/0;for(let a=0,o=n.length;a<o;a++){const t=n[a]=e[a<<2];i=Math.max(i,t),r=Math.min(r,t)}const s=255/(i-r);for(let a=0,o=n.length;a<o;a++)n[a]=(n[a]-r)*s;return n}function ey(e){let t,n=-1/0,i=-1/0;const r=e.findIndex(e=>0!==e);let s=r,a=r;for(t=r;t<256;t++){const r=e[t];r>n&&(t-s>i&&(i=t-s,a=t-1),n=r,s=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t}function ty(e){const t=e,{width:n,height:i}=e,{maxDim:r}=Ct(Kt,this,ny)._;let s=n,a=i;if(n>r||i>r){let o=n,l=i,c=Math.log2(Math.max(n,i)/r);const u=Math.floor(c);c=c===u?u-1:u;for(let n=0;n<c;n++){s=Math.ceil(o/2),a=Math.ceil(l/2);const n=new OffscreenCanvas(s,a);n.getContext("2d").drawImage(e,0,0,o,l,0,0,s,a),o=s,l=a,e!==t&&e.close(),e=n.transferToImageBitmap()}const h=Math.min(r/s,r/a);s=Math.round(s*h),a=Math.round(a*h)}const o=new OffscreenCanvas(s,a).getContext("2d",{willReadFrequently:!0});o.fillStyle="white",o.fillRect(0,0,s,a),o.filter="grayscale(1)",o.drawImage(e,0,0,e.width,e.height,0,0,s,a);const l=o.getImageData(0,0,s,a).data;return[Ct(Kt,this,Zb).call(this,l),s,a]}Kt=Vb;var ny={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},iy={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};class ry extends Xv{constructor(){super(),super.updateProperties({fill:bo._defaultLineColor,"stroke-width":0})}clone(){const e=new ry;return e.updateAll(this),e}}class sy extends Bb{constructor(e){super(e),super.updateProperties({stroke:bo._defaultLineColor,"stroke-width":1})}clone(){const e=new sy(this._viewParameters);return e.updateAll(this),e}}var ay=new WeakMap,oy=new WeakMap,ly=new WeakMap,cy=new WeakMap;class uy extends $v{constructor(e){super((0,a.A)((0,a.A)({},e),{},{mustBeCommitted:!0,name:"signatureEditor"})),Et(this,ay,!1),Et(this,oy,null),Et(this,ly,null),Et(this,cy,null),this._willKeepAspectRatio=!0,Pt(ly,this,e.signatureData||null),Pt(oy,this,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){bo.initialize(e,t),this._defaultDrawingOptions=new ry,this._defaultDrawnSignatureOptions=new sy(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Vn(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!Mt(oy,this)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasDescription");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),null===this._drawId)if(Mt(ly,this)){const{lines:e,mustSmooth:t,areContours:n,description:i,uuid:r,heightInPage:s}=Mt(ly,this),{rawDims:{pageWidth:a,pageHeight:o},rotation:l}=this.parent.viewport,c=Vb.processDrawnLines({lines:e,pageWidth:a,pageHeight:o,rotation:l,innerMargin:uy._INNER_MARGIN,mustSmooth:t,areContours:n});this.addSignature(c,s,i,r)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:Mt(oy,this)||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){Pt(cy,this,e),this.addEditToolbar()}getUuid(){return Mt(cy,this)}get description(){return Mt(oy,this)}set description(e){Pt(oy,this,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{null===t||void 0===t||t.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:i,height:r}=Mt(ly,this),s=Math.max(i,r);return{areContours:t,outline:Vb.processDrawnLines({lines:{curves:e.map(e=>({points:e})),thickness:n,width:i,height:r},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,i){const{x:r,y:s}=this,{outline:a}=Pt(ly,this,e);let o;Pt(ay,this,a instanceof Hb),this.description=n,Mt(ay,this)?o=uy.getDefaultDrawingOptions():(o=uy._defaultDrawnSignatureOptions.clone(),o.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:o});const[,l]=this.pageDimensions;let c=t/l;c=c>=1?.5:c,this.width*=c/this.height,this.width>=1&&(c*=.9/this.width,this.width=.9),this.height=c,this.setDims(),this.x=r,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return Vb.process(e,t,n,i,uy._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return Vb.extractContoursFromText(e,t,n,i,r,uy._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return Vb.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:uy._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions(e){let{areContours:t,thickness:n}=e;t?this._drawingOptions=uy.getDefaultDrawingOptions():(this._drawingOptions=uy._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,r=Object.assign(super.serialize(e),{isSignature:!0,areContours:Mt(ay,this),color:[0,0,0],thickness:Mt(ay,this)?0:i});return this.addComment(r),e?(r.paths={lines:t,points:n},r.uuid=Mt(cy,this),r.isCopy=!0):r.lines=t,Mt(oy,this)&&(r.accessibilityData={type:"Figure",alt:Mt(oy,this)}),r}static deserializeDraw(e,t,n,i,r,s){return s.areContours?Hb.deserialize(e,t,n,i,r,s):Ib.deserialize(e,t,n,i,r,s)}static async deserialize(e,t,n){var i;const r=await super.deserialize(e,t,n);return Pt(ay,r,e.areContours),r.description=(null===(i=e.accessibilityData)||void 0===i?void 0:i.alt)||"",Pt(cy,r,e.uuid),r}}(0,Yt.A)(uy,"_type","signature"),(0,Yt.A)(uy,"_editorType",hn.SIGNATURE),(0,Yt.A)(uy,"_defaultDrawingOptions",null);var hy=new WeakMap,dy=new WeakMap,py=new WeakMap,fy=new WeakMap,gy=new WeakMap,my=new WeakMap,vy=new WeakMap,by=new WeakMap,yy=new WeakMap,wy=new WeakMap,_y=new WeakMap,xy=new WeakSet;class ky extends bo{constructor(e){super((0,a.A)((0,a.A)({},e),{},{name:"stampEditor"})),At(this,xy),Et(this,hy,null),Et(this,dy,null),Et(this,py,null),Et(this,fy,null),Et(this,gy,null),Et(this,my,""),Et(this,vy,null),Et(this,by,!1),Et(this,yy,null),Et(this,wy,!1),Et(this,_y,!1),Pt(fy,this,e.bitmapUrl),Pt(gy,this,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){bo.initialize(e,t)}static isHandlingMimeForPasting(e){return Ri.includes(e)}static paste(e,t){t.pasteEditor({mode:hn.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!(null===(e=this.altTextData)||void 0===e||!e.altText)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasAltText");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:r,height:s}=e||this.copyCanvas(null,null,!0).imageData,a=await n.guess({name:"altText",request:{data:i,width:r,height:s,channels:i.length/(r*s)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),t&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var e;Mt(dy,this)&&(Pt(hy,this,null),this._uiManager.imageManager.deleteId(Mt(dy,this)),null===(e=Mt(vy,this))||void 0===e||e.remove(),Pt(vy,this,null),Mt(yy,this)&&(clearTimeout(Mt(yy,this)),Pt(yy,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(Mt(dy,this)&&null===Mt(vy,this)&&Ct(xy,this,Ey).call(this),this.isAttachedToDOM||this.parent.add(this))):Mt(dy,this)&&Ct(xy,this,Ey).call(this)}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(Mt(py,this)||Mt(hy,this)||Mt(fy,this)||Mt(gy,this)||Mt(dy,this)||Mt(by,this))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),Mt(by,this)||(Mt(hy,this)?Ct(xy,this,Cy).call(this):Ct(xy,this,Ey).call(this)),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(Pt(dy,this,n),i&&Pt(hy,this,i),Pt(by,this,!1),Ct(xy,this,Cy).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==Mt(yy,this)&&clearTimeout(Mt(yy,this));Pt(yy,this,setTimeout(()=>{Pt(yy,this,null),Ct(xy,this,My).call(this)},200))}copyCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);const{width:i,height:r}=Mt(hy,this),s=new Pi;let a=Mt(hy,this),o=i,l=r,c=null;if(t){if(i>t||r>t){const e=Math.min(t/i,t/r);o=Math.floor(i*e),l=Math.floor(r*e)}c=document.createElement("canvas");const e=c.width=Math.ceil(o*s.sx),n=c.height=Math.ceil(l*s.sy);Mt(wy,this)||(a=Ct(xy,this,Ty).call(this,e,n));const u=c.getContext("2d");u.filter=this._uiManager.hcmFilter;let h="white",d="#cfcfd8";"none"!==this._uiManager.hcmFilter?d="black":Oi.isDarkMode&&(h="#8f8f9d",d="#42414d");const p=15,f=p*s.sx,g=p*s.sy,m=new OffscreenCanvas(2*f,2*g),v=m.getContext("2d");v.fillStyle=h,v.fillRect(0,0,2*f,2*g),v.fillStyle=d,v.fillRect(0,0,f,g),v.fillRect(f,g,f,g),u.fillStyle=u.createPattern(m,"repeat"),u.fillRect(0,0,e,n),u.drawImage(a,0,0,a.width,a.height,0,0,e,n)}let u=null;if(n){let t,n;if(s.symmetric&&a.width<e&&a.height<e)t=a.width,n=a.height;else if(a=Mt(hy,this),i>e||r>e){const s=Math.min(e/i,e/r);t=Math.floor(i*s),n=Math.floor(r*s),Mt(wy,this)||(a=Ct(xy,this,Ty).call(this,t,n))}const o=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});o.drawImage(a,0,0,a.width,a.height,0,0,t,n),u={width:t,height:n,data:o.getImageData(0,0,t,n).data}}return{canvas:c,width:o,height:l,imageData:u}}static async deserialize(e,t,n){let i=null,r=!1;if(e instanceof Ig){var s;const{data:{rect:a,rotation:o,id:l,structParent:c,popupRef:u,richText:h,contentsObj:d,creationDate:p,modificationDate:f},container:g,parent:{page:{pageNumber:m}},canvas:v}=e;let b,y;v?(delete e.canvas,({id:b,bitmap:y}=n.imageManager.getFromCanvas(g.id,v)),v.remove()):(r=!0,e._hasNoCanvas=!0);const w=(null===(s=await t._structTree.getAriaAttributes("".concat(li).concat(l)))||void 0===s?void 0:s.get("aria-label"))||"";i=e={annotationType:hn.STAMP,bitmapId:b,bitmap:y,pageIndex:m-1,rect:a.slice(0),rotation:o,annotationElementId:l,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:w},isSvg:!1,structParent:c,popupRef:u,richText:h,comment:(null===d||void 0===d?void 0:d.str)||null,creationDate:p,modificationDate:f}}const a=await super.deserialize(e,t,n),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:h,accessibilityData:d}=e;r?(n.addMissingCanvas(e.id,a),Pt(by,a,!0)):u&&n.imageManager.isValidId(u)?(Pt(dy,a,u),l&&Pt(hy,a,l)):Pt(fy,a,c),Pt(wy,a,h);const[p,f]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/f,d&&(a.altTextData=d),a._initialData=i,e.comment&&a.setCommentData(e),Pt(_y,a,!!i),a}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(e),{bitmapId:Mt(dy,this),isSvg:Mt(wy,this)});if(this.addComment(n),e)return n.bitmapUrl=Ct(xy,this,Py).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:r}=this.serializeAltText(!1);if(!i&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const e=Ct(xy,this,Ry).call(this,n);if(e.isSame)return null;var s;if(e.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(s=this._initialData.structParent)&&void 0!==s?s:-1;return n.id=this.annotationElementId,delete n.bitmapId,n}if(null===t)return n;t.stamps||(t.stamps=new Map);const a=Mt(wy,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(Mt(dy,this))){if(Mt(wy,this)){const e=t.stamps.get(Mt(dy,this));a>e.area&&(e.area=a,e.serialized.bitmap.close(),e.serialized.bitmap=Ct(xy,this,Py).call(this,!1))}}else t.stamps.set(Mt(dy,this),{area:a,serialized:n}),n.bitmap=Ct(xy,this,Py).call(this,!1);return n}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}function Sy(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(Pt(hy,this,e.bitmap),t||(Pt(dy,this,e.id),Pt(wy,this,e.isSvg)),e.file&&Pt(my,this,e.file.name),Ct(xy,this,Cy).call(this)):this.remove()}function Ay(){if(Pt(py,this,null),this._uiManager.enableWaiting(!1),Mt(vy,this))if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Mt(hy,this))this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});else{if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Mt(hy,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function Ey(){if(Mt(dy,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(Mt(dy,this)).then(e=>Ct(xy,this,Sy).call(this,e,!0)).finally(()=>Ct(xy,this,Ay).call(this));if(Mt(fy,this)){const e=Mt(fy,this);return Pt(fy,this,null),this._uiManager.enableWaiting(!0),void Pt(py,this,this._uiManager.imageManager.getFromUrl(e).then(e=>Ct(xy,this,Sy).call(this,e)).finally(()=>Ct(xy,this,Ay).call(this)))}if(Mt(gy,this)){const e=Mt(gy,this);return Pt(gy,this,null),this._uiManager.enableWaiting(!0),void Pt(py,this,this._uiManager.imageManager.getFromFile(e).then(e=>Ct(xy,this,Sy).call(this,e)).finally(()=>Ct(xy,this,Ay).call(this)))}const e=document.createElement("input");e.type="file",e.accept=Ri.join(",");const t=this._uiManager._signal;Pt(py,this,new Promise(n=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),Ct(xy,this,Sy).call(this,t)}else this.remove();n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>Ct(xy,this,Ay).call(this))),e.click()}function Cy(){var e;const{div:t}=this;let{width:n,height:i}=Mt(hy,this);const[r,s]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,i=this.height*s;else if(n>a*r||i>a*s){const e=Math.min(a*r/n,a*s/i);n*=e,i*=e}this._uiManager.enableWaiting(!1);const o=Pt(vy,this,document.createElement("canvas"));o.setAttribute("role","img"),this.addContainer(o),this.width=n/r,this.height=i/s,this.setDims(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),Ct(xy,this,My).call(this),Mt(_y,this)||(this.parent.addUndoableEditor(this),Pt(_y,this,!0)),this._reportTelemetry({action:"inserted_image"}),Mt(my,this)&&this.div.setAttribute("aria-description",Mt(my,this)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}function Ty(e,t){const{width:n,height:i}=Mt(hy,this);let r=n,s=i,a=Mt(hy,this);for(;r>2*e||s>2*t;){const n=r,i=s;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const o=new OffscreenCanvas(r,s);o.getContext("2d").drawImage(a,0,0,n,i,0,0,r,s),a=o.transferToImageBitmap()}return a}function My(){const[e,t]=this.parentDimensions,{width:n,height:i}=this,r=new Pi,s=Math.ceil(n*e*r.sx),a=Math.ceil(i*t*r.sy),o=Mt(vy,this);if(!o||o.width===s&&o.height===a)return;o.width=s,o.height=a;const l=Mt(wy,this)?Mt(hy,this):Ct(xy,this,Ty).call(this,s,a),c=o.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,s,a)}function Py(e){if(e){if(Mt(wy,this)){const e=this._uiManager.imageManager.getSvgUrl(Mt(dy,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=Mt(hy,this));return e.getContext("2d").drawImage(Mt(hy,this),0,0),e.toDataURL()}if(Mt(wy,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*fi.PDF_TO_CSS_UNITS),i=Math.round(this.height*t*fi.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(n,i);return r.getContext("2d").drawImage(Mt(hy,this),0,0,Mt(hy,this).width,Mt(hy,this).height,0,0,n,i),r.transferToImageBitmap()}return structuredClone(Mt(hy,this))}function Ry(e){var t;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===n,s=((null===(t=e.accessibilityData)||void 0===t?void 0:t.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&s,isSameAltText:s}}(0,Yt.A)(ky,"_type","stamp"),(0,Yt.A)(ky,"_editorType",hn.STAMP);var Oy=new WeakMap,Ny=new WeakMap,Iy=new WeakMap,Dy=new WeakMap,jy=new WeakMap,Ly=new WeakMap,Fy=new WeakMap,By=new WeakMap,Wy=new WeakMap,Uy=new WeakMap,zy=new WeakMap,Hy=new WeakMap,Vy=new WeakMap,qy=new WeakMap,Gy=new WeakMap,Ky=new WeakMap,Xy=new WeakSet;class Yy{constructor(e){let{uiManager:t,pageIndex:n,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:u}=e;At(this,Xy),Et(this,Oy,void 0),Et(this,Ny,!1),Et(this,Iy,null),Et(this,Dy,null),Et(this,jy,null),Et(this,Ly,new Map),Et(this,Fy,!1),Et(this,By,!1),Et(this,Wy,!1),Et(this,Uy,null),Et(this,zy,null),Et(this,Hy,null),Et(this,Vy,null),Et(this,qy,null),Et(this,Gy,-1),Et(this,Ky,void 0);const h=[...nw._.values()];if(!Yy._initialized){Yy._initialized=!0;for(const e of h)e.initialize(u,t)}t.registerEditorTypes(h),Pt(Ky,this,t),this.pageIndex=n,this.div=i,Pt(Oy,this,s),Pt(Iy,this,a),this.viewport=c,Pt(Hy,this,l),this.drawLayer=o,this._structTree=r,Mt(Ky,this).addLayer(this)}get isEmpty(){return 0===Mt(Ly,this).size}get isInvisible(){return this.isEmpty&&Mt(Ky,this).getMode()===hn.NONE}updateToolbar(e){Mt(Ky,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt(Ky,this).getMode();switch(Ct(Xy,this,tw).call(this),e){case hn.NONE:return this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case hn.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case hn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===hn.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of nw._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=Mt(Hy,this))||void 0===t?void 0:t.div)}setEditingState(e){Mt(Ky,this).setEditingState(e)}addCommands(e){Mt(Ky,this).addCommands(e)}cleanUndoStack(e){Mt(Ky,this).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=Mt(Iy,this))||void 0===e||e.togglePointerEvents(t)}async enable(){var e;Pt(Wy,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),null===(e=Mt(qy,this))||void 0===e||e.abort(),Pt(qy,this,null);const t=new Set;for(const i of Tt(Xy,this,Jy))i.enableEditing(),i.show(!0),i.annotationElementId&&(Mt(Ky,this).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const n=Mt(Iy,this);if(n)for(const i of n.getEditableAnnotations()){if(i.hide(),Mt(Ky,this).isDeletedAnnotationElement(i.data.id))continue;if(t.has(i.data.id))continue;const e=await this.deserialize(i);e&&(this.addOrRebuild(e),e.enableEditing())}Pt(Wy,this,!1),Mt(Ky,this)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(Pt(By,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),Mt(Hy,this)&&!Mt(qy,this)){Pt(qy,this,new AbortController);const e=Mt(Ky,this).combinedSignal(Mt(qy,this));Mt(Hy,this).div.addEventListener("pointerdown",e=>{const{clientX:t,clientY:n,timeStamp:i}=e;if(i-Mt(Gy,this)>500)return void Pt(Gy,this,i);Pt(Gy,this,-1);const{classList:r}=this.div;r.toggle("getElements",!0);const s=document.elementsFromPoint(t,n);if(r.toggle("getElements",!1),!this.div.contains(s[0]))return;let a;const o=new RegExp("^".concat(un,"[0-9]+$"));for(const c of s)if(o.test(c.id)){a=c.id;break}if(!a)return;const l=Mt(Ly,this).get(a);null===(null===l||void 0===l?void 0:l.annotationElementId)&&(e.stopPropagation(),e.preventDefault(),l.dblclick(e))},{signal:e,capture:!0})}const e=Mt(Iy,this),t=[];if(e){const i=new Map,r=new Map;for(const e of Tt(Xy,this,Jy)){var n;e.disableEditing(),e.annotationElementId?null===e.serialize()?(r.set(e.annotationElementId,e),null===(n=this.getEditableAnnotation(e.annotationElementId))||void 0===n||n.show(),e.remove()):i.set(e.annotationElementId,e):t.push(e)}const s=e.getEditableAnnotations();for(const e of s){const{id:t}=e.data;if(Mt(Ky,this).isDeletedAnnotationElement(t)){e.updateEdited({deleted:!0});continue}let n=r.get(t);n?(n.resetAnnotationElement(e),n.show(!1),e.show()):(n=i.get(t),n&&(Mt(Ky,this).addChangedExistingAnnotation(n),n.renderAnnotationElement(e)&&n.show(!1)),e.show())}}Ct(Xy,this,tw).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of nw._.values())i.remove("".concat(r._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),null===e||void 0===e||e.updateFakeAnnotations(t),Pt(By,this,!1)}getEditableAnnotation(e){var t;return(null===(t=Mt(Iy,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){Mt(Ky,this).getActive()!==e&&Mt(Ky,this).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,null!==(e=Mt(Hy,this))&&void 0!==e&&e.div&&!Mt(Vy,this)){Pt(Vy,this,new AbortController);const e=Mt(Ky,this).combinedSignal(Mt(Vy,this));Mt(Hy,this).div.addEventListener("pointerdown",Ct(Xy,this,Qy).bind(this),{signal:e}),Mt(Hy,this).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=Mt(Hy,this))&&void 0!==e&&e.div&&Mt(Vy,this)&&(Mt(Vy,this).abort(),Pt(Vy,this,null),Mt(Hy,this).div.classList.remove("highlighting"))}enableClick(){if(Mt(Dy,this))return;Pt(Dy,this,new AbortController);const e=Mt(Ky,this).combinedSignal(Mt(Dy,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null===(e=Mt(Dy,this))||void 0===e||e.abort(),Pt(Dy,this,null)}attach(e){Mt(Ly,this).set(e.id,e);const{annotationElementId:t}=e;t&&Mt(Ky,this).isDeletedAnnotationElement(t)&&Mt(Ky,this).removeDeletedAnnotationElement(e)}detach(e){var t;Mt(Ly,this).delete(e.id),null===(t=Mt(Oy,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!Mt(By,this)&&e.annotationElementId&&Mt(Ky,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),Mt(Ky,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(Mt(Ky,this).addDeletedAnnotationElement(e),bo.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),Mt(Ky,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!Mt(Wy,this)),Mt(Ky,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!Mt(jy,this)&&(e._focusEventsAllowed=!1,Pt(jy,this,setTimeout(()=>{Pt(jy,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:Mt(Ky,this)._signal}),n.focus())},0))),e._structTreeParentId=null===(t=Mt(Oy,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getEditorByUID(e){for(const t of Mt(Ly,this).values())if(t.uid===e)return t;return null}getNextId(){return Mt(Ky,this).getId()}combinedSignal(e){return Mt(Ky,this).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null===(e=Tt(Xy,this,$y))||void 0===e?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await Mt(Ky,this).updateMode(e.mode);const{offsetX:n,offsetY:i}=Ct(Xy,this,ew).call(this),r=this.getNextId(),s=Ct(Xy,this,Zy).call(this,(0,a.A)({parent:this,id:r,x:n,y:i,uiManager:Mt(Ky,this),isCentered:!0},t));s&&this.add(s)}async deserialize(e){var t,n;return await(null===(t=nw._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,Mt(Ky,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getNextId(),r=Ct(Xy,this,Zy).call(this,(0,a.A)({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:Mt(Ky,this),isCentered:t},n));return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(Ct(Xy,this,ew).call(this),!0,e)}setSelected(e){Mt(Ky,this).setSelected(e)}toggleSelected(e){Mt(Ky,this).toggleSelected(e)}unselect(e){Mt(Ky,this).unselect(e)}pointerup(e){var t;const{isMac:n}=ei.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(!Mt(Fy,this))return;if(Pt(Fy,this,!1),null!==(t=Tt(Xy,this,$y))&&void 0!==t&&t.isDrawer&&Tt(Xy,this,$y).supportMultipleDrawings)return;if(!Mt(Ny,this))return void Pt(Ny,this,!0);const i=Mt(Ky,this).getMode();i!==hn.STAMP&&i!==hn.SIGNATURE?this.createAndAddNewEditor(e,!1):Mt(Ky,this).unselectAll()}pointerdown(e){var t;if(Mt(Ky,this).getMode()===hn.HIGHLIGHT&&this.enableTextSelection(),Mt(Fy,this))return void Pt(Fy,this,!1);const{isMac:n}=ei.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(Pt(Fy,this,!0),null!==(t=Tt(Xy,this,$y))&&void 0!==t&&t.isDrawer)return void this.startDrawingSession(e);const i=Mt(Ky,this).getActive();Pt(Ny,this,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),Mt(Uy,this))return void Tt(Xy,this,$y).startDrawing(this,Mt(Ky,this),!1,e);Mt(Ky,this).setCurrentDrawingSession(this),Pt(Uy,this,new AbortController);const t=Mt(Ky,this).combinedSignal(Mt(Uy,this));this.div.addEventListener("blur",e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&(Pt(zy,this,null),this.commitOrRemove())},{signal:t}),Tt(Xy,this,$y).startDrawing(this,Mt(Ky,this),!1,e)}pause(e){if(e){const{activeElement:e}=document;return void(this.div.contains(e)&&Pt(zy,this,e))}Mt(zy,this)&&setTimeout(()=>{var e;null===(e=Mt(zy,this))||void 0===e||e.focus(),Pt(zy,this,null)},0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Mt(Uy,this)?(Mt(Ky,this).setCurrentDrawingSession(null),Mt(Uy,this).abort(),Pt(Uy,this,null),Pt(zy,this,null),Tt(Xy,this,$y).endDrawing(e)):null}findNewParent(e,t,n){const i=Mt(Ky,this).findParent(t,n);return null!==i&&i!==this&&(i.changeParent(e),!0)}commitOrRemove(){return!!Mt(Uy,this)&&(this.endDrawingSession(),!0)}onScaleChanging(){Mt(Uy,this)&&Tt(Xy,this,$y).onScaleChangingWhenDrawing(this)}destroy(){var e;this.commitOrRemove(),(null===(e=Mt(Ky,this).getActive())||void 0===e?void 0:e.parent)===this&&(Mt(Ky,this).commitOrRemove(),Mt(Ky,this).setActiveEditor(null)),Mt(jy,this)&&(clearTimeout(Mt(jy,this)),Pt(jy,this,null));for(const n of Mt(Ly,this).values()){var t;null===(t=Mt(Oy,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,Mt(Ly,this).clear(),Mt(Ky,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,Mi(this.div,t);for(const n of Mt(Ky,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;Mt(Ky,this).commitOrRemove(),Ct(Xy,this,tw).call(this);const n=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Mi(this.div,{rotation:i}),n!==i)for(const r of Mt(Ly,this).values())r.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return Mt(Ky,this).viewParameters.realScale}}function Jy(e){return 0!==Mt(Ly,e).size?Mt(Ly,e).values():Mt(Ky,e).getEditors(e.pageIndex)}function Qy(e){Mt(Ky,this).unselectAll();const{target:t}=e;if(t===Mt(Hy,this).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&Mt(Hy,this).div.contains(t)){const{isMac:t}=ei.platform;if(0!==e.button||e.ctrlKey&&t)return;Mt(Ky,this).showAllEditors("highlight",!0,!0),Mt(Hy,this).div.classList.add("free"),this.toggleDrawing(),Pv.startHighlighting(this,"ltr"===Mt(Ky,this).direction,{target:Mt(Hy,this).div,x:e.x,y:e.y}),Mt(Hy,this).div.addEventListener("pointerup",()=>{Mt(Hy,this).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:Mt(Ky,this)._signal}),e.preventDefault()}}function $y(e){return nw._.get(Mt(Ky,e).getMode())}function Zy(e){const t=Tt(Xy,this,$y);return t?new t.prototype.constructor(e):null}function ew(){const{x:e,y:t,width:n,height:i}=this.boundingClientRect,r=Math.max(0,e),s=Math.max(0,t),a=(r+Math.min(window.innerWidth,e+n))/2-e,o=(s+Math.min(window.innerHeight,t+i))/2-t,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}function tw(){for(const e of Mt(Ly,this).values())e.isEmpty()&&e.remove()}(0,Yt.A)(Yy,"_initialized",!1);var nw={_:new Map([im,Ub,ky,Pv,uy].map(e=>[e._editorType,e]))},iw=new WeakMap,rw=new WeakMap,sw=new WeakMap,aw=new WeakSet;class ow{constructor(e){let{pageIndex:t}=e;At(this,aw),Et(this,iw,null),Et(this,rw,new Map),Et(this,sw,new Map),this.pageIndex=t}setParent(e){if(Mt(iw,this)){if(Mt(iw,this)!==e){if(Mt(rw,this).size>0)for(const t of Mt(rw,this).values())t.remove(),e.append(t);Pt(iw,this,e)}}else Pt(iw,this,e)}static get _svgFactory(){return Vn(this,"_svgFactory",new Zp)}draw(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=(dw._=(t=dw._,n=t++,t),n),a=Ct(aw,this,cw).call(this),o=ow._svgFactory.createElement("defs");a.append(o);const l=ow._svgFactory.createElement("path");o.append(l);const c="path_p".concat(this.pageIndex,"_").concat(s);l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),i&&Mt(sw,this).set(s,l);const u=r?Ct(aw,this,uw).call(this,o,c):null,h=ow._svgFactory.createElement("use");return a.append(h),h.setAttribute("href","#".concat(c)),this.updateProperties(a,e),Mt(rw,this).set(s,a),{id:s,clipPathId:"url(#".concat(u,")")}}drawOutline(e,t){var n,i;const r=(dw._=(n=dw._,i=n++,n),i),s=Ct(aw,this,cw).call(this),a=ow._svgFactory.createElement("defs");s.append(a);const o=ow._svgFactory.createElement("path");a.append(o);const l="path_p".concat(this.pageIndex,"_").concat(r);let c;if(o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t){const e=ow._svgFactory.createElement("mask");a.append(e),c="mask_p".concat(this.pageIndex,"_").concat(r),e.setAttribute("id",c),e.setAttribute("maskUnits","objectBoundingBox");const t=ow._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=ow._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(l)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const u=ow._svgFactory.createElement("use");s.append(u),u.setAttribute("href","#".concat(l)),c&&u.setAttribute("mask","url(#".concat(c,")"));const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,e),Mt(rw,this).set(r,s),r}finalizeDraw(e,t){Mt(sw,this).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:i,rootClass:r,path:s}=t,a="number"===typeof e?Mt(rw,this).get(e):e;if(a){if(n&&Ct(aw,this,hw).call(this,a,n),i&&lw.call(ow,a,i),r){const{classList:e}=a;for(const[t,n]of Object.entries(r))e.toggle(t,n)}if(s){const e=a.firstElementChild.firstElementChild;Ct(aw,this,hw).call(this,e,s)}}}updateParent(e,t){if(t===this)return;const n=Mt(rw,this).get(e);n&&(Mt(iw,t).append(n),Mt(rw,this).delete(e),Mt(rw,t).set(e,n))}remove(e){Mt(sw,this).delete(e),null!==Mt(iw,this)&&(Mt(rw,this).get(e).remove(),Mt(rw,this).delete(e))}destroy(){Pt(iw,this,null);for(const e of Mt(rw,this).values())e.remove();Mt(rw,this).clear(),Mt(sw,this).clear()}}function lw(e,t){let[n,i,r,s]=t;const{style:a}=e;a.top="".concat(100*i,"%"),a.left="".concat(100*n,"%"),a.width="".concat(100*r,"%"),a.height="".concat(100*s,"%")}function cw(){const e=Xt._svgFactory.create(1,1,!0);return Mt(iw,this).append(e),e.setAttribute("aria-hidden",!0),e}function uw(e,t){const n=Xt._svgFactory.createElement("clipPath");e.append(n);const i="clip_".concat(t);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Xt._svgFactory.createElement("use");return n.append(r),r.setAttribute("href","#".concat(t)),r.classList.add("clip"),i}function hw(e,t){for(const[n,i]of Object.entries(t))null===i?e.removeAttribute(n):e.setAttribute(n,i)}Xt=ow;var dw={_:0};globalThis._pdfjsTestingUtils={HighlightOutliner:ev},globalThis.pdfjsLib={AbortException:Qn,AnnotationEditorLayer:Yy,AnnotationEditorParamsType:dn,AnnotationEditorType:hn,AnnotationEditorUIManager:Ms,AnnotationLayer:Xg,AnnotationMode:cn,AnnotationType:xn,applyOpacity:function(e,t,n,i){const r=255*(1-(i=Math.min(Math.max(null!==i&&void 0!==i?i:1,0),1)));return[e=Math.round(e*i+r),t=Math.round(t*i+r),n=Math.round(n*i+r)]},build:"f44e5f0e6",ColorPicker:jp,createValidAbsoluteUrl:zn,CSSConstants:class{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Vn(this,"commentForegroundColor",Ei(n))}},DOMSVGFactory:Zp,DrawLayer:ow,FeatureTest:ei,fetchData:gi,findContrastColor:function(e,t){const n=e[0]+256*e[1]+65536*e[2]+16777216*t[0]+4294967296*t[1]+1099511627776*t[2];let i=Li.get(n);if(i)return i;const r=new Float32Array(9),s=r.subarray(0,3),a=r.subarray(3,6);Ni(e,a);const o=r.subarray(6,9);Ni(t,o);const l=o[2]<.5,c=l?12:4.5;if(a[2]=l?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),ji(a,o,s)<c){let e,t;l?(e=a[2],t=1):(e=0,t=a[2]);const n=.005;for(;t-e>n;){const n=a[2]=(e+t)/2;l===ji(a,o,s)<c?e=n:t=n}a[2]=l?t:e}return Ii(a,s),i=ni.makeHexColor(Math.round(255*s[0]),Math.round(255*s[1]),Math.round(255*s[2])),Li.set(n,i),i},getDocument:Fd,getFilenameFromUrl:function(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(bi(e))return Bn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(e=>{try{return new URL(e)}catch(t){try{return new URL(decodeURIComponent(e))}catch(n){try{return new URL(e,"https://foo.bar")}catch(i){try{return new URL(decodeURIComponent(e),"https://foo.bar")}catch(r){return null}}}}})(e);if(!n)return t;const i=e=>{try{let t=decodeURIComponent(e);return t.includes("/")?(t=t.split("/").at(-1),t.test(/^\.pdf$/i)?t:e):t}catch(t){return e}},r=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(r.test(s))return i(s);if(n.searchParams.size>0){const e=Array.from(n.searchParams.values()).reverse();for(const n of e)if(r.test(n))return i(n);const t=Array.from(n.searchParams.keys()).reverse();for(const n of t)if(r.test(n))return i(n)}if(n.hash){const e=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(e)return i(e[0])}return t},getRGB:Ei,getUuid:oi,getXfaPageViewport:function(e,t){let{scale:n=1,rotation:i=0}=t;const{width:r,height:s}=e.attributes.style,a=[0,0,parseInt(r),parseInt(s)];return new mi({viewBox:a,userUnit:1,scale:n,rotation:i})},GlobalWorkerOptions:fh,ImageKind:_n,InvalidPDFException:Xn,isDataScheme:bi,isPdfFile:yi,isValidExplicitDest:Bl,MathClamp:ci,noContextMenu:xi,normalizeUnicode:function(e){return si||(si=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,ai=new Map([["\ufb05","\u017ft"]])),e.replaceAll(si,(e,t,n)=>t?t.normalize("NFKC"):ai.get(n))},OPS:Mn,OutputScale:Pi,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:Gd,PDFDateString:Si,PDFWorker:ip,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:fi,RenderingCancelledException:vi,renderRichText:Fi,ResponseException:Yn,setLayerDimensions:Mi,shadow:Vn,SignatureExtractor:Vb,stopEvent:ki,SupportedImageMimeTypes:Ri,TextLayer:Ad,TouchManager:Wa,updateUrlHash:Hn,Util:ni,VerbosityLevel:Tn,version:"5.4.449",XfaLayer:di};var pw=n(893),fw=n.t(pw,2);const{PostgrestError:gw,FunctionsHttpError:mw,FunctionsFetchError:vw,FunctionsRelayError:bw,FunctionsError:yw,FunctionRegion:ww,SupabaseClient:_w,createClient:xw,GoTrueAdminApi:kw,GoTrueClient:Sw,AuthAdminApi:Aw,AuthClient:Ew,navigatorLock:Cw,NavigatorLockAcquireTimeoutError:Tw,lockInternals:Mw,processLock:Pw,SIGN_OUT_SCOPES:Rw,AuthError:Ow,AuthApiError:Nw,AuthUnknownError:Iw,CustomAuthError:Dw,AuthSessionMissingError:jw,AuthInvalidTokenResponseError:Lw,AuthInvalidCredentialsError:Fw,AuthImplicitGrantRedirectError:Bw,AuthPKCEGrantCodeExchangeError:Ww,AuthRetryableFetchError:Uw,AuthWeakPasswordError:zw,AuthInvalidJwtError:Hw,isAuthError:Vw,isAuthApiError:qw,isAuthSessionMissingError:Gw,isAuthImplicitGrantRedirectError:Kw,isAuthRetryableFetchError:Xw,isAuthWeakPasswordError:Yw,RealtimePresence:Jw,RealtimeChannel:Qw,RealtimeClient:$w,REALTIME_LISTEN_TYPES:Zw,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:e_,REALTIME_PRESENCE_LISTEN_EVENTS:t_,REALTIME_SUBSCRIBE_STATES:n_,REALTIME_CHANNEL_STATES:i_}=pw||fw;const r_="http://localhost:5000";function s_(e){let{add:t,de:n,body:r,image:s,index:a,isOption:o,toggle:l,type:c}=e;const[u,h]=(0,i.useState)(o||"body"),d=(0,yt.jsx)("div",{className:" rounded-xl shadow-md flex items-center justify-center text-white text-2xl font-semibold bg-transparent",children:r}),p=(0,yt.jsx)(yt.Fragment,{children:(0,yt.jsx)("div",{className:" rounded-xl shadow-md flex items-center justify-center text-white text-2xl font-semibold bg-transparent",children:s})});return(0,yt.jsxs)("div",{className:"relative min-h-screen flex flex-col items-center justify-center bg-transparent",children:[(0,yt.jsxs)("div",{className:"relative w-full max-w-md h-96 flex items-center justify-center mb-16",children:["body"===u?(0,yt.jsx)("div",{className:" ".concat("body"===u?"opacity-100":"opacity-0"),children:d}):"","option"===u?(0,yt.jsx)("div",{className:" ".concat("option"===u?"opacity-100":"opacity-0"),children:p}):""]}),(0,yt.jsxs)("div",{className:"fixed bottom-6 flex space-x-6 bg-black/30 backdrop-blur-md px-6 py-3 rounded-full shadow-md",children:[(0,yt.jsx)("button",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-white/10 text-white text-lg font-medium shadow-sm",children:a}),(0,yt.jsx)("button",{className:"px-4 flex uppercase items-center justify-center rounded-full bg-white/10 text-white text-lg font-medium shadow-sm",onClick:()=>{l()},children:c}),(0,yt.jsx)("button",{onClick:()=>h("body"),className:"px-4 py-1 rounded-full text-lg font-medium transition-colors duration-300 ".concat("body"===u?"bg-white/20 text-white":"text-gray-300 hover:text-white"),children:"Body"}),(0,yt.jsx)("button",{onClick:()=>h("option"),className:"px-4 py-1 rounded-full text-lg font-medium transition-colors duration-300 ".concat("option"===u?"bg-white/20 text-white":"text-gray-300 hover:text-white"),children:"Option"}),(0,yt.jsx)("button",{onClick:()=>{n()},className:"px-4 py-1 rounded-full bg-red-500 text-lg font-medium transition-colors duration-300",children:(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"white",className:"w-6 h-6 text-white-600",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4m-4 0a1 1 0 00-1 1v1h6V4a1 1 0 00-1-1m-4 0h4"})})}),(0,yt.jsx)("button",{onClick:()=>{t()},className:"text-white px-4 py-1 rounded-full bg-cyan-700 text-lg font-medium transition-colors duration-300",children:"+"})]})]})}var a_=n(498);const o_=()=>{const e=Math.floor(151*Math.random()),t=Math.floor(151*Math.random()),n=Math.floor(151*Math.random());return"#".concat(e.toString(16).padStart(2,"0")).concat(t.toString(16).padStart(2,"0")).concat(n.toString(16).padStart(2,"0"))},l_=e=>{let{sf:t,i:n,setkeys:r,handleMcqClicks:s,keys:a,setst:o,coor:l,selectOp:c,init:u}=e;const[h,d]=(0,i.useState)(u);return(0,yt.jsx)(yt.Fragment,{children:(0,yt.jsxs)("button",{className:"px-4.5 py-2.5 rounded-xl font-mono font-semibold uppercase transition-all duration-200 flex items-center gap-2\n                    ",onClick:t===n.a?n.b&&n.b.length>1?()=>{s(n,a),d(c[a])}:()=>{}:()=>{r(a),o(n.a)},style:{backgroundColor:t===n.a?l:"#364153"},children:[" ",(0,yt.jsx)("span",{className:"",children:n.a}),t===n.a?(0,yt.jsx)(yt.Fragment,{children:n.b&&n.b.length>1?(0,yt.jsx)(yt.Fragment,{children:(0,yt.jsx)("span",{className:"bg-white/20 px-3 py-1  rounded-md text-xs font-mono",children:h})}):""}):""]})})};function c_(e){let{open:t,onClose:n,data:r,mcqTypes:s,input:o}=e;const[l,c]=(0,i.useState)(r),[u,h]=(0,i.useState)([1,r.length]),[d,p]=(0,i.useState)(o[0].a),[f,g]=(0,i.useState)([]),[m,v]=(0,i.useState)(o_());(0,i.useEffect)(()=>{if(o&&o.length>0){const e=[];o.map(t=>{e.push(t.b[0].replace("-","").replace("".concat(t.a),""))}),g(e)}else g([]);v(o_())},[t]);const[b,y]=(0,i.useState)(0),w=u[0]>=1&&u[1]<=l.length&&u[0]<=u[1]&&l.length>0,_=l.length>0?l.reduce((e,t,n)=>{const i=e[e.length-1];return i&&i.type===t.type?i.end=n+1:e.push({type:t.type,start:n+1,end:n+1}),e},[]):[],x=(e,t)=>{const n=e.b.indexOf("".concat(d,"-").concat(f[t]));if(n===e.b.length-1){let n=f;n[t]=e.b[0].replace("".concat(d),"").replace("-",""),g(n)}else{let i=f;i[t]=e.b[n+1].replace("".concat(d),"").replace("-",""),g(i)}},[k,S]=(0,i.useState)(1);return(0,yt.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm z-50",children:(0,yt.jsxs)("div",{className:"bg-white text-slate-800 p-8 rounded-2xl shadow-2xl w-[700px] max-h-[90vh] overflow-y-auto border border-slate-200 relative",children:[(0,yt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,yt.jsx)("h1",{className:"text-2xl font-bold text-slate-800 flex-1",children:"Change Type"}),(0,yt.jsx)("button",{onClick:n,className:"ml-4 p-2 w-10 h-10 rounded-xl text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors flex items-center justify-center",children:"\u2715"})]}),0===l.length?(0,yt.jsxs)("div",{className:"text-center text-slate-400 py-10 border-2 border-dashed border-slate-100 rounded-2xl",children:[(0,yt.jsx)("span",{className:"text-3xl block mb-2",children:"empty_inventory"}),"No items available to modify"]}):(0,yt.jsxs)(yt.Fragment,{children:[(0,yt.jsxs)("div",{className:"mb-8 bg-slate-50 border border-slate-100 p-6 rounded-2xl",children:[(0,yt.jsxs)("p",{className:"font-bold text-slate-700 mb-6 flex items-center justify-center gap-3",children:["Target Range:",(0,yt.jsx)("input",{type:"number",min:1,max:l.length,value:u[0],onChange:e=>h([Number(e.target.value),u[1]]),className:"w-16 p-2 rounded-lg border border-slate-200 bg-white text-center text-sm focus:ring-2 focus:ring-emerald-500 outline-none"}),(0,yt.jsx)("span",{className:"text-slate-400",children:"\u2192"}),(0,yt.jsx)("input",{type:"number",min:1,max:l.length,value:u[1],onChange:e=>h([u[0],Number(e.target.value)]),className:"w-16 p-2 rounded-lg border border-slate-200 bg-white text-center text-sm focus:ring-2 focus:ring-emerald-500 outline-none"})]}),!w&&(0,yt.jsxs)("p",{className:"text-red-500 text-xs mb-4 text-center font-medium",children:["\u26a0 Please use a valid range between 1 and ",l.length,"."]}),r.length>1?(0,yt.jsx)("div",{className:"px-2 mb-8",children:(0,yt.jsx)(a_.Range,{step:1,min:1,max:l.length,values:u,onChange:e=>h(e),renderTrack:e=>{let{props:t,children:n}=e;return(0,yt.jsxs)("div",(0,a.A)((0,a.A)({},t),{},{className:"w-full h-2 bg-slate-200 rounded-full relative",children:[(0,yt.jsx)("div",{className:"absolute h-2 bg-emerald-500 rounded-full",style:{left:"".concat((u[0]-1)/(l.length-1)*100,"%"),width:"".concat((u[1]-u[0])/(l.length-1)*100,"%")}}),n]}))},renderThumb:e=>{let{props:t}=e;return(0,yt.jsx)("div",(0,a.A)((0,a.A)({},t),{},{className:"h-5 w-5 bg-white rounded-full shadow-md border-2 border-emerald-500 outline-none"}))}})}):"",(0,yt.jsxs)("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[(0,yt.jsx)("div",{className:"flex flex-wrap gap-2 flex-1 text-white",children:o.map((e,t)=>(0,yt.jsx)(i.Fragment,{children:void 0!==f[t]?(0,yt.jsx)(l_,{setkeys:y,init:f[t],onClick:()=>{S(k+1)},sf:d,i:e,handleMcqClicks:x,keys:t,setst:p,coor:m,selectOp:f}):null},t))}),(0,yt.jsx)("button",{onClick:()=>{w&&c(e=>{const t=[...e];for(let n=u[0]-1;n<u[1];n++)t[n].type="".concat(d).concat(""!==f[b]?"-":"").concat(f[b]);return t})},disabled:!w||!1,className:"px-6 py-2 rounded-lg font-bold text-sm transition-colors shadow-sm ".concat(w?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-slate-100 text-slate-400 cursor-not-allowed"),children:"Apply Change"})]})]}),(0,yt.jsxs)("div",{className:"bg-slate-50 border border-slate-100 p-6 rounded-2xl",children:[(0,yt.jsx)("h2",{className:"text-lg font-bold mb-4 text-slate-700",children:"Assignment Summary"}),(0,yt.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:_.map((e,t)=>(0,yt.jsxs)("div",{className:"bg-white border border-slate-200 rounded-xl p-3 flex flex-col items-center justify-center shadow-sm",children:[(0,yt.jsx)("span",{className:"text-sm font-bold text-emerald-600",children:e.start===e.end?e.start:"".concat(e.start," \u2192 ").concat(e.end)}),(0,yt.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-1",children:e.type})]},t))})]})]})]})})}const u_=e=>{let{containerWidth:t,displayWidth:n,offsetX:r,onRangeChange:s}=e;const[o,l]=(0,i.useState)({left:5,right:95}),c=(0,i.useRef)(null),[u,h]=(0,i.useState)(null);(0,i.useEffect)(()=>{s(o)},[o,s]);const d=e=>{if(!u||!c.current)return;const t=c.current.getBoundingClientRect(),n=e.clientX-t.left,i=Math.max(0,Math.min(100,n/t.width*100));l(e=>"left"===u?(0,a.A)((0,a.A)({},e),{},{left:Math.min(i,e.right-2)}):(0,a.A)((0,a.A)({},e),{},{right:Math.max(i,e.left+2)}))},p=()=>h(null);return(0,i.useEffect)(()=>(u?(window.addEventListener("mousemove",d),window.addEventListener("mouseup",p)):(window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",p)),()=>{window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",p)}),[u]),(0,yt.jsx)("div",{style:{width:t},className:"mx-auto sticky pointer-events-none relative pt-2 pb-2",children:(0,yt.jsxs)("div",{ref:c,className:"relative pointer-events-auto",style:{width:n,marginLeft:r,height:"30px"},children:[(0,yt.jsx)("div",{className:"absolute top-1/2 left-0 w-full h-1 bg-slate-200 -translate-y-1/2 rounded-full"}),(0,yt.jsx)("div",{className:"absolute top-1/2 h-1 bg-cyan-500 -translate-y-1/2",style:{left:"".concat(o.left,"%"),width:"".concat(o.right-o.left,"%")}}),(0,yt.jsx)("div",{onMouseDown:()=>h("left"),className:"absolute top-0 w-4 h-full bg-white border-2 border-cyan-600 rounded-md cursor-ew-resize flex items-center justify-center z-10 shadow-sm",style:{left:"".concat(o.left,"%"),transform:"translateX(-50%)"},children:(0,yt.jsx)("div",{className:"w-0.5 h-3 bg-cyan-200"})}),(0,yt.jsx)("div",{onMouseDown:()=>h("right"),className:"absolute top-0 w-4 h-full bg-white border-2 border-cyan-600 rounded-md cursor-ew-resize flex items-center justify-center z-10 shadow-sm",style:{left:"".concat(o.right,"%"),transform:"translateX(-50%)"},children:(0,yt.jsx)("div",{className:"w-0.5 h-3 bg-cyan-200"})})]})})},h_=xw("https://kfiyebwkwauvybkxxmaz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtmaXllYndrd2F1dnlia3h4bWF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUwMzk4NDgsImV4cCI6MjA4MDYxNTg0OH0.eLt73F0o2-ErF620J4NCIZKK4p19XZxwE_yUnzrhlps");const d_=(e,t,n)=>Math.max(t,Math.min(e,n));function p_(e){const t=[];return e.forEach(e=>{const n=e.b;Array.isArray(n)?t.push(...n):t.push(n)}),t}function f_(e){try{return JSON.parse(sessionStorage.getItem(e))||[]}catch(t){return[]}}function g_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"client",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=["A)","B)","C)","D)","E)"];return e.map(e=>{var r,s,a,o;const l=null===(r=e.type)||void 0===r||null===(s=r.startsWith)||void 0===s?void 0:s.call(r,"mcq"),c=null===(a=e.type)||void 0===a||null===(o=a.startsWith)||void 0===o?void 0:o.call(a,"scq"),u=l||c?parseInt(e.type.split("-")[1],10):0,h=e=>e?"client"===t?e:e.replace("".concat(r_,"/uploads/crops/"),"".concat(n?"/testblob/crops/":"https://kfiyebwkwauvybkxxmaz.supabase.co/storage/v1/object/public/crops/crops/")):"";if(!0===e.git){var d,p,f,g;let t={question:e.body,type:l?"mcq":c?"scq":e.type,answerKey:null!==(d=null===(p=e.data)||void 0===p?void 0:p.answerKey)&&void 0!==d?d:[],options:null!==(f=null===(g=e.data)||void 0===g?void 0:g.options)&&void 0!==f?f:[]};return e.option&&""!==e.option&&(t.img=h(e.option)),t}const m={question:h(e.body),type:l?"mcq":c?"scq":e.type,answerKey:[]};return(l||c)&&(m.options=i.slice(0,u)),e.option&&(m.img=h(e.option)),m})}const m_=(e,t)=>{const{setPages:n,setSelectedPageIndex:r,setCrops:s,crops:o,imgObjRef:l,selectedPage:c,setEditingBodyIndex:u,setEditingOptionIndex:h,cropRef:d,rulerRange:p}=t,[f,g]=(0,i.useState)(null),[m,v]=(0,i.useState)(!1),[b]=(0,i.useState)(function(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz";let t="";for(let n=0;n<8;n++)t+=e[Math.floor(62*Math.random())];return t}()),[y,w]=(0,i.useState)(!1),[_,x]=(0,i.useState)(!1),[k,S]=(0,i.useState)(!1),[A,E]=(0,i.useState)(!1),[C,T]=(0,i.useState)([]),[M,P]=(0,i.useState)(!1),[R,O]=(0,i.useState)(!1);(0,i.useEffect)(()=>{"client"===e&&async function(){try{const e=await fetch("/pdf.worker.js"),t=await e.text(),n=new Blob([t],{type:"application/javascript"});fh.workerSrc=URL.createObjectURL(n)}catch(O_){console.error("Failed to load pdf.worker.js",O_)}}()},[e]);return{file:f,setFile:g,uploadStatus:m,code:b,showSubmitModal:y,setShowSubmitModal:w,loadingUpload:_,submitOnline:k,submitOff:A,quizData:C,setQuizData:T,copied:M,isChecked:R,setIsChecked:O,handleUpload:async()=>{const t=f;if(!1===m){if(!t&&"client"===e)return;v(!0);try{let i=[];if("client"===e){const e=await t.arrayBuffer(),n=await Fd({data:e}).promise;for(let t=1;t<=n.numPages;t++){const e=await n.getPage(t),r=e.getViewport({scale:2}),s=document.createElement("canvas");s.width=r.width,s.height=r.height;const a=s.getContext("2d");await e.render({canvasContext:a,viewport:r}).promise;const o=await new Promise(e=>s.toBlob(e,"image/png"));i.push({pageNumber:t,blob:o,url:URL.createObjectURL(o),width:s.width,height:s.height})}}else if("server"===e){const e=new FormData;e.append("pdf",t),e.append("code",b),e.append("data",JSON.stringify(f_("sessions")));const n=await fetch("".concat(r_,"/upload"),{method:"POST",body:e}),r=await n.json();!function(e,t){try{const n=f_(t);n.push(e),sessionStorage.setItem(t,JSON.stringify(n))}catch(O_){console.error(O_)}}(b,"sessions"),i=(r.pages||[]).map((e,t)=>({pageNumber:t+1,url:"".concat(r_).concat(e),thumbnailUrl:"".concat(r_,"/thumbnail").concat(e),originalPath:e}))}s([]),n(i),r(0),v(i.length>0&&null)}catch(i){console.error("Upload failed",i),v(!1),alert("Upload Failed.")}}else"server"===e&&await fetch("".concat(r_,"/cancel"),{method:"POST"}),v(!1),g(null),n([])},handleCropAction:async n=>{let{rect:i,path:r,mode:o,editingBodyIndex:f,editingOptionIndex:g,mapping:m}=n;const v=l.current;if(!v)return;if("rect"===o&&(i.w<=5||i.h<=5))return;if("freehand"===o&&r.length<2)return;let y=null,w=null;if("client"===e){const{scale:e,offsetX:n,offsetY:s}=m;if("rect"===o||"linecrop"===o){const{scale:e,offsetX:n,offsetY:r}=m;let s,a,l=d_(Math.round((i.y-r)/e),0,v.height-1),c=d_(Math.round(i.h/e),1,v.height-l);if("linecrop"===o){s=d_(Math.round(v.width*(p.left/100)),0,v.width-1),a=d_(Math.round(v.width*(p.right/100)),1,v.width)-s}else s=d_(Math.round((i.x-n)/e),0,v.width-1),a=d_(Math.round(i.w/e),1,v.width-s);const u=document.createElement("canvas");u.width=a,u.height=c;const h=u.getContext("2d");"linecrop"===o&&(h.fillStyle=t.freehandBgColor||"#ffffff",h.fillRect(0,0,a,c)),h.drawImage(v,s,l,a,c,0,0,a,c),w=await new Promise(e=>u.toBlob(e,"image/png"))}else{const i=r.map(t=>({x:d_(Math.round((t.x-n)/e),0,v.width-1),y:d_(Math.round((t.y-s)/e),0,v.height-1)})),a=document.createElement("canvas");a.width=v.width,a.height=v.height;const o=a.getContext("2d");o.fillStyle="#000",o.beginPath(),i.forEach((e,t)=>0===t?o.moveTo(e.x,e.y):o.lineTo(e.x,e.y)),o.closePath(),o.fill();const l=document.createElement("canvas");l.width=v.width,l.height=v.height;const c=l.getContext("2d");c.drawImage(v,0,0),c.globalCompositeOperation="destination-in",c.drawImage(a,0,0);const u=c.getImageData(0,0,l.width,l.height),{data:h}=u;let d=l.width,p=l.height,f=0,g=0;for(let e=0;e<l.height;e++)for(let t=0;t<l.width;t++)h[4*(e*l.width+t)+3]>0&&(t<d&&(d=t),e<p&&(p=e),t>f&&(f=t),e>g&&(g=e));d>f&&(d=0,p=0,f=1,g=1);const m=f-d+1,b=g-p+1,y=document.createElement("canvas");y.width=m,y.height=b;const _=y.getContext("2d");_.fillStyle=t.freehandBgColor||"#ffffff",_.fillRect(0,0,m,b),_.drawImage(l,d,p,m,b,0,0,m,b),w=await new Promise(e=>y.toBlob(e,"image/png"))}w&&(y=URL.createObjectURL(w))}else if("server"===e){const{scale:e,offsetX:n,offsetY:s}=m;let a={pageImagePath:null===c||void 0===c?void 0:c.originalPath,code:b},l="";if("rect"===o){let t=d_(Math.round((i.x-n)/e),0,v.width-1),r=d_(Math.round((i.y-s)/e),0,v.height-1),o=d_(Math.round(i.w/e),1,v.width-t),c=d_(Math.round(i.h/e),1,v.height-r);a.rect={x:t,y:r,width:o,height:c},l="".concat(r_,"/crop")}else if("linecrop"===o){let t,n,r=d_(Math.round((i.y-s)/e),0,v.height-1),o=d_(Math.round(i.h/e),1,v.height-r);t=d_(Math.round(v.width*(p.left/100)),0,v.width-1),n=d_(Math.round(v.width*(p.right/100)),1,v.width)-t,a.rect={x:t,y:r,width:n,height:o},l="".concat(r_,"/crop")}else{const i=r.map(t=>({x:d_(Math.round((t.x-n)/e),0,v.width-1),y:d_(Math.round((t.y-s)/e),0,v.height-1)}));a.path=i,a.bgColor=t.freehandBgColor,l="".concat(r_,"/crop-freehand")}try{const e=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),t=await e.json();null!==t&&void 0!==t&&t.croppedImage&&(y="".concat(r_).concat(t.croppedImage))}catch(O_){return void console.error(O_)}}if(!y&&!w)return;s(t=>{const n=[...t],i="img_"+Math.random().toString(36).slice(2,10),r="[IMG:".concat("client"===e?i:y,"]"),s="[IMG:".concat(y,"]");if(null!==f||null!==g){const t=null!==f?f:g,o=(0,a.A)({},n[t]);return null!==f?(o.body=r,o.bodyD=s,o.blobUrl=y,"client"===e&&(o.blobMap=(0,a.A)((0,a.A)({},o.blobMap||{}),{},{[i]:w}))):(o.option=y,"client"===e&&(o.optionBlob=w)),n[t]=o,n}return n.push({body:r,bodyD:s,bodyParts:[i],blobMap:"client"===e?{[i]:w}:null,blobUrl:y,option:"",optionBlob:null,type:"scq-4",git:!1}),n});let _=null!==f||null!==g;u(null),h(null),!0!==_&&setTimeout(()=>{d.current&&d.current.scrollIntoView({behavior:"smooth",block:"end"})},100)},handleSubmit:async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];x(!0);try{const r=o.filter(e=>!0!==e.git);let s=[];if("client"===e){const e=[];for(const t of o){if(t.git){e.push(t);continue}let r=(0,a.A)({},t);for(const e of t.bodyParts||[]){var n;let s=null===(n=t.blobMap)||void 0===n?void 0:n[e];if(!s){var i;const e=/\[IMG:(.*?)\]/.exec(t.bodyD);e&&null!==(i=t.blobMap)&&void 0!==i&&i[e[1]]&&(s=t.blobMap[e[1]])}if(!s)continue;const a="".concat(b,"-").concat(Math.random().toString(36).slice(5),".png"),{error:o}=await h_.storage.from("crops").upload("crops/".concat(b,"/").concat(a),s,{upsert:!0,contentType:"image/png"});if(o)throw o;const{data:l}=h_.storage.from("crops").getPublicUrl("crops/".concat(b,"/").concat(a));r.body=r.body.replace(e,l.publicUrl);const c=/\[IMG:(blob:.*?)\]/.exec(r.bodyD);c&&(r.body=r.body.replace(c[1],l.publicUrl))}if(t.optionBlob){const e="".concat(b,"-opt-").concat(Math.random().toString(36).slice(5),".png"),{error:n}=await h_.storage.from("crops").upload("crops/".concat(b,"/").concat(e),t.optionBlob,{upsert:!0,contentType:"image/png"});if(n)throw n;const{data:i}=h_.storage.from("crops").getPublicUrl("crops/".concat(b,"/").concat(e));r.option=i.publicUrl}e.push(r)}s=g_(e,"client"),S(!0)}else if("server"===e){const e="".concat(r_,t?"/upload-offline":"/upload-crops"),n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({crops:r,code:b})}),i=await n.json();if(console.log(i.error),i.error)throw new Error("Server Error");s=g_(o,"server",t),t?(E(!0),S(!1)):(S(!0),E(!0))}T(s),x(!1)}catch(O_){console.error(O_),x(!1),alert("Error processing submit")}},handleCopy:()=>{navigator.clipboard.writeText(JSON.stringify(C,null,2)),P(!0),setTimeout(()=>P(!1),2e3)},handleMakeTest:()=>{window.localStorage.setItem("offline-test-cache",JSON.stringify(C));const e=k?"/u":"/g";window.location.href="/test-build/#/create-test/cache".concat(e)}}},v_=e=>{let{i:t,body:n,openModal:i,uri:r,setisOption:s,isImage:a}=e;const o="".concat(n),l=/\[IMG:(.*?)\]/g;let c,u=[],h=0;for(;null!==(c=l.exec(o));){const e=c.index;e>h&&u.push({type:"text",content:o.slice(h,e).trim()}),u.push({type:"image",url:c[1]}),h=l.lastIndex}return h<o.length&&u.push({type:"text",content:o.slice(h).trim()}),(0,yt.jsx)(yt.Fragment,{children:u.map((e,n)=>"image"===e.type?a?(0,yt.jsx)("img",{src:r||e.url,alt:"crop-".concat(n),className:"max-h-[60vh] max-w-[90vw] rounded-lg shadow-xl"},n):(0,yt.jsx)("img",{src:r||e.url,alt:"crop-".concat(t),className:"w-full rounded-t-xl object-cover min-h-48 transition-transform duration-300 group-hover:scale-[1.03] cursor-pointer",onClick:()=>{i(t),s("body")}},n):(0,yt.jsx)("div",{className:"w-full rounded-t-xl object-cover min-h-20 transition-all duration-300 group-hover:scale-[1.03] cursor-pointer text-white text-lg font-semibold flex items-center justify-center shadow-md hover:shadow-xl",children:e.content||"<Text Content>"},n))})},b_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{w:1e3,h:1300};const t=(0,i.useRef)(null),n=(0,i.useRef)(null),r=(0,i.useRef)(null),[s,a]=(0,i.useState)([]),[o,l]=(0,i.useState)(0),[c,u]=(0,i.useState)([]),[h,d]=(0,i.useState)(!1),[p,f]=(0,i.useState)("rect"),[g,m]=(0,i.useState)(null),[v,b]=(0,i.useState)([]),[y,w]=(0,i.useState)(e),[_,x]=(0,i.useState)("#ffffff"),[k,S]=(0,i.useState)(!1),[A,E]=(0,i.useState)(0),[C,T]=(0,i.useState)(null),[M,P]=(0,i.useState)(null),R=s[o]||null,[O,N]=(0,i.useState)({left:0,right:100});(0,i.useEffect)(()=>{const e=()=>{const e=Math.min(.9*window.innerWidth,1e3);w({w:e,h:1.3*e})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.useEffect)(()=>{const e=e=>{"Escape"===e.key&&(P(null),T(null))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);const I=()=>{const e=t.current,n=r.current;if(!n||!e)return null;const i=1.05*Math.min(y.w/n.width,y.h/n.height);return{scale:i,offsetX:(y.w-n.width*i)/2,offsetY:(y.h-n.height*i)/2}},D=function(){let{rect:e=null,path:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=t.current,s=null===i||void 0===i?void 0:i.getContext("2d"),a=r.current;if(!i||!s||!a)return;s.clearRect(0,0,y.w,y.h),s.fillStyle="#f1f5f9",s.fillRect(0,0,y.w,y.h);const o=I(),l=o.offsetX,c=o.offsetY,u=a.width*o.scale,h=a.height*o.scale;o&&(s.drawImage(a,l,c,u,h),s.save(),s.strokeStyle="#cbd5e1",s.lineWidth=1,s.strokeRect(l,c,u,h),s.restore()),s.save(),s.strokeStyle="#06b6d4",s.lineWidth=2,s.setLineDash([6,4]),e&&s.strokeRect(e.x,e.y,e.w,e.h),n&&n.length>1&&(s.beginPath(),s.moveTo(n[0].x,n[0].y),n.forEach(e=>s.lineTo(e.x,e.y)),s.stroke()),s.restore()};(0,i.useEffect)(()=>{if(!R)return;const e=new Image;e.crossOrigin="anonymous",e.src=R.url,e.onload=()=>{r.current=e,D()}},[R,y]);return{canvasRef:t,getMapping:I,cropRef:n,imgObjRef:r,pages:s,setPages:a,selectedPageIndex:o,setSelectedPageIndex:l,selectedPage:R,crops:c,setCrops:u,isDrawing:h,mode:p,setMode:f,rect:g,path:v,canvasSize:y,freehandBgColor:_,setFreehandBgColor:x,modalOpen:k,setModalOpen:S,modalIndex:A,setModalIndex:E,editingBodyIndex:C,setEditingBodyIndex:T,editingOptionIndex:M,setEditingOptionIndex:P,handleMouseDown:e=>{const t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;d(!0),"rect"===p||"linecrop"===p?m({x:n,y:i,w:0,h:0,startX:n,startY:i}):b([{x:n,y:i}])},handleMouseMove:e=>{if(!h)return;const t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top,s=I();if("rect"===p&&g){const e={x:Math.min(g.startX,n),y:Math.min(g.startY,i),w:Math.abs(n-g.startX),h:Math.abs(i-g.startY),startX:g.startX,startY:g.startY};m(e),D({rect:e})}else if("linecrop"===p&&g&&s){const e=r.current.width*s.scale,t=s.offsetX+e*(O.left/100),n=s.offsetX+e*(O.right/100),a={x:t,y:Math.min(g.startY,i),w:n-t,h:Math.abs(i-g.startY),startX:g.startX,startY:g.startY};m(a),D({rect:a})}else if("freehand"===p){const e=[...v,{x:n,y:i}];b(e),D({path:e})}},handleMouseUp:async e=>{d(!1),R&&await e({rect:g,path:v,mode:p,editingBodyIndex:C,editingOptionIndex:M,mapping:I()}),m(null),b([]),D()},drawPage:D,rulerRange:O,setRulerRange:N}},y_=e=>{let{modeS:t,kanya:n,hookData:r,file:s,setFile:o,uploadStatus:l,onFileUpload:c,onSubmit:u,onCropAction:h,renderSubmitModal:d,children:p}=e;const{canvasRef:f,cropRef:g,pages:m,selectedPageIndex:v,rulerRange:b,setRulerRange:y,setSelectedPageIndex:w,crops:_,setCrops:x,mode:k,setMode:S,freehandBgColor:A,setFreehandBgColor:E,handleMouseDown:C,handleMouseMove:T,handleMouseUp:M,modalOpen:P,modalIndex:R,setModalOpen:O,setModalIndex:N,editingBodyIndex:I,setEditingBodyIndex:D,editingOptionIndex:j,setEditingOptionIndex:L}=r,[F,B]=(0,i.useState)(!1),[W,U]=(0,i.useState)("body"),z=null!==j||null!==I,H=e=>{const t=p_(T_);x(n=>n.map((n,i)=>i===e?(0,a.A)((0,a.A)({},n),{},{type:t[(t.indexOf(n.type)+1)%t.length]}):n))},V=()=>N(e=>(e+1)%_.length),q=()=>N(e=>(e-1+_.length)%_.length);(0,i.useEffect)(()=>{const e=e=>{P?"ArrowLeft"===e.key?(q(),U("body")):"ArrowRight"===e.key&&(V(),U("body")):"ArrowLeft"===e.key?w(e=>(e-1+m.length)%m.length):"ArrowRight"===e.key?w(e=>(e+1)%m.length):"e"===e.key.toLowerCase()?S("rect"):"d"===e.key.toLowerCase()?S("linecrop"):"c"===e.key.toLowerCase()&&S("freehand"),"Escape"===e.key&&(P&&O(!1),L(null),D(null))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[P,j,I,q,V]);const G=r.getMapping(),K=G?r.imgObjRef.current.width*G.scale:r.canvasSize.w,X=G?G.offsetX:0;return(0,yt.jsxs)(yt.Fragment,{children:[d(),p,(0,yt.jsxs)("div",{className:"flex no-select flex-col lg:flex-row gap-6 text-slate-800 h-screen overflow-hidden bg-[#f8fafc] p-4",children:[(0,yt.jsxs)("div",{className:"flex-1 overflow-auto pr-2",children:[(0,yt.jsxs)("div",{className:"flex flex-wrap gap-3 mb-6 items-center",children:[(0,yt.jsx)("input",{type:"file",accept:"application/pdf",className:m.length>0||l?"file:mr-3 file:py-2 file:px-4 file:border file:border-slate-200 file:rounded-lg file:bg-slate-100 file:text-slate-400 file:cursor-not-allowed text-sm":"file:mr-3 file:py-2 file:px-4 file:border file:border-slate-200 file:rounded-lg file:bg-white file:text-slate-600 hover:file:bg-slate-50 transition-none cursor-pointer text-sm",onChange:e=>o(e.target.files[0]),disabled:m.length>0||!!l}),m.length>0?"":(0,yt.jsx)(yt.Fragment,{children:l?(0,yt.jsx)("div",{className:"flex items-center justify-between bg-white border border-slate-200 text-slate-600 px-4 py-2 rounded-lg inline-flex animate-pulse shadow-sm",children:(0,yt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,yt.jsx)("div",{className:"w-4 h-4 border-2 border-t-cyan-500 border-slate-200 rounded-full animate-spin"}),(0,yt.jsx)("span",{className:"font-semibold text-sm",children:"Uploading..."}),n&&(0,yt.jsx)("button",{onClick:c,className:"px-3 py-1 bg-red-500 hover:bg-red-600 rounded-full text-white text-xs font-bold shadow-sm",children:"Cancel"})]})}):(0,yt.jsx)("button",{onClick:c,disabled:!s||z,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-semibold rounded-lg shadow-sm disabled:opacity-50",children:"Upload Pdf"})}),m.length>0&&(0,yt.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,yt.jsx)("button",{onClick:u,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-semibold rounded-lg shadow-sm",children:"Submit"}),(0,yt.jsx)("button",{onClick:()=>B(!0),className:"px-4 py-2 bg-white border border-slate-200 hover:bg-slate-50 text-slate-600 text-sm font-semibold rounded-lg shadow-sm",children:"Change Type"})]})]}),(0,yt.jsx)("div",{className:"flex flex-wrap gap-2 overflow-x-auto pb-2",style:z?{pointerEvents:"none",opacity:.5}:{},children:"server"===t?(0,yt.jsx)(yt.Fragment,{children:m.map((e,t)=>(0,yt.jsxs)("div",{className:"relative",children:[(0,yt.jsx)("img",{src:e.thumbnailUrl,alt:"thumb-".concat(t),className:"w-20 h-28 object-cover rounded-lg cursor-pointer ".concat(v===t?"border-2 border-cyan-500 shadow-md":"border border-slate-200"),onClick:()=>w(t)}),(0,yt.jsx)("span",{className:"absolute top-1 left-1 bg-cyan-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-sm",children:t+1})]},t))}):(0,yt.jsx)(yt.Fragment,{children:m.map((e,t)=>(0,yt.jsxs)("div",{className:"relative",children:[(0,yt.jsxs)("div",{onClick:()=>w(t),className:"w-20 h-28 flex flex-col items-center justify-center rounded-lg cursor-pointer transition-all ".concat(v===t?"border-2 border-cyan-500 bg-cyan-50 shadow-md":"border border-slate-200 bg-white hover:border-slate-300 hover:bg-slate-50"),children:[(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 ".concat(v===t?"text-cyan-500":"text-slate-300"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,yt.jsxs)("span",{className:"text-[8px] mt-1 font-bold ".concat(v===t?"text-cyan-600":"text-slate-400"),children:["PAGE ",t+1]})]}),(0,yt.jsx)("span",{className:"absolute top-1 left-1 bg-cyan-500 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-sm pointer-events-none",children:t+1})]},t))})}),"linecrop"===k?(0,yt.jsx)("div",{className:"w-full flex justify-center sticky top-0 z-[30]",children:r.pages.length>0&&(0,yt.jsx)(u_,{containerWidth:r.canvasSize.w,displayWidth:K,offsetX:X,onRangeChange:y})}):"",(0,yt.jsxs)("div",{className:"relative  border border-slate-200 rounded-xl overflow-hidden bg-[#f1f5f9] shadow-sm ".concat("linecrop"!==k&&r.pages.length>0?"mt-3":""),children:[(0,yt.jsxs)("div",{className:"fixed bottom-4 left-4 flex flex-col gap-2 z-5 bg-white/90 backdrop-blur-md p-1.5 rounded-lg shadow-md border border-slate-100 items-center",children:[(0,yt.jsx)("button",{className:"p-2 rounded cursor-pointer ".concat("rect"===k?"bg-cyan-500 text-white":"text-slate-400 hover:bg-slate-100"),onClick:()=>S("rect"),children:(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-5 h-5",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 4h16v16H4z"})})}),(0,yt.jsx)("button",{className:"p-2 rounded cursor-pointer ".concat("linecrop"===k?"bg-cyan-500 text-white":"text-slate-400 hover:bg-slate-100"),onClick:()=>S("linecrop"),title:"Quick Line Crop",children:(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-5 h-5",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 9h16M4 15h16"})})}),(0,yt.jsx)("button",{className:"p-2 rounded cursor-pointer ".concat("freehand"===k?"bg-cyan-500 text-white":"text-slate-400 hover:bg-slate-100"),onClick:()=>S("freehand"),children:(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-5 h-5",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 20h9M16.5 3.5l4 4L7 21H3v-4L16.5 3.5z"})})}),"freehand"===k&&(0,yt.jsx)("input",{type:"color",value:A,onChange:e=>E(e.target.value),className:"w-8 h-8 p-0 border-0 rounded cursor-pointer"})]}),(0,yt.jsx)("div",{className:"flex-1 overflow-auto",children:(0,yt.jsx)("div",{className:"w-full flex justify-center",children:(0,yt.jsx)("div",{className:"relative rounded-xl overflow-hidden bg-[#f1f5f9]",style:{width:r.canvasSize.w},children:(0,yt.jsx)("canvas",{ref:f,width:r.canvasSize.w,height:r.canvasSize.h,className:"block mx-auto max-w-full",onMouseDown:C,onMouseMove:T,onMouseUp:()=>M(h)})})})}),m.length>0&&(0,yt.jsxs)(yt.Fragment,{children:[(0,yt.jsx)("button",{onClick:()=>w(e=>(e-1+m.length)%m.length),disabled:z,className:"absolute top-1/2 left-3 transform -translate-y-1/2 text-slate-600 w-10 h-10 rounded-xl flex items-center justify-center shadow-md bg-white/90 border border-slate-100 ".concat(z?"opacity-50":"hover:bg-white"),children:"\u25c0"}),(0,yt.jsx)("button",{onClick:()=>w(e=>(e+1)%m.length),disabled:z,className:"absolute top-1/2 right-3 transform -translate-y-1/2 text-slate-600 w-10 h-10 rounded-xl flex items-center justify-center shadow-md bg-white/90 border border-slate-100 ".concat(z?"opacity-50":"hover:bg-white"),children:"\u25b6"})]}),(null!==j||null!==I)&&(0,yt.jsxs)("div",{className:"absolute top-4 right-4 z-50 bg-amber-50 border border-amber-200 text-amber-800 px-3 py-2 rounded-lg shadow-sm text-sm font-medium",children:["Editing ",null!==j?"Option":"Body"," \u2014 ",(0,yt.jsx)("button",{onClick:()=>{L(null),D(null)},className:"underline font-bold",children:"cancel"})," or Press Esc"]})]})]}),(0,yt.jsxs)("div",{className:"w-full lg:w-64 bg-white border border-slate-200 rounded-xl shadow-sm pr-4 pl-4 pb-4 flex flex-col overflow-y-auto",style:z?{pointerEvents:"none",opacity:.5}:{},children:[(0,yt.jsx)("h3",{className:"text-lg pt-2 pb-2 sticky top-0 z-[20] bg-white font-bold mb-4 text-slate-800",children:"Cropped Parts"}),_.length>0?(0,yt.jsx)("div",{className:"grid gap-4 pb-10",ref:g,children:_.map((e,t)=>(0,yt.jsxs)("div",{className:"relative group rounded-xl overflow-hidden border border-slate-200 bg-slate-50 shadow-sm transition-none hover:border-cyan-300",children:[(0,yt.jsxs)("span",{className:"absolute top-2 left-2 bg-slate-800 text-white text-[10px] font-black px-2 py-1 rounded-md z-10 shadow-sm",children:["#",t+1]}),(0,yt.jsx)("span",{onClick:()=>H(t),className:"absolute uppercase hover:bg-slate-700 cursor-pointer top-9 left-2 bg-slate-600 text-white text-[10px] font-bold px-2 py-1 rounded-md shadow-sm z-10 transition-none",children:e.type}),(0,yt.jsx)(v_,{i:t,body:e.body,uri:e.blobUrl,openModal:e=>{N(e),O(!0)},setisOption:U}),e.option&&(0,yt.jsxs)("div",{className:"mt-0 cursor-pointer relative group overflow-hidden border-t border-slate-200 bg-white",children:[(0,yt.jsx)("img",{src:e.option,onClick:()=>{N(t),O(!0),U("option")},alt:"option-".concat(t),className:"w-full object-contain max-h-40 rounded-b-xl"}),(0,yt.jsx)("span",{className:"absolute top-2 left-2 bg-cyan-500 text-[9px] font-black text-white px-1.5 py-0.5 rounded-md shadow-sm",children:"OPT"})]}),(0,yt.jsxs)("div",{className:"absolute top-0 right-0 h-full flex flex-col items-center justify-center gap-2 overflow-hidden transition-all duration-300 w-0 group-hover:w-10 bg-white/90 backdrop-blur-sm border-l border-slate-100",children:[(0,yt.jsx)("button",{onClick:()=>x(e=>e.filter((e,n)=>n!==t)),className:"w-7 h-7 flex items-center justify-center rounded-lg bg-red-50 text-red-500 hover:bg-red-500 hover:text-white shadow-sm transition-none",children:(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})}),(0,yt.jsx)("button",{onClick:()=>D(t),className:"w-7 h-7 flex items-center justify-center rounded-lg bg-amber-50 text-amber-600 hover:bg-amber-500 hover:text-white shadow-sm transition-none",title:"Edit Body",children:(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 4H5a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2v-6"})})}),(0,yt.jsx)("button",{onClick:()=>L(t),className:"w-7 h-7 flex items-center justify-center rounded-lg bg-sky-50 text-sky-600 hover:bg-sky-600 hover:text-white shadow-sm transition-none",title:"Add/Edit Option",children:(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]},t))}):(0,yt.jsx)("p",{className:"text-slate-400 text-sm italic",children:"No crops yet"})]})]}),P&&_[R]&&(0,yt.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm",children:[(0,yt.jsx)(s_,{index:R+1,type:_[R].type,isOption:W,body:(0,yt.jsx)(v_,{isImage:!0,uri:_[R].blobUrl,body:_[R].bodyD}),image:_[R].option?(0,yt.jsx)("img",{src:_[R].option,className:"max-h-[60vh] max-w-[90vw] rounded-lg",alt:"opt"}):(0,yt.jsxs)("div",{className:"fixed min-w-[300px] top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-36 flex flex-col items-center bg-yellow-800 text-yellow-50 rounded-lg shadow-lg overflow-hidden",children:[(0,yt.jsx)("div",{className:"absolute left-0 top-0 h-full w-2 bg-yellow-500 rounded-l-lg"}),(0,yt.jsxs)("div",{className:"flex flex-col items-center px-4 py-6 space-y-3 text-center z-10",children:[(0,yt.jsx)("h3",{className:"font-bold text-sm",children:"No Image Found"}),(0,yt.jsx)("p",{className:"text-xs",children:"Try clicking the + button to add an image."}),(0,yt.jsx)("button",{onClick:()=>{O(!1),L(R)},className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center text-black font-bold text-lg hover:bg-yellow-400 transition-transform duration-200 transform hover:scale-110",children:"+"})]})]}),toggle:()=>H(R),de:()=>{x(e=>e.filter((e,t)=>t!==R)),O(!1)},add:()=>{O(!1),L(R)}}),(0,yt.jsx)("button",{onClick:()=>{q(),U("body")},className:"absolute top-1/2 left-6 -translate-y-1/2 bg-white text-slate-600 hover:text-emerald-600 w-12 h-12 rounded-xl shadow-xl flex items-center justify-center border border-slate-100",children:"\u25c0"}),(0,yt.jsx)("button",{onClick:()=>{V(),U("body")},className:"absolute top-1/2 right-6 -translate-y-1/2 bg-white text-slate-600 hover:text-emerald-600 w-12 h-12 rounded-xl shadow-xl flex items-center justify-center border border-slate-100",children:"\u25b6"}),(0,yt.jsx)("button",{onClick:()=>O(!1),className:"absolute top-6 right-6 text-white text-2xl font-bold",children:"\u2715"})]}),F&&(0,yt.jsx)(c_,{open:F,onClose:()=>B(!1),data:_,mcqTypes:p_(T_),input:T_})]})};function w_(){const{user:e}=(0,i.useContext)(_t),t=b_(),n=m_("client",t);return(0,yt.jsx)(y_,{hookData:t,file:n.file,setFile:n.setFile,uploadStatus:n.uploadStatus,onFileUpload:n.handleUpload,onSubmit:()=>n.setShowSubmitModal(!0),onCropAction:n.handleCropAction,renderSubmitModal:()=>n.showSubmitModal?(0,yt.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm z-50",children:(0,yt.jsxs)("div",{className:"relative bg-white text-slate-800 p-8 rounded-2xl shadow-2xl w-[700px] max-h-[90vh] overflow-y-auto border border-slate-200",children:[(0,yt.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,yt.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Publish Test"}),(0,yt.jsx)("button",{onClick:()=>{n.submitOnline?window.location.reload():n.setShowSubmitModal(!1)},className:"p-2 w-10 h-10 rounded-xl text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors flex items-center justify-center border border-transparent hover:border-slate-200",children:"\u2715"})]}),n.loadingUpload?(0,yt.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,yt.jsx)("div",{className:"w-16 h-16 border-4 border-slate-100 border-t-emerald-500 rounded-full animate-spin mb-6"}),(0,yt.jsx)("p",{className:"text-slate-500 font-medium",children:"Syncing with Supabase..."})]}):(0,yt.jsx)(yt.Fragment,{children:n.submitOnline?(0,yt.jsxs)("div",{className:"space-y-6",children:[(0,yt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yt.jsx)("h2",{className:"text-sm font-black text-slate-400 uppercase tracking-widest",children:"Raw Quiz Data"}),(0,yt.jsx)("span",{className:"text-[10px] bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded font-bold",children:"JSON READY"})]}),(0,yt.jsx)("pre",{className:"bg-slate-50 border border-slate-200 p-5 rounded-xl max-h-[40vh] overflow-y-auto text-[11px] text-slate-600 font-mono scrollbar-thin scrollbar-thumb-slate-200",children:JSON.stringify(n.quizData,null,2)}),(0,yt.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,yt.jsx)("button",{onClick:n.handleCopy,className:"px-5 py-2.5 rounded-lg text-sm font-bold shadow-sm transition-colors ".concat(n.copied?"bg-cyan-500 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"),children:n.copied?"\u2713 Copied":"Copy JSON"}),(0,yt.jsx)("button",{onClick:n.handleMakeTest,className:"px-5 py-2.5 rounded-lg text-sm font-bold bg-emerald-600 text-white hover:bg-emerald-700 shadow-sm transition-colors ml-auto",children:"Create Test Interface"})]})]}):(0,yt.jsx)("div",{className:"flex justify-center my-10",children:e?(0,yt.jsxs)("div",{onClick:()=>n.handleSubmit(),className:"cursor-pointer bg-slate-50 hover:bg-white border border-slate-200 hover:border-emerald-500 rounded-2xl p-8 text-center shadow-sm transition-colors w-full max-w-sm group",children:[(0,yt.jsx)("div",{className:"bg-emerald-100 text-emerald-600 p-4 rounded-2xl mb-4 inline-block group-hover:bg-emerald-500 group-hover:text-white transition-colors",children:(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9h18"})})}),(0,yt.jsx)("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Publish Online"}),(0,yt.jsx)("p",{className:"text-slate-500 text-sm mb-4",children:"Upload cropped images to the cloud studio"}),(0,yt.jsxs)("div",{className:"inline-block px-3 py-1 bg-white border border-slate-200 rounded-lg text-xs font-bold text-slate-400",children:["User: ",e.username]})]}):(0,yt.jsxs)("div",{className:"opacity-60 cursor-not-allowed bg-slate-50 border border-slate-200 rounded-2xl p-8 text-center w-full max-w-sm",children:[(0,yt.jsx)("div",{className:"bg-slate-200 text-slate-400 p-4 rounded-2xl mb-4 inline-block",children:(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,yt.jsx)("h2",{className:"text-xl font-bold text-slate-400",children:"Publish Online"}),(0,yt.jsx)("p",{className:"text-slate-400 text-sm",children:"Login required to upload"})]})})})]})}):null})}function __(){const{user:e}=(0,i.useContext)(_t),t=b_(),n=m_("server",t);return(0,yt.jsx)(y_,{modeS:"server",hookData:t,file:n.file,setFile:n.setFile,uploadStatus:n.uploadStatus,onFileUpload:n.handleUpload,onSubmit:()=>n.setShowSubmitModal(!0),onCropAction:n.handleCropAction,renderSubmitModal:()=>n.showSubmitModal?(0,yt.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm z-50",children:(0,yt.jsxs)("div",{className:"relative bg-white text-slate-800 p-8 rounded-2xl shadow-2xl w-[700px] max-h-[90vh] overflow-y-auto border border-slate-200",children:[(0,yt.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,yt.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Upload / Export"}),(0,yt.jsx)("button",{onClick:()=>{n.submitOnline||n.submitOff?window.location.reload():n.setShowSubmitModal(!1)},className:"p-2 w-10 h-10 rounded-xl text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-none flex items-center justify-center border border-transparent hover:border-slate-200",children:"\u2715"})]}),n.loadingUpload?(0,yt.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,yt.jsx)("div",{className:"w-16 h-16 border-4 border-slate-100 border-t-emerald-500 rounded-full animate-spin mb-6"}),(0,yt.jsx)("p",{className:"text-slate-500 font-medium",children:"Processing resources..."})]}):(0,yt.jsx)(yt.Fragment,{children:n.submitOnline||n.submitOff?(0,yt.jsxs)("div",{className:"space-y-6",children:[(0,yt.jsx)("div",{className:"flex items-center justify-between",children:(0,yt.jsx)("h2",{className:"text-sm font-black text-slate-400 uppercase tracking-widest",children:"Quiz JSON Result"})}),(0,yt.jsx)("pre",{className:"bg-slate-50 border border-slate-200 p-5 rounded-xl max-h-[45vh] overflow-y-auto text-[11px] text-slate-600 font-mono scrollbar-thin scrollbar-thumb-slate-200",children:JSON.stringify(n.quizData,null,2)}),(0,yt.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,yt.jsx)("button",{onClick:n.handleCopy,className:"px-5 py-2 rounded-lg text-sm font-bold shadow-sm transition-none ".concat(n.copied?"bg-emerald-500 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"),children:n.copied?"\u2713 Copied":"Copy JSON"}),n.submitOff&&(0,yt.jsx)("button",{onClick:n.handleMakeTest,className:"px-5 py-2 rounded-lg text-sm font-bold bg-emerald-600 text-white hover:bg-emerald-700 shadow-sm transition-none ml-auto",children:"Make a Test"})]})]}):(0,yt.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-4",children:[e?(0,yt.jsxs)("div",{onClick:()=>n.handleSubmit(!1),className:"cursor-pointer bg-slate-50 hover:bg-white border border-slate-200 hover:border-emerald-500 rounded-2xl p-6 text-center shadow-sm transition-none group",children:[(0,yt.jsx)("div",{className:"bg-emerald-100 text-emerald-600 p-4 rounded-xl mb-4 inline-block group-hover:bg-emerald-500 group-hover:text-white",children:"\ud83c\udf10"}),(0,yt.jsx)("h2",{className:"text-lg font-bold text-slate-800 mb-2",children:"Publish Online"}),(0,yt.jsx)("p",{className:"text-slate-500 text-xs",children:"Upload to server & generate public links"})]}):(0,yt.jsxs)("div",{className:"opacity-60 cursor-not-allowed bg-slate-50 border border-slate-200 rounded-2xl p-6 text-center shadow-sm",children:[(0,yt.jsx)("div",{className:"bg-slate-200 text-slate-400 p-4 rounded-xl mb-4 inline-block",children:"\ud83c\udf10"}),(0,yt.jsx)("h2",{className:"text-lg font-bold text-slate-400 mb-2",children:"Publish Online"}),(0,yt.jsx)("p",{className:"text-slate-400 text-xs",children:"Login required to sync"})]}),(0,yt.jsxs)("div",{onClick:()=>n.handleSubmit(!0),className:"cursor-pointer bg-slate-50 hover:bg-white border border-slate-200 hover:border-sky-500 rounded-2xl p-6 text-center shadow-sm transition-none group",children:[(0,yt.jsx)("div",{className:"bg-sky-100 text-sky-600 p-4 rounded-xl mb-4 inline-block group-hover:bg-sky-500 group-hover:text-white",children:"\ud83d\udda5\ufe0f"}),(0,yt.jsx)("h2",{className:"text-lg font-bold text-slate-800 mb-2",children:"Work Offline"}),(0,yt.jsx)("p",{className:"text-slate-500 text-xs",children:"Process locally without internet"})]})]})})]})}):null,kanya:!0})}function x_(){const{user:e,setUser:t,loading:n}=(0,i.useContext)(_t),r=he();return n?null:(0,yt.jsxs)("header",{className:"fixed top-0 left-0 w-full z-[100] p-6 flex items-start justify-between pointer-events-none",children:[(0,yt.jsx)("div",{className:"pointer-events-auto cursor-pointer group flex items-center gap-3"}),(0,yt.jsx)("div",{className:"pointer-events-auto flex items-center gap-3",children:e?(0,yt.jsxs)("div",{className:"flex items-center gap-3 pl-1 pr-2 py-1 rounded-full bg-white/80 backdrop-blur-md border border-slate-200 shadow-sm hover:border-slate-300 transition-colors",children:[(0,yt.jsxs)("div",{className:"px-3 py-1.5 rounded-full bg-slate-50 border border-slate-100 flex items-center gap-2.5",children:[(0,yt.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,yt.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),(0,yt.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),(0,yt.jsx)("span",{className:"text-xs font-medium text-slate-600 tracking-wide max-w-[120px] truncate",children:e.name||e.username})]}),(0,yt.jsx)("div",{className:"w-px h-4 bg-slate-200"}),(0,yt.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),t(null)},className:"group/logout p-1.5 rounded-full hover:bg-red-50 transition-all mr-1",title:"Logout",children:(0,yt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-400 group-hover/logout:text-red-500 transition-colors",children:[(0,yt.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,yt.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,yt.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]}):(0,yt.jsx)("button",{onClick:()=>r("/login"),className:"px-5 py-2 rounded-full bg-slate-900 text-white font-medium text-sm hover:bg-slate-800 hover:scale-105 transition-all shadow-lg shadow-slate-900/20",children:"Login"})})]})}function k_(){const[e,t]=(0,i.useState)(!1),n=he(),[r,s]=(0,i.useState)("0 Bytes"),[a,o]=(0,i.useState)(0),[l,c]=(0,i.useState)(!1);let u=le();return(0,i.useEffect)(()=>{(async()=>{try{const e=await fetch("".concat(r_,"/get-file-size"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),t=await e.json();function n(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB"][t]}const i=n(t.data);s(i),c(0!==t.data&&"0 Bytes"!==i)}catch(O_){}})()},[u,a,e]),(0,yt.jsxs)(yt.Fragment,{children:[(0,yt.jsx)(x_,{}),(0,yt.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 text-slate-800 selection:bg-blue-100 selection:text-blue-900 font-sans p-6 relative overflow-hidden",children:[(0,yt.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[(0,yt.jsx)("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-blue-400/10 rounded-full blur-[120px]"}),(0,yt.jsx)("div",{className:"absolute bottom-[-20%] right-[-10%] w-[50%] h-[50%] bg-cyan-400/10 rounded-full blur-[120px]"})]}),(0,yt.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#00000008_1px,transparent_1px),linear-gradient(to_bottom,#00000008_1px,transparent_1px)] bg-[size:2rem_2rem] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),(0,yt.jsxs)("div",{className:"w-full max-w-4xl relative z-10",children:[(0,yt.jsxs)("div",{className:"flex items-center justify-between mb-8 px-2",children:[(0,yt.jsx)("div",{children:(0,yt.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 flex items-center gap-3",children:"Dashboard"})}),l&&(0,yt.jsx)("button",{onClick:()=>t(!0),className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-red-50 border border-red-200 hover:bg-red-100 hover:border-red-300 text-red-600 text-xs font-medium transition-all shadow-sm",children:(0,yt.jsxs)("span",{children:["\ud83d\uddd1 Clear Data (",r,")"]})})]}),(0,yt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yt.jsx)(S_,{title:"Test Interface",desc:"Manage & solve questions.",icon:"\ud83e\udde0",onClick:()=>window.location.href="/test-build/",color:"group-hover:text-blue-500",borderColor:"group-hover:border-blue-400/50",iconBg:"group-hover:bg-blue-50"}),(0,yt.jsx)(S_,{title:"Create Test",desc:"Crop PDF & generate paper.",icon:"\ud83d\udcc4",onClick:()=>n(window.location.hostname.includes("github.io")?"/pdf":"/pdfx"),color:"group-hover:text-purple-500",borderColor:"group-hover:border-purple-400/50",iconBg:"group-hover:bg-purple-50"})]})]}),e&&(0,yt.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-slate-900/20 backdrop-blur-sm z-50 animate-in fade-in duration-100",onClick:()=>t(!1),children:(0,yt.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"relative bg-white border border-slate-200 text-slate-800 rounded-xl shadow-2xl p-6 w-full max-w-sm mx-4",children:[(0,yt.jsxs)("h2",{className:"text-lg font-semibold text-slate-900 mb-2 flex items-center gap-2",children:[(0,yt.jsx)("span",{className:"text-red-500",children:"\u26a0"})," Clear Session?"]}),(0,yt.jsxs)("p",{className:"text-slate-500 text-sm mb-6",children:["Remove ",(0,yt.jsx)("span",{className:"text-slate-800 font-mono font-bold",children:r})," of temp files? This cannot be undone."]}),(0,yt.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,yt.jsx)("button",{onClick:()=>t(!1),className:"px-3 py-2 rounded-lg text-xs font-medium text-slate-500 hover:bg-slate-100 hover:text-slate-700 transition-colors",children:"Cancel"}),(0,yt.jsx)("button",{onClick:async()=>{try{await fetch("".concat(r_,"/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),t(!1),c(!1),o(a+1)}catch(e){}},className:"px-3 py-2 rounded-lg text-xs font-medium bg-red-500 text-white hover:bg-red-600 shadow-sm shadow-red-200",children:"Confirm"})]})]})}),(0,yt.jsx)("footer",{className:"fixed bottom-4 z-[500] right-6 text-[10px] font-mono text-slate-400 select-none",children:"STUDIO v2.0 \xa9 Aayush Kumar Jha"})]})]})}function S_(e){let{title:t,desc:n,onClick:i,icon:r,color:s,borderColor:a,iconBg:o}=e;return(0,yt.jsxs)("div",{onClick:i,className:"group relative cursor-pointer",children:[(0,yt.jsx)("div",{className:"\n          absolute -inset-0.5 rounded-2xl bg-gradient-to-r \n          opacity-0 group-hover:opacity-40 \n          blur-md transition-all duration-500\n        "}),(0,yt.jsxs)("div",{className:"\n        relative h-full\n        bg-white rounded-2xl p-6\n        border border-slate-200/60\n        shadow-[0_4px_20px_-10px_rgba(0,0,0,0.05)] /* Soft ambient shadow */\n        flex items-center gap-6\n        transition-all duration-300\n       /* Lift effect */\n      ",children:[(0,yt.jsx)("div",{className:"\n            w-16 h-16 shrink-0 rounded-2xl \n            bg-slate-50 border border-slate-100\n            flex items-center justify-center text-3xl\n            text-slate-400 ".concat(s," \n            transition-all duration-500\n            group-hover:scale-110 group-hover:bg-white group-hover:shadow-lg\n            ").concat((t.includes("Interface"),""),"\n        "),children:r}),(0,yt.jsxs)("div",{className:"flex-1",children:[(0,yt.jsx)("h2",{className:"text-xl font-bold text-slate-800 tracking-tight group-hover:text-black transition-colors",children:t}),(0,yt.jsx)("p",{className:"text-slate-500 text-sm font-medium leading-relaxed mt-1 group-hover:text-slate-600",children:n})]}),(0,yt.jsx)("div",{className:"\n            w-10 h-10 rounded-full \n            flex items-center justify-center \n            bg-slate-50 text-slate-300 \n            transition-all duration-300\n            group-hover:bg-black group-hover:text-white group-hover:translate-x-2\n        ",children:(0,yt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,yt.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),(0,yt.jsx)("polyline",{points:"12 5 19 12 12 19"})]})})]})]})}const A_=n.p+"static/media/img.71cd5825903f8ce203b1.png";function E_(){const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!1),{setUser:c}=(0,i.useContext)(_t),u=he();return(0,yt.jsxs)("div",{className:"min-h-screen w-full flex items-center justify-center bg-slate-50 text-slate-800 font-sans relative overflow-hidden selection:bg-blue-100 selection:text-blue-900",children:[(0,yt.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#00000008_1px,transparent_1px),linear-gradient(to_bottom,#00000008_1px,transparent_1px)] bg-[size:2rem_2rem] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),(0,yt.jsx)("div",{className:"fixed inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-[0.03] pointer-events-none"}),(0,yt.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-400/10 rounded-full blur-[120px] pointer-events-none animate-pulse"}),(0,yt.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-cyan-400/10 rounded-full blur-[120px] pointer-events-none animate-pulse delay-1000"}),(0,yt.jsxs)("div",{className:"flex w-[900px] max-w-[95%] h-[600px] bg-white/60 backdrop-blur-xl border border-white/60 shadow-[0_20px_50px_rgba(0,0,0,0.05)] rounded-3xl overflow-hidden relative z-10 transition-all duration-300",children:[(0,yt.jsxs)("div",{className:"hidden md:flex flex-col justify-center items-center w-1/2 bg-gradient-to-br from-indigo-50/50 to-blue-50/50 p-12 relative overflow-hidden border-r border-slate-100",children:[(0,yt.jsx)("div",{className:"absolute w-64 h-64 bg-white rounded-full blur-2xl opacity-80 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"}),(0,yt.jsx)("img",{src:A_,className:"w-64 mb-8 relative z-10 drop-shadow-xl transform hover:scale-105 transition-transform duration-500",alt:"study illustration"}),(0,yt.jsxs)("div",{className:"relative z-10 text-center",children:[(0,yt.jsx)("h2",{className:"text-3xl font-bold text-slate-700 tracking-tight",children:"Prepare. Practice."}),(0,yt.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-cyan-500 bg-clip-text text-transparent tracking-tight mb-3",children:"Perform."}),(0,yt.jsx)("p",{className:"text-slate-500 text-sm max-w-xs mx-auto leading-relaxed",children:"Your gateway to excellence. Access tests, track analytics, and master your subjects."})]})]}),(0,yt.jsxs)("div",{className:"w-full md:w-1/2 p-8 md:p-12 flex flex-col justify-center relative bg-white/40",children:[(0,yt.jsxs)("button",{onClick:()=>u("/"),className:"absolute top-6 left-6 flex items-center gap-2 px-3 py-1.5 rounded-full bg-white border border-slate-200 text-slate-500 text-xs font-medium hover:bg-slate-50 hover:text-slate-800 hover:border-slate-300 transition-all active:scale-95 group shadow-sm",children:[(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 group-hover:-translate-x-0.5 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Home"]}),(0,yt.jsxs)("div",{className:"mt-8",children:[(0,yt.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-50 border border-blue-100 text-blue-600 text-xs font-medium mb-6",children:[(0,yt.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,yt.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),(0,yt.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-blue-500"})]}),"Student Portal"]}),(0,yt.jsx)("h1",{className:"text-3xl font-bold text-slate-800 mb-2 tracking-tight",children:"Welcome Back"}),(0,yt.jsx)("p",{className:"text-slate-500 mb-8 text-sm",children:"Enter your credentials to access the studio."}),(0,yt.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),e&&n){a(!0);try{const t=await fetch("".concat(bt,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loginId:e,password:n})}),i=await t.json();if(!t.ok)return void alert(i.message||"Login failed");localStorage.setItem("token",i.token),c(i.user),u("/")}catch(i){alert("Something went wrong. Please check your connection."),console.log(i)}finally{a(!1)}}},className:"flex flex-col gap-5",children:[(0,yt.jsxs)("div",{className:"space-y-1.5",children:[(0,yt.jsx)("label",{className:"text-xs font-semibold text-slate-500 ml-1 uppercase tracking-wider",children:"Login ID"}),(0,yt.jsxs)("div",{className:"relative group",children:[(0,yt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,yt.jsxs)("svg",{className:"h-5 w-5 text-slate-400 group-focus-within:text-blue-500 transition-colors",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,yt.jsx)("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),(0,yt.jsx)("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]})}),(0,yt.jsx)("input",{type:"text",disabled:s,value:e,onChange:e=>t(e.target.value),placeholder:"Username or Email",className:"w-full pl-10 pr-4 py-3 rounded-xl bg-white border border-slate-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed placeholder:text-slate-400 text-slate-700"})]})]}),(0,yt.jsxs)("div",{className:"space-y-1.5",children:[(0,yt.jsx)("label",{className:"text-xs font-semibold text-slate-500 ml-1 uppercase tracking-wider",children:"Password"}),(0,yt.jsxs)("div",{className:"relative group",children:[(0,yt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,yt.jsx)("svg",{className:"h-5 w-5 text-slate-400 group-focus-within:text-blue-500 transition-colors",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,yt.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),(0,yt.jsx)("input",{type:o?"text":"password",disabled:s,value:n,onChange:e=>r(e.target.value),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"w-full pl-10 pr-10 py-3 rounded-xl bg-white border border-slate-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed placeholder:text-slate-400 text-slate-700"}),(0,yt.jsx)("button",{type:"button",onClick:()=>l(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 cursor-pointer outline-none transition-colors",children:o?(0,yt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,yt.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,yt.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):(0,yt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,yt.jsx)("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"}),(0,yt.jsx)("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.742L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.064 7 9.542 7 .847 0 1.669-.105 2.454-.303z"})]})})]})]}),(0,yt.jsx)("button",{type:"submit",disabled:s,className:" group relative w-full py-3.5 mt-2 bg-gradient-to-r from-blue-600 to-indigo-600  hover:from-blue-500 hover:to-indigo-500 text-white font-medium rounded-xl shadow-lg shadow-blue-200 hover:shadow-blue-300 transition-all duration-300 active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed disabled:shadow-none flex justify-center items-center gap-2 ",children:s?(0,yt.jsxs)(yt.Fragment,{children:[(0,yt.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,yt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,yt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,yt.jsx)("span",{children:"Authenticating..."})]}):(0,yt.jsxs)(yt.Fragment,{children:["Login",(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]})]})]})]})]})}function C_(){const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),[h,d]=(0,i.useState)(!1),{setUser:p}=(0,i.useContext)(_t),f=he();return(0,yt.jsxs)("div",{className:"min-h-screen w-full flex items-center justify-center bg-slate-50 text-slate-800 relative overflow-hidden font-sans selection:bg-blue-100 selection:text-blue-900",children:[(0,yt.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#00000008_1px,transparent_1px),linear-gradient(to_bottom,#00000008_1px,transparent_1px)] bg-[size:2rem_2rem] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),(0,yt.jsx)("div",{className:"fixed inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-[0.03] pointer-events-none"}),(0,yt.jsx)("div",{className:"absolute top-[-100px] left-[-100px] w-[400px] h-[400px] bg-blue-400/10 rounded-full blur-[100px] animate-pulse"}),(0,yt.jsx)("div",{className:"absolute bottom-[-100px] right-[-100px] w-[400px] h-[400px] bg-cyan-400/10 rounded-full blur-[100px] animate-pulse delay-700"}),(0,yt.jsxs)("div",{className:"flex w-[900px] max-w-[95%] bg-white/60 backdrop-blur-xl border border-white/60 shadow-[0_20px_50px_rgba(0,0,0,0.05)] rounded-3xl overflow-hidden relative z-10 my-10 transition-all duration-300",children:[(0,yt.jsxs)("div",{className:"hidden md:flex flex-col justify-center items-center w-1/2 bg-gradient-to-br from-indigo-50/50 to-blue-50/50 p-10 relative border-r border-slate-100",children:[(0,yt.jsx)("div",{className:"absolute w-60 h-60 bg-white rounded-full blur-2xl opacity-80 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"}),(0,yt.jsx)("img",{src:A_,className:"w-64 mb-6 relative z-10 drop-shadow-xl transform hover:scale-105 transition-transform duration-500",alt:"study illustration"}),(0,yt.jsxs)("div",{className:"relative z-10 text-center px-6",children:[(0,yt.jsx)("h2",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:"Join the Community"}),(0,yt.jsx)("p",{className:"text-slate-500 mt-3 text-sm leading-relaxed",children:"Create an account to start your journey. Track your progress, take tests, and achieve your goals."})]})]}),(0,yt.jsxs)("div",{className:"w-full md:w-1/2 p-8 md:p-10 flex flex-col justify-center relative bg-white/40",children:[(0,yt.jsxs)("button",{onClick:()=>f("/"),className:"absolute top-6 left-6 flex items-center gap-2 px-3 py-1.5 rounded-full bg-white border border-slate-200 text-slate-500 text-xs font-medium hover:bg-slate-50 hover:text-slate-800 hover:border-slate-300 transition-all active:scale-95 group shadow-sm",children:[(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 group-hover:-translate-x-0.5 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Home"]}),(0,yt.jsxs)("div",{className:"mt-8",children:[(0,yt.jsx)("h1",{className:"text-3xl font-extrabold text-slate-800 mb-2 tracking-tight",children:"Create Account"}),(0,yt.jsx)("p",{className:"text-slate-500 mb-6 text-sm",children:"It's free and easy to set up."}),(0,yt.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),e&&n&&s&&o){u(!0);try{const t=await fetch("".concat(bt,"/api/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,username:n,email:s,password:o})}),i=await t.json();if(!t.ok)return void alert(i.message||"Signup failed");localStorage.setItem("token",i.token),p(i.user),f("/")}catch(i){alert("Something went wrong. Please check your connection."),console.log(i)}finally{u(!1)}}else alert("Please fill in all fields.")},className:"flex flex-col gap-4",children:[(0,yt.jsxs)("div",{className:"relative group",children:[(0,yt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,yt.jsx)("svg",{className:"h-5 w-5 text-slate-400 group-focus-within:text-blue-500 transition-colors",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,yt.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Full Name",disabled:c,className:"w-full pl-10 pr-4 py-3 rounded-xl bg-white border border-slate-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all disabled:opacity-50 text-sm text-slate-700 placeholder:text-slate-400"})]}),(0,yt.jsxs)("div",{className:"relative group",children:[(0,yt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,yt.jsx)("svg",{className:"h-5 w-5 text-slate-400 group-focus-within:text-blue-500 transition-colors",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),(0,yt.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),placeholder:"Username",disabled:c,className:"w-full pl-10 pr-4 py-3 rounded-xl bg-white border border-slate-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all disabled:opacity-50 text-sm text-slate-700 placeholder:text-slate-400"})]}),(0,yt.jsxs)("div",{className:"relative group",children:[(0,yt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,yt.jsx)("svg",{className:"h-5 w-5 text-slate-400 group-focus-within:text-blue-500 transition-colors",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v9a2 2 0 002 2z"})})}),(0,yt.jsx)("input",{type:"email",value:s,onChange:e=>a(e.target.value),placeholder:"name@example.com",disabled:c,className:"w-full pl-10 pr-4 py-3 rounded-xl bg-white border border-slate-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all disabled:opacity-50 text-sm text-slate-700 placeholder:text-slate-400"})]}),(0,yt.jsxs)("div",{className:"relative group",children:[(0,yt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,yt.jsx)("svg",{className:"h-5 w-5 text-slate-400 group-focus-within:text-blue-500 transition-colors",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,yt.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),(0,yt.jsx)("input",{type:h?"text":"password",value:o,onChange:e=>l(e.target.value),placeholder:"Password",disabled:c,className:"w-full pl-10 pr-10 py-3 rounded-xl bg-white border border-slate-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all disabled:opacity-50 text-sm text-slate-700 placeholder:text-slate-400"}),(0,yt.jsx)("button",{type:"button",onClick:()=>d(!h),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 cursor-pointer outline-none transition-colors",children:h?(0,yt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,yt.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,yt.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):(0,yt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,yt.jsx)("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"}),(0,yt.jsx)("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.742L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.064 7 9.542 7 .847 0 1.669-.105 2.454-.303z"})]})})]}),(0,yt.jsx)("button",{type:"submit",disabled:c,className:" group w-full py-3.5 mt-2 bg-gradient-to-r from-blue-600 to-indigo-600  hover:from-blue-500 hover:to-indigo-500 text-white font-medium rounded-xl shadow-lg shadow-blue-200 hover:shadow-blue-300 transition-all duration-300 active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed disabled:shadow-none flex justify-center items-center gap-2 ",children:c?(0,yt.jsxs)(yt.Fragment,{children:[(0,yt.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,yt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,yt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,yt.jsx)("span",{children:"Creating Account..."})]}):(0,yt.jsxs)(yt.Fragment,{children:["Sign Up",(0,yt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,yt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]}),(0,yt.jsxs)("div",{className:"mt-6 text-center text-sm text-slate-500",children:["Already have an account?"," ",(0,yt.jsx)("button",{onClick:()=>f("/login"),className:"text-blue-600 font-semibold hover:underline hover:text-blue-700 transition-colors",children:"Log in"})]})]})]})]})]})}const T_=[{a:"int",b:["int"]},{a:"mcq",b:["mcq-4","mcq-5","mcq-1","mcq-2","mcq-3"]},{a:"scq",b:["scq-4","scq-5","scq-1","scq-2","scq-3"]},{a:"prt",b:["prt"]},{a:"num",b:["num"]}];function M_(e){let{element:t}=e;return(0,yt.jsx)("div",{className:"relative flex flex-col md:flex-row h-screen text-slate-800 font-[Poppins,sans-serif] overflow-hidden",children:(0,yt.jsx)("div",{className:"flex-1 flex flex-col z-10 overflow-hidden",children:(0,yt.jsx)("div",{className:"flex-1 bg-white shadow-sm rounded-2xl overflow-hidden border border-slate-200",children:t})})})}function P_(){return(0,yt.jsxs)(xt,{children:["     ",(0,yt.jsx)(ct,{children:(0,yt.jsxs)(Pe,{children:[(0,yt.jsx)(Te,{path:"/",element:(0,yt.jsx)(k_,{})}),(0,yt.jsx)(Te,{path:"/pdfx",element:(0,yt.jsx)(M_,{element:(0,yt.jsx)(__,{})})}),(0,yt.jsx)(Te,{path:"/pdfx/*",element:(0,yt.jsx)(M_,{element:(0,yt.jsx)(__,{})})}),(0,yt.jsx)(Te,{path:"/pdf",element:(0,yt.jsx)(M_,{element:(0,yt.jsx)(w_,{})})}),(0,yt.jsx)(Te,{path:"/pdf/*",element:(0,yt.jsx)(M_,{element:(0,yt.jsx)(w_,{})})}),(0,yt.jsx)(Te,{path:"/login",element:(0,yt.jsx)(E_,{})}),(0,yt.jsx)(Te,{path:"/signup",element:(0,yt.jsx)(C_,{})})]})})]})}const R_=e=>{e&&e instanceof Function&&n.e(206).then(n.bind(n,206)).then(t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:a}=t;n(e),i(e),r(e),s(e),a(e)})};r.createRoot(document.getElementById("root")).render((0,yt.jsx)(i.StrictMode,{children:(0,yt.jsx)(P_,{})})),R_()})();